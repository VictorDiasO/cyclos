"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([["common"],{441:(R,y,i)=>{i.d(y,{R:()=>p});var p=(()=>{return(e=p||(p={})).USER_PAYMENTS="userPayments",e.USER_SEND_VOUCHERS="userSendVouchers",p;var e})()},3450:(R,y,i)=>{i.d(y,{O:()=>F});var p=i(3075),e=i(723),x=i(6163),t=i(6435),T=i(8664),l=i(9808),u=i(195),O=i(8397),I=i(70),M=i(3455);function D(_,f){1&_&&t.GkF(0)}function E(_,f){if(1&_&&(t.TgZ(0,"label-value",2),t.YNc(1,D,1,0,"ng-container",3),t.qZA()),2&_){const o=t.oxw(),c=t.MAs(2);t.Q6J("formField",o.self)("informationText",o.informationText),t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function C(_,f){if(1&_){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(o),t.oxw(),t.MAs(1).click()}),t._UZ(1,"icon",11),t.qZA()}if(2&_){const o=t.oxw(2);t.Q6J("tooltip",o.i18n.field.file.upload),t.xp6(1),t.Q6J("icon",o.SvgIcon.Upload)}}function A(_,f){if(1&_&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&_){const o=f.$implicit,c=t.oxw(2);t.xp6(1),t.AsE(" ",o.name," (",c.format.formatFileSize(o.size),") ")}}function P(_,f){if(1&_){const o=t.EpF();t.TgZ(0,"input",4,5),t.NdJ("change",function(){t.CHM(o);const a=t.MAs(1);return t.oxw().filesSelected(a.files)}),t.qZA(),t.TgZ(2,"div",6),t.YNc(3,C,2,2,"button",7),t.YNc(4,A,2,2,"div",8),t.qZA(),t._UZ(5,"field-errors",9)}if(2&_){const o=t.oxw();t.Q6J("accept",o.accept)("multiple",o.maxFiles>1),t.xp6(3),t.Q6J("ngIf",!o.disabled),t.xp6(1),t.Q6J("ngForOf",o.files),t.xp6(1),t.Q6J("control",o.formControl)}}let F=(()=>{class _ extends e.T{constructor(o,c,a,g){super(o,c),this.layout=a,this.changeDetector=g,this.maxFiles=1}get mimeTypes(){return(this.accept||"").split(",").map(o=>o.trim())}set mimeTypes(o){this.accept=(0,x.cS)(o)?null:o.join()}get files(){const o=[];if(this.fileList&&this.fileList.length>0){const c=Math.min(this.fileList.length,this.maxFiles);for(let a=0;a<c;a++)o.push(this.fileList.item(a))}return o}getDisabledValue(){return this.files.map(o=>o.name).join(", ")}onDisabledChange(o){super.onDisabledChange(o),this.changeDetector.detectChanges()}getFocusableControl(){return null}filesSelected(o){this.fileList=o;const c=this.files;this.value=1===this.maxFiles?0===c.length?null:c[0]:c,this.changeDetector.detectChanges()}}return _.\u0275fac=function(o){return new(o||_)(t.Y36(t.zs3),t.Y36(p.gN,13),t.Y36(T.Pb),t.Y36(t.sBO))},_.\u0275cmp=t.Xpm({type:_,selectors:[["file-field"]],inputs:{maxFiles:"maxFiles",mimeTypes:"mimeTypes"},features:[t._Bn([{provide:p.JU,useExisting:_,multi:!0}]),t.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],["type","file",1,"d-none",3,"accept","multiple","change"],["inputField",""],[1,"d-flex","flex-wrap"],["type","button","class","btn btn-icon d-flex align-content-center flex-grow-0 mr-3",3,"tooltip","click",4,"ngIf"],["class","flex-grow-0 mr-3 d-flex align-items-center",4,"ngFor","ngForOf"],[3,"control"],["type","button",1,"btn","btn-icon","d-flex","align-content-center","flex-grow-0","mr-3",3,"tooltip","click"],[3,"icon"],[1,"flex-grow-0","mr-3","d-flex","align-items-center"]],template:function(o,c){if(1&o&&(t.YNc(0,E,2,3,"label-value",0),t.YNc(1,P,6,5,"ng-template",null,1,t.W1O)),2&o){const a=t.MAs(2);t.Q6J("ngIf",c.label)("ngIfElse",a)}},directives:[l.O5,u.t,l.tP,O.i9,I.o,l.sg,M.e],encapsulation:2}),_})()},7582:(R,y,i)=>{i.d(y,{e:()=>f});var p=i(3075),e=i(2400),x=i(8351),t=i(723),T=i(6163),l=i(6435),u=i(9808),O=i(195),I=i(9697),M=i(7816),D=i(8868),E=i(3455);const C=["inputField"];function A(o,c){1&o&&l.GkF(0)}function P(o,c){if(1&o&&(l.TgZ(0,"label-value",2),l.YNc(1,A,1,0,"ng-container",3),l.qZA()),2&o){const a=l.oxw(),g=l.MAs(2);l.Q6J("formField",a.self)("fieldSize",a.fieldSize)("informationText",a.informationText),l.xp6(1),l.Q6J("ngTemplateOutlet",g)}}const F=function(o){return{"is-invalid":o}};function _(o,c){if(1&o&&(l.TgZ(0,"div",4),l._UZ(1,"input",5,6),l.ALo(3,"async"),l.TgZ(4,"single-selection-field",7),l._UZ(5,"field-option",8)(6,"field-option",9)(7,"field-option",10),l.qZA()(),l._UZ(8,"field-errors",11)),2&o){const a=l.oxw();l.Q6J("formGroup",a.form),l.xp6(1),l.Q6J("id",a.id)("ngClass",l.VKq(9,F,"INVALID"===l.lcZ(3,7,a.formControl.statusChanges)&&a.formControl.touched)),l.xp6(4),l.Q6J("text",a.i18n.general.timeField.plural.days),l.xp6(1),l.Q6J("text",a.i18n.general.timeField.plural.weeks),l.xp6(1),l.Q6J("text",a.i18n.general.timeField.plural.months),l.xp6(1),l.Q6J("control",a.formControl)}}let f=(()=>{class o extends t.T{constructor(a,g,v){super(a,g),this.formBuilder=v}ngOnInit(){super.ngOnInit(),null==this.fieldSize&&(this.fieldSize=e.s.MEDIUM),this.form=this.formBuilder.group(this.defaultValue),this.addSub(this.form.valueChanges.subscribe(a=>{this.value=(0,T.cS)(a.amount)?null:a}))}onValueInitialized(a){this.form.setValue(a||this.defaultValue)}get defaultValue(){return{amount:null,field:x.O.DAYS}}getDisabledValue(){return this.format.formatTimeInterval(this.form.value)}getFocusableControl(){return this.inputRef?this.inputRef.nativeElement:null}}return o.\u0275fac=function(a){return new(a||o)(l.Y36(l.zs3),l.Y36(p.gN,13),l.Y36(p.qu))},o.\u0275cmp=l.Xpm({type:o,selectors:[["time-interval-field"]],viewQuery:function(a,g){if(1&a&&l.Gf(C,5),2&a){let v;l.iGM(v=l.CRH())&&(g.inputRef=v.first)}},features:[l._Bn([{provide:p.JU,useExisting:o,multi:!0}]),l.qOj],decls:3,vars:2,consts:[[3,"formField","fieldSize","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","fieldSize","informationText"],[4,"ngTemplateOutlet"],[1,"d-flex","w-100",3,"formGroup"],["type","number","numbersOnly","","autocomplete","off","formControlName","amount",1,"form-control","text-right",3,"id","ngClass"],["inputField",""],["formControlName","field",1,"pl-1"],["value","days",3,"text"],["value","weeks",3,"text"],["value","months",3,"text"],[3,"control"]],template:function(a,g){if(1&a&&(l.YNc(0,P,2,4,"label-value",0),l.YNc(1,_,9,11,"ng-template",null,1,l.W1O)),2&a){const v=l.MAs(2);l.Q6J("ngIf",g.label)("ngIfElse",v)}},directives:[u.O5,O.t,u.tP,p.JL,p.sg,p.wV,p.Fj,I.X,p.JJ,p.u,u.mk,M.f,D.s,E.e],pipes:[u.Ov],encapsulation:2,changeDetection:0}),o})()},6734:(R,y,i)=>{i.d(y,{W:()=>H});var p=i(520),e=i(6435),x=i(1879),t=i(5466),T=i(6163),l=i(2292),u=i(8473),O=i(591),I=i(1086),M=i(8134),D=i(2032),E=i(3075),C=i(9808),A=i(9653),P=i(3728),F=i(6168),_=i(3932),f=i(8687),o=i(7796),c=i(2939),a=i(1441),g=i(629),v=i(1015),L=i(867);function S(r,m){if(1&r&&e._UZ(0,"user-info",10),2&r){const n=e.oxw();e.Q6J("user",n.user)}}function Z(r,m){if(1&r){const n=e.EpF();e.TgZ(0,"input-field",11),e.NdJ("oninput",function(){e.CHM(n);const d=e.oxw();return d.resultType=d.ResultType.LIST}),e.qZA()}if(2&r){const n=e.oxw();e.Q6J("label",n.i18n.general.keywords)}}function W(r,m){if(1&r&&e._UZ(0,"heading-action-button",19),2&r){const n=e.oxw(3);e.Q6J("action",n.showCategoriesAction)}}function B(r,m){if(1&r&&e._UZ(0,"heading-action-button",19),2&r){const n=e.oxw(3);e.Q6J("action",n.showTypesAction)}}function J(r,m){if(1&r&&(e.TgZ(0,"div",17),e.YNc(1,W,1,1,"heading-action-button",18),e.ALo(2,"async"),e.YNc(3,B,1,1,"heading-action-button",18),e.ALo(4,"async"),e.qZA()),2&r){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,n.resultType$)!==n.ResultType.CATEGORIES),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,n.resultType$)===n.ResultType.CATEGORIES)}}function b(r,m){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13),e._UZ(2,"result-type-field",14),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",15),e.YNc(5,J,5,6,"div",16),e.ALo(6,"async"),e.qZA()()),2&r){const n=e.oxw();e.xp6(2),e.Q6J("allowedResultTypes",e.lcZ(3,3,n.allowedResultTypes$))("formControl",n.resultTypeControl),e.xp6(3),e.Q6J("ngIf",e.lcZ(6,5,n.layout.gtxs$))}}function K(r,m){if(1&r){const n=e.EpF();e.TgZ(0,"page-content")(1,"nav",20)(2,"ol",20)(3,"li",21)(4,"a",22),e.NdJ("click",function(d){e.CHM(n);const h=e.oxw();return d.preventDefault(),h.selectCategory(null)}),e._uU(5),e.qZA()(),e.TgZ(6,"li",23),e._uU(7),e.qZA()()()()}if(2&r){const n=e.oxw();e.xp6(5),e.Oqu(n.i18n.ad.rootCategory),e.xp6(2),e.hij(" ",null==n.currentCategory?null:n.currentCategory.name," ")}}function Q(r,m){if(1&r){const n=e.EpF();e.TgZ(0,"a",24),e.NdJ("click",function(d){const U=e.CHM(n).$implicit;return e.oxw().selectCategory(U),d.preventDefault()}),e.TgZ(1,"tiled-result",25)(2,"div",26),e._uU(3),e.qZA()()()}if(2&r){const n=m.$implicit,s=e.oxw();e.xp6(1),e.Q6J("image",n.image)("zoom",!0)("icon",s.SvgIcon.Ticket),e.xp6(2),e.hij(" ",n.name," ")}}function N(r,m){if(1&r&&(e.TgZ(0,"mobile-result",27)(1,"div",28),e._uU(2),e.qZA()()),2&r){const n=m.$implicit,s=e.oxw();e.Q6J("avatarImage",n.image)("avatarIcon",s.SvgIcon.Person),e.xp6(2),e.hij(" ",n.voucherTitle," ")}}function w(r,m){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"tr",31),e.NdJ("click",function(){const h=e.CHM(n).$implicit;return e.oxw(2).selectType(h)}),e.TgZ(2,"td",32),e._UZ(3,"avatar",33),e.qZA(),e.TgZ(4,"td")(5,"div")(6,"a",34),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA()()()(),e.BQk()}if(2&r){const n=m.$implicit,s=e.oxw(2);e.xp6(3),e.Q6J("image",n.image)("icon",s.SvgIcon.Ticket),e.xp6(4),e.hij(" ",n.voucherTitle," "),e.xp6(2),e.hij(" ",n.voucherDescription," ")}}function V(r,m){if(1&r&&(e.TgZ(0,"table",29)(1,"tbody"),e.YNc(2,w,10,4,"ng-container",30),e.ALo(3,"async"),e.qZA()()),2&r){const n=e.oxw();let s;e.xp6(2),e.Q6J("ngForOf",null==(s=e.lcZ(3,1,n.results$))?null:s.results)}}const Y=function(r){return{"border-bottom":r}};let H=(()=>{class r extends l.t{constructor(n,s){super(n),this.authHelper=s,this.typeSelected=new e.vpe,this.headingActions$=new O.X([])}ngOnInit(){if(null==this.types&&(this.types=[]),this.hasCategories=!(0,T.cS)(this.categories),this.hasCategories){const n=this.types.filter(s=>!s.category);if(n.length>0){const s={id:"other",name:this.i18n.voucher.otherCategory};this.categories=[...this.categories,s],n.forEach(d=>d.category=s)}this.showCategoriesAction=new t.Yu(x.l.Handbag,this.i18n.voucher.showCategories,()=>this.showCategories()),this.showTypesAction=new t.Yu(x.l.Ticket,this.i18n.voucher.listTypes,()=>this.showTypes())}this.hasFilters=this.hasCategories||this.types.length>6,this.showForm=this.hasFilters||this.user&&!this.authHelper.isSelf(this.user),this.data={},this.allowedResultTypes=this.hasCategories?[u.X.CATEGORIES,u.X.LIST]:[u.X.LIST],this.resultType=this.hasCategories?u.X.CATEGORIES:u.X.LIST}getFormControlNames(){return["keywords","category"]}onResultTypeChanged(n){n===u.X.CATEGORIES&&this.form.patchValue({category:null,keywords:null})}doSearch(n){let s=(0,T.WW)(n.keywords),d=[...this.types];return s.length>0&&(d=d.filter(h=>(0,T.WW)(h.voucherTitle).includes(s)||(0,T.WW)(h.voucherDescription).includes(s)||(0,T.WW)(h.name).includes(s)||h.category&&(0,T.WW)(h.category.name).includes(s))),n.category&&(d=d.filter(h=>h.category.id===n.category)),(0,I.of)(new p.Zn({body:d}))}toSearchParams(n){return n}resolveMenu(){return null}getInitialResultType(){return this.hasCategories?u.X.CATEGORIES:u.X.LIST}get selectType(){return n=>this.typeSelected.emit(n)}showCategories(){this.resultType=u.X.CATEGORIES}showTypes(){this.resultType=u.X.LIST}selectCategory(n){n?(this.form.patchValue({category:n.id}),this.resultType=u.X.LIST):(this.form.patchValue({category:null}),this.resultType=u.X.CATEGORIES)}get currentCategory(){const n=this.form.controls.category.value;return n?this.categories.find(s=>s.id===n):null}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(e.zs3),e.Y36(M.N))},r.\u0275cmp=e.Xpm({type:r,selectors:[["voucher-type-selection"]],inputs:{heading:"heading",mobileHeading:"mobileHeading",categories:"categories",types:"types",user:"user"},outputs:{typeSelected:"typeSelected"},features:[e.qOj],decls:12,vars:20,consts:[[3,"mode","heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup","ngClass"],[3,"user",4,"ngIf"],["formControlName","keywords",3,"label","oninput",4,"ngIf"],["class","row no-gutters filters-row",4,"ngIf"],[4,"ngIf"],["resultType","list",3,"results","onClick","resultType","categories"],["class","category-result","href","#",3,"click",4,"resultCategory"],["avatarRoundBorders","false",3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-no-header table-hover cursor-pointer",4,"resultTable"],[3,"user"],["formControlName","keywords",3,"label","oninput"],[1,"row","no-gutters","filters-row"],[1,"col-xs-7","col-sm-3"],[3,"allowedResultTypes","formControl"],[1,"d-flex","col-xs-5","col-sm-9","justify-content-end"],["class","d-flex justify-content-end",4,"ngIf"],[1,"d-flex","justify-content-end"],["class","heading-action-button pl-2 w-auto flex-grow-0",3,"action",4,"ngIf"],[1,"heading-action-button","pl-2","w-auto","flex-grow-0",3,"action"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#",3,"click"],[1,"breadcrumb-item","active"],["href","#",1,"category-result",3,"click"],[3,"image","zoom","icon"],[1,"card-title"],["avatarRoundBorders","false",3,"avatarImage","avatarIcon"],[1,"cell-text","cell-main"],[1,"table","table-no-header","table-hover","cursor-pointer"],[4,"ngFor","ngForOf"],[3,"click"],[1,"avatar"],["size","xlarge","roundBorders","false",3,"image","icon"],["ngClass","font-weight-bold"]],template:function(n,s){1&n&&(e.TgZ(0,"page-content",0),e.ALo(1,"async"),e.TgZ(2,"div",1),e.YNc(3,S,1,1,"user-info",2),e.YNc(4,Z,1,1,"input-field",3),e.qZA(),e.YNc(5,b,7,7,"div",4),e.qZA(),e.YNc(6,K,8,2,"page-content",5),e.ALo(7,"async"),e.TgZ(8,"results-layout",6),e.YNc(9,Q,4,4,"a",7),e.YNc(10,N,3,3,"mobile-result",8),e.YNc(11,V,4,3,"table",9),e.qZA()),2&n&&(e.Q6J("mode",s.showForm?"filters":"empty")("heading",s.heading)("mobileHeading",s.mobileHeading)("headingActions",e.lcZ(1,14,s.headingActions$)),e.xp6(2),e.Q6J("formGroup",s.form)("ngClass",e.VKq(18,Y,s.hasCategories)),e.xp6(1),e.Q6J("ngIf",s.user&&!s.authHelper.isSelf(s.user)),e.xp6(1),e.Q6J("ngIf",s.showForm),e.xp6(1),e.Q6J("ngIf",s.hasCategories),e.xp6(1),e.Q6J("ngIf",e.lcZ(7,16,s.form.controls.category.valueChanges)),e.xp6(2),e.Q6J("results",s.types)("onClick",s.selectType)("resultType",s.resultType)("categories",s.categories))},directives:[D.Y,E.JL,E.sg,C.mk,C.O5,A.M,P.q,E.JJ,E.u,F.P,E.oH,_.N,f.D,o.g,c.p,a.E,g.t,v.p,C.sg,L.A],pipes:[C.Ov],encapsulation:2,changeDetection:0}),r})()}}]);