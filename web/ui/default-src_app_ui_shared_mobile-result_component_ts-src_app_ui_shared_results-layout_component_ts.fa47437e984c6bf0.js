"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([["default-src_app_ui_shared_mobile-result_component_ts-src_app_ui_shared_results-layout_component_ts"],{2180:(v,g,s)=>{s.d(g,{H:()=>m});var t=s(6163),o=s(6435),l=s(6890);let m=(()=>{class p{constructor(T){this.formatService=T}transform(T,R,M=!1){return this.formatService.formatAsCurrency(R,T,(0,t.Iw)(M))}}return p.\u0275fac=function(T){return new(T||p)(o.Y36(l.H,16))},p.\u0275pipe=o.Yjl({name:"currency",type:p,pure:!0}),p})()},3030:(v,g,s)=>{s.d(g,{u:()=>l});var t=s(6435),o=s(6890);let l=(()=>{class m{constructor(d){this.formatService=d}transform(d){return this.formatService.formatAsDate(d)}}return m.\u0275fac=function(d){return new(d||m)(t.Y36(o.H,16))},m.\u0275pipe=t.Yjl({name:"date",type:m,pure:!0}),m})()},629:(v,g,s)=>{s.d(g,{t:()=>S});var t=s(6163),o=s(6435),l=s(6890),m=s(8664),p=s(9808),d=s(867),T=s(2180),R=s(3030);function M(_,h){if(1&_&&(o.TgZ(0,"div",5),o._uU(1),o.qZA()),2&_){const c=o.oxw();o.xp6(1),o.hij("",c.title,"\n")}}function b(_,h){if(1&_&&(o.TgZ(0,"div",6),o._UZ(1,"avatar",7),o.qZA()),2&_){const c=o.oxw();o.xp6(1),o.Q6J("image",c.avatarImage)("icon",c.avatarIcon)("roundBorders",c.avatarRoundBorders)}}function O(_,h){if(1&_&&(o.TgZ(0,"div",14),o._uU(1),o.qZA()),2&_){const c=o.oxw(2);o.xp6(1),o.hij(" ",c.topRight," ")}}function D(_,h){if(1&_&&(o.TgZ(0,"div",15),o._uU(1),o.ALo(2,"currency"),o.qZA()),2&_){const c=o.oxw(2);o.Q6J("ngClass",c.amountClass),o.xp6(1),o.hij(" ",o.Dn7(2,2,c.amount,c.currency,c.forceSign)," ")}}function w(_,h){if(1&_&&(o.TgZ(0,"div",16),o._uU(1),o.ALo(2,"date"),o.qZA()),2&_){const c=o.oxw(2);o.xp6(1),o.hij(" ",o.lcZ(2,1,c.date)," ")}}function J(_,h){if(1&_&&(o.TgZ(0,"div",17),o._uU(1),o.qZA()),2&_){const c=o.oxw(2);o.xp6(1),o.hij(" ",c.topLeft," ")}}function N(_,h){if(1&_&&(o.ynx(0),o.TgZ(1,"div",8),o.YNc(2,O,2,1,"div",9),o.YNc(3,D,3,6,"div",10),o.YNc(4,w,3,3,"div",11),o.YNc(5,J,2,1,"div",12),o.qZA(),o._UZ(6,"div",13),o.BQk()),2&_){const c=o.oxw();o.xp6(2),o.Q6J("ngIf",c.topRight),o.xp6(1),o.Q6J("ngIf",c.amount),o.xp6(1),o.Q6J("ngIf",c.date),o.xp6(1),o.Q6J("ngIf",c.topLeft)}}const Q=["*"];let S=(()=>{class _{constructor(c,x){this.format=c,this.layout=x,this.amountColor=!0,this._forceSign=!1}get forceSign(){return this._forceSign}set forceSign(c){this._forceSign=(0,t.Iw)(c)}ngOnInit(){this.hasAvatar=!!this.avatarImage||!!this.avatarIcon,this.hasAmount=!!this.amount,this.mainClass=this.hasAvatar?"col-9 col-xs-10":"col-12",this.hasAvatar&&(this.avatarClass="col-3 col-xs-2 avatar"),this.hasAmount&&(this.amountClass={amount:!0,"p-0":!0,positive:this.amountColor&&this.format.isPositive(this.amount),negative:this.amountColor&&this.format.isNegative(this.amount)})}}return _.\u0275fac=function(c){return new(c||_)(o.Y36(l.H),o.Y36(m.Pb))},_.\u0275cmp=o.Xpm({type:_,selectors:[["mobile-result"]],inputs:{avatarImage:"avatarImage",avatarIcon:"avatarIcon",avatarRoundBorders:"avatarRoundBorders",date:"date",topLeft:"topLeft",topRight:"topRight",amount:"amount",amountColor:"amountColor",currency:"currency",title:"title",forceSign:"forceSign"},ngContentSelectors:Q,decls:6,vars:3,consts:[["class","mobile-result-container cell-main pb-0",4,"ngIf"],[1,"mobile-result-container"],["class","avatar",4,"ngIf"],[1,"mobile-result-content"],[4,"ngIf"],[1,"mobile-result-container","cell-main","pb-0"],[1,"avatar"],[3,"image","icon","roundBorders"],[1,"cell-date-amount"],["class","cell-top-right",4,"ngIf"],["class","cell-amount",3,"ngClass",4,"ngIf"],["class","cell-date",4,"ngIf"],["class","cell-top-left",4,"ngIf"],[1,"clearfix"],[1,"cell-top-right"],[1,"cell-amount",3,"ngClass"],[1,"cell-date"],[1,"cell-top-left"]],template:function(c,x){1&c&&(o.F$t(),o.YNc(0,M,2,1,"div",0),o.TgZ(1,"div",1),o.YNc(2,b,2,3,"div",2),o.TgZ(3,"div",3),o.YNc(4,N,7,4,"ng-container",4),o.Hsn(5),o.qZA()()),2&c&&(o.Q6J("ngIf",x.title),o.xp6(2),o.Q6J("ngIf",x.hasAvatar),o.xp6(2),o.Q6J("ngIf",x.amount||x.date||x.topLeft||x.topRight))},directives:[p.O5,d.A,p.mk],pipes:[T.H,R.u],encapsulation:2,changeDetection:0}),_})()},1441:(v,g,s)=>{s.d(g,{E:()=>o});var t=s(6435);let o=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275dir=t.lG2({type:l,selectors:[["","mobileResult",""]]}),l})()},7796:(v,g,s)=>{s.d(g,{g:()=>o});var t=s(6435);let o=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275dir=t.lG2({type:l,selectors:[["","resultCategory",""]]}),l})()},9244:(v,g,s)=>{s.d(g,{d:()=>o});var t=s(6435);let o=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275dir=t.lG2({type:l,selectors:[["","resultInfoWindow",""]]}),l})()},1015:(v,g,s)=>{s.d(g,{p:()=>o});var t=s(6435);let o=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275dir=t.lG2({type:l,selectors:[["","resultTable",""]]}),l})()},5599:(v,g,s)=>{s.d(g,{r:()=>o});var t=s(6435);let o=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275dir=t.lG2({type:l,selectors:[["","resultTile",""]]}),l})()},8473:(v,g,s)=>{s.d(g,{X:()=>t});var t=(()=>{return(o=t||(t={})).CATEGORIES="categories",o.TILES="tiles",o.LIST="list",o.MAP="map",t;var o})()},8687:(v,g,s)=>{s.d(g,{D:()=>Pt});var t=s(6435),o=s(7947),l=s(6163),m=s(1441),p=s(7796),d=s(9244),T=s(1015),R=s(5599),M=s(8473),b=s(591),O=s(5531),D=s(8064),w=s(9808),J=s(2032),N=s(3812);const Q=["*"];let S=(()=>{class n{constructor(){this.styleDisplay="flex",this.styleDirection="column",this.styleWidth="100%",this.ready=new t.vpe}ngAfterContentInit(){this.ready.emit(!0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["content-monitor"]],hostVars:6,hostBindings:function(e,i){2&e&&t.Udp("display",i.styleDisplay)("flex-direction",i.styleDirection)("width",i.styleWidth)},outputs:{ready:"ready"},ngContentSelectors:Q,decls:1,vars:0,template:function(e,i){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),n})();var _=s(3961),h=s(2089),c=s(3075),x=s(1556),H=s(6939);const K=function(n,a,e){return{first:n,last:a,total:e}};function G(n,a){if(1&n&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.i18n.general.results.withTotal(t.kEZ(1,K,e.results.firstItem,e.results.lastItem,e.results.totalCount))," ")}}const z=function(n,a){return{first:n,last:a}};function V(n,a){if(1&n&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.i18n.general.results.noTotal(t.WLB(1,z,e.results.firstItem,e.results.lastItem))," ")}}function j(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"action-button",11),t.NdJ("action",function(){return t.CHM(e),t.oxw(3).nextOrPrevious(!1)}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("label",e.i18n.general.results.previousXxs)}}function X(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"action-button",12),t.NdJ("action",function(){return t.CHM(e),t.oxw(3).nextOrPrevious(!0)}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("label",e.i18n.general.results.nextXxs)}}function q(n,a){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,j,1,1,"action-button",9),t.qZA(),t.TgZ(3,"div",8),t.YNc(4,X,1,1,"action-button",10),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.results.page>0),t.xp6(2),t.Q6J("ngIf",e.results.hasNext)}}function tt(n,a){if(1&n&&(t._UZ(0,"pagination",15),t.ALo(1,"async"),t.ALo(2,"async")),2&n){const e=t.oxw(3);t.Q6J("totalItems",e.totalCount)("itemsPerPage",e.results.pageSize)("maxSize",e.maxSize(t.lcZ(1,5,e.layout.breakpointChanges$)))("rotate",!0)("boundaryLinks",e.results.hasTotalCount&&t.lcZ(2,7,e.layout.gtxs$))}}function et(n,a){if(1&n&&(t.TgZ(0,"div",13),t.YNc(1,tt,3,9,"pagination",14),t.ALo(2,"async"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.layout.gtxxs$))}}function nt(n,a){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,G,2,5,"div",2),t.YNc(2,V,2,4,"ng-template",null,3,t.W1O),t.YNc(4,q,5,2,"div",4),t.ALo(5,"async"),t.YNc(6,et,3,3,"div",5),t.ALo(7,"async"),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw();t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf",i.results.hasTotalCount)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,5,i.layout.xxs$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,7,i.layout.gtxxs$))}}let ot=(()=>{class n extends o.H{constructor(e){super(e),this.update=new t.vpe}get results(){return this._results}set results(e){this._results=e,e&&(this.lastPage=e,this.form&&this.form.setValue({pageNumber:e.page+1,pageSize:e.pageSize},{emitEvent:!1}))}ngOnInit(){this.form=this.formBuilder.group({pageNumber:((this.results||{page:null,pageSize:null}).page||0)+1,pageSize:null}),this.addSub(this.form.valueChanges.subscribe(i=>{this.doUpdate({page:i.pageNumber-1,pageSize:i.pageSize})})),this.addShortcut(h.LU,i=>{if(this.layout.gtxs)return!1;this.nextOrPrevious("ArrowRight"===i.key)})}maxSize(e){return e.has("lt-md")?5:7}get totalCount(){return this.results.hasTotalCount?this.results.totalCount:(this.results.page+1)*this.results.pageSize+(this.results.hasNext?1:0)}doUpdate(e){(null==this.lastPage||null==e||e.page!==this.lastPage.page||e.pageSize!==this.lastPage.pageSize)&&(this.lastPage=e,this.update.emit(e),(0,l.SM)(this.scrollAnchor))}nextOrPrevious(e){!this.results||e&&!this.results.hasNext||!e&&this.results.page<=0||this.doUpdate({page:this.results.page+(e?1:-1),pageSize:this.results.pageSize})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["paginator"]],inputs:{scrollAnchor:"scrollAnchor",results:"results"},outputs:{update:"update"},features:[t.qOj],decls:1,vars:1,consts:[["class","d-flex flex-column flex-sm-row justify-content-between align-items-center",3,"formGroup",4,"ngIf"],[1,"d-flex","flex-column","flex-sm-row","justify-content-between","align-items-center",3,"formGroup"],["class","mb-3 mb-sm-0 w-100 text-center",4,"ngIf","ngIfElse"],["noTotalCount",""],["class","row no-gutters w-100",4,"ngIf"],["class","mt-2 mt-xs-0",4,"ngIf"],[1,"mb-3","mb-sm-0","w-100","text-center"],[1,"row","no-gutters","w-100"],[1,"col-6","px-2"],["outline","",3,"label","action",4,"ngIf"],[3,"label","action",4,"ngIf"],["outline","",3,"label","action"],[3,"label","action"],[1,"mt-2","mt-xs-0"],["formControlName","pageNumber","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","rotate","boundaryLinks",4,"ngIf"],["formControlName","pageNumber","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","rotate","boundaryLinks"]],template:function(e,i){1&e&&t.YNc(0,nt,8,9,"div",0),2&e&&t.Q6J("ngIf",i.results)},directives:[w.O5,c.JL,c.sg,x.x,H.Qt,c.JJ,c.u],pipes:[w.Ov],encapsulation:2,changeDetection:0}),n})();const it=["infoWindowContent"],st=["mapContainer"];function rt(n,a){1&n&&(t.TgZ(0,"page-content"),t._UZ(1,"spinner"),t.qZA())}function at(n,a){1&n&&t.GkF(0)}const Y=function(n,a,e){return{"col-md-3":n,"col-xl-3":a,"col-xl-2":e}},W=function(n){return{$implicit:n}};function lt(n,a){if(1&n&&(t.TgZ(0,"div",9),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,at,1,0,"ng-container",10),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.kEZ(9,Y,!1===t.lcZ(1,3,i.uiLayout.leftAreaVisible$),t.lcZ(2,5,i.uiLayout.leftAreaVisible$),!1===t.lcZ(3,7,i.uiLayout.leftAreaVisible$))),t.xp6(4),t.Q6J("ngTemplateOutlet",i.categoryTemplate)("ngTemplateOutletContext",t.VKq(13,W,e))}}const k=function(n){return{"d-none":n}};function ct(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"content-monitor",5),t.NdJ("ready",function(){return t.CHM(e),t.oxw().notifyReady()}),t.ALo(1,"async"),t.TgZ(2,"page-content",6)(3,"div",7),t.YNc(4,lt,5,15,"div",8),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(4,k,t.lcZ(1,2,e.rendering$))),t.xp6(4),t.Q6J("ngForOf",e.categories)}}function _t(n,a){1&n&&t.GkF(0)}const ut=function(n){return{"border-bottom-0":n}};function pt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"maybe-link",18),t.NdJ("click",function(r){const f=t.CHM(e).$implicit;return t.oxw(4).handleClick(f,r)})("keydown.enter",function(r){const f=t.CHM(e).$implicit;return t.oxw(4).handleClick(f,r)}),t.YNc(1,_t,1,0,"ng-container",10),t.qZA()}if(2&n){const e=a.$implicit,i=a.last,r=t.oxw(4);t.Q6J("ngClass",t.VKq(4,ut,r.embedded&&i))("link",r.linkUrl(e)),t.xp6(1),t.Q6J("ngTemplateOutlet",r.mobileResultTemplate)("ngTemplateOutletContext",t.VKq(6,W,e))}}function mt(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",16),t.YNc(2,pt,2,8,"maybe-link",17),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("ngForOf",e.rows)}}function gt(n,a){1&n&&t.GkF(0)}function ft(n,a){if(1&n&&t.YNc(0,gt,1,0,"ng-container",19),2&n){const e=t.oxw(3);t.Q6J("ngTemplateOutlet",e.tableTemplate)}}function dt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"paginator",21),t.NdJ("update",function(r){return t.CHM(e),t.oxw(3).update.emit(r)}),t.qZA()()}if(2&n){t.oxw();const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("scrollAnchor",e.element)("results",i.results)}}function ht(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"content-monitor",5),t.NdJ("ready",function(){return t.CHM(e),t.oxw(2).notifyReady()}),t.ALo(1,"async"),t.TgZ(2,"page-content",12,13),t.ALo(4,"async"),t.YNc(5,mt,3,1,"ng-container",2),t.ALo(6,"async"),t.YNc(7,ft,1,1,"ng-template",null,14,t.W1O),t.YNc(9,dt,2,2,"div",15),t.qZA()()}if(2&n){const e=t.MAs(8),i=t.oxw(2);t.Q6J("ngClass",t.VKq(11,k,t.lcZ(1,5,i.rendering$))),t.xp6(2),t.Q6J("mode",t.lcZ(4,7,i.layout.ltsm$)?"tight":"table"),t.xp6(3),t.Q6J("ngIf",t.lcZ(6,9,i.layout.ltsm$))("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",i.showPaginator())}}function xt(n,a){1&n&&t.GkF(0)}function Ct(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",27),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.TgZ(4,"maybe-link",28),t.NdJ("click",function(r){const f=t.CHM(e).$implicit;return t.oxw(3).handleClick(f,r)})("keydown.enter",function(r){const f=t.CHM(e).$implicit;return t.oxw(3).handleClick(f,r)}),t.YNc(5,xt,1,0,"ng-container",10),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw(3);t.Q6J("ngClass",t.kEZ(10,Y,!1===t.lcZ(1,4,i.uiLayout.leftAreaVisible$),t.lcZ(2,6,i.uiLayout.leftAreaVisible$),!1===t.lcZ(3,8,i.uiLayout.leftAreaVisible$))),t.xp6(4),t.Q6J("link",i.linkUrl(e)),t.xp6(1),t.Q6J("ngTemplateOutlet",i.tileTemplate)("ngTemplateOutletContext",t.VKq(14,W,e))}}function yt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"page-content",29)(1,"paginator",21),t.NdJ("update",function(r){return t.CHM(e),t.oxw(3).update.emit(r)}),t.qZA()()}if(2&n){t.oxw();const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("scrollAnchor",e.element)("results",i.results)}}function vt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"content-monitor",5),t.NdJ("ready",function(){return t.CHM(e),t.oxw(2).notifyReady()}),t.ALo(1,"async"),t.TgZ(2,"page-content",22,23)(4,"div",24),t.YNc(5,Ct,6,16,"div",25),t.qZA()(),t.YNc(6,yt,2,2,"page-content",26),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(6,k,t.lcZ(1,4,e.rendering$))),t.xp6(2),t.Q6J("last",!e.showPaginator()),t.xp6(3),t.Q6J("ngForOf",e.rows),t.xp6(1),t.Q6J("ngIf",e.showPaginator())}}function Tt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"content-monitor",30),t.NdJ("ready",function(){return t.CHM(e),t.oxw(2).notifyReady()}),t.TgZ(1,"page-content",31),t.ALo(2,"async"),t._UZ(3,"div",32,33),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(3,k,t.lcZ(2,1,e.rendering$)))}}function wt(n,a){if(1&n&&(t.ynx(0),t.YNc(1,ht,10,13,"content-monitor",1),t.YNc(2,vt,7,8,"content-monitor",1),t.YNc(3,Tt,5,5,"content-monitor",11),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.tableTemplate&&"list"===e.resultType),t.xp6(1),t.Q6J("ngIf",e.tileTemplate&&"tiles"===e.resultType),t.xp6(1),t.Q6J("ngIf","map"===e.resultType)}}function Lt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"content-monitor",30),t.NdJ("ready",function(){return t.CHM(e),t.oxw(2).notifyReady()}),t.TgZ(1,"page-content",29),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.AsE(" ",e.i18n.general.results.none," ",e.notifyReady()," ")}}function At(n,a){if(1&n&&t.YNc(0,Lt,3,2,"content-monitor",11),2&n){const e=t.oxw();t.Q6J("ngIf",e.results&&"categories"!==e.resultType)}}function Mt(n,a){1&n&&t.GkF(0)}const Rt=function(n,a){return{$implicit:n,address:a}};function It(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"maybe-link",34),t.NdJ("click",function(r){const f=t.CHM(e).$implicit;return t.oxw().handleClick(f,r)})("keydown.enter",function(r){const f=t.CHM(e).$implicit;return t.oxw().handleClick(f,r)}),t.YNc(1,Mt,1,0,"ng-container",10),t.qZA()}if(2&n){const e=a.$implicit,i=a.address,r=t.oxw();t.Q6J("link",r.linkUrl(e)),t.xp6(1),t.Q6J("ngTemplateOutlet",r.infoWindowTemplate)("ngTemplateOutletContext",t.WLB(3,Rt,e,i))}}let Pt=(()=>{class n extends o.H{constructor(e,i,r){super(e),this.uiLayout=i,this.maps=r,this.resultType=M.X.LIST,this.rendering$=new b.X(!1),this.update=new t.vpe,this.infoWindows=[],this.toAddress=u=>u,this.toMarkerTitle=u=>u.display||u.name}notifyReady(){this.rendering$.value&&setTimeout(()=>{this.rendering$.next(!1)},10)}ngAfterViewInit(){this.addSub(this.mapContainerList.changes.subscribe(()=>{const e=this.mapContainerList.first,i=null==e?null:e.nativeElement;null!=i&&i!==this.lastMapContainer&&this.updateMap(),this.lastMapContainer=i}))}ngOnChanges(e){(e.results||e.resultType)&&(this.clearMap(),this.updateMap())}get rows(){return this.results instanceof Array?this.results:this.results&&this.results.results||[]}closeAllInfoWindows(){this.infoWindows.forEach(e=>e.close())}showPaginator(){return!(null==this.results||this.results instanceof Array)&&(this.results.hasTotalCount?this.results.pageCount>1:this.results.page>0||this.results.hasNext)}linkUrl(e){let i=this.toLink?this.toLink(e):null;return i instanceof Array&&(i=i.join("/")),i}handleClick(e,i){if(this.onClick)this.onClick(e);else{const r=this.toLink?this.toLink(e):null;"string"==typeof r?this.router.navigateByUrl(r):r instanceof Array&&this.router.navigate(r)}i.stopPropagation(),i.preventDefault()}updateMap(){if((0,l.cS)(this.rows)||this.resultType!==M.X.MAP||!this.mapContainerList||!this.maps.enabled||!this.toAddress)return;const e=this.mapContainerList.first;e&&e.nativeElement&&this.addSub(this.maps.ensureScriptLoaded().subscribe(()=>this.renderMap()))}clearMap(){this.markerClusterer&&this.markerClusterer.clearMarkers(),this.referenceMarker&&(this.referenceMarker.setMap(null),this.referenceMarker=null),this.closeAllInfoWindows(),this.infoWindows=[]}renderMap(){this.clearMap();const e=this.mapContainerList.first,i=null==e?null:e.nativeElement;if(null==i)return;const r=this.rows.filter(C=>{const y=this.toAddress(C);return null!=y&&y.location});if((0,l.cS)(r))return;this.map?this.mapContainer.parentElement&&this.mapContainer.parentElement.removeChild(this.mapContainer):(this.mapContainer=document.createElement("div"),this.map=this.maps.newGoogleMap(this.mapContainer),this.map.addListener("click",()=>this.closeAllInfoWindows()),this.markerClusterer=new MarkerClusterer(this.map,[],{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",minimumClusterSize:5,maxZoom:16}));const u=new google.maps.LatLngBounds,f=new Array(r.length),A=new Map,Zt=C=>{const y=C.getPosition();return this.format.formatAsNumber(y.lat(),5)+"|"+this.format.formatAsNumber(y.lng(),5)},kt=this.dataForFrontendHolder.dataForFrontend.mapMarkerUrl,Et=this.dataForFrontendHolder.dataForFrontend.altMapMarkerUrl;r.forEach(C=>{const y=this.toAddress(C),F=null==y?null:y.location,bt=this.toMarkerTitle?this.toMarkerTitle(C):y.name;if(F){const L=new google.maps.Marker({title:bt,icon:kt,position:new google.maps.LatLng(F.latitude,F.longitude)});L.row=C,L.address=y;const U=Zt(L);let I=A.get(U);I||(I=[],A.set(U,I)),I.push(L),u.extend(L.getPosition()),L.addListener("click",()=>{this.closeAllInfoWindows();const B=this.infoWindow(L),P=[];for(const Z of I){const E=this.infoWindowContent.createEmbeddedView({$implicit:Z.row,address:Z.address});E.detectChanges();const $=E.rootNodes||[];(0,l.cS)($)||((0,l.cS)(P)||P.push(document.createElement("hr")),Array.prototype.push.apply(P,$))}if(!(0,l.cS)(P)){const Z=document.createElement("div");P.forEach(E=>Z.appendChild(E)),B.setContent(Z),B.open(this.map,L)}}),f.push(L)}}),this.referencePoint&&(this.referenceMarker=new google.maps.Marker({position:new google.maps.LatLng(this.referencePoint.latitude,this.referencePoint.longitude),title:this.referencePoint.name,icon:Et}),this.referencePoint.name&&this.referenceMarker.addListener("click",()=>{const C=this.infoWindow(this.referenceMarker);C.setContent(this.referencePoint.name),C.open(this.map,this.referenceMarker)}),this.referenceMarker.setMap(this.map),u.extend(this.referenceMarker.getPosition())),i.appendChild(this.mapContainer),this.markerClusterer.addMarkers(f),setTimeout(()=>this.map.fitBounds(u))}infoWindow(e){let i=e.infoWindow;return i||(i=new google.maps.InfoWindow,e.infoWindow=i,this.infoWindows.push(i)),i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.zs3),t.Y36(O.B),t.Y36(D.Q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["results-layout"]],contentQueries:function(e,i,r){if(1&e&&(t.Suo(r,p.g,5,t.Rgc),t.Suo(r,T.p,5,t.Rgc),t.Suo(r,m.E,5,t.Rgc),t.Suo(r,R.r,5,t.Rgc),t.Suo(r,d.d,5,t.Rgc)),2&e){let u;t.iGM(u=t.CRH())&&(i.categoryTemplate=u.first),t.iGM(u=t.CRH())&&(i.tableTemplate=u.first),t.iGM(u=t.CRH())&&(i.mobileResultTemplate=u.first),t.iGM(u=t.CRH())&&(i.tileTemplate=u.first),t.iGM(u=t.CRH())&&(i.infoWindowTemplate=u.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(it,5,t.Rgc),t.Gf(st,5)),2&e){let r;t.iGM(r=t.CRH())&&(i.infoWindowContent=r.first),t.iGM(r=t.CRH())&&(i.mapContainerList=r)}},inputs:{resultType:"resultType",categories:"categories",results:"results",rendering$:"rendering$",referencePoint:"referencePoint",embedded:"embedded",onClick:"onClick",toLink:"toLink",toAddress:"toAddress",toMarkerTitle:"toMarkerTitle"},outputs:{update:"update"},features:[t.qOj,t.TTD],decls:8,vars:6,consts:[[4,"ngIf"],[3,"ngClass","ready",4,"ngIf"],[4,"ngIf","ngIfElse"],["noResults",""],["infoWindowContent",""],[3,"ngClass","ready"],["mode","transparent","last",""],[1,"row","category-results"],["class","category-result col-12 col-xs-6 col-sm-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"category-result","col-12","col-xs-6","col-sm-4",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ready",4,"ngIf"],["last","",3,"mode"],["listContent",""],["largeTable",""],["class","paginator-container",4,"ngIf"],[1,"mobile-results"],["class","mobile-result",3,"ngClass","link","click","keydown.enter",4,"ngFor","ngForOf"],[1,"mobile-result",3,"ngClass","link","click","keydown.enter"],[4,"ngTemplateOutlet"],[1,"paginator-container"],[3,"scrollAnchor","results","update"],["mode","transparent",3,"last"],["tilesContent",""],[1,"row","tiled-results"],["class","col-12 col-xs-6 col-sm-4",3,"ngClass",4,"ngFor","ngForOf"],["last","",4,"ngIf"],[1,"col-12","col-xs-6","col-sm-4",3,"ngClass"],[1,"tiled-result",3,"link","click","keydown.enter"],["last",""],[3,"ready"],["mode","fullHeightTight","last","",3,"ngClass"],[1,"map-container"],["mapContainer",""],[1,"undecorated","map-info-window",3,"link","click","keydown.enter"]],template:function(e,i){if(1&e&&(t.YNc(0,rt,2,0,"page-content",0),t.ALo(1,"async"),t.YNc(2,ct,5,6,"content-monitor",1),t.YNc(3,wt,4,3,"ng-container",2),t.YNc(4,At,1,1,"ng-template",null,3,t.W1O),t.YNc(6,It,2,6,"ng-template",null,4,t.W1O)),2&e){const r=t.MAs(5);t.Q6J("ngIf",t.lcZ(1,4,i.rendering$)&&null==i.results),t.xp6(2),t.Q6J("ngIf",i.categoryTemplate&&(null==i.categories?null:i.categories.length)>0&&"categories"===i.resultType),t.xp6(1),t.Q6J("ngIf",(null==i.rows?null:i.rows.length)>0)("ngIfElse",r)}},directives:[w.O5,J.Y,N.O,S,w.mk,w.sg,w.tP,_.O,ot],pipes:[w.Ov],encapsulation:2,changeDetection:0}),n})()}}]);