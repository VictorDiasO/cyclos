(self.webpackChunkui=self.webpackChunkui||[]).push([["default-src_app_ui_shared_ui-shared_module_ts"],{18:(Te,se,s)=>{"use strict";s.d(se,{Y:()=>e});var e=(()=>{return(t=e||(e={})).CONTACT_INFO="contactInfo",t.CUSTOM_FIELD_VALUE="customFieldValue",t.IDENTITY_PROVIDER="identityProvider",t.MARKETPLACE="marketplace",t.MARKETPLACE_CATEGORY="marketplaceCategory",t.OIDC_CLIENT="oidcClient",t.PROFILE="profile",t.SYSTEM_CUSTOM="systemCustom",t.TEMP="temp",t.USER_CUSTOM="userCustom",t.VOUCHER_CATEGORY="voucherCategory",t.VOUCHER_TEMPLATE="voucherTemplate",t.VOUCHER_TYPE="voucherType",e;var t})()},8796:(Te,se,s)=>{"use strict";s.d(se,{r:()=>e});var e=(()=>{return(t=e||(e={})).LARGE="large",t.MEDIUM="medium",t.SMALL="small",t.TINY="tiny",e;var t})()},5926:(Te,se,s)=>{"use strict";s.d(se,{H:()=>e});var e=(()=>{return(t=e||(e={})).CUSTOM="custom",t.PROFILE="profile",e;var t})()},3032:(Te,se,s)=>{"use strict";s.d(se,{P:()=>Q});var e=s(520),t=s(1352),l=s(8637),g=s(2198),m=s(4850),n=s(6435),j=s(297);let Q=(()=>{class R extends t.b{constructor(P,O){super(P,O)}searchContacts$Response(P,O){const _=new l.c(this.rootUrl,R.SearchContactsPath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.path("user",P.user,{}),_.query("ignoreProfileFieldsInList",P.ignoreProfileFieldsInList,{}),_.query("includeGroup",P.includeGroup,{}),_.query("includeGroupSet",P.includeGroupSet,{}),_.query("keywords",P.keywords,{}),_.query("page",P.page,{}),_.query("pageSize",P.pageSize,{}),_.query("profileFields",P.profileFields,{}),_.query("skipTotalCount",P.skipTotalCount,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}searchContacts(P,O){return this.searchContacts$Response(P,O).pipe((0,m.U)(_=>_.body))}searchContactList$Response(P,O){const _=new l.c(this.rootUrl,R.SearchContactListPath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.path("user",P.user,{}),_.query("customFields",P.customFields,{}),_.query("keywords",P.keywords,{}),_.query("orderBy",P.orderBy,{}),_.query("page",P.page,{}),_.query("pageSize",P.pageSize,{}),_.query("skipTotalCount",P.skipTotalCount,{}),_.query("usersToExclude",P.usersToExclude,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}searchContactList(P,O){return this.searchContactList$Response(P,O).pipe((0,m.U)(_=>_.body))}createContact$Response(P,O){const _=new l.c(this.rootUrl,R.CreateContactPath,"post");return P&&(_.path("user",P.user,{}),_.body(P.body,"application/json")),this.http.request(_.build({responseType:"text",accept:"text/plain",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}createContact(P,O){return this.createContact$Response(P,O).pipe((0,m.U)(_=>_.body))}getContactListDataForSearch$Response(P,O){const _=new l.c(this.rootUrl,R.GetContactListDataForSearchPath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.path("user",P.user,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}getContactListDataForSearch(P,O){return this.getContactListDataForSearch$Response(P,O).pipe((0,m.U)(_=>_.body))}getContactListDataForNew$Response(P,O){const _=new l.c(this.rootUrl,R.GetContactListDataForNewPath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.path("user",P.user,{}),_.query("contactUser",P.contactUser,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}getContactListDataForNew(P,O){return this.getContactListDataForNew$Response(P,O).pipe((0,m.U)(_=>_.body))}getContactDataForEdit$Response(P,O){const _=new l.c(this.rootUrl,R.GetContactDataForEditPath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.path("id",P.id,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}getContactDataForEdit(P,O){return this.getContactDataForEdit$Response(P,O).pipe((0,m.U)(_=>_.body))}viewContact$Response(P,O){const _=new l.c(this.rootUrl,R.ViewContactPath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.path("id",P.id,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}viewContact(P,O){return this.viewContact$Response(P,O).pipe((0,m.U)(_=>_.body))}updateContact$Response(P,O){const _=new l.c(this.rootUrl,R.UpdateContactPath,"put");return P&&(_.path("id",P.id,{}),_.body(P.body,"application/json")),this.http.request(_.build({responseType:"text",accept:"*/*",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D.clone({body:void 0})))}updateContact(P,O){return this.updateContact$Response(P,O).pipe((0,m.U)(_=>_.body))}deleteContact$Response(P,O){const _=new l.c(this.rootUrl,R.DeleteContactPath,"delete");return P&&_.path("id",P.id,{}),this.http.request(_.build({responseType:"text",accept:"*/*",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D.clone({body:void 0})))}deleteContact(P,O){return this.deleteContact$Response(P,O).pipe((0,m.U)(_=>_.body))}}return R.SearchContactsPath="/{user}/contacts",R.SearchContactListPath="/{user}/contact-list",R.CreateContactPath="/{user}/contact-list",R.GetContactListDataForSearchPath="/{user}/contact-list/data-for-search",R.GetContactListDataForNewPath="/{user}/contact-list/data-for-new",R.GetContactDataForEditPath="/contact-list/{id}/data-for-edit",R.ViewContactPath="/contact-list/{id}",R.UpdateContactPath="/contact-list/{id}",R.DeleteContactPath="/contact-list/{id}",R.\u0275fac=function(P){return new(P||R)(n.LFG(j.p),n.LFG(e.eN))},R.\u0275prov=n.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},9115:(Te,se,s)=>{"use strict";s.d(se,{n:()=>Q});var e=s(520),t=s(1352),l=s(8637),g=s(2198),m=s(4850),n=s(6435),j=s(297);let Q=(()=>{class R extends t.b{constructor(P,O){super(P,O)}getRawFileContent$Response(P,O){const _=new l.c(this.rootUrl,R.GetRawFileContentPath,"get");return P&&_.path("id",P.id,{}),this.http.request(_.build({responseType:"blob",accept:"*/*",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}getRawFileContent(P,O){return this.getRawFileContent$Response(P,O).pipe((0,m.U)(_=>_.body))}viewRawFile$Response(P,O){const _=new l.c(this.rootUrl,R.ViewRawFilePath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.path("id",P.id,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}viewRawFile(P,O){return this.viewRawFile$Response(P,O).pipe((0,m.U)(_=>_.body))}deleteRawFile$Response(P,O){const _=new l.c(this.rootUrl,R.DeleteRawFilePath,"delete");return P&&_.path("id",P.id,{}),this.http.request(_.build({responseType:"text",accept:"*/*",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D.clone({body:void 0})))}deleteRawFile(P,O){return this.deleteRawFile$Response(P,O).pipe((0,m.U)(_=>_.body))}listTempFiles$Response(P,O){const _=new l.c(this.rootUrl,R.ListTempFilesPath,"get");return P&&(_.query("fields",P.fields,{explode:!1}),_.query("guestKey",P.guestKey,{}),_.query("customField",P.customField,{}),_.query("customFieldKind",P.customFieldKind,{})),this.http.request(_.build({responseType:"json",accept:"application/json",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}listTempFiles(P,O){return this.listTempFiles$Response(P,O).pipe((0,m.U)(_=>_.body))}uploadTempFile$Response(P,O){const _=new l.c(this.rootUrl,R.UploadTempFilePath,"post");return P&&(_.query("name",P.name,{}),_.query("guestKey",P.guestKey,{}),_.query("customField",P.customField,{}),_.query("customFieldKind",P.customFieldKind,{}),_.body(P.body,"multipart/form-data")),this.http.request(_.build({responseType:"text",accept:"text/plain",context:O})).pipe((0,g.h)(D=>D instanceof e.Zn),(0,m.U)(D=>D))}uploadTempFile(P,O){return this.uploadTempFile$Response(P,O).pipe((0,m.U)(_=>_.body))}}return R.GetRawFileContentPath="/files/{id}/content",R.ViewRawFilePath="/files/{id}",R.DeleteRawFilePath="/files/{id}",R.ListTempFilesPath="/files/temp",R.UploadTempFilePath="/files/temp",R.\u0275fac=function(P){return new(P||R)(n.LFG(j.p),n.LFG(e.eN))},R.\u0275prov=n.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},6247:(Te,se,s)=>{"use strict";s.d(se,{y:()=>L});var e=s(6435),t=s(4391),l=s(7420),g=s.n(l),m=s(591),n=s(8929),j=s(5905),Q=s(6890),R=s(9808),x=s(7295),P=s(6903),O=s(1556);const _=["container"];function D(N,B){if(1&N){const H=e.EpF();e.TgZ(0,"webcam",5),e.NdJ("initError",function(z){return e.CHM(H),e.oxw().handleInitError(z)})("imageCapture",function(z){return e.CHM(H),e.oxw().emit(z)}),e.qZA()}if(2&N){const H=B.ngIf,y=e.oxw();e.Q6J("trigger",y.trigger$)("allowCameraSwitch",!0)("width",H[0])("height",H[1])}}let C=(()=>{class N{constructor(H,y,z){this.modalRef=H,this.format=y,this.i18n=z,this.dimensions$=new m.X(null),this.trigger$=new n.xQ,this.select=new e.vpe}ngAfterViewChecked(){null==this.dimensions$.value&&setTimeout(()=>{const H=this.container.nativeElement.getBoundingClientRect();H.width>0&&this.dimensions$.next([H.width,H.height])})}emit(H){const y="image/jpeg",z=g()(H.imageAsBase64,y),r=new Date,d=this.format.formatAsDateTime(r),u=new File([z],this.i18n.field.camera.fileName(d),{lastModified:r.getTime(),type:y});this.select.emit(u),this.close()}close(){this.modalRef.hide()}handleInitError(H){H.mediaStreamError&&("NotAllowedError"===H.mediaStreamError.name?this.errorHandler(this.i18n.field.camera.noPermission):"NotAllowedError"===H.mediaStreamError.name&&this.errorHandler(this.i18n.field.camera.noCameras)),this.close()}}return N.\u0275fac=function(H){return new(H||N)(e.Y36(j.UZ),e.Y36(Q.H),e.Y36(t.s))},N.\u0275cmp=e.Xpm({type:N,selectors:[["capture-camera"]],viewQuery:function(H,y){if(1&H&&e.Gf(_,7),2&H){let z;e.iGM(z=e.CRH())&&(y.container=z.first)}},inputs:{errorHandler:"errorHandler"},outputs:{select:"select"},decls:9,vars:6,consts:[[1,"camera-container"],["container",""],[3,"trigger","allowCameraSwitch","width","height","initError","imageCapture",4,"ngIf"],[3,"label","action"],["outline","",3,"label","action"],[3,"trigger","allowCameraSwitch","width","height","initError","imageCapture"]],template:function(H,y){1&H&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"div",0,1),e.YNc(4,D,1,4,"webcam",2),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"actions")(7,"action-button",3),e.NdJ("action",function(){return y.trigger$.next(!0)}),e.qZA(),e.TgZ(8,"action-button",4),e.NdJ("action",function(){return y.modalRef.hide()}),e.qZA()()),2&H&&(e.xp6(1),e.Oqu(y.i18n.field.camera.titleCapture),e.xp6(3),e.Q6J("ngIf",e.lcZ(5,4,y.dimensions$)),e.xp6(3),e.Q6J("label",y.i18n.field.camera.capture),e.xp6(1),e.Q6J("label",y.i18n.general.cancel))},directives:[R.O5,x.i3,P.h,O.x],pipes:[R.Ov],encapsulation:2,changeDetection:0}),N})();var E=s(7224),I=s(3261);let L=(()=>{class N{constructor(H,y){this.modal=H,this.notification=y}capture(H){this.modal.show(C,{class:"modal-form",initialState:{errorHandler:r=>this.notification.error(r)}}).content.select.pipe((0,E.P)()).subscribe(H)}}return N.\u0275fac=function(H){return new(H||N)(e.LFG(j.tT),e.LFG(I.g))},N.\u0275prov=e.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})()},7229:(Te,se,s)=>{"use strict";s.d(se,{X:()=>R});var e=s(6435),t=s(1879),l=s(6163),g=s(3140),m=s(867),n=s(9808);function j(x,P){if(1&x&&e._UZ(0,"ngx-gallery",2),2&x){const O=e.oxw();e.Q6J("options",O.galleryOptions)("images",O.galleryImages)}}let R=(()=>{class x{constructor(){this.icon=t.l.Person,this.zoom=!0,this.click=new e.vpe,this._roundBorders=!0,this.imageSize=null,this.visible=!1}get roundBorders(){return this._roundBorders}set roundBorders(O){this._roundBorders=(0,l.Iw)(O)}ngOnInit(){this.update()}ngOnChanges(O){(O.image||O.additionalImages||O.size)&&this.update()}showLightbox(O){if(this.image){const _=this.galleryImages||[],D=null==O?_.findIndex(C=>C.big===this.image.url):O;this.gallery.openPreview(D)}}update(){if(this.image){const O=this.additionalImages||[];this.allImages=[...O],this.allImages.findIndex(_=>_.url===this.image.url)<0&&this.allImages.unshift(this.image),this.galleryImages=this.allImages.map(l.Kc),this.galleryOptions=[{width:"0",height:"0",image:!1,thumbnails:!1,previewKeyboardNavigation:!0,previewCloseOnClick:!0,previewCloseOnEsc:!0,previewArrows:O.length>0}],this.gallery&&(this.gallery.images=this.galleryImages,this.gallery.options=this.galleryOptions)}else this.allImages=[],this.galleryImages=null}}return x.\u0275fac=function(O){return new(O||x)},x.\u0275cmp=e.Xpm({type:x,selectors:[["avatar-lightbox"]],viewQuery:function(O,_){if(1&O&&e.Gf(g.g$,5),2&O){let D;e.iGM(D=e.CRH())&&(_.gallery=D.first)}},inputs:{icon:"icon",iconColor:"iconColor",zoom:"zoom",roundBorders:"roundBorders",size:"size",iconSize:"iconSize",image:"image",additionalImages:"additionalImages",imageSize:"imageSize"},outputs:{click:"click"},features:[e.TTD],decls:2,vars:8,consts:[[3,"icon","iconColor","zoom","roundBorders","size","iconSize","image","click"],[3,"options","images",4,"ngIf"],[3,"options","images"]],template:function(O,_){1&O&&(e.TgZ(0,"avatar",0),e.NdJ("click",function(){return _.showLightbox()}),e.qZA(),e.YNc(1,j,1,2,"ngx-gallery",1)),2&O&&(e.Q6J("icon",_.icon)("iconColor",_.iconColor)("zoom",_.zoom)("roundBorders",_.roundBorders)("size",_.size)("iconSize",_.iconSize)("image",_.image),e.xp6(1),e.Q6J("ngIf",(null==_.galleryImages?null:_.galleryImages.length)>0))},directives:[m.A,n.O5,g.g$],encapsulation:2,changeDetection:0}),x})()},5766:(Te,se,s)=>{"use strict";s.d(se,{GY:()=>Q,l3:()=>x,pF:()=>j});var e=s(6435),t=s(723),l=s(1272),g=s(6163),m=s(591),n=s(3075);const j=(P,O)=>null==P.category&&null!=O.category?-1:null==O.category&&null!=P.category?1:P.text.localeCompare(O.text),Q=new e.OlP("FORM_FIELD_WITH_OPTIONS");class R{constructor(O){this.name=O,this.options=new m.X([]),this.optionsByValue=new Map}add(O){const _=this.optionsByValue.get(O.value),D=this.options.value;if(_){const C=D.slice();C.splice(C.indexOf(_),1,O),this.options.next(C)}else this.options.next([...D,O]);this.optionsByValue.set(O.value,O)}remove(O){const _=this.optionsByValue.get(O.value);if(_){const D=this.options.value.slice();D.splice(D.indexOf(_),1),this.options.next(D)}this.optionsByValue.delete(O.value)}}let x=(()=>{class P extends t.T{constructor(_,D){super(_,D),this.controlContainer=D,this.categories=new m.X([])}set fieldOptions(_){(_||[]).forEach(D=>this.addOption(D))}get allOptions(){const _=[];for(const D of this.categories.value)D.options&&Array.prototype.push.apply(_,D.options.value||[]);return _}findOption(_){for(const D of this.categories.value)for(const C of D.options.value)if((0,l.d)(C,_))return C}optionsByParent(_){const D=this.findOption(_),C=[];for(const E of this.categories.value)for(const I of E.options.value)(D&&I.parent&&(0,l.d)(D,I.parent)||!D&&!I.parent)&&C.push(I);return C}addOption(_){let D=this.categoryFor(_);null==D&&(D=new R((0,g.cS)(_.category)?null:_.category),this.categories.next([...this.categories.value,D])),D.add(_)}removeOption(_){const D=this.categoryFor(_);D&&(D.remove(_),(0,g.cS)(D.options.value))&&this.categories.next(this.categories.value.filter(E=>E!==D))}get selectedValues(){return this.getSelectedValues()}get selectedOptions(){return this.selectedValues.map(_=>this.findOption(_)).filter(_=>!!_)}isSelected(_){if(null==_)return!1;"string"==typeof _&&(_=this.findOption(_));const D=this.selectedOptions;if(D.find(C=>(0,l.d)(C,_)))return!0;if(null==_?void 0:_.parent){const C=this.findOption(_.parent);if(D.find(E=>(0,l.d)(E,C)))return!0}return!1}categoryFor(_){const D=(0,g.cS)(_.category)?C=>(0,g.cS)(C.name):C=>C.name===_.category;return this.categories.value.find(D)}getDisabledValue(){return this.selectedOptions.map(_=>_.category?`${_.category} - ${_.text}`:_.text).join(", ")}}return P.\u0275fac=function(_){return new(_||P)(e.Y36(e.zs3),e.Y36(n.gN))},P.\u0275dir=e.lG2({type:P,inputs:{fieldOptions:"fieldOptions"},features:[e.qOj]}),P})()},723:(Te,se,s)=>{"use strict";s.d(se,{T:()=>n});var e=s(6435),t=s(2039),l=s(6163),g=s(3075);new e.OlP("FormField");let n=(()=>{class j extends t.C{constructor(R,x){super(R,x),this.controlContainer=x,this.classFormField=!0,this.name="",this.labelPosition="auto",this.disabledFormat="plain"}get classAnyLabelValue(){return!(0,l.OW)(this.label)}set id(R){this._id=R}get id(){return null==this._id&&(this._id=(0,l.To)()),this._id}get self(){return this}focus(){(0,l.T_)(this.getFocusableControl(),!0)}get disabledValue(){return this.getDisabledValue()}}return j.\u0275fac=function(R){return new(R||j)(e.Y36(e.zs3),e.Y36(g.gN))},j.\u0275dir=e.lG2({type:j,hostVars:4,hostBindings:function(R,x){2&R&&e.ekj("form-field",x.classFormField)("any-label-value",x.classAnyLabelValue)},inputs:{id:"id",name:"name",label:"label",required:"required",labelPosition:"labelPosition",informationText:"informationText",fieldSize:"fieldSize"},features:[e.qOj]}),j})()},3365:(Te,se,s)=>{"use strict";s.d(se,{I:()=>P});var e=s(5766),t=s(1272),l=s(6163),g=s(8664),m=s(2089),n=s(591),j=s(6435),Q=s(3075);const R=["toggleButton"],x=["dropdown"];let P=(()=>{class O extends e.l3{constructor(D,C){super(D,C),this._dropdownOnRight=!1,this.display$=new n.X(""),this._optionIndex=-1,this.layout=D.get(g.Pb)}get dropdownOnRight(){return this._dropdownOnRight}set dropdownOnRight(D){this._dropdownOnRight=(0,l.Iw)(D)}get optionIndex(){return this._optionIndex}set optionIndex(D){const C=this.allOptions;this.hasEmptyOption&&C.unshift(null),0!==C.length?(this._optionIndex=Math.max(0,Math.min(D,C.length-1)),this.focusOption(C[this._optionIndex])):this._optionIndex=-1}ngOnInit(){super.ngOnInit(),this.valueSub=this.formControl.valueChanges.subscribe(()=>this.updateDisplay())}onValueInitialized(){this.updateDisplay()}ngOnDestroy(){super.ngOnDestroy(),this.valueSub.unsubscribe()}updateDisplay(){this.display$.next((0,l.cS)(this.display)?this.getDisplay():this.display)}getFocusableControl(){return(this.toggleRef||{}).nativeElement}addOption(D){super.addOption(D);const C=this.selectedValues;!(0,l.cS)(C)&&C.findIndex(E=>(0,t.d)(D,E))>=0&&this.updateDisplay()}onShown(){this.layout.setFocusTrap(this.dropdownMenuId),this.addShortcut(m.L1,()=>this.close());const C=this.toggleRef.nativeElement.getBoundingClientRect(),E=window.innerHeight||document.documentElement.clientHeight;this.dropdown.dropup=C.bottom>E-100,setTimeout(()=>{const I=document.getElementById(this.dropdownMenuId);I.style.top="",I.style.minWidth=`${this.toggleRef.nativeElement.getBoundingClientRect().width}px`,I.style.visibility="visible"})}onHidden(){this.layout.setFocusTrap(null),this.clearShortcuts()}onDisabledChange(D){this.toggleRef&&this.toggleRef.nativeElement&&(this.toggleRef.nativeElement.disabled=D)}close(){this.dropdown.hide()}open(){this.dropdown.show()}get dropdownMenuId(){return`dropdown-menu-${this.id}`}focusOption(D){const E=document.getElementById(this.id+"_"+(D?D.value:""));E&&E.focus()}resolveStyle(D,C){return D.style+" level"+(C&&D.level||0)}}return O.\u0275fac=function(D){return new(D||O)(j.Y36(j.zs3),j.Y36(Q.gN))},O.\u0275dir=j.lG2({type:O,viewQuery:function(D,C){if(1&D&&(j.Gf(R,5),j.Gf(x,5)),2&D){let E;j.iGM(E=j.CRH())&&(C.toggleRef=E.first),j.iGM(E=j.CRH())&&(C.dropdown=E.first)}},inputs:{display:"display",dropdownOnRight:"dropdownOnRight"},features:[j.qOj]}),O})()},1321:(Te,se,s)=>{"use strict";s.d(se,{M:()=>D});var e=s(6435),t=s(3075),l=s(723),g=s(6163),m=s(8664),n=s(9808),j=s(195),Q=s(3455);const R=["checkbox"];function x(C,E){1&C&&e.GkF(0)}function P(C,E){if(1&C&&(e.TgZ(0,"label-value",2),e.YNc(1,x,1,0,"ng-container",3),e.qZA()),2&C){const I=e.oxw(),L=e.MAs(2);e.Q6J("formField",I.self)("informationText",I.informationText),e.xp6(1),e.Q6J("ngTemplateOutlet",L)}}const O=function(C,E){return{"custom-checkbox":C,"custom-switch":E}};function _(C,E){if(1&C){const I=e.EpF();e.TgZ(0,"div",4)(1,"input",5,6),e.NdJ("click",function(N){return e.CHM(I),e.oxw().onClick.emit(N)})("keyup.enter",function(N){e.CHM(I);const B=e.oxw();return B.toggle(),B.onClick.emit(N)}),e.qZA(),e.TgZ(3,"label",7),e._uU(4),e.qZA()(),e._UZ(5,"field-errors",8)}if(2&C){const I=e.oxw();e.Q6J("ngClass",e.WLB(8,O,!I.switch,I.switch)),e.xp6(1),e.Q6J("name",I.name)("id",I.id)("formControl",I.formControl)("checked",I.isTrue(I.value)),e.xp6(2),e.Q6J("for",I.id),e.xp6(1),e.Oqu(I.text),e.xp6(1),e.Q6J("control",I.formControl)}}let D=(()=>{class C extends l.T{constructor(I,L,N){super(I,L),this.layout=N,this.type="boolean",this.onClick=new e.vpe,this._switch=!1,this.labelPosition="sideForced"}get switch(){return this._switch}set switch(I){this._switch=(0,g.Iw)(I)}preprocessValue(I){const L=this.isTrue(I);return"boolean"===this.type?L:String(L)}onDisabledChange(I){this.checkbox&&this.checkbox.nativeElement&&(this.checkbox.nativeElement.disabled=I)}toggle(){const I=this.value,L=!0===I||"true"===I;this.value="boolean"===this.type?!L:String(!L)}isTrue(I){return!0===I||"true"===I}getFocusableControl(){return this.checkbox.nativeElement}getDisabledValue(){return this.text||(this.isTrue(this.value)?this.i18n.general.yes:this.i18n.general.no)}}return C.\u0275fac=function(I){return new(I||C)(e.Y36(e.zs3),e.Y36(t.gN,13),e.Y36(m.Pb))},C.\u0275cmp=e.Xpm({type:C,selectors:[["boolean-field"]],viewQuery:function(I,L){if(1&I&&e.Gf(R,5),2&I){let N;e.iGM(N=e.CRH())&&(L.checkbox=N.first)}},hostVars:2,hostBindings:function(I,L){2&I&&e.ekj("switch",L.switch)},inputs:{type:"type",text:"text",switch:"switch"},outputs:{onClick:"onClick"},features:[e._Bn([{provide:t.JU,useExisting:C,multi:!0}]),e.qOj],decls:3,vars:2,consts:[["labelPosition","sideForced","maximizeLabel","",3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],["labelPosition","sideForced","maximizeLabel","",3,"formField","informationText"],[4,"ngTemplateOutlet"],[1,"custom-control","d-flex","align-content-center","p-0",3,"ngClass"],["type","checkbox",1,"custom-control-input",3,"name","id","formControl","checked","click","keyup.enter"],["checkbox",""],[1,"custom-control-label",3,"for"],[3,"control"]],template:function(I,L){if(1&I&&(e.YNc(0,P,2,3,"label-value",0),e.YNc(1,_,6,11,"ng-template",null,1,e.W1O)),2&I){const N=e.MAs(2);e.Q6J("ngIf",L.label)("ngIfElse",N)}},directives:[n.O5,j.t,n.tP,n.mk,t.Wl,t.JJ,t.oH,Q.e],encapsulation:2,changeDetection:0}),C})()},9238:(Te,se,s)=>{"use strict";s.d(se,{S:()=>I});var e=s(3075),t=s(5766),l=s(6163),g=s(6435),m=s(9808),n=s(195),j=s(3455);function Q(L,N){1&L&&g.GkF(0)}function R(L,N){if(1&L&&(g.TgZ(0,"label-value",2),g.YNc(1,Q,1,0,"ng-container",3),g.qZA()),2&L){const B=g.oxw(),H=g.MAs(2);g.Q6J("formField",B.self)("informationText",B.informationText),g.xp6(1),g.Q6J("ngTemplateOutlet",H)}}const x=function(L){return{"mt-3":L}};function P(L,N){if(1&L&&(g.TgZ(0,"div",9),g._uU(1),g.qZA()),2&L){const B=g.oxw(),y=B.$implicit;g.Q6J("ngClass",g.VKq(2,x,!B.first)),g.xp6(1),g.Oqu(y.name)}}const O=function(L){return{"mt-1":L}};function _(L,N){if(1&L){const B=g.EpF();g.TgZ(0,"div",10,11),g.NdJ("click",function(y){const r=g.CHM(B).$implicit;return g.oxw(3).toggle(r.value),y.preventDefault(),y.stopPropagation()})("keydown.space",function(y){return y.preventDefault(),y.stopPropagation()})("keyup.enter",function(y){const r=g.CHM(B).$implicit;return g.oxw(3).toggle(r.value),y.preventDefault(),y.stopPropagation()}),g._UZ(2,"input",12),g.TgZ(3,"label",13),g._uU(4),g.qZA()()}if(2&L){const B=N.$implicit,H=N.first,y=g.oxw(),z=y.first,r=y.$implicit,d=g.oxw(2);g.Q6J("ngClass",g.VKq(8,O,!(z&&!r.name&&H)||d.horizontal)),g.xp6(2),g.Q6J("name",d.name)("id",d.id+"_"+B.value)("value",B.value)("checked",d.isSelected(B))("disabled",B.disabled),g.xp6(1),g.Q6J("for",d.id+"_"+B.value),g.xp6(1),g.hij(" ",B.text," ")}}const D=function(L,N){return{horizontal:L,"no-category":N}};function C(L,N){if(1&L&&(g.ynx(0),g.YNc(1,P,2,4,"div",6),g.TgZ(2,"div",7),g.YNc(3,_,5,10,"div",8),g.ALo(4,"async"),g.qZA(),g.BQk()),2&L){const B=N.$implicit,H=g.oxw(2);g.xp6(1),g.Q6J("ngIf",B.name),g.xp6(1),g.Q6J("ngClass",g.WLB(5,D,H.horizontal,B.name)),g.xp6(1),g.Q6J("ngForOf",g.lcZ(4,3,B.options))}}function E(L,N){if(1&L&&(g.YNc(0,C,5,8,"ng-container",4),g.ALo(1,"async"),g._UZ(2,"field-errors",5)),2&L){const B=g.oxw();g.Q6J("ngForOf",g.lcZ(1,2,B.categories)),g.xp6(2),g.Q6J("control",B.formControl)}}let I=(()=>{class L extends t.l3{constructor(B,H){super(B,H),this.classBlock=!0,this.classW100=!0,this._horizontal=!1,this.separator=null,this.masterValue=null}get horizontal(){return this._horizontal}set horizontal(B){this._horizontal=(0,l.Iw)(B)}toggle(B){const H=this.findOption(B);if(H&&H.disabled)return;let y=this.selectedValues;const z=y.indexOf(B);z>=0?B===this.masterValue?(y=[],this.allOptions.filter(r=>r.value!==this.masterValue).forEach(r=>r.disabled=!0)):y.splice(z,1):(y.push(B),B===this.masterValue&&this.allOptions.forEach(r=>r.disabled=!1)),this.setValue(null==this.separator?y:y.join(this.separator))}addOption(B){this.masterValue&&B.value!==this.masterValue&&(B.disabled=!this.isSelected(this.masterValue)),super.addOption(B)}preprocessValue(B){return(0,l.k)(B,this.separator)}getSelectedValues(){return(0,l.b_)(this.value,this.separator)}getFocusableControl(){return null}}return L.\u0275fac=function(B){return new(B||L)(g.Y36(g.zs3),g.Y36(e.gN,13))},L.\u0275cmp=g.Xpm({type:L,selectors:[["checkbox-group-field"]],hostVars:4,hostBindings:function(B,H){2&B&&g.ekj("d-block",H.classBlock)("w-100",H.classW100)},inputs:{horizontal:"horizontal",separator:"separator",masterValue:"masterValue"},features:[g._Bn([{provide:e.JU,useExisting:L,multi:!0},{provide:t.GY,useExisting:L}]),g.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[3,"control"],["class","font-weight-bold",3,"ngClass",4,"ngIf"],[1,"input-group-container",3,"ngClass"],["class","custom-control custom-checkbox d-inline-flex mr-3 align-content-center",3,"ngClass","click","keydown.space","keyup.enter",4,"ngFor","ngForOf"],[1,"font-weight-bold",3,"ngClass"],[1,"custom-control","custom-checkbox","d-inline-flex","mr-3","align-content-center",3,"ngClass","click","keydown.space","keyup.enter"],["check",""],["type","checkbox",1,"custom-control-input",3,"name","id","value","checked","disabled"],[1,"custom-control-label",3,"for"]],template:function(B,H){if(1&B&&(g.YNc(0,R,2,3,"label-value",0),g.YNc(1,E,3,4,"ng-template",null,1,g.W1O)),2&B){const y=g.MAs(2);g.Q6J("ngIf",H.label)("ngIfElse",y)}},directives:[m.O5,n.t,m.tP,m.sg,m.mk,j.e],pipes:[m.Ov],encapsulation:2,changeDetection:0}),L})()},3594:(Te,se,s)=>{"use strict";s.d(se,{Y:()=>R});var e=s(6435),t=s(7645),l=s(9808),g=s(867),m=s(70);function n(x,P){if(1&x&&e._UZ(0,"avatar",4),2&x){const O=e.oxw();e.Q6J("image",O.image)("icon",O.icon)}}function j(x,P){if(1&x){const O=e.EpF();e.TgZ(0,"a",5),e.NdJ("click",function(D){e.CHM(O);const C=e.oxw();return D.preventDefault(),C.close.emit(null)}),e._UZ(1,"icon",6),e.qZA()}if(2&x){const O=e.oxw();e.xp6(1),e.Q6J("icon",O.SvgIcon.X)}}const Q=["*"];let R=(()=>{class x extends t.k{constructor(O){super(O),this.classMaxWidth=!0,this.closeable=!0,this.close=new e.vpe}}return x.\u0275fac=function(O){return new(O||x)(e.Y36(e.zs3))},x.\u0275cmp=e.Xpm({type:x,selectors:[["chip"]],hostVars:4,hostBindings:function(O,_){2&O&&e.ekj("mw-100",_.classMaxWidth)("closeable",_.closeable)},inputs:{image:"image",icon:"icon",closeable:"closeable"},outputs:{close:"close"},features:[e.qOj],ngContentSelectors:Q,decls:5,vars:2,consts:[[1,"chip","d-flex","justify-content-center","align-items-center"],["size","small","ngClass","mr-2",3,"image","icon",4,"ngIf"],[1,"text-truncate","mw-100"],["class","close-link ml-2","href","#",3,"click",4,"ngIf"],["size","small","ngClass","mr-2",3,"image","icon"],["href","#",1,"close-link","ml-2",3,"click"],[3,"icon"]],template:function(O,_){1&O&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,n,1,2,"avatar",1),e.TgZ(2,"div",2),e.Hsn(3),e.qZA(),e.YNc(4,j,2,1,"a",3),e.qZA()),2&O&&(e.xp6(1),e.Q6J("ngIf",_.image||_.icon),e.xp6(3),e.Q6J("ngIf",_.closeable))},directives:[l.O5,g.A,l.mk,m.o],encapsulation:2,changeDetection:0}),x})()},244:(Te,se,s)=>{"use strict";s.d(se,{y:()=>ee});var e=s(6435),t=s(3075),l=(()=>{return(K=l||(l={})).APPROVED="approved",K.PENDING="pending",K.REJECTED="rejected",l;var K})(),g=s(6414),m=s(9843),n=s(8625),j=s(8796),Q=s(2039),R=s(6163),x=s(591),P=s(7224),O=s(3152),_=s(520),D=s(1352),C=s(8637),E=s(2198),I=s(4850),L=s(297);let N=(()=>{class K extends D.b{constructor(V,ue){super(V,ue)}dataForDeviceConfirmationApproval$Response(V,ue){const Ce=new C.c(this.rootUrl,K.DataForDeviceConfirmationApprovalPath,"get");return V&&Ce.query("deviceId",V.deviceId,{}),this.http.request(Ce.build({responseType:"json",accept:"application/json",context:ue})).pipe((0,E.h)(De=>De instanceof _.Zn),(0,I.U)(De=>De))}dataForDeviceConfirmationApproval(V,ue){return this.dataForDeviceConfirmationApproval$Response(V,ue).pipe((0,I.U)(Ce=>Ce.body))}createDeviceConfirmation$Response(V,ue){const Ce=new C.c(this.rootUrl,K.CreateDeviceConfirmationPath,"post");return V&&Ce.body(V.body,"application/json"),this.http.request(Ce.build({responseType:"text",accept:"text/plain",context:ue})).pipe((0,E.h)(De=>De instanceof _.Zn),(0,I.U)(De=>De))}createDeviceConfirmation(V,ue){return this.createDeviceConfirmation$Response(V,ue).pipe((0,I.U)(Ce=>Ce.body))}viewDeviceConfirmation$Response(V,ue){const Ce=new C.c(this.rootUrl,K.ViewDeviceConfirmationPath,"get");return V&&Ce.path("id",V.id,{}),this.http.request(Ce.build({responseType:"json",accept:"application/json",context:ue})).pipe((0,E.h)(De=>De instanceof _.Zn),(0,I.U)(De=>De))}viewDeviceConfirmation(V,ue){return this.viewDeviceConfirmation$Response(V,ue).pipe((0,I.U)(Ce=>Ce.body))}deleteDeviceConfirmation$Response(V,ue){const Ce=new C.c(this.rootUrl,K.DeleteDeviceConfirmationPath,"delete");return V&&Ce.path("id",V.id,{}),this.http.request(Ce.build({responseType:"text",accept:"*/*",context:ue})).pipe((0,E.h)(De=>De instanceof _.Zn),(0,I.U)(De=>De.clone({body:void 0})))}deleteDeviceConfirmation(V,ue){return this.deleteDeviceConfirmation$Response(V,ue).pipe((0,I.U)(Ce=>Ce.body))}approveDeviceConfirmation$Response(V,ue){const Ce=new C.c(this.rootUrl,K.ApproveDeviceConfirmationPath,"post");return V&&(Ce.path("id",V.id,{}),Ce.body(V.body,"application/json")),this.http.request(Ce.build({responseType:"text",accept:"*/*",context:ue})).pipe((0,E.h)(De=>De instanceof _.Zn),(0,I.U)(De=>De.clone({body:void 0})))}approveDeviceConfirmation(V,ue){return this.approveDeviceConfirmation$Response(V,ue).pipe((0,I.U)(Ce=>Ce.body))}rejectDeviceConfirmation$Response(V,ue){const Ce=new C.c(this.rootUrl,K.RejectDeviceConfirmationPath,"post");return V&&(Ce.path("id",V.id,{}),Ce.body(V.body,"application/json")),this.http.request(Ce.build({responseType:"text",accept:"*/*",context:ue})).pipe((0,E.h)(De=>De instanceof _.Zn),(0,I.U)(De=>De.clone({body:void 0})))}rejectDeviceConfirmation(V,ue){return this.rejectDeviceConfirmation$Response(V,ue).pipe((0,I.U)(Ce=>Ce.body))}getDeviceConfirmationQrCode$Response(V,ue){const Ce=new C.c(this.rootUrl,K.GetDeviceConfirmationQrCodePath,"get");return V&&(Ce.path("id",V.id,{}),Ce.query("size",V.size,{})),this.http.request(Ce.build({responseType:"blob",accept:"image/png",context:ue})).pipe((0,E.h)(De=>De instanceof _.Zn),(0,I.U)(De=>De))}getDeviceConfirmationQrCode(V,ue){return this.getDeviceConfirmationQrCode$Response(V,ue).pipe((0,I.U)(Ce=>Ce.body))}}return K.DataForDeviceConfirmationApprovalPath="/device-confirmations/data-for-approval",K.CreateDeviceConfirmationPath="/device-confirmations",K.ViewDeviceConfirmationPath="/device-confirmations/{id}",K.DeleteDeviceConfirmationPath="/device-confirmations/{id}",K.ApproveDeviceConfirmationPath="/device-confirmations/{id}/approve",K.RejectDeviceConfirmationPath="/device-confirmations/{id}/reject",K.GetDeviceConfirmationQrCodePath="/device-confirmations/{id}/qr-code",K.\u0275fac=function(V){return new(V||K)(e.LFG(L.p),e.LFG(_.eN))},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();var B=s(7247),H=s(8134),y=s(8664),z=s(9808),r=s(5350),d=s(5739),u=s(3812),h=s(70),M=s(4897),J=s(3728),ie=s(3317);const me=["passwordComponent"];function re(K,Ie){if(1&K&&(e.TgZ(0,"alert",7),e._uU(1),e.qZA()),2&K){const V=e.oxw();e.xp6(1),e.hij(" ",V.alertMessage," ")}}function _e(K,Ie){if(1&K&&(e.TgZ(0,"div",8),e._uU(1),e.ALo(2,"async"),e.qZA()),2&K){const V=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,V.confirmationMessage$),"\n")}}function te(K,Ie){if(1&K&&(e._UZ(0,"radio-group-field",13),e.ALo(1,"async")),2&K){const V=e.oxw(3);e.Q6J("formControl",V.credentialTypeControl)("label",V.i18n.password.confirmMode)("asColumn",e.lcZ(1,4,V.layout.ltsm$))("fieldOptions",V.credentialTypeOptions)}}function le(K,Ie){if(1&K&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&K){const V=Ie.ngIf;e.xp6(1),e.hij(" ",V," ")}}function q(K,Ie){1&K&&e.GkF(0)}function ve(K,Ie){if(1&K&&(e.TgZ(0,"div",18),e.YNc(1,q,1,0,"ng-container",19),e.qZA()),2&K){const V=e.oxw().ngIf,ue=e.oxw(3),Ce=e.MAs(6);e.Q6J("hidden",V!==ue.CredentialTypeEnum.DEVICE),e.xp6(1),e.Q6J("ngTemplateOutlet",Ce)}}function ce(K,Ie){1&K&&e.GkF(0)}function ye(K,Ie){if(1&K&&(e.TgZ(0,"div",18),e.YNc(1,ce,1,0,"ng-container",19),e.qZA()),2&K){const V=e.oxw().ngIf,ue=e.oxw(3),Ce=e.MAs(8);e.Q6J("hidden",V!==ue.CredentialTypeEnum.PASSWORD),e.xp6(1),e.Q6J("ngTemplateOutlet",Ce)}}function Se(K,Ie){1&K&&e.GkF(0)}function Ne(K,Ie){if(1&K&&(e.TgZ(0,"div",18),e.YNc(1,Se,1,0,"ng-container",19),e.qZA()),2&K){const V=e.oxw().ngIf,ue=e.oxw(3),Ce=e.MAs(10);e.Q6J("hidden",V!==ue.CredentialTypeEnum.TOTP),e.xp6(1),e.Q6J("ngTemplateOutlet",Ce)}}function Ze(K,Ie){if(1&K&&(e.TgZ(0,"div",14),e.YNc(1,le,2,1,"div",15),e.ALo(2,"async"),e.YNc(3,ve,2,2,"div",16),e.YNc(4,ye,2,2,"div",16),e.YNc(5,Ne,2,2,"div",16),e.qZA()),2&K){const V=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,V.confirmationMessage$)),e.xp6(2),e.Q6J("ngIf",V.passwordInput.activeCredentials.includes(V.CredentialTypeEnum.DEVICE)),e.xp6(1),e.Q6J("ngIf",V.passwordInput.activeCredentials.includes(V.CredentialTypeEnum.PASSWORD)),e.xp6(1),e.Q6J("ngIf",V.passwordInput.activeCredentials.includes(V.CredentialTypeEnum.TOTP))}}function Ue(K,Ie){if(1&K&&(e.ynx(0),e.TgZ(1,"div",10),e.YNc(2,te,2,6,"radio-group-field",11),e.qZA(),e.YNc(3,Ze,6,6,"div",12),e.ALo(4,"async"),e.BQk()),2&K){const V=e.oxw(2);e.xp6(2),e.Q6J("ngIf",(null==V.credentialTypeOptions?null:V.credentialTypeOptions.length)>1),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,2,V.credentialTypeControl.valueChanges)||V.credentialTypeControl.value)}}function fe(K,Ie){if(1&K&&(e.ynx(0),e.YNc(1,Ue,5,4,"ng-container",2),e.TgZ(2,"div",9),e.Hsn(3),e.qZA(),e.BQk()),2&K){const V=e.oxw();e.xp6(1),e.Q6J("ngIf",null==V.passwordInput||null==V.passwordInput.allowedCredentials?null:V.passwordInput.allowedCredentials.length)}}function Pe(K,Ie){1&K&&e._UZ(0,"spinner")}const ne=function(K){return{rejected:K}};function Oe(K,Ie){if(1&K&&(e._UZ(0,"img",23),e.ALo(1,"trust"),e.ALo(2,"async")),2&K){const V=Ie.ngIf,ue=e.oxw(2);e.Q6J("src",e.xi3(1,2,V,"url"),e.LSH)("ngClass",e.VKq(7,ne,e.lcZ(2,5,ue.rejected$)))}}function Ee(K,Ie){if(1&K){const V=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(V),e.oxw(2).newQR()}),e._UZ(1,"icon",25),e.qZA()}if(2&K){const V=e.oxw(2);e.xp6(1),e.Q6J("icon",V.SvgIcon.ArrowCounterclockwise)}}function Me(K,Ie){if(1&K&&(e.TgZ(0,"div",20),e.YNc(1,Oe,3,9,"img",21),e.ALo(2,"async"),e.YNc(3,Ee,2,1,"button",22),e.ALo(4,"async"),e.qZA()),2&K){const V=e.oxw(),ue=e.MAs(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,V.currentUrl$))("ngIfElse",ue),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,5,V.rejected$))}}const w=function(K){return{"d-block":K}};function F(K,Ie){if(1&K){const V=e.EpF();e.TgZ(0,"password-input",26,27),e.NdJ("enter",function(){return e.CHM(V),e.oxw().confirmWithKeyboard()}),e.qZA()}if(2&K){const V=e.oxw();e.Q6J("ngClass",e.VKq(7,w,V.passwordInput.inputMethod===V.PasswordInputMethodEnum.VIRTUAL_KEYBOARD))("passwordInput",V.passwordInput)("showIcon",!1)("formControl",V.formControl)("placeholder",V.confirmPasswordPlaceholder)("pos",V.pos)("paymentPreview",V.paymentPreview)}}function a(K,Ie){if(1&K&&e._UZ(0,"input-field",28),2&K){const V=e.oxw();e.Q6J("formControl",V.totpControl)("maxLength",6)}}const v=["*"];let ee=(()=>{class K extends Q.C{constructor(V,ue,Ce,De,he,Fe,k){super(V,ue),this.posService=Ce,this.deviceConfirmationsService=De,this.pushNotifications=he,this.authHelper=Fe,this.layout=k,this.PasswordInputMethodEnum=g.m,this.CredentialTypeEnum=m.w,this.showSubmit=new e.vpe,this.confirmed=new e.vpe,this.createDeviceConfirmationError=new e.vpe,this.confirmationMessage$=new x.X(null),this.totpControl=new t.NI,this.currentUrl$=new x.X(null),this.rejected$=new x.X(!1)}ngOnInit(){super.ngOnInit(),this.canConfirm=this.authHelper.canConfirm(this.passwordInput),this.allowDevice=this.authHelper.canConfirm(this.passwordInput,m.w.DEVICE),this.allowTotp=this.authHelper.canConfirm(this.passwordInput,m.w.TOTP),this.allowPassword=this.authHelper.canConfirm(this.passwordInput,m.w.PASSWORD),this.updateConfirmationMessage(null);const V=this.authHelper.initialCredentialType(this.passwordInput);V==m.w.DEVICE&&this.newQR(),this.credentialTypeControl=new t.NI(V),this.passwordInput.allowedCredentials.length>1&&(this.credentialTypeOptions=this.passwordInput.allowedCredentials.map(ue=>({value:ue,text:this.authHelper.credentialTypeLabel(this.passwordInput,ue),disabled:!this.passwordInput.activeCredentials.includes(ue)}))),this.addSub(this.credentialTypeControl.valueChanges.subscribe(ue=>{ue===m.w.DEVICE&&!this.deviceConfirmationId&&this.newQR(),this.formControl.setValue(null),this.updateConfirmationMessage(ue),this.emitShowSubmit(ue)})),this.addSub(this.pushNotifications.deviceConfirmations$.subscribe(ue=>this.onDeviceConfirmation(ue))),this.addSub(this.totpControl.valueChanges.subscribe(ue=>{ue=(ue||"").trim(),this.formControl.setValue(ue.length?`totp:${ue}`:"")})),setTimeout(()=>{this.updateConfirmationMessage(V),this.emitShowSubmit(V)})}emitShowSubmit(V){this.showSubmit.emit(this.authHelper.showSubmit(this.passwordInput,V,this.otpSent))}ngOnDestroy(){super.ngOnDestroy(),this.revokeCurrent()}ngAfterViewInit(){null==this.otpSubscription&&this.passwordComponent&&(this.otpSubscription=this.passwordComponent.otpSent.subscribe(()=>{this.passwordInput.passwordType.allowReuseOtp&&(this.passwordInput.hasReusableOtp=!0),this.otpSent=!0,this.showSubmit.emit(this.authHelper.showSubmit(this.passwordInput,m.w.PASSWORD,!0)),this.updateConfirmationMessage(m.w.PASSWORD)}))}get confirmPasswordPlaceholder(){var V;return this.i18n.password.confirmPasswordPlaceholder(null===(V=this.passwordInput.passwordType)||void 0===V?void 0:V.name)}get activePassword(){var V;return null===(V=this.passwordInput.activeCredentials)||void 0===V?void 0:V.includes(m.w.PASSWORD)}get hasOtpSendMediums(){var V,ue;return(null===(ue=null===(V=this.passwordInput)||void 0===V?void 0:V.passwordType)||void 0===ue?void 0:ue.mode)===n.Y.OTP&&!(0,R.cS)(this.passwordInput.otpSendMediums)}onDisabledChange(V){this.passwordComponent&&(this.passwordComponent.disabled=V)}validate(V){return this.credentialTypeControl.value===m.w.PASSWORD&&this.passwordComponent?this.passwordComponent.validate(V):null}registerOnValidatorChange(){}focus(){this.passwordComponent&&this.passwordComponent.focus()}confirmWithKeyboard(){const V=this.value;(0,R.cS)(V)||this.confirmed.emit(V)}newQR(){let V;this.rejected$.next(!1),V=this.pos?this.posService.receivePaymentCreateDeviceConfirmation({body:this.createDeviceConfirmation()}):this.deviceConfirmationsService.createDeviceConfirmation({body:this.createDeviceConfirmation()}),V.pipe((0,P.P)()).subscribe(ue=>{let Ce;if(this.deviceConfirmationId=ue,this.pos){const De=this.createDeviceConfirmation();Ce=this.posService.receivePaymentDeviceConfirmationQrCode({id:ue,payer:De.subject,size:j.r.MEDIUM})}else Ce=this.deviceConfirmationsService.getDeviceConfirmationQrCode({id:ue,size:j.r.MEDIUM});Ce.pipe((0,P.P)()).subscribe(De=>{this.revokeCurrent(),this.currentUrl$.next(URL.createObjectURL(De))})},ue=>{this.createDeviceConfirmationError.emit(ue)})}revokeCurrent(){const V=this.currentUrl$.value;V&&(URL.revokeObjectURL(V),this.currentUrl$.next(null))}onDeviceConfirmation(V){if((V||{}).id===this.deviceConfirmationId)switch(V.status){case l.APPROVED:this.confirmed.emit(`confirmation:${V.id}`);break;case l.REJECTED:this.deviceConfirmationId=null,this.rejected$.next(!0)}}updateConfirmationMessage(V){this.confirmationMessage$.next(this.authHelper.getConfirmationMessage(this.passwordInput,V,this.pos))}}return K.\u0275fac=function(V){return new(V||K)(e.Y36(e.zs3),e.Y36(t.gN,13),e.Y36(O.J),e.Y36(N),e.Y36(B.Z),e.Y36(H.N),e.Y36(y.Pb))},K.\u0275cmp=e.Xpm({type:K,selectors:[["confirmation-password"]],viewQuery:function(V,ue){if(1&V&&e.Gf(me,5),2&V){let Ce;e.iGM(Ce=e.CRH())&&(ue.passwordComponent=Ce.first)}},inputs:{paymentPreview:"paymentPreview",pos:"pos",passwordInput:"passwordInput",createDeviceConfirmation:"createDeviceConfirmation",alertMessage:"alertMessage"},outputs:{showSubmit:"showSubmit",confirmed:"confirmed",createDeviceConfirmationError:"createDeviceConfirmationError"},features:[e._Bn([{provide:t.JU,useExisting:K,multi:!0},{provide:t.Cf,useExisting:K,multi:!0}]),e.qOj],ngContentSelectors:v,decls:11,vars:3,consts:[["type","info",4,"ngIf"],["class","pt-2 mb-3 text-center font-weight-bold",4,"ngIf"],[4,"ngIf"],["loading",""],["withDevice",""],["withPassword",""],["withTotp",""],["type","info"],[1,"pt-2","mb-3","text-center","font-weight-bold"],[1,"mt-2"],[1,"mb-3","flex-nowrap"],["labelPosition","side",3,"formControl","label","asColumn","fieldOptions",4,"ngIf"],["class","confirmation-fields",4,"ngIf"],["labelPosition","side",3,"formControl","label","asColumn","fieldOptions"],[1,"confirmation-fields"],["class","text-center mb-3",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"text-center","mb-3"],[3,"hidden"],[4,"ngTemplateOutlet"],[1,"qr-container"],["alt","QR-code","class","mw-100",3,"src","ngClass",4,"ngIf","ngIfElse"],["type","button","class","button button-icon",3,"click",4,"ngIf"],["alt","QR-code",1,"mw-100",3,"src","ngClass"],["type","button",1,"button","button-icon",3,"click"],[3,"icon"],["disableAutocomplete","",3,"ngClass","passwordInput","showIcon","formControl","placeholder","pos","paymentPreview","enter"],["passwordComponent",""],["required","","type","password","autocomplete","new-password",3,"formControl","maxLength"]],template:function(V,ue){1&V&&(e.F$t(),e.YNc(0,re,2,1,"alert",0),e.YNc(1,_e,3,3,"div",1),e.YNc(2,fe,4,1,"ng-container",2),e.YNc(3,Pe,1,0,"ng-template",null,3,e.W1O),e.YNc(5,Me,5,7,"ng-template",null,4,e.W1O),e.YNc(7,F,2,9,"ng-template",null,5,e.W1O),e.YNc(9,a,1,2,"ng-template",null,6,e.W1O)),2&V&&(e.Q6J("ngIf",ue.alertMessage),e.xp6(1),e.Q6J("ngIf",!ue.canConfirm),e.xp6(1),e.Q6J("ngIf",ue.canConfirm))},directives:[z.O5,r.wx,d.Y,t.JJ,t.oH,z.tP,u.O,z.mk,h.o,M.C,J.q,t.Q7],pipes:[z.Ov,ie.a],encapsulation:2,changeDetection:0}),K})()},1602:(Te,se,s)=>{"use strict";s.d(se,{G:()=>cn});var e=s(6435),t=s(3075),l=s(7610),g=s(2342),m=s(7279),n=s(7e3),j=s(723),Q=s(6163),R=s(976),x=s(1375),P=s(7224),O=s(9175),_=s(5905),D=s(9808),C=s(195),E=s(1873),I=s(5739),L=s(7816),N=s(3728),B=s(9998),H=s(6736),y=s(1030),z=s(6974),r=s(1321),d=s(2479),u=s(8170),h=s(5255),M=s(9238),J=s(5910),ie=s(4167),me=s(7947),re=s(3531),_e=s(70),te=s(6903),le=s(1556);function q(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7)(4,"button",8),e.NdJ("click",function(){const ke=e.CHM(p).$implicit;return e.oxw().remove(ke)}),e._UZ(5,"icon",9),e.qZA()()()}if(2&G){const p=xe.$implicit,oe=e.oxw();e.xp6(2),e.hij(" ",p.name," "),e.xp6(3),e.Q6J("icon",oe.SvgIcon.X)}}class ve{constructor(xe,p){this.order=xe,this.removedFiles=p}}let ce=(()=>{class G extends me.H{constructor(p,oe){super(p),this.modalRef=oe,this.result=new e.vpe}ngOnInit(){super.ngOnInit(),this.originalOrder=this.files.map(p=>p.id)}remove(p){this.removedIds=[p.id,...this.removedIds||[]],this.originalOrder=this.originalOrder.filter(oe=>oe!==p.id),this.files=this.files.filter(oe=>oe!=p)}ok(){let p=null;const oe=this.files.map(ae=>ae.id);(0,re.Z)(oe,this.originalOrder)||(p=oe),this.result.emit(new ve(p,this.removedIds))}drop(p){this.files=[...this.files],(0,ie.bA)(this.files,p.previousIndex,p.currentIndex)}}return G.\u0275fac=function(p){return new(p||G)(e.Y36(e.zs3),e.Y36(_.UZ))},G.\u0275cmp=e.Xpm({type:G,selectors:[["manage-files"]],inputs:{files:"files"},outputs:{result:"result"},features:[e.qOj],decls:9,vars:5,consts:[[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","class","d-flex justify-items-center mb-2 cursor-move",4,"ngFor","ngForOf"],[3,"label","action"],["outline","",3,"label","action"],["cdkDrag","",1,"d-flex","justify-items-center","mb-2","cursor-move"],[1,"flex-grow-1","d-flex","align-items-center","text-truncate"],[1,"ml-2"],["type","button",1,"btn","btn-icon",3,"click"],[3,"icon"]],template:function(p,oe){1&p&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"div",0),e._uU(3),e.qZA(),e.TgZ(4,"div",1),e.NdJ("cdkDropListDropped",function(ke){return oe.drop(ke)}),e.YNc(5,q,6,2,"div",2),e.qZA(),e.TgZ(6,"actions")(7,"action-button",3),e.NdJ("action",function(){return oe.ok()}),e.qZA(),e.TgZ(8,"action-button",4),e.NdJ("action",function(){return oe.modalRef.hide()}),e.qZA()()),2&p&&(e.xp6(1),e.Oqu(oe.i18n.field.file.manage),e.xp6(2),e.Oqu(oe.i18n.field.file.manageMessage),e.xp6(2),e.Q6J("ngForOf",oe.files),e.xp6(2),e.Q6J("label",oe.i18n.general.confirm),e.xp6(1),e.Q6J("label",oe.i18n.general.cancel))},directives:[ie.Wj,D.sg,ie.Zt,_e.o,te.h,le.x],encapsulation:2,changeDetection:0}),G})();var ye=s(5857),Se=s.n(ye),Ne=s(2986),Ze=s(543),Ue=s(8664),fe=s(5204),Pe=s(9115),ne=s(9564),Oe=s(8397),Ee=s(520),Me=s(7965),w=s(591),F=s(567),a=s(2916),v=s(297),ee=s(8134),K=s(1217);const Ie=["inputField"];function V(G,xe){if(1&G&&(e.ynx(0),e.TgZ(1,"progressbar",5),e.ALo(2,"async"),e._uU(3),e.qZA(),e.BQk()),2&G){const p=xe.$implicit;e.xp6(1),e.Q6J("max",p.totalSize)("value",e.lcZ(2,3,p.progress$)),e.xp6(2),e.hij(" ",p.name," ")}}function ue(G,xe){if(1&G&&(e.TgZ(0,"div",3),e.YNc(1,V,4,5,"ng-container",4),e.qZA()),2&G){const p=e.oxw();e.Q6J("ngClass",p.containerClass),e.xp6(1),e.Q6J("ngForOf",p.files)}}class Ce{constructor(xe){this.progress$=new w.X(0),this.uploadDone=!1,this._file=xe}get name(){return this._file?this._file.name:null}get totalSize(){return this._file?this._file.size:0}get progress(){return this.progress$.value}set progress(xe){this.progress$.next(xe)}get file(){return this._file}}let De=(()=>{class G extends me.H{constructor(p,oe,ae,ke,Le,Ve,Ke){super(p),this.http=oe,this.filesService=ae,this.apiConfiguration=ke,this.changeDetector=Le,this.authHelper=Ve,this.storedFileCacheService=Ke,this.uploading$=new w.X(!1),this.containerClass="",this.max=1,this.uploadDone=new e.vpe}get mimeTypes(){return(this.accept||"").split(",").map(p=>p.trim())}set mimeTypes(p){this.accept=(0,Q.cS)(p)?null:p.join()}perform(){this.uploading$.value||this.inputField.nativeElement.click()}filesSelected(p){if(0===p.length)return;this.uploading$.next(!0);const oe=[];this.files=[];const ae=Math.min(this.max,p.length),ke=[],Le=this.dataForFrontendHolder.dataForUi.maxUploadSize||Number.MAX_SAFE_INTEGER;for(let Ve=0;Ve<ae;Ve++){const Ke=p.item(Ve);if(Ke.size>Le)ke.push(Ke);else{const dt=new Ce(Ke);this.files.push(dt),oe.push(this.doUpload(dt))}}ke.length>0&&this.errorHandler.handleInputError({code:Me.G.FILE_UPLOAD_SIZE,maxFileSize:Le}),0!==oe.length&&(this.subscription=(0,F.D)(oe).subscribe(Ve=>{this.inputField.nativeElement.value=null,this.subscription.unsubscribe(),this.files=[],this.uploading$.next(!1),this.uploadDone.emit(Ve),this.changeDetector.detectChanges()}))}doUpload(p){return new a.y(oe=>{const ae=(0,Q.e5)(this.apiConfiguration.rootUrl,"files","temp"),ke=new FormData;ke.append("file",p.file,p.name),p.subscription=this.http.post(ae,ke,{observe:"events",reportProgress:!0,responseType:"text",params:{guestKey:this.authHelper.guestKey,customField:null==this.customField?null:this.customField.id,customFieldKind:null==this.customField?null:this.customField.kind}}).subscribe(Le=>{Le.type===Ee.dt.UploadProgress?p.progress=Le.loaded:Le.type===Ee.dt.Response&&(p.subscription.unsubscribe(),p.uploadDone=!0,this.addSub(this.filesService.viewRawFile({id:Le.body}).subscribe(Ve=>{p.storedFile=Ve,this.storedFileCacheService.write(Ve),oe.next(Ve),oe.complete(),this.changeDetector.detectChanges()})))},Le=>{this.files.forEach(Ve=>{Ve.subscription&&Ve.subscription.unsubscribe()}),this.files=[],this.uploading$.next(!1),oe.error(Le),oe.complete(),this.changeDetector.detectChanges()})})}}return G.\u0275fac=function(p){return new(p||G)(e.Y36(e.zs3),e.Y36(Ee.eN),e.Y36(Pe.n),e.Y36(v.p),e.Y36(e.sBO),e.Y36(ee.N),e.Y36(ne.d))},G.\u0275cmp=e.Xpm({type:G,selectors:[["temp-file-upload"]],viewQuery:function(p,oe){if(1&p&&e.Gf(Ie,7),2&p){let ae;e.iGM(ae=e.CRH())&&(oe.inputField=ae.first)}},inputs:{containerClass:"containerClass",max:"max",customField:"customField",mimeTypes:"mimeTypes"},outputs:{uploadDone:"uploadDone"},features:[e.qOj],decls:3,vars:3,consts:[["type","file",1,"d-none",3,"accept","multiple","change"],["inputField",""],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],[1,"mt-1",3,"max","value"]],template:function(p,oe){if(1&p){const ae=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(){e.CHM(ae);const Le=e.MAs(1);return oe.filesSelected(Le.files)}),e.qZA(),e.YNc(2,ue,2,2,"div",2)}2&p&&(e.Q6J("accept",oe.accept)("multiple",oe.max>1),e.xp6(2),e.Q6J("ngIf",(null==oe.files?null:oe.files.length)>0))},directives:[D.O5,D.mk,D.sg,K.O1],pipes:[D.Ov],encapsulation:2,changeDetection:0}),G})();var he=s(3455);const Fe=["focusHolder"];function k(G,xe){1&G&&e.GkF(0)}function de(G,xe){if(1&G&&(e.TgZ(0,"label-value",2),e.YNc(1,k,1,0,"ng-container",3),e.qZA()),2&G){const p=e.oxw(),oe=e.MAs(2);e.Q6J("formField",p.self)("informationText",p.informationText),e.xp6(1),e.Q6J("ngTemplateOutlet",oe)}}function we(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"div",15)(1,"a",16),e.NdJ("click",function(ae){const Le=e.CHM(p).$implicit;return e.oxw(2).downloadFile(ae,Le)}),e._uU(2),e.qZA(),e._uU(3),e.qZA()}if(2&G){const p=xe.$implicit,oe=xe.last,ae=e.oxw(2);e.xp6(1),e.Q6J("href",ae.appendAuth(p.url),e.LSH)("type",p.contentType)("download",p.name),e.xp6(1),e.Oqu(p.name),e.xp6(1),e.hij("",oe?"":",\xa0"," ")}}function Be(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(p),e.oxw(),e.MAs(11).perform()}),e._UZ(1,"icon",18),e.qZA()}if(2&G){const p=e.oxw(2);e.Q6J("tooltip",p.i18n.field.file.upload),e.xp6(1),e.Q6J("icon",p.SvgIcon.Upload)}}function Ye(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(p),e.oxw(2).manageFiles()}),e._UZ(1,"icon",18),e.qZA()}if(2&G){const p=e.oxw(2);e.Q6J("tooltip",p.i18n.field.file.manage),e.xp6(1),e.Q6J("icon",p.SvgIcon.Pencil)}}function qe(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(p),e.oxw(2).removeAllFiles()}),e._UZ(1,"icon",18),e.qZA()}if(2&G){const p=e.oxw(2);e.Q6J("tooltip",p.i18n.field.file.remove),e.xp6(1),e.Q6J("icon",p.SvgIcon.Trash)}}const tt=function(G){return{"is-invalid":G}};function gt(G,xe){if(1&G){const p=e.EpF();e._UZ(0,"div",4,5),e.ALo(2,"async"),e.TgZ(3,"div",6)(4,"div",7),e.YNc(5,we,4,5,"div",8),e.qZA(),e.TgZ(6,"div",9),e.YNc(7,Be,2,2,"button",10),e.YNc(8,Ye,2,2,"button",11),e.YNc(9,qe,2,2,"button",11),e.qZA()(),e.TgZ(10,"temp-file-upload",12,13),e.NdJ("uploadDone",function(ae){return e.CHM(p),e.oxw().onFilesUploaded(ae)}),e.qZA(),e._UZ(12,"field-errors",14)}if(2&G){const p=e.oxw();e.Q6J("ngClass",e.VKq(11,tt,"INVALID"===e.lcZ(2,9,p.formControl.statusChanges)&&p.formControl.touched)),e.xp6(5),e.Q6J("ngForOf",p.files),e.xp6(2),e.Q6J("ngIf",1===p.maxFiles||p.files.length<p.maxFiles),e.xp6(1),e.Q6J("ngIf",p.maxFiles>1&&p.files.length>0),e.xp6(1),e.Q6J("ngIf",1===p.maxFiles&&p.files.length>0),e.xp6(1),e.Q6J("max",1==p.maxFiles?1:p.maxFiles-p.files.length)("customField",p.customField)("mimeTypes",p.mimeTypes),e.xp6(2),e.Q6J("control",p.formControl)}}let ft=(()=>{class G extends j.T{constructor(p,oe,ae,ke,Le,Ve,Ke,dt,bt){super(p,oe),this.nextRequestState=ae,this.layout=ke,this.errorHandler=Le,this.filesService=Ve,this.changeDetector=Ke,this.modal=dt,this.storedFileCacheService=bt,this.maxFiles=1,this.separator=null,this.mimeTypes=["*/*"],this.upload=new e.vpe}preprocessValue(p){return(0,Q.k)(p,this.separator)}ngOnInit(){super.ngOnInit(),this.files=null==this.initialFiles?[]:this.initialFiles instanceof Array?this.initialFiles:[this.initialFiles],this.uploadedFiles=[]}get fileIds(){return(0,Q.b_)(this.value,this.separator)}getDisabledValue(){return this.fileIds.map(p=>{const oe=this.files.find(ae=>ae.id===p);return null==oe?null:oe.name}).filter(p=>null!=p).join(", ")}onFilesUploaded(p){1===this.maxFiles&&this.removeAllFiles();const oe=this.fileIds;p.forEach(ae=>oe.push(ae.id)),this.value=oe,this.uploadedFiles=[...p,...this.uploadedFiles],this.files=[...this.files,...p],this.formControl.markAsTouched(),this.upload.emit(p)}manageFiles(){const p=this.modal.show(ce,{class:"modal-form",initialState:{files:this.files}});this.addSub(p.content.result.pipe((0,Ne.q)(1)).subscribe(ae=>{let ke=this.fileIds;(0,Q.cS)(ae.order)||(ke=ae.order),(0,Q.cS)(ae.removedFiles)||(this.uploadedFiles.filter(Le=>ae.removedFiles.includes(Le.id)).forEach(Le=>this.addSub(this.filesService.deleteRawFile({id:Le.id}).subscribe())),this.files=this.files.filter(Le=>!ae.removedFiles.includes(Le.id)),this.uploadedFiles=this.uploadedFiles.filter(Le=>!ae.removedFiles.includes(Le.id)),ke=ke.filter(Le=>!ae.removedFiles.includes(Le)),ae.removedFiles.forEach(Le=>this.storedFileCacheService.delete(Le))),this.files=ke.map(Le=>this.files.find(Ve=>Ve.id===Le)),this.value=ke,p.hide(),this.notifyTouched()}))}removeAllFiles(){this.uploadedFiles.forEach(p=>{this.errorHandler.requestWithCustomErrorHandler(()=>{this.addSub(this.filesService.deleteRawFile({id:p.id}).subscribe())})}),this.files.forEach(p=>this.storedFileCacheService.delete(p.id)),this.files=[],this.value=[],this.notifyTouched()}onValueInitialized(p){this.fileIds.map(oe=>this.storedFileCacheService.read(oe)).filter(oe=>oe).forEach(oe=>this.files.push(oe))}notifyTouched(){super.notifyTouched(),this.changeDetector.detectChanges()}getFocusableControl(){return this.focusHolder.nativeElement}appendAuth(p){return this.nextRequestState.appendAuth(p)}downloadFile(p,oe){this.addSub(this.filesService.getRawFileContent({id:oe.id}).subscribe(ae=>{Se()(ae,oe.name,oe.contentType)})),p.stopPropagation(),p.preventDefault()}}return G.\u0275fac=function(p){return new(p||G)(e.Y36(e.zs3),e.Y36(t.gN,13),e.Y36(Ze.AM),e.Y36(Ue.Pb),e.Y36(fe.q),e.Y36(Pe.n),e.Y36(e.sBO),e.Y36(_.tT),e.Y36(ne.d))},G.\u0275cmp=e.Xpm({type:G,selectors:[["files-field"]],viewQuery:function(p,oe){if(1&p&&e.Gf(Fe,5),2&p){let ae;e.iGM(ae=e.CRH())&&(oe.focusHolder=ae.first)}},inputs:{maxFiles:"maxFiles",separator:"separator",initialFiles:"initialFiles",customField:"customField",mimeTypes:"mimeTypes"},outputs:{upload:"upload"},features:[e._Bn([{provide:t.JU,useExisting:G,multi:!0}]),e.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],["tabindex","0",2,"width","0","height","0",3,"ngClass"],["focusHolder",""],[1,"d-flex","flex-column","flex-xs-row","w-100"],[1,"d-flex","flex-grow-1","flex-wrap","align-items-center","mb-2","mb-xs-0","mr-2"],["class","file-item",4,"ngFor","ngForOf"],[1,"d-flex"],["type","button","class","btn btn-icon d-flex align-content-center",3,"tooltip","click",4,"ngIf"],["type","button","class","ml-2 btn btn-icon d-flex align-content-center",3,"tooltip","click",4,"ngIf"],["containerClass","mt-3",3,"max","customField","mimeTypes","uploadDone"],["fileUpload",""],[3,"control"],[1,"file-item"],["target","_blank",3,"href","type","download","click"],["type","button",1,"btn","btn-icon","d-flex","align-content-center",3,"tooltip","click"],[3,"icon"],["type","button",1,"ml-2","btn","btn-icon","d-flex","align-content-center",3,"tooltip","click"]],template:function(p,oe){if(1&p&&(e.YNc(0,de,2,3,"label-value",0),e.YNc(1,gt,13,13,"ng-template",null,1,e.W1O)),2&p){const ae=e.MAs(2);e.Q6J("ngIf",oe.label)("ngIfElse",ae)}},directives:[D.O5,C.t,D.tP,D.mk,D.sg,Oe.i9,_e.o,De,he.e],pipes:[D.Ov],encapsulation:2}),G})();var _t=s(8747);const vt=["inputField"],Ct=["textareaField"],xt=["richTextField"],ct=["dateField"],nt=["decimalField"],et=["booleanField"],He=["singleSelectionField"],it=["multiSelectionField"],yt=["checkboxGroupField"],W=["radioGroupField"],ge=["imagesField"],T=["filesField"],U=["userField"],X=function(G){return[G]};function Ae(G,xe){if(1&G&&(e.TgZ(0,"label-value",5),e._UZ(1,"format-field-value",6),e.qZA()),2&G){const p=e.oxw();e.Q6J("label",p.field.name)("labelPosition",p.labelPosition)("informationText",p.getInformationText()),e.xp6(1),e.Q6J("fields",e.VKq(8,X,p.field))("object",p.disabledValueObject)("fieldName",p.field.internalName)("files",null==p.binaryValues?null:p.binaryValues.fileValues[p.field.internalName])("images",null==p.binaryValues?null:p.binaryValues.imageValues[p.field.internalName])}}function Qe(G,xe){if(1&G&&e._UZ(0,"radio-group-field",9,10),2&G){const p=e.oxw(3);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("fieldOptions",p.fieldOptions)("informationText",p.getInformationText())}}function je(G,xe){if(1&G&&(e.ynx(0),e.YNc(1,Qe,2,9,"radio-group-field",8),e.BQk()),2&G){const p=e.oxw(2),oe=e.MAs(5);e.xp6(1),e.Q6J("ngIf","radio"==p.control)("ngIfElse",oe)}}function $e(G,xe){if(1&G&&e.YNc(0,je,2,2,"ng-container",7),2&G){const p=e.oxw(),oe=e.MAs(7);e.Q6J("ngIf",p.hasValuesList)("ngIfElse",oe)}}function Xe(G,xe){if(1&G&&e._UZ(0,"single-selection-field",11,12),2&G){const p=e.oxw();e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("fieldOptions",p.fieldOptions)("informationText",p.getInformationText())}}function ot(G,xe){if(1&G&&e._UZ(0,"input-field",26,27),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("autocomplete",p.autocomplete)("type","integer"===p.type?"tel":"text")("mask",p.field.pattern)("placeholder",p.field.pattern||"")("informationText",p.getInformationText())}}function Vt(G,xe){if(1&G&&(e.TgZ(0,"label-value",29),e.GkF(1,30),e.qZA()),2&G){const p=e.oxw(3),oe=e.MAs(9);e.Q6J("label",p.label)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("informationText",p.getInformationText())("required",p.required),e.xp6(1),e.Q6J("ngTemplateOutlet",oe)}}function Ht(G,xe){if(1&G&&(e.ynx(0),e.YNc(1,Vt,2,6,"label-value",28),e.BQk()),2&G){const p=e.oxw(2),oe=e.MAs(9);e.xp6(1),e.Q6J("ngIf",p.label)("ngIfElse",oe)}}function Jt(G,xe){if(1&G&&e._UZ(0,"url-field",31,32),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("autocomplete",p.autocomplete)("informationText",p.getInformationText())}}function Qt(G,xe){if(1&G&&e._UZ(0,"textarea-field",33,34),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("informationText",p.getInformationText())}}function Yt(G,xe){if(1&G&&e._UZ(0,"html-field",33,35),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("informationText",p.getInformationText())}}function Wt(G,xe){if(1&G&&e._UZ(0,"boolean-field",36,37),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("informationText",p.getInformationText())}}function Gt(G,xe){if(1&G&&e._UZ(0,"decimal-field",38,39),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("scale",p.field.decimalDigits)("informationText",p.getInformationText())}}function Kt(G,xe){if(1&G&&e._UZ(0,"date-field",40,41),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("informationText",p.getInformationText())}}function $t(G,xe){if(1&G&&e._UZ(0,"single-selection-field",11,12),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("fieldOptions",p.fieldOptions)("informationText",p.getInformationText())}}function jt(G,xe){if(1&G&&e._UZ(0,"radio-group-field",9,10),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("fieldOptions",p.fieldOptions)("informationText",p.getInformationText())}}function Xt(G,xe){if(1&G&&e._UZ(0,"multi-selection-field",42,43),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("separator",p.ApiHelper.VALUE_SEPARATOR)("fieldOptions",p.fieldOptions)("informationText",p.getInformationText())}}function qt(G,xe){if(1&G&&e._UZ(0,"checkbox-group-field",42,44),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("separator",p.ApiHelper.VALUE_SEPARATOR)("fieldOptions",p.fieldOptions)("informationText",p.getInformationText())}}function en(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"images-field",45,46),e.NdJ("upload",function(ae){return e.CHM(p),e.oxw(2).imagesUploaded.emit(ae)}),e.qZA()}if(2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("initialImages",null==p.binaryValues?null:p.binaryValues.imageValues[p.field.internalName])("customField",p.field)("separator",p.ApiHelper.VALUE_SEPARATOR)("maxFiles",p.field.maxFiles)("informationText",p.getInformationText())}}function tn(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"files-field",47,48),e.NdJ("upload",function(ae){return e.CHM(p),e.oxw(2).filesUploaded.emit(ae)}),e.qZA()}if(2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("initialFiles",null==p.binaryValues?null:p.binaryValues.fileValues[p.field.internalName])("customField",p.field)("separator",p.ApiHelper.VALUE_SEPARATOR)("maxFiles",p.field.maxFiles)("mimeTypes",p.field.mimeTypes)("informationText",p.getInformationText())}}function nn(G,xe){if(1&G&&e._UZ(0,"user-field",49,50),2&G){const p=e.oxw(2);e.Q6J("id",p.id)("label",p.label)("name",p.name)("labelPosition",p.labelPosition)("allowSelf",!0)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("informationText",p.getInformationText())("filters",p.userSearchFilters())}}const Pt=function(){return["multiSelection","dynamicMultiSelection"]};function on(G,xe){if(1&G&&(e.YNc(0,ot,2,12,"input-field",13),e.YNc(1,Ht,2,2,"ng-container",14),e.YNc(2,Jt,2,9,"url-field",15),e.YNc(3,Qt,2,8,"textarea-field",16),e.YNc(4,Yt,2,8,"html-field",16),e.YNc(5,Wt,2,7,"boolean-field",17),e.YNc(6,Gt,2,9,"decimal-field",18),e.YNc(7,Kt,2,8,"date-field",19),e.YNc(8,$t,2,9,"single-selection-field",20),e.YNc(9,jt,2,9,"radio-group-field",21),e.YNc(10,Xt,2,10,"multi-selection-field",22),e.YNc(11,qt,2,10,"checkbox-group-field",22),e.YNc(12,en,2,12,"images-field",23),e.YNc(13,tn,2,13,"files-field",24),e.YNc(14,nn,2,10,"user-field",25)),2&G){const p=e.oxw();e.Q6J("ngIf","integer"===p.type||"linkedEntity"===p.type&&"user"!==p.linkedEntityType),e.xp6(1),e.Q6J("ngIf","string"===p.type),e.xp6(1),e.Q6J("ngIf","url"===p.type),e.xp6(1),e.Q6J("ngIf","text"===p.type),e.xp6(1),e.Q6J("ngIf","richText"===p.type),e.xp6(1),e.Q6J("ngIf","boolean"==p.type),e.xp6(1),e.Q6J("ngIf","decimal"==p.type),e.xp6(1),e.Q6J("ngIf","date"==p.type),e.xp6(1),e.Q6J("ngIf","singleSelection"==p.type&&"singleSelection"==p.control),e.xp6(1),e.Q6J("ngIf","singleSelection"==p.type&&"radio"==p.control),e.xp6(1),e.Q6J("ngIf",e.DdM(15,Pt).includes(p.type)&&"multiSelection"==p.control),e.xp6(1),e.Q6J("ngIf",e.DdM(16,Pt).includes(p.type)&&"checkbox"==p.control),e.xp6(1),e.Q6J("ngIf","image"==p.type),e.xp6(1),e.Q6J("ngIf","file"==p.type),e.xp6(1),e.Q6J("ngIf","user"===p.linkedEntityType)}}function sn(G,xe){if(1&G){const p=e.EpF();e.TgZ(0,"div",54)(1,"button",55,56),e.NdJ("click",function(){return e.CHM(p),e.oxw(2).showScanQrCode()}),e._UZ(3,"icon",57),e.qZA()()}if(2&G){const p=e.oxw(2);e.xp6(1),e.Q6J("tooltip",p.i18n.field.user.scanQrCodeTooltip),e.xp6(2),e.Q6J("icon",p.SvgIcon.QrCodeScan)}}function rn(G,xe){if(1&G&&(e.TgZ(0,"div",51),e._UZ(1,"input-field",52,27),e.YNc(3,sn,4,2,"div",53),e.qZA()),2&G){const p=e.oxw();e.xp6(1),e.Q6J("id",p.id)("name",p.name)("labelPosition",p.labelPosition)("fieldSize",p.fieldSize)("required",p.required)("formControl",p.formControl)("autocomplete",p.autocomplete)("mask",p.field.pattern)("placeholder",p.field.pattern||"")("informationText",p.getInformationText()),e.xp6(2),e.Q6J("ngIf",p.field.showQrCodeScan)}}const an=[l.L.STRING,l.L.INTEGER,l.L.LINKED_ENTITY],ln=[l.L.SINGLE_SELECTION,l.L.MULTI_SELECTION];let cn=(()=>{class G extends j.T{constructor(p,oe,ae,ke){super(p,oe),this.fieldHelper=ae,this.modal=ke,this.autocomplete="off",this.imagesUploaded=new e.vpe,this.filesUploaded=new e.vpe,this._hideLabel=!1,this._hideInformationText=!1}get field(){return this._field}set field(p){this._field=p,p&&(this.type=this.field.type,this.control=this.field.control,this.linkedEntityType=this.type===l.L.LINKED_ENTITY?this.field.linkedEntityType:null,this.fieldOptions=this.fieldHelper.fieldOptions(p),this._id=p.internalName,this.name=p.internalName,this.hideLabel||(this.label=p.name),this.fieldSize=this.fieldHelper.fieldSize(p),this.required=p.required)}get hideLabel(){return this._hideLabel}set hideLabel(p){this._hideLabel=(0,Q.Iw)(p),this._hideLabel&&(this.label=null)}get hideInformationText(){return this._hideInformationText}set hideInformationText(p){this._hideInformationText=(0,Q.Iw)(p)}preprocessValue(p){return(0,Q.cS)(p)?"":[l.L.DYNAMIC_SELECTION,l.L.LINKED_ENTITY].includes(this.type)?p.split(n.S.VALUE_SEPARATOR)[0]:p}ngOnInit(){super.ngOnInit(),this.id=this.field.internalName,this.disabledFormat="component",this.formControl.disabled&&(this.disabledValueObject={customValues:{}},this.disabledValueObject.customValues[this.field.internalName]=this.formControl.value)}get hasValuesList(){return this.field.hasValuesList&&!ln.includes(this.type)&&this.type!==l.L.DYNAMIC_MULTI_SELECTION}get valueAsArray(){return(this.value||"").split(n.S.VALUE_SEPARATOR)}set valueAsArray(p){this.value=(p||[]).join(n.S.VALUE_SEPARATOR)}get input(){return an.includes(this.type)&&this.linkedEntityType!==g.X.USER}userSearchFilters(){return{statuses:[m.b.ACTIVE,m.b.BLOCKED,m.b.DISABLED]}}validate(p){return this.field.type===l.L.DATE&&this.dateField?this.dateField.validate(p):null}showScanQrCode(){this.modal.show(x.u,{class:"modal-form"}).content.select.pipe((0,P.P)()).subscribe(ae=>{ae&&(this.field.pattern&&(ae=new R.z(this.field.pattern).apply(ae)),this.formControl.setValue(ae),this.field.automaticallyProcessAfterScan&&this.submitAction&&this.submitAction())}),this.modal.onHide.pipe((0,P.P)()).subscribe(()=>(0,Q.T_)(this.inputField,!0))}getFocusableControl(){return[this.inputField,this.textareaField,this.richTextField,this.dateField,this.decimalField,this.booleanField,this.singleSelectionField,this.multiSelectionField,this.checkboxGroupField,this.radioGroupField,this.imagesField,this.filesField,this.userField].find(p=>null!=p)}getInformationText(){return this.hideInformationText?"":this.field.informationText}getDisabledValue(){return null}}return G.\u0275fac=function(p){return new(p||G)(e.Y36(e.zs3),e.Y36(t.gN,13),e.Y36(O.A),e.Y36(_.tT))},G.\u0275cmp=e.Xpm({type:G,selectors:[["custom-field-input"]],viewQuery:function(p,oe){if(1&p&&(e.Gf(vt,5),e.Gf(Ct,5),e.Gf(xt,5),e.Gf(ct,5),e.Gf(nt,5),e.Gf(et,5),e.Gf(He,5),e.Gf(it,5),e.Gf(yt,5),e.Gf(W,5),e.Gf(ge,5),e.Gf(T,5),e.Gf(U,5)),2&p){let ae;e.iGM(ae=e.CRH())&&(oe.inputField=ae.first),e.iGM(ae=e.CRH())&&(oe.textareaField=ae.first),e.iGM(ae=e.CRH())&&(oe.richTextField=ae.first),e.iGM(ae=e.CRH())&&(oe.dateField=ae.first),e.iGM(ae=e.CRH())&&(oe.decimalField=ae.first),e.iGM(ae=e.CRH())&&(oe.booleanField=ae.first),e.iGM(ae=e.CRH())&&(oe.singleSelectionField=ae.first),e.iGM(ae=e.CRH())&&(oe.multiSelectionField=ae.first),e.iGM(ae=e.CRH())&&(oe.checkboxGroupField=ae.first),e.iGM(ae=e.CRH())&&(oe.radioGroupField=ae.first),e.iGM(ae=e.CRH())&&(oe.imagesField=ae.first),e.iGM(ae=e.CRH())&&(oe.filesField=ae.first),e.iGM(ae=e.CRH())&&(oe.userField=ae.first)}},inputs:{field:"field",focused:"focused",autocomplete:"autocomplete",submitAction:"submitAction",hideLabel:"hideLabel",hideInformationText:"hideInformationText",binaryValues:"binaryValues"},outputs:{imagesUploaded:"imagesUploaded",filesUploaded:"filesUploaded"},features:[e._Bn([{provide:t.JU,useExisting:G,multi:!0},{provide:t.Cf,useExisting:G,multi:!0}]),e.qOj],decls:10,vars:4,consts:[["kind","fieldView",3,"label","labelPosition","informationText",4,"ngIf","ngIfElse"],["controlTemplate",""],["singleSelectionTemplate",""],["specificTemplate",""],["stringTemplate",""],["kind","fieldView",3,"label","labelPosition","informationText"],[3,"fields","object","fieldName","files","images"],[4,"ngIf","ngIfElse"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","fieldOptions","informationText",4,"ngIf","ngIfElse"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","fieldOptions","informationText"],["radioGroupField",""],["emptyOption","",3,"id","label","name","labelPosition","fieldSize","required","formControl","fieldOptions","informationText"],["singleSelectionField",""],[3,"id","label","name","labelPosition","fieldSize","required","formControl","autocomplete","type","mask","placeholder","informationText",4,"ngIf"],[4,"ngIf"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","autocomplete","informationText",4,"ngIf"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","informationText",4,"ngIf"],["labelPosition","sideForced",3,"id","label","name","fieldSize","required","formControl","informationText",4,"ngIf"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","scale","informationText",4,"ngIf"],["minDate","past100","maxDate","future100",3,"id","label","name","labelPosition","fieldSize","required","formControl","informationText",4,"ngIf"],["emptyOption","",3,"id","label","name","labelPosition","fieldSize","required","formControl","fieldOptions","informationText",4,"ngIf"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","fieldOptions","informationText",4,"ngIf"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","separator","fieldOptions","informationText",4,"ngIf"],["target","customValue",3,"id","label","name","labelPosition","fieldSize","required","formControl","initialImages","customField","separator","maxFiles","informationText","upload",4,"ngIf"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","initialFiles","customField","separator","maxFiles","mimeTypes","informationText","upload",4,"ngIf"],[3,"id","label","name","labelPosition","allowSelf","fieldSize","required","formControl","informationText","filters",4,"ngIf"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","autocomplete","type","mask","placeholder","informationText"],["inputField",""],["kind","field",3,"label","labelPosition","fieldSize","informationText","required",4,"ngIf","ngIfElse"],["kind","field",3,"label","labelPosition","fieldSize","informationText","required"],[3,"ngTemplateOutlet"],[3,"id","label","name","labelPosition","fieldSize","required","formControl","autocomplete","informationText"],["urlField",""],[3,"id","label","name","labelPosition","fieldSize","required","formControl","informationText"],["textareaField",""],["richTextField",""],["labelPosition","sideForced",3,"id","label","name","fieldSize","required","formControl","informationText"],["booleanField",""],[3,"id","label","name","labelPosition","fieldSize","required","formControl","scale","informationText"],["decimalField",""],["minDate","past100","maxDate","future100",3,"id","label","name","labelPosition","fieldSize","required","formControl","informationText"],["dateField",""],[3,"id","label","name","labelPosition","fieldSize","required","formControl","separator","fieldOptions","informationText"],["multiSelectionField",""],["cheboxGroupField",""],["target","customValue",3,"id","label","name","labelPosition","fieldSize","required","formControl","initialImages","customField","separator","maxFiles","informationText","upload"],["imagesField",""],[3,"id","label","name","labelPosition","fieldSize","required","formControl","initialFiles","customField","separator","maxFiles","mimeTypes","informationText","upload"],["filesField",""],[3,"id","label","name","labelPosition","allowSelf","fieldSize","required","formControl","informationText","filters"],["userField",""],[1,"d-flex","w-100"],["type","text",3,"id","name","labelPosition","fieldSize","required","formControl","autocomplete","mask","placeholder","informationText"],["class","ml-2",4,"ngIf"],[1,"ml-2"],["type","button",1,"btn","btn-icon",3,"tooltip","click"],["scanQrCodeButton",""],[3,"icon"]],template:function(p,oe){if(1&p&&(e.YNc(0,Ae,2,10,"label-value",0),e.ALo(1,"async"),e.YNc(2,$e,1,2,"ng-template",null,1,e.W1O),e.YNc(4,Xe,2,9,"ng-template",null,2,e.W1O),e.YNc(6,on,15,17,"ng-template",null,3,e.W1O),e.YNc(8,rn,4,11,"ng-template",null,4,e.W1O)),2&p){const ae=e.MAs(3);e.Q6J("ngIf",oe.disabled||e.lcZ(1,2,oe.disabledChange))("ngIfElse",ae)}},directives:[D.O5,C.t,E.x,I.Y,t.Q7,t.JJ,t.oH,L.f,N.q,B.h,D.tP,H.X,y.u,z.N,r.M,d.U,u.Q,h.x,M.S,J.o,ft,_t.l,Oe.i9,_e.o],pipes:[D.Ov],encapsulation:2,changeDetection:0}),G})()},8170:(Te,se,s)=>{"use strict";s.d(se,{Q:()=>N});var e=s(3075),t=s(2400),l=s(6890),g=s(723),m=s(2113),n=s.n(m);function j(B,H){switch(B||"any"){case"any":return null;case"today":return H.clone().startOf("day");case"todayEnd":return H.clone().endOf("day");case"yesterday":return H.clone().subtract(1,"day").startOf("day");case"tomorrow":return H.clone().add(1,"day").startOf("day");case"past100":return H.clone().subtract(100,"years").startOf("year");case"future100":return H.clone().add(100,"years").endOf("year");case"past5":return H.clone().subtract(5,"years").startOf("year");case"future5":return H.clone().add(5,"years").endOf("year").startOf("day");default:const y=n()(B);if(!y.isValid())throw new Error(`Got an invalid date constraint: ${B}`);return y.hours()>12&&y.add(1,"day"),y}}var Q=s(6163),R=s(6435),x=s(8664),P=s(9808),O=s(195),_=s(3455);const D=["input"];function C(B,H){1&B&&R.GkF(0)}function E(B,H){if(1&B&&(R.TgZ(0,"label-value",2),R.YNc(1,C,1,0,"ng-container",3),R.qZA()),2&B){const y=R.oxw(),z=R.MAs(2);R.Q6J("formField",y.self)("informationText",y.informationText),R.xp6(1),R.Q6J("ngTemplateOutlet",z)}}const I=function(B){return{"is-invalid":B}};function L(B,H){if(1&B&&(R._UZ(0,"input",4,5),R.ALo(2,"async"),R._UZ(3,"field-errors",6)),2&B){const y=R.oxw();R.Q6J("id",y.id)("formControl",y.formControl)("name",y.name)("ngClass",R.VKq(9,I,"INVALID"===R.lcZ(2,7,y.formControl.statusChanges)&&y.formControl.touched)),R.uIk("min",y.minValue)("max",y.maxValue),R.xp6(3),R.Q6J("control",y.formControl)}}let N=(()=>{class B extends g.T{constructor(y,z,r){super(y,z),this.layout=r,this.minDate="any",this.maxDate="any"}setFromDate(y){this.value=this.format.parseAsDate(y)}get minMomentAsDate(){return this.format.formatAsDate(this.max)}getFocusableControl(){return(this.inputRef||{}).nativeElement}get valueAsMoment(){const y=this.value;return(0,Q.cS)(y)?null:n()(y)}set valueAsMoment(y){this.value=y?y.format(l.m):null}get minValue(){return this.min?this.min.format(l.m):""}get maxValue(){return this.max?this.max.format(l.m):""}ngOnInit(){super.ngOnInit(),null==this.fieldSize&&(this.fieldSize=t.s.MEDIUM);const y=this.dataForFrontendHolder.now();this.min=j(this.minDate,y),this.max=j(this.maxDate,y)}ngAfterViewChecked(){this.tempValue&&(this.onValueInitialized(this.tempValue),this.tempValue=null)}setValue(y,z=!1){super.setValue(y,z),this.onValueInitialized(y)}get input(){return this.inputRef?this.inputRef.nativeElement:null}onValueInitialized(y){const z=this.input;y&&(y=y.split("T")[0]),z?z.value=y:this.tempValue=y}getDisabledValue(){return this.format.formatAsDate(this.value)}validate(y){const z={},r=y.value;if((0,Q.cS)(r))return null;if(void 0===r)z.date=!0;else{var d=new Date(r.substring(0,10));if(isNaN(d.getTime()))z.date=!0;else{var u=this.min?new Date(this.min.format("YYYY-MM-DD")):null;u&&d<u&&(z.minDate={min:this.format.formatAsDate(this.min)});var h=this.max?new Date(this.max.format("YYYY-MM-DD")):null;h&&d>h&&(z.maxDate={max:this.format.formatAsDate(this.max)})}}return 0===Object.keys(z).length?null:z}}return B.\u0275fac=function(y){return new(y||B)(R.Y36(R.zs3),R.Y36(e.gN,13),R.Y36(x.Pb))},B.\u0275cmp=R.Xpm({type:B,selectors:[["date-field"]],viewQuery:function(y,z){if(1&y&&R.Gf(D,5),2&y){let r;R.iGM(r=R.CRH())&&(z.inputRef=r.first)}},inputs:{minDate:"minDate",maxDate:"maxDate"},features:[R._Bn([{provide:e.JU,useExisting:B,multi:!0},{provide:e.Cf,useExisting:B,multi:!0}]),R.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],["type","date",1,"form-control","flex-grow-1",3,"id","formControl","name","ngClass"],["input",""],[3,"control"]],template:function(y,z){if(1&y&&(R.YNc(0,E,2,3,"label-value",0),R.YNc(1,L,4,11,"ng-template",null,1,R.W1O)),2&y){const r=R.MAs(2);R.Q6J("ngIf",z.label)("ngIfElse",r)}},directives:[P.O5,O.t,P.tP,e.Fj,e.JJ,e.oH,P.mk,_.e],pipes:[P.Ov],encapsulation:2,changeDetection:0}),B})()},2479:(Te,se,s)=>{"use strict";s.d(se,{U:()=>r});var e=s(3075),t=s(2400),l=s(723),g=s(6163),m=s(591),n=s(6435),j=s(8664),Q=s(9808),R=s(195),x=s(7816),P=s(8868),O=s(9697),_=s(3455);const D=["inputField"];function C(d,u){1&d&&n.GkF(0)}function E(d,u){if(1&d&&(n.TgZ(0,"label-value",2),n.YNc(1,C,1,0,"ng-container",3),n.qZA()),2&d){const h=n.oxw(),M=n.MAs(2);n.Q6J("formField",h.self)("fieldSize",h.fieldSize)("informationText",h.informationText),n.xp6(1),n.Q6J("ngTemplateOutlet",M)}}function I(d,u){if(1&d&&n._UZ(0,"field-option",11),2&d){const h=u.$implicit;n.Q6J("value",h)("id",h)("text",h)}}function L(d,u){if(1&d&&(n.TgZ(0,"single-selection-field",8),n.YNc(1,I,1,3,"field-option",9),n._UZ(2,"field-option",10),n.qZA()),2&d){const h=n.oxw(2);n.Q6J("formControl",h.fixedValuesControl),n.xp6(1),n.Q6J("ngForOf",h.fixedValues),n.xp6(1),n.Q6J("text",h.customValueLabel)}}function N(d,u){if(1&d&&(n.TgZ(0,"div",16)(1,"span",17),n._uU(2),n.qZA()()),2&d){const h=n.oxw(3);n.xp6(2),n.Oqu(h.prefix)}}function B(d,u){if(1&d&&(n.TgZ(0,"div",18)(1,"span",17),n._uU(2),n.qZA()()),2&d){const h=n.oxw(3);n.xp6(2),n.Oqu(h.suffix)}}const H=function(d,u){return{"is-invalid":d,"text-right":u}};function y(d,u){if(1&d){const h=n.EpF();n.ynx(0),n.YNc(1,N,3,1,"div",12),n.TgZ(2,"input",13,14),n.NdJ("blur",function(){return n.CHM(h),n.oxw(2).onBlur()}),n.ALo(4,"async"),n.qZA(),n.YNc(5,B,3,1,"div",15),n.BQk()}if(2&d){const h=n.oxw(2);n.xp6(1),n.Q6J("ngIf",h.prefix),n.xp6(1),n.Q6J("id",h.id)("type",h.isIos()?"text":"tel")("allowNegative",h.allowNegative)("formControl",h.internalControl)("placeholder",h.format.formatAsNumber("0",h.scale))("ngClass",n.WLB(10,H,"INVALID"===n.lcZ(4,8,h.formControl.statusChanges)&&h.formControl.touched,h.textRight)),n.xp6(3),n.Q6J("ngIf",h.suffix)}}function z(d,u){if(1&d&&(n.TgZ(0,"div",4),n.YNc(1,L,3,3,"single-selection-field",5),n.ALo(2,"async"),n.YNc(3,y,6,13,"ng-container",6),n.ALo(4,"async"),n.qZA(),n._UZ(5,"field-errors",7),n.ALo(6,"async")),2&d){const h=n.oxw();n.xp6(1),n.Q6J("ngIf",!1===n.lcZ(2,3,h.useCustom$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(4,5,h.useCustom$)||h.useCustom),n.xp6(2),n.Q6J("control",n.lcZ(6,7,h.useCustom$)||null==h.fixedValuesControl?h.formControl:h.fixedValuesControl)}}let r=(()=>{class d extends l.T{constructor(h,M,J,ie){super(h,M),this.layout=J,this.changeDetector=ie,this.textRight=!0,this._negative=!1,this._allowNegative=!1,this.useCustom$=new m.X(!0),this._scale=0,this.autoSize=!1}get negative(){return this._negative}set negative(h){this._negative=(0,g.Iw)(h)}get allowNegative(){return this._allowNegative}set allowNegative(h){this._allowNegative=(0,g.Iw)(h)}get scale(){return this._scale}set scale(h){h!==this._scale&&(this._scale=h,this.inputRef&&this.setInternalControlValue())}preprocessValue(h){if(void 0!==h)return(0,g.cS)(h)?null:this.format.numberToFixed(this.negative?this.toNegative(h):h,this.scale)}toNegative(h){return h&&!h.startsWith("-")?"-"+h:h}get input(){return this.inputRef?this.inputRef.nativeElement:null}onValueInitialized(h){if(this.fixedValuesControl){const J=this.format.numberToFixed(h,this.scale);-1!==this.fixedValues.indexOf(J)&&this.fixedValuesControl.setValue(J)}this.setInternalControlValue();const M=this.input;M&&(M.value=h)}ngOnInit(){if(super.ngOnInit(),null==this.fieldSize&&(this.autoSize=!0,this.fieldSize=this.prefix&&this.suffix?t.s.MEDIUM:t.s.SMALL),this.internalControl=new e.NI,this.addSub(this.internalControl.valueChanges.subscribe(h=>this.updateInternalControl(h))),this.minRange&&this.maxRange){this.fixedValuesControl=new e.NI,this.fixedValues=[];for(let h=this.minRange;h<=this.maxRange;h++)this.fixedValues.push(this.format.numberToFixed(h,this.scale));this.addSub(this.fixedValuesControl.valueChanges.subscribe(h=>{"custom"===h?(this.internalControl.setValue(null),this.useCustom=!0,setTimeout(()=>this.inputRef.nativeElement.focus(),100)):(this.internalControl.setValue(h),this.onBlur(),this.useCustom=!1)}))}}updateInternalControl(h){(0,g.cS)(h)?this.value=null:("."!==this.format.decimalSeparator&&(h=h.replace(this.format.decimalSeparator,".")),this.value=this.format.numberToFixed(h,this.scale)),this.formControl.markAsTouched()}ngOnChanges(h){this.autoSize&&(h.prefix||h.suffix)&&(this.fieldSize=this.prefix&&this.suffix?t.s.MEDIUM:t.s.SMALL,this.changeDetector.detectChanges())}onBlur(){this.setInternalControlValue(),this.notifyTouched()}setInternalControlValue(){const h=this.value;if((0,g.cS)(h))this.internalControl.setValue(null);else{let M=this.format.numberToFixed(h,this.scale);"."!==this.format.decimalSeparator&&(M=M.replace(".",this.format.decimalSeparator)),this.internalControl.setValue(M)}}onDisabledChange(h){this.inputRef&&this.inputRef.nativeElement&&(this.inputRef.nativeElement.disabled=h)}get useCustom(){return this.useCustom$.value}set useCustom(h){this.useCustom$.next(h)}getFocusableControl(){return this.inputRef?this.inputRef.nativeElement:null}getDisabledValue(){const h=this.format.formatAsNumber(this.value,this.scale);return(0,g.cS)(h)?this.emptyLabel:(this.prefix||"")+h+(this.suffix||"")}validate(h){return(0,g.cS)(this.internalControl.value)?null:void 0===h.value?{number:!0}:null}isIos(){var h=navigator.userAgent.toLowerCase();return h.indexOf("ipad")>-1||h.indexOf("iphone")>-1||h.indexOf("ipod")>-1}}return d.\u0275fac=function(h){return new(h||d)(n.Y36(n.zs3),n.Y36(e.gN,13),n.Y36(j.Pb),n.Y36(n.sBO))},d.\u0275cmp=n.Xpm({type:d,selectors:[["decimal-field"]],viewQuery:function(h,M){if(1&h&&n.Gf(D,5),2&h){let J;n.iGM(J=n.CRH())&&(M.inputRef=J.first)}},inputs:{prefix:"prefix",suffix:"suffix",textRight:"textRight",minRange:"minRange",maxRange:"maxRange",customValueLabel:"customValueLabel",emptyLabel:"emptyLabel",negative:"negative",allowNegative:"allowNegative",scale:"scale"},features:[n._Bn([{provide:e.JU,useExisting:d,multi:!0},{provide:e.Cf,useExisting:d,multi:!0}]),n.qOj,n.TTD],decls:3,vars:2,consts:[[3,"formField","fieldSize","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","fieldSize","informationText"],[4,"ngTemplateOutlet"],[1,"input-group"],[3,"formControl",4,"ngIf"],[4,"ngIf"],[3,"control"],[3,"formControl"],[3,"value","id","text",4,"ngFor","ngForOf"],["value","custom","id","custom",3,"text"],[3,"value","id","text"],["class","input-group-prepend",4,"ngIf"],["numbersOnly","","allowDecimalSeparator","","autocomplete","off",1,"form-control",3,"id","type","allowNegative","formControl","placeholder","ngClass","blur"],["inputField",""],["class","input-group-append",4,"ngIf"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"input-group-append"]],template:function(h,M){if(1&h&&(n.YNc(0,E,2,4,"label-value",0),n.YNc(1,z,7,9,"ng-template",null,1,n.W1O)),2&h){const J=n.MAs(2);n.Q6J("ngIf",M.label)("ngIfElse",J)}},directives:[Q.O5,R.t,Q.tP,x.f,e.JJ,e.oH,Q.sg,P.s,e.Fj,O.X,Q.mk,_.e],pipes:[Q.Ov],encapsulation:2}),d})()},2208:(Te,se,s)=>{"use strict";s.d(se,{j:()=>t});var e=s(6435);let t=(()=>{class l{}return l.\u0275fac=function(m){return new(m||l)},l.\u0275dir=e.lG2({type:l,selectors:[["","extraCell",""]]}),l})()},8868:(Te,se,s)=>{"use strict";s.d(se,{s:()=>l});var e=s(5766),t=s(6435);let l=(()=>{class g{constructor(n){this.component=n}ngOnInit(){this.component.addOption(this)}ngOnDestroy(){this.component.removeOption(this)}get level(){return this._level?this._level:this.parent?1:0}set level(n){this._level=n}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(e.GY))},g.\u0275dir=t.lG2({type:g,selectors:[["field-option"]],inputs:{id:"id",internalName:"internalName",value:"value",text:"text",category:"category",parent:"parent",style:"style",disabled:"disabled",level:"level"}}),g})()},1272:(Te,se,s)=>{"use strict";function e(t,l){return null!=t&&null!=l&&("string"==typeof l&&l.includes("|")&&(l=l.split("|")[0]),t.value===l||null!=t.id&&t.id===l||null!=t.internalName&&t.internalName===l||"object"==typeof l&&(null!=t.id&&t.id===l.id||null!=t.internalName&&t.internalName===l.internalName||null!=t.value&&t.value===l.value))}s.d(se,{d:()=>e})},1873:(Te,se,s)=>{"use strict";s.d(se,{x:()=>Ue});var e=s(7610),t=s(2342),l=s(4391),g=s(7645),m=s(7e3),n=s(6163),j=s(5857),Q=s.n(j),R=s(591),x=s(6435),P=s(543),O=s(9115),_=s(1787),D=s(9175),C=s(9564),E=s(9808),I=s(7107),L=s(5300),N=s(1076),B=s(7229);function H(fe,Pe){if(1&fe&&(x.ynx(0),x._uU(1),x.BQk()),2&fe){const ne=x.oxw(3);x.xp6(1),x.hij(" ",ne.value," ")}}function y(fe,Pe){if(1&fe&&(x.ynx(0),x._UZ(1,"user-link",5),x.BQk()),2&fe){const ne=x.oxw(3);x.xp6(1),x.Q6J("user",ne.fieldValue.userValue)}}function z(fe,Pe){if(1&fe&&(x.ynx(0),x.TgZ(1,"a",6),x._uU(2),x.qZA(),x.BQk()),2&fe){const ne=x.oxw(3);x.xp6(1),x.Q6J("routerLink",ne.link),x.xp6(1),x.Oqu(ne.value)}}function r(fe,Pe){if(1&fe&&(x.ynx(0),x.TgZ(1,"a",7),x._uU(2),x.qZA(),x.BQk()),2&fe){const ne=x.oxw(3);x.xp6(1),x.Q6J("href",ne.externalLink,x.LSH),x.xp6(1),x.Oqu(ne.value)}}function d(fe,Pe){if(1&fe&&(x.ynx(0),x.YNc(1,H,2,1,"ng-container",2),x.YNc(2,y,2,1,"ng-container",2),x.YNc(3,z,3,2,"ng-container",2),x.YNc(4,r,3,2,"ng-container",2),x.BQk()),2&fe){const ne=x.oxw(2);x.xp6(1),x.Q6J("ngIf",!ne.link&&!ne.externalLink),x.xp6(1),x.Q6J("ngIf",ne.isLinkedUser()),x.xp6(1),x.Q6J("ngIf",!ne.isLinkedUser()&&ne.link),x.xp6(1),x.Q6J("ngIf",ne.externalLink)}}const u=function(fe){return{"d-inline":fe}};function h(fe,Pe){if(1&fe&&(x.TgZ(0,"div",8),x._uU(1),x.qZA()),2&fe){const ne=x.oxw(2);x.Q6J("ngClass",x.VKq(2,u,ne.inline)),x.xp6(1),x.Oqu(ne.value)}}function M(fe,Pe){if(1&fe&&x._UZ(0,"rich-text-container",9),2&fe){const ne=x.oxw(2);x.Q6J("value",ne.value)}}function J(fe,Pe){if(1&fe&&(x.TgZ(0,"span"),x._uU(1),x.qZA()),2&fe){const ne=x.oxw().$implicit;x.xp6(1),x.hij("",ne.category.name," - ")}}function ie(fe,Pe){if(1&fe&&(x.TgZ(0,"span"),x.YNc(1,J,2,1,"span",2),x._uU(2),x.qZA()),2&fe){const ne=Pe.$implicit,Oe=Pe.last;x.xp6(1),x.Q6J("ngIf",ne.category),x.xp6(1),x.hij("",ne.value+(Oe?"":", ")," ")}}function me(fe,Pe){if(1&fe&&(x.ynx(0),x.YNc(1,ie,3,2,"span",10),x.BQk()),2&fe){const ne=x.oxw(2);x.xp6(1),x.Q6J("ngForOf",ne.value)}}function re(fe,Pe){1&fe&&(x.ynx(0),x._uU(1,", "),x.BQk())}function _e(fe,Pe){if(1&fe){const ne=x.EpF();x.ynx(0),x.TgZ(1,"a",11),x.NdJ("click",function(Ee){const w=x.CHM(ne).$implicit;return x.oxw(3).downloadFile(Ee,w)}),x._uU(2),x.qZA(),x.YNc(3,re,2,0,"ng-container",2),x.BQk()}if(2&fe){const ne=Pe.$implicit,Oe=Pe.last,Ee=x.oxw(3);x.xp6(1),x.Q6J("href",Ee.appendAuth(ne.url),x.LSH)("type",ne.contentType)("download",ne.name),x.xp6(1),x.Oqu(ne.name),x.xp6(1),x.Q6J("ngIf",!Oe)}}function te(fe,Pe){if(1&fe&&(x.ynx(0),x.YNc(1,_e,4,5,"ng-container",10),x.BQk()),2&fe){const ne=x.oxw(2);x.xp6(1),x.Q6J("ngForOf",ne.value)}}function le(fe,Pe){if(1&fe&&x._UZ(0,"avatar-lightbox",14),2&fe){const ne=Pe.$implicit,Oe=x.oxw(3);x.Q6J("image",ne)("additionalImages",Oe.value)}}const q=function(fe,Pe){return{"d-flex":fe,"d-inline-flex":Pe}};function ve(fe,Pe){if(1&fe&&(x.ynx(0),x.TgZ(1,"div",12),x.YNc(2,le,1,2,"avatar-lightbox",13),x.qZA(),x.BQk()),2&fe){const ne=x.oxw(2);x.xp6(1),x.Q6J("ngClass",x.WLB(2,q,!ne.inline,ne.inline)),x.xp6(1),x.Q6J("ngForOf",ne.value)}}const ce=function(){return[]};function ye(fe,Pe){if(1&fe&&(x.ynx(0),x.YNc(1,d,5,4,"ng-container",2),x.YNc(2,h,2,4,"div",3),x.YNc(3,M,1,1,"rich-text-container",4),x.YNc(4,me,2,1,"ng-container",2),x.YNc(5,te,2,1,"ng-container",2),x.YNc(6,ve,3,5,"ng-container",2),x.BQk()),2&fe){const ne=x.oxw();x.xp6(1),x.Q6J("ngIf",ne.directValue),x.xp6(1),x.Q6J("ngIf",ne.type===ne.CustomFieldTypeEnum.TEXT),x.xp6(1),x.Q6J("ngIf",ne.type===ne.CustomFieldTypeEnum.RICH_TEXT),x.xp6(1),x.Q6J("ngIf",ne.type===ne.CustomFieldTypeEnum.SINGLE_SELECTION||ne.type===ne.CustomFieldTypeEnum.MULTI_SELECTION),x.xp6(1),x.Q6J("ngIf",ne.type===ne.CustomFieldTypeEnum.FILE&&(ne.value||x.DdM(6,ce)).length>0),x.xp6(1),x.Q6J("ngIf",ne.type===ne.CustomFieldTypeEnum.IMAGE&&(ne.value||x.DdM(7,ce)).length>0)}}function Se(fe,Pe){1&fe&&x.Hsn(0)}const Ne=["*"],Ze=[e.L.STRING,e.L.DYNAMIC_SELECTION,e.L.DYNAMIC_MULTI_SELECTION,e.L.BOOLEAN,e.L.INTEGER,e.L.DECIMAL,e.L.DATE,e.L.URL,e.L.LINKED_ENTITY];let Ue=(()=>{class fe extends g.k{constructor(ne,Oe,Ee,Me,w,F,a){super(ne),this.i18n=Oe,this.nextRequestState=Ee,this.filesService=Me,this.imagesService=w,this.fieldHelper=F,this.storedFileCacheService=a,this.CustomFieldTypeEnum=e.L,this._inline=!1,this._plainText=!1,this.hasValue$=new R.X(!1)}get inline(){return this._inline}set inline(ne){this._inline=(0,n.Iw)(ne)}get plainText(){return this._plainText}set plainText(ne){this._plainText=(0,n.Iw)(ne)}get directValue(){return Ze.includes(this.type)}ngOnInit(){if(super.ngOnInit(),null==this.fieldValue&&null==this.customValues&&(null==this.fields||null==this.object))throw new Error("Either fieldValue or all fields, field and object must be set");null!=this.object&&null==this.customValues&&(this.customValues=this.object.customValues),null==this.fieldValue&&(this.fieldValue=this.createFieldValue()),this.field=this.fieldValue.field,this.type=this.field.type;const ne=this.getValue();this.plainText&&[e.L.RICH_TEXT,e.L.TEXT].includes(this.type)&&(this.type=e.L.STRING),this.internalValue=ne.value,this.hasValue$.next(null!=this.internalValue&&(void 0===this.internalValue.length||this.internalValue.length>0)),ne.link&&(ne.link.includes("://")?this.externalLink=ne.link:this.link=ne.link)}getValue(){return this.fieldHelper.getValue(this.fieldValue,this.plainText)||{value:null}}createFieldValue(){let ne=null==this.object?null:this.object[this.fieldName];null==ne&&this.customValues&&(ne=this.customValues[this.fieldName]),null!=ne&&(ne=String(ne)),""===ne&&(ne=null);const Oe=null==ne?[]:ne.split(m.S.VALUE_SEPARATOR),Ee={field:this.fields.find(Me=>Me.internalName===this.fieldName)};switch(null==Ee.field&&(Ee.field={name:this.fieldName,internalName:this.fieldName,type:e.L.STRING}),Ee.field.type){case e.L.BOOLEAN:ne&&(Ee.booleanValue="true"===ne);break;case e.L.DATE:Ee.dateValue=ne;break;case e.L.DECIMAL:Ee.decimalValue=ne;break;case e.L.DYNAMIC_SELECTION:case e.L.DYNAMIC_MULTI_SELECTION:Ee.field.type===e.L.DYNAMIC_SELECTION&&Oe.length>1&&Oe.splice(1,Oe.length-1),Ee.dynamicValues=Oe.map(Me=>((Ee.field||{}).dynamicValues||[]).find(a=>a.value===Me)).filter(Me=>!!Me);break;case e.L.INTEGER:null!=ne&&(Ee.integerValue=parseInt(ne,10));break;case e.L.SINGLE_SELECTION:case e.L.MULTI_SELECTION:Ee.enumeratedValues=Oe.map(Me=>((Ee.field||{}).possibleValues||[]).find(a=>a.id===Me||a.internalName===Me)).filter(Me=>!!Me);break;case e.L.LINKED_ENTITY:if(null!=ne){const Me=Oe[0],w=Oe.length>1?Oe[1]:Oe[0];switch(Ee.field.linkedEntityType){case t.X.USER:Ee.userValue={id:Me,display:w};break;case t.X.ADVERTISEMENT:Ee.adValue={id:Me,name:w};break;case t.X.TRANSACTION:Ee.transactionValue={id:Me,display:w};break;case t.X.TRANSFER:Ee.transferValue={id:Me,display:w};break;case t.X.RECORD:Ee.recordValue={id:Me,display:w}}}break;case e.L.FILE:Ee.fileValues=Oe.map(Me=>{let w=(this.files||[]).find(F=>F.id===Me);return w||(w=this.storedFileCacheService.read(Me)),w}).filter(Me=>Me);break;case e.L.IMAGE:Ee.imageValues=Oe.map(Me=>{let w=(this.images||[]).find(F=>F.id===Me);return w||(w=this.storedFileCacheService.read(Me)),w}).filter(Me=>Me);break;default:Ee.stringValue=ne}return Ee}isLinkedUser(){return this.type===e.L.LINKED_ENTITY&&this.fieldValue.field.linkedEntityType===t.X.USER}appendAuth(ne){return this.nextRequestState.appendAuth(ne)}downloadFile(ne,Oe){this.addSub(this.filesService.getRawFileContent({id:Oe.id}).subscribe(Ee=>{Q()(Ee,Oe.name,Oe.contentType)})),ne.stopPropagation(),ne.preventDefault()}downloadImage(ne,Oe){this.addSub(this.imagesService.getImageContent({idOrKey:Oe.id}).subscribe(Ee=>{Q()(Ee,Oe.name,Oe.contentType)})),ne.stopPropagation(),ne.preventDefault()}get value(){return this.field.type===e.L.URL?this.internalValue.replace("http://","").replace("https://",""):this.internalValue}}return fe.\u0275fac=function(ne){return new(ne||fe)(x.Y36(x.zs3),x.Y36(l.s),x.Y36(P.AM),x.Y36(O.n),x.Y36(_.C),x.Y36(D.A),x.Y36(C.d))},fe.\u0275cmp=x.Xpm({type:fe,selectors:[["format-field-value"]],hostVars:2,hostBindings:function(ne,Oe){2&ne&&x.ekj("inline",Oe.inline)},inputs:{fieldValue:"fieldValue",fields:"fields",fieldName:"fieldName",object:"object",customValues:"customValues",images:"images",files:"files",inline:"inline",plainText:"plainText"},features:[x.qOj],ngContentSelectors:Ne,decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["empty",""],[4,"ngIf"],["class","break-nl",3,"ngClass",4,"ngIf"],[3,"value",4,"ngIf"],["hideIcon","",3,"user"],[3,"routerLink"],[3,"href"],[1,"break-nl",3,"ngClass"],[3,"value"],[4,"ngFor","ngForOf"],["target","_blank",3,"href","type","download","click"],[1,"flex-wrap",3,"ngClass"],["class","d-block mr-1","size","small",3,"image","additionalImages",4,"ngFor","ngForOf"],["size","small",1,"d-block","mr-1",3,"image","additionalImages"]],template:function(ne,Oe){if(1&ne&&(x.F$t(),x.YNc(0,ye,7,8,"ng-container",0),x.ALo(1,"async"),x.YNc(2,Se,1,0,"ng-template",null,1,x.W1O)),2&ne){const Ee=x.MAs(3);x.Q6J("ngIf",x.lcZ(1,2,Oe.hasValue$))("ngIfElse",Ee)}},directives:[E.O5,I.F,L.yS,E.mk,N.J,E.sg,B.X],pipes:[E.Ov],encapsulation:2,changeDetection:0}),fe})()},6974:(Te,se,s)=>{"use strict";s.d(se,{N:()=>yt});var e=s(3075),t=s(2462),l=s(1879),g=s(723),m=s(6163),n=s(6435),j=s(7947);var x=s(1772),P=s(6569),O=s(7266);const D=function _(W,ge,T){W=(0,O.Z)(W),ge=(0,x.Z)(ge);var U=W.length,X=T=void 0===T?U:function Q(W,ge,T){return W==W&&(void 0!==T&&(W=W<=T?W:T),void 0!==ge&&(W=W>=ge?W:ge)),W}((0,P.Z)(T),0,U);return(T-=ge.length)>=0&&W.slice(T,X)==ge};var C=s(5905),E=s(3728),I=s(9697),L=s(1321),N=s(7816),B=s(8868),H=s(9808),y=s(6903),z=s(1556);const r=["preview"];function d(W,ge){if(1&W&&(n.TgZ(0,"div",17)(1,"div",18),n._UZ(2,"img",19,20),n._uU(4),n.qZA()()),2&W){const T=n.oxw();n.xp6(2),n.Q6J("src",T.img.src,n.LSH),n.xp6(2),n.hij(" ",T.i18n.field.html.image.textExample," ")}}let u=(()=>{class W extends j.H{constructor(T,U){super(T),this.modalRef=U,this.constrain=new e.NI(!0),this.updatingDimensions=!1,this.select=new n.vpe}ngOnInit(){super.ngOnInit(),this.form=this.formBuilder.group({width:null,height:null,float:null,borderWidth:null,marginTop:null,marginBottom:null,marginLeft:null,marginRight:null}),this.addSub(this.form.controls.width.valueChanges.subscribe(T=>{if(!this.updatingDimensions){if(this.updatingDimensions=!0,this.constrain.value&&this.ratio){const U=parseInt(T,10);T&&this.form.patchValue({height:String(Math.round(U/this.ratio))})}this.updatingDimensions=!1}})),this.addSub(this.form.controls.height.valueChanges.subscribe(T=>{if(!this.updatingDimensions){if(this.updatingDimensions=!0,this.constrain.value&&this.ratio){const U=parseInt(T,10);T&&this.form.patchValue({width:String(Math.round(U*this.ratio))})}this.updatingDimensions=!1}})),this.ratio=this.img.naturalWidth/this.img.naturalHeight}ngAfterViewInit(){const T={};for(const U of Object.keys(this.form.controls)){let X=this.img.style[U];(0,m.cS)(X)?["width","height","float"].includes(U)||(X="0"):D(X,"px")&&(X=X.substring(0,X.length-2)),T[U]=X}(!T.width||!T.height)&&(T.width=String(this.img.naturalWidth),T.height=String(this.img.naturalHeight)),this.form.patchValue(T),this.addSub(this.form.valueChanges.subscribe(()=>this.updatePreview())),this.updatePreview()}updatePreview(){const T=this.preview.nativeElement.style,U=this.getImageProperties();for(const Xe of Object.keys(U))T[Xe]=U[Xe];const X=parseInt(U.width,10),Ae=parseInt(U.height,10),Qe=X/Ae;let je,$e;X>=Ae?(je=200,$e=je/Qe):($e=200,je=$e*Qe),T.maxWidth=`${je}px`,T.maxHeight=`${$e}px`}getImageProperties(){const T=this.form.value;for(const U of Object.keys(T)){let X=T[U];!(0,m.cS)(X)&&/^\d+$/.test(X)&&(X+="px"),T[U]=X}return T.borderWidth&&parseInt(T.borderWidth,10)>0&&(T.borderStyle="solid"),T}save(){this.select.emit(this.getImageProperties()),this.modalRef.hide()}}return W.\u0275fac=function(T){return new(T||W)(n.Y36(n.zs3),n.Y36(C.UZ))},W.\u0275cmp=n.Xpm({type:W,selectors:[["image-properties-dialog"]],viewQuery:function(T,U){if(1&T&&n.Gf(r,5),2&T){let X;n.iGM(X=n.CRH())&&(U.preview=X.first)}},inputs:{img:"img"},outputs:{select:"select"},features:[n.qOj],decls:21,vars:20,consts:[[1,"container"],[1,"row"],[1,"col",3,"formGroup"],["formControlName","width","numbersOnly","",3,"label"],["formControlName","height","numbersOnly","",3,"label"],[3,"formControl","label"],["formControlName","borderWidth","numbersOnly","",3,"label"],["formControlName","marginTop","numbersOnly","",3,"label"],["formControlName","marginBottom","numbersOnly","",3,"label"],["formControlName","marginLeft","numbersOnly","",3,"label"],["formControlName","marginRight","numbersOnly","",3,"label"],["formControlName","float",3,"label","emptyOption"],["value","left",3,"text"],["value","right",3,"text"],["class","col",4,"ngIf"],[3,"label","action"],["outline","",3,"label","action"],[1,"col"],[1,"preview"],[3,"src"],["preview",""]],template:function(T,U){1&T&&(n.TgZ(0,"h1"),n._uU(1),n.qZA(),n.TgZ(2,"div",0)(3,"div",1)(4,"div",2),n._UZ(5,"input-field",3)(6,"input-field",4)(7,"boolean-field",5)(8,"input-field",6)(9,"input-field",7)(10,"input-field",8)(11,"input-field",9)(12,"input-field",10),n.TgZ(13,"single-selection-field",11),n._UZ(14,"field-option",12)(15,"field-option",13),n.qZA()(),n.YNc(16,d,5,2,"div",14),n.ALo(17,"async"),n.qZA()(),n.TgZ(18,"actions")(19,"action-button",15),n.NdJ("action",function(){return U.save()}),n.qZA(),n.TgZ(20,"action-button",16),n.NdJ("action",function(){return U.modalRef.hide()}),n.qZA()()),2&T&&(n.xp6(1),n.Oqu(U.i18n.field.html.image.titleProperties),n.xp6(3),n.Q6J("formGroup",U.form),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.width),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.height),n.xp6(1),n.Q6J("formControl",U.constrain)("label",U.i18n.field.html.image.contrain),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.border),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.marginTop),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.marginBottom),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.marginLeft),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.marginRight),n.xp6(1),n.Q6J("label",U.i18n.field.html.image.float)("emptyOption",U.i18n.field.html.image.floatNone),n.xp6(1),n.Q6J("text",U.i18n.field.html.image.floatLeft),n.xp6(1),n.Q6J("text",U.i18n.field.html.image.floatRight),n.xp6(1),n.Q6J("ngIf",n.lcZ(17,18,U.layout.gtxxs$)),n.xp6(3),n.Q6J("label",U.i18n.general.save),n.xp6(1),n.Q6J("label",U.i18n.general.cancel))},directives:[e.JL,e.sg,E.q,e.JJ,e.u,I.X,L.M,e.oH,N.f,B.s,H.O5,y.h,z.x],pipes:[H.Ov],encapsulation:2,changeDetection:0}),W})();var h=s(18),M=s(5926),J=s(591),ie=s(1787),me=s(8361),re=s(3812),_e=s(867),te=s(8397),le=s(48);function q(W,ge){if(1&W){const T=n.EpF();n.TgZ(0,"action-button",10),n.NdJ("action",function(){return n.CHM(T),n.oxw(3).modalRef.hide()}),n.qZA()}if(2&W){const T=n.oxw(3);n.Q6J("label",T.i18n.general.cancel)}}function ve(W,ge){if(1&W){const T=n.EpF();n.ynx(0),n.TgZ(1,"h2"),n._uU(2),n.qZA(),n.TgZ(3,"input-field",7),n.NdJ("enter",function(){n.CHM(T);const X=n.oxw(2);return X.selectUrl(X.urlControl.value)}),n.qZA(),n.TgZ(4,"actions")(5,"action-button",8),n.NdJ("action",function(){n.CHM(T);const X=n.oxw(2);return X.selectUrl(X.urlControl.value)}),n.qZA(),n.YNc(6,q,1,1,"action-button",9),n.qZA(),n.BQk()}if(2&W){const T=n.oxw(2);n.xp6(2),n.Oqu(T.i18n.field.html.image.sourceUrl),n.xp6(1),n.Q6J("label",T.i18n.field.html.image.url)("formControl",T.urlControl),n.xp6(2),n.Q6J("label",T.i18n.general.submit),n.xp6(1),n.Q6J("ngIf",T.urlOnly)}}function ce(W,ge){if(1&W&&(n.ynx(0),n._UZ(1,"hr"),n.TgZ(2,"h2"),n._uU(3),n.qZA(),n.BQk()),2&W){const T=n.oxw(4);n.xp6(3),n.Oqu(T.i18n.field.html.image.sourceExisting)}}function ye(W,ge){if(1&W&&n._UZ(0,"field-option",15),2&W){const T=ge.$implicit;n.Q6J("value",T.category.id)("text",T.category.name)}}function Se(W,ge){if(1&W&&(n.TgZ(0,"single-selection-field",13),n.YNc(1,ye,1,2,"field-option",14),n.qZA()),2&W){const T=n.oxw(2).ngIf,U=n.oxw(2);n.Q6J("label",U.i18n.general.category)("formControl",U.categoryControl),n.xp6(1),n.Q6J("ngForOf",T.categories)}}function Ne(W,ge){1&W&&n.GkF(0)}function Ze(W,ge){if(1&W&&(n.ynx(0),n.YNc(1,ce,4,1,"ng-container",6),n.YNc(2,Se,2,3,"single-selection-field",11),n.YNc(3,Ne,1,0,"ng-container",12),n.BQk()),2&W){const T=n.oxw().ngIf,U=n.oxw(2),X=n.MAs(7);n.xp6(1),n.Q6J("ngIf",U.allowUrl),n.xp6(1),n.Q6J("ngIf",(null==T.categories?null:T.categories.length)>1),n.xp6(1),n.Q6J("ngTemplateOutlet",X)}}function Ue(W,ge){if(1&W&&(n.ynx(0),n.YNc(1,Ze,4,3,"ng-container",6),n.BQk()),2&W){const T=ge.ngIf;n.xp6(1),n.Q6J("ngIf",(null==T.categories?null:T.categories.length)>0)}}function fe(W,ge){if(1&W&&(n.ynx(0),n._UZ(1,"hr"),n.TgZ(2,"h2"),n._uU(3),n.qZA(),n.BQk()),2&W){const T=n.oxw(3);n.xp6(3),n.Oqu(T.i18n.field.html.image.sourceExisting)}}function Pe(W,ge){1&W&&n.GkF(0)}function ne(W,ge){if(1&W&&(n.ynx(0),n.YNc(1,fe,4,1,"ng-container",6),n.YNc(2,Pe,1,0,"ng-container",12),n.BQk()),2&W){const T=n.oxw(2),U=n.MAs(7);n.xp6(1),n.Q6J("ngIf",T.allowUrl),n.xp6(1),n.Q6J("ngTemplateOutlet",U)}}function Oe(W,ge){if(1&W&&(n.ynx(0),n.YNc(1,ve,7,5,"ng-container",6),n.YNc(2,Ue,2,1,"ng-container",6),n.ALo(3,"async"),n.YNc(4,ne,3,2,"ng-container",6),n.ALo(5,"async"),n.BQk()),2&W){const T=n.oxw();n.xp6(1),n.Q6J("ngIf",T.allowUrl),n.xp6(1),n.Q6J("ngIf",n.lcZ(3,3,T.systemCustom$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(5,5,T.userCustom$))}}function Ee(W,ge){1&W&&n._UZ(0,"spinner",16)}function Me(W,ge){if(1&W){const T=n.EpF();n.TgZ(0,"avatar",19),n.NdJ("click",function(){const Ae=n.CHM(T).$implicit;return n.oxw(3).selectUrl(Ae.url)}),n.qZA()}if(2&W){const T=ge.$implicit;n.Q6J("image",T)("roundBorders",!1)("tooltip",T.name)}}function w(W,ge){if(1&W&&(n.ynx(0),n.TgZ(1,"div",17),n.YNc(2,Me,1,3,"avatar",18),n.qZA(),n.BQk()),2&W){const T=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",T.images$.value)}}function F(W,ge){if(1&W&&(n.YNc(0,w,3,1,"ng-container",0),n.ALo(1,"async")),2&W){const T=n.oxw(),U=n.MAs(9);let X;n.Q6J("ngIf",(null==(X=n.lcZ(1,2,T.images$))?null:X.length)>0)("ngIfElse",U)}}function a(W,ge){if(1&W&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&W){const T=n.oxw();n.xp6(1),n.Oqu(T.i18n.field.html.image.noImages)}}function v(W,ge){if(1&W){const T=n.EpF();n.TgZ(0,"action-button",8),n.NdJ("action",function(){return n.CHM(T),n.oxw(2),n.MAs(11).perform()}),n.qZA()}if(2&W){const T=n.oxw(2);n.Q6J("label",T.i18n.field.html.image.upload)}}function ee(W,ge){1&W&&n._UZ(0,"span")}function K(W,ge){if(1&W){const T=n.EpF();n.TgZ(0,"actions"),n.YNc(1,v,1,1,"action-button",20),n.ALo(2,"async"),n.YNc(3,ee,1,0,"ng-template",null,21,n.W1O),n.TgZ(5,"action-button",10),n.NdJ("action",function(){return n.CHM(T),n.oxw().modalRef.hide()}),n.qZA()()}if(2&W){const T=n.MAs(4),U=n.oxw();n.xp6(1),n.Q6J("ngIf",n.lcZ(2,3,U.canUpload$))("ngIfElse",T),n.xp6(4),n.Q6J("label",U.i18n.general.cancel)}}let Ie=(()=>{class W extends j.H{constructor(T,U,X){super(T),this.imagesService=U,this.modalRef=X,this.select=new n.vpe,this.allowUrl=!1,this.urlOnly=!1,this.urlControl=new e.NI,this.ready$=new J.X(!1),this.images$=new J.X(null),this.categoryControl=new e.NI,this.systemCustom$=new J.X(null),this.userCustom$=new J.X(null),this.canUpload$=new J.X(!1),this.uploadOwner$=new J.X(null)}ngOnInit(){super.ngOnInit(),this.dataForFrontendHolder.auth.role===t.g.ADMINISTRATOR?(this.allowUrl=!0,this.uploadKind=h.Y.SYSTEM_CUSTOM,this.addSub(this.imagesService.getSystemCustomImagesListData().subscribe(U=>{if(this.systemCustom$.next(U),this.urlOnly=(0,m.cS)(U.categories)||!U.categories.find(X=>X.canEdit||!(0,m.cS)(X.images)),this.addSub(this.categoryControl.valueChanges.subscribe(X=>{const Ae=U.categories.find(Qe=>Qe.category.id===X);this.canUpload$.next(null!=Ae&&Ae.canCreate),this.uploadOwner$.next(X)})),!(0,m.cS)(U.categories)){const X=U.categories[0];this.categoryControl.setValue(X.category.id),this.canUpload$.next(X.canCreate)}this.ready$.next(!0)})),this.addSub(this.categoryControl.valueChanges.subscribe(U=>{const X=((this.systemCustom$.value||{}).categories||[]).find(Ae=>Ae.category.id===U)||{};this.images$.next(X.images||[])}))):(this.uploadKind=h.Y.USER_CUSTOM,this.uploadOwner$.next(this.ApiHelper.SELF),this.addSub(this.imagesService.getUserImagesListData({user:this.ApiHelper.SELF,kind:M.H.CUSTOM}).subscribe(U=>{this.userCustom$.next(U),this.canUpload$.next(U.canCreate),this.images$.next(U.images),this.ready$.next(!0)})))}selectUrl(T){(0,m.cS)(T)||(T.includes("://")||(T=`http://${T}`),this.select.emit(T),this.modalRef.hide())}}return W.\u0275fac=function(T){return new(T||W)(n.Y36(n.zs3),n.Y36(ie.C),n.Y36(C.UZ))},W.\u0275cmp=n.Xpm({type:W,selectors:[["insert-image-dialog"]],outputs:{select:"select"},features:[n.qOj],decls:14,vars:10,consts:[[4,"ngIf","ngIfElse"],["spinner",""],["images",""],["noImages",""],[3,"target","owner","uploadDone"],["upload",""],[4,"ngIf"],["focused","",3,"label","formControl","enter"],[3,"label","action"],["outline","",3,"label","action",4,"ngIf"],["outline","",3,"label","action"],[3,"label","formControl",4,"ngIf"],[4,"ngTemplateOutlet"],[3,"label","formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],[1,"mx-auto","my-3"],[1,"thumbnails"],["size","huge","class","cursor-pointer",3,"image","roundBorders","tooltip","click",4,"ngFor","ngForOf"],["size","huge",1,"cursor-pointer",3,"image","roundBorders","tooltip","click"],[3,"label","action",4,"ngIf","ngIfElse"],["noUpload",""]],template:function(T,U){if(1&T&&(n.TgZ(0,"h1"),n._uU(1),n.qZA(),n.YNc(2,Oe,6,7,"ng-container",0),n.ALo(3,"async"),n.YNc(4,Ee,1,0,"ng-template",null,1,n.W1O),n.YNc(6,F,2,4,"ng-template",null,2,n.W1O),n.YNc(8,a,2,1,"ng-template",null,3,n.W1O),n.TgZ(10,"image-upload",4,5),n.NdJ("uploadDone",function(Ae){return U.selectUrl(null==Ae[0]?null:Ae[0].url)}),n.ALo(12,"async"),n.qZA(),n.YNc(13,K,6,5,"actions",6)),2&T){const X=n.MAs(5);n.xp6(1),n.Oqu(U.i18n.field.html.image.titleInsert),n.xp6(1),n.Q6J("ngIf",n.lcZ(3,6,U.ready$))("ngIfElse",X),n.xp6(8),n.Q6J("target",U.uploadKind)("owner",n.lcZ(12,8,U.uploadOwner$)),n.xp6(3),n.Q6J("ngIf",!U.urlOnly)}},directives:[H.O5,E.q,me.A,e.JJ,e.oH,y.h,z.x,N.f,H.sg,B.s,H.tP,re.O,_e.A,te.i9,le.J],pipes:[H.Ov],encapsulation:2,changeDetection:0}),W})();var V=s(6736);function ue(W,ge){if(1&W&&n._UZ(0,"input-field",5),2&W){const T=n.oxw();n.Q6J("label",T.i18n.field.html.link.text)}}let Ce=(()=>{class W extends j.H{constructor(T,U){super(T),this.modalRef=U,this.select=new n.vpe}ngOnInit(){super.ngOnInit(),this.form=this.formBuilder.group({text:[this.link?this.link.innerText:null,this.link?e.kI.required:null],href:[this.link?this.link.href:null,e.kI.required]})}save(){this.select.emit(this.form.value),this.modalRef.hide()}}return W.\u0275fac=function(T){return new(T||W)(n.Y36(n.zs3),n.Y36(C.UZ))},W.\u0275cmp=n.Xpm({type:W,selectors:[["link-properties-dialog"]],inputs:{link:"link"},outputs:{select:"select"},features:[n.qOj],decls:8,vars:7,consts:[[3,"formGroup"],["required","","formControlName","text","focused","",3,"label",4,"ngIf"],["required","","formControlName","href",3,"focused","label"],[3,"label","action"],["outline","",3,"label","action"],["required","","formControlName","text","focused","",3,"label"]],template:function(T,U){1&T&&(n.TgZ(0,"h1"),n._uU(1),n.qZA(),n.ynx(2,0),n.YNc(3,ue,1,1,"input-field",1),n._UZ(4,"url-field",2),n.BQk(),n.TgZ(5,"actions")(6,"action-button",3),n.NdJ("action",function(){return U.save()}),n.qZA(),n.TgZ(7,"action-button",4),n.NdJ("action",function(){return U.modalRef.hide()}),n.qZA()()),2&T&&(n.xp6(1),n.Oqu(U.i18n.field.html.link.title),n.xp6(1),n.Q6J("formGroup",U.form),n.xp6(1),n.Q6J("ngIf",U.link),n.xp6(1),n.Q6J("focused",!U.link)("label",U.i18n.field.html.link.href),n.xp6(2),n.Q6J("label",U.i18n.general.save),n.xp6(1),n.Q6J("label",U.i18n.general.cancel))},directives:[e.JL,e.sg,H.O5,E.q,e.Q7,e.JJ,e.u,me.A,V.X,y.h,z.x],encapsulation:2,changeDetection:0}),W})();var De=s(7224),he=s(195),Fe=s(70),k=s(3455);const de=["editor"];function we(W,ge){1&W&&n.GkF(0)}function Be(W,ge){if(1&W&&(n.TgZ(0,"label-value",2),n.YNc(1,we,1,0,"ng-container",3),n.qZA()),2&W){const T=n.oxw(),U=n.MAs(2);n.Q6J("formField",T.self)("informationText",T.informationText),n.xp6(1),n.Q6J("ngTemplateOutlet",U)}}function Ye(W,ge){if(1&W&&(n.TgZ(0,"option",20),n._uU(1),n.qZA()),2&W){const T=ge.$implicit;n.Q6J("value",T.value),n.xp6(1),n.hij(" ",T.label,"")}}function qe(W,ge){if(1&W){const T=n.EpF();n.TgZ(0,"select",18),n.NdJ("change",function(){n.CHM(T);const X=n.oxw().$implicit;return n.oxw(3).run(X)}),n.YNc(1,Ye,2,2,"option",19),n.qZA()}if(2&W){const T=n.oxw().$implicit,U=n.oxw(3);n.Q6J("id",T.fieldId)("tooltip",T.tooltip),n.xp6(1),n.Q6J("ngForOf",U.values(T))}}function tt(W,ge){if(1&W){const T=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){n.CHM(T);const X=n.oxw().$implicit;return n.oxw(3).run(X)}),n._UZ(1,"icon",9),n.qZA()}if(2&W){const T=n.oxw().$implicit;n.Q6J("id",T.fieldId)("tooltip",T.tooltip),n.xp6(1),n.Q6J("icon",T.icon)}}function gt(W,ge){if(1&W&&(n.ynx(0),n.YNc(1,qe,2,3,"select",16),n.YNc(2,tt,2,3,"button",17),n.BQk()),2&W){const T=ge.$implicit;n.xp6(1),n.Q6J("ngIf","select"===T.widget),n.xp6(1),n.Q6J("ngIf","button"===T.widget)}}function ft(W,ge){if(1&W&&(n.TgZ(0,"div",14),n.YNc(1,gt,3,2,"ng-container",15),n.qZA()),2&W){const T=ge.$implicit;n.xp6(1),n.Q6J("ngForOf",T)}}const _t=function(W){return{active:W}},vt=function(W){return{"d-none":W}},Ct=function(W,ge){return{"d-none":W,"is-invalid":ge}};function xt(W,ge){if(1&W){const T=n.EpF();n.TgZ(0,"div",4)(1,"div",5),n.YNc(2,ft,2,1,"div",6),n.TgZ(3,"div",7)(4,"button",8),n.NdJ("click",function(){return n.CHM(T),n.oxw().toggleSource()}),n.ALo(5,"async"),n._UZ(6,"icon",9),n.qZA()()(),n.TgZ(7,"div",10,11),n.NdJ("click",function(){return n.CHM(T),n.oxw().updateToolbarState()})("keydown",function(){return n.CHM(T),n.oxw().updateToolbarState()})("input",function(){n.CHM(T);const X=n.MAs(8);return n.oxw().formControl.setValue(X.innerHTML)}),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"textarea",12),n.ALo(11,"async"),n.ALo(12,"async"),n._uU(13,"    "),n.qZA(),n._UZ(14,"field-errors",13),n.qZA()}if(2&W){const T=n.oxw();n.xp6(2),n.Q6J("ngForOf",T.actions),n.xp6(2),n.Q6J("id",T.id+"_toggleSource")("ngClass",n.VKq(20,_t,n.lcZ(5,12,T.source$)))("tooltip",T.i18n.field.html.source),n.xp6(2),n.Q6J("icon",T.SvgIcon.Code),n.xp6(1),n.Q6J("ngClass",n.VKq(22,vt,n.lcZ(9,14,T.source$)))("id",T.id+"_editor"),n.uIk("contenteditable",!T.disabled),n.xp6(3),n.Q6J("id",T.id+"_source")("ngClass",n.WLB(24,Ct,!1===n.lcZ(11,16,T.source$),"INVALID"===n.lcZ(12,18,T.formControl.statusChanges)&&T.formControl.touched))("formControl",T.formControl),n.xp6(4),n.Q6J("control",T.formControl)}}class ct{constructor(ge,T,U){this.fieldId=ge,this.widget=T,this.tooltip=U,this.expandSelection=!1}element(){return document.getElementById(this.fieldId)}expand(){return this.expandSelection=!0,this}}class nt extends ct{constructor(ge,T,U,X){super(`${ge}_${U}`,T,X),this.type=T,this.command=U}}class et extends nt{constructor(ge,T,U,X){super(ge,"select",T,U),this.values=X}element(){return super.element()}}class He extends nt{constructor(ge,T,U,X){super(ge,"button",T,U),this.icon=X}element(){return super.element()}}class it extends ct{constructor(ge,T,U,X){super(ge,"button",U),this.callback=T,this.icon=X}}let yt=(()=>{class W extends g.T{constructor(T,U,X){super(T,U),this.modal=X,this.source$=new J.X(!1)}ngOnInit(){super.ngOnInit(),this.actions=[[new He(this.id,"undo",this.i18n.field.html.undo,l.l.ArrowCounterclockwise),new He(this.id,"redo",this.i18n.field.html.redo,l.l.ArrowClockwise)],[new et(this.id,"formatblock",this.i18n.field.html.block,[{value:"h1",label:this.i18n.field.html.blockH1},{value:"h2",label:this.i18n.field.html.blockH2},{value:"h3",label:this.i18n.field.html.blockH3},{value:"h4",label:this.i18n.field.html.blockH4},{value:"h5",label:this.i18n.field.html.blockH5},{value:"h6",label:this.i18n.field.html.blockH6},{value:"p",label:this.i18n.field.html.blockP},{value:"pre",label:this.i18n.field.html.blockPre}])],[new et(this.id,"fontname",this.i18n.field.html.font,[{value:getComputedStyle(document.body).fontFamily,label:this.i18n.field.html.fontDefault},{value:"sans-serif",label:this.i18n.field.html.fontSansSerif},{value:"serif",label:this.i18n.field.html.fontSerif},{value:"monospace",label:this.i18n.field.html.fontMonospace}]).expand()],[new et(this.id,"fontsize",this.i18n.field.html.size,[{value:"1",label:this.i18n.field.html.size1},{value:"2",label:this.i18n.field.html.size2},{value:"3",label:this.i18n.field.html.size3},{value:"4",label:this.i18n.field.html.size4},{value:"5",label:this.i18n.field.html.size5},{value:"6",label:this.i18n.field.html.size6},{value:"7",label:this.i18n.field.html.size7}]).expand()],[new He(this.id,"bold",this.i18n.field.html.bold,l.l.TypeBold).expand(),new He(this.id,"italic",this.i18n.field.html.italic,l.l.TypeItalic).expand(),new He(this.id,"underline",this.i18n.field.html.underline,l.l.TypeUnderline).expand(),new He(this.id,"strikethrough",this.i18n.field.html.strikethrough,l.l.TypeStrikethrough).expand()],[new He(this.id,"justifyLeft",this.i18n.field.html.alignLeft,l.l.TextLeft),new He(this.id,"justifyCenter",this.i18n.field.html.alignCenter,l.l.TextCenter),new He(this.id,"justifyRight",this.i18n.field.html.alignRight,l.l.TextRight),new He(this.id,"justifyFull",this.i18n.field.html.alignJustify,l.l.Justify)],[new He(this.id,"insertUnorderedList",this.i18n.field.html.listBulleted,l.l.ListUl),new He(this.id,"insertOrderedList",this.i18n.field.html.listNumbered,l.l.ListOl),new He(this.id,"outdent",this.i18n.field.html.indentLess,l.l.TextIndentRight),new He(this.id,"indent",this.i18n.field.html.indentMore,l.l.TextIndentLeft)],this.actionsWithImage,[new He(this.id,"removeformat",this.i18n.field.html.removeFormat,l.l.X).expand()]].filter(T=>!(0,m.cS)(T))}get actionsWithImage(){const T=[];return(((this.dataForFrontendHolder.auth.permissions||{}).images||{}).myCustom||this.dataForFrontendHolder.auth.role===t.g.ADMINISTRATOR)&&T.push(new it(`${this.id}_insertImage`,()=>this.insertImage(),this.i18n.field.html.image.tooltip,l.l.Image)),T.push(new it(`${this.id}_insertLink`,()=>this.insertLink(),this.i18n.field.html.link.tooltip,l.l.Link).expand()),T.push(new it(`${this.id}_removeLink`,()=>this.unlink(),this.i18n.field.html.unlink,l.l.LinkSlash)),T}ngAfterViewInit(){const T=this.editor.nativeElement;T.innerHTML=this.value||"",T.querySelectorAll("img").forEach(U=>this.setupImage(U))}updateToolbarState(){for(const T of this.actions)for(const U of T){if(!(U instanceof nt))continue;const X=document.getElementById(`${this.id}_${U.command}`);if(X)if("select"===X.tagName.toLowerCase()){const Qe=document.queryCommandValue(U.command);let $e=0;const Xe=X.options;for(let ot=0;ot<Xe.length;ot++)if(Xe.item(ot).value===Qe){$e=ot;break}Xe.selectedIndex=$e}else document.queryCommandState(U.command)?X.classList.add("active"):X.classList.remove("active")}}getFocusableControl(){return this.editor.nativeElement}getDisabledValue(){return this.value}toggleSource(){const T=!this.source$.value;this.source$.next(T),T||(this.editor.nativeElement.innerHTML=this.value);for(const U of this.actions)for(const X of U){const Ae=X.element();Ae&&void 0!==Ae.disabled&&(Ae.disabled=T)}setTimeout(()=>(0,m.T_)(`${this.id}_${T?"source":"editor"}`))}run(T){this.focusEditor("store");let U=!1;T.expandSelection&&(U=this.expandSelection()),T instanceof et?this.doRunCommand(T.command,T.element().value):T instanceof He?this.doRunCommand(T.command):T instanceof it&&T.callback(),U&&T instanceof nt&&window.getSelection().collapseToEnd()}expandSelection(){if(this.selection){const T=this.selection;if(T&&T.collapsed){const U=T.startContainer.textContent;if(!(0,m.cS)(U)){let X=T.startOffset,Ae=T.startOffset;for(;X>0&&/\w/.test(U.charAt(X-1));)X--;for(;Ae<=U.length&&/\w/.test(U.charAt(Ae));)Ae++;window.getSelection().removeAllRanges();const Qe=document.createRange();return Qe.setStart(T.startContainer,X),Qe.setEnd(T.startContainer,Ae),window.getSelection().addRange(Qe),!0}}}return!1}doRunCommand(T,U){this.focusEditor(),document.execCommand(T,!1,U),this.focusEditor(),this.updateValue(),this.updateToolbarState()}focusEditor(T="none"){switch(this.editor.nativeElement.focus(),T){case"store":this.selection=0===window.getSelection().rangeCount?null:window.getSelection().getRangeAt(0);break;case"restore":this.selection&&(window.getSelection().removeAllRanges(),window.getSelection().addRange(this.selection))}}updateValue(){this.value=this.editor.nativeElement.innerHTML}insertImage(){this.focusEditor("store"),this.modal.show(Ie,{class:"modal-form modal-form-medium"}).content.select.pipe((0,De.P)()).subscribe(X=>this.doInsertImage(X)),this.modal.onHide.pipe((0,De.P)()).subscribe(()=>this.focusEditor("restore"))}insertLink(){this.focusEditor("store"),this.showLinkProperties()}unlink(){if(this.focusEditor("store"),(0,m.cS)(this.selection))return;const T=window.getSelection();if(T.isCollapsed){let U=T.focusNode;for(;U.nodeType===Node.TEXT_NODE||U.nodeType===Node.ELEMENT_NODE&&"a"!==U.nodeName.toLowerCase();)U=U.parentElement;if(!U||"a"!==U.nodeName.toLowerCase())return;const X=document.createRange();X.selectNode(U),window.getSelection().removeAllRanges(),window.getSelection().addRange(X),this.selection=X}this.doRunCommand("unlink")}doInsertImage(T){const U=`img_${(new Date).getTime()}`;this.doRunCommand("insertHTML",`<img id="${U}">`);const X=document.getElementById(U);X.removeAttribute("id"),X.src=T,this.setupImage(X),this.updateValue()}setupImage(T){T.style.maxWidth="100%",T.style.maxHeight="100%";const U=X=>{X.stopPropagation(),X.preventDefault(),this.showImageProperties(T)};T.addEventListener("dblclick",U,!1),T.addEventListener("contextmenu",U,!1)}setupLink(T){const U=X=>{X.stopPropagation(),X.preventDefault(),this.showLinkProperties(T)};T.addEventListener("dblclick",U,!1),T.addEventListener("contextmenu",U,!1)}showImageProperties(T){this.modal.show(u,{class:"modal-form modal-form-medium",initialState:{img:T}}).content.select.pipe((0,De.P)()).subscribe(Ae=>this.doSetImageProperties(T,Ae)),this.modal.onHide.pipe((0,De.P)()).subscribe(()=>this.focusEditor("restore"))}showLinkProperties(T){this.modal.show(Ce,{class:"modal-form modal-form-medium",initialState:{link:T}}).content.select.pipe((0,De.P)()).subscribe(Ae=>this.doSetLinkProperties(T,Ae)),this.modal.onHide.pipe((0,De.P)()).subscribe(()=>this.focusEditor("restore"))}doSetImageProperties(T,U){const X=T.style;for(const Ae of Object.keys(U))X[Ae]=U[Ae];this.updateValue()}doSetLinkProperties(T,U){if(T)if(null==U||(0,m.cS)(U.href)){const X=T.parentElement;X.insertBefore(document.createTextNode(T.innerText),T),X.removeChild(T)}else T.href=U.href,T.innerText=U.text||U.href;else if(!(0,m.cS)(this.selection)){this.focusEditor("restore"),this.doRunCommand("createLink",U.href);const X=this.selection[0].startContainer;switch(X.nodeType){case Node.ELEMENT_NODE:(0,m.G7)(X.getElementsByTagName("a")).forEach(Ae=>this.setupLink(Ae));break;case Node.TEXT_NODE:X.parentElement&&"a"===X.parentElement.tagName.toLowerCase()&&this.setupLink(X.parentElement)}}this.updateValue()}values(T){if(T instanceof et)return T.values}}return W.\u0275fac=function(T){return new(T||W)(n.Y36(n.zs3),n.Y36(e.gN,13),n.Y36(C.tT))},W.\u0275cmp=n.Xpm({type:W,selectors:[["html-field"]],viewQuery:function(T,U){if(1&T&&n.Gf(de,5),2&T){let X;n.iGM(X=n.CRH())&&(U.editor=X.first)}},features:[n._Bn([{provide:e.JU,useExisting:W,multi:!0}]),n.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],[1,"wrapper"],[1,"toolbar"],["class","toolbar-group",4,"ngFor","ngForOf"],[1,"toolbar-group","flex-grow-1","d-flex","justify-content-end"],["type","button",1,"btn","btn-icon",3,"id","ngClass","tooltip","click"],[3,"icon"],[1,"editor",3,"ngClass","id","click","keydown","input"],["editor",""],[1,"form-control","source",3,"id","ngClass","formControl"],[3,"control"],[1,"toolbar-group"],[4,"ngFor","ngForOf"],["class","form-control custom-select",3,"id","tooltip","change",4,"ngIf"],["type","button","class","btn btn-icon",3,"id","tooltip","click",4,"ngIf"],[1,"form-control","custom-select",3,"id","tooltip","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","button",1,"btn","btn-icon",3,"id","tooltip","click"]],template:function(T,U){if(1&T&&(n.YNc(0,Be,2,3,"label-value",0),n.YNc(1,xt,15,27,"ng-template",null,1,n.W1O)),2&T){const X=n.MAs(2);n.Q6J("ngIf",U.label)("ngIfElse",X)}},directives:[H.O5,he.t,H.tP,H.sg,te.i9,e.YN,e.Kr,Fe.o,H.mk,e.Fj,e.JJ,e.oH,k.e],pipes:[H.Ov],encapsulation:2,changeDetection:0}),W})()},48:(Te,se,s)=>{"use strict";s.d(se,{J:()=>z});var e=s(520),t=s(6435),l=s(18),g=s(5926),m=s(7947),n=s(6163),j=s(591),Q=s(567),R=s(2916),x=s(7224),P=s(7545),O=s(297),_=s(1787),D=s(543),C=s(8134),E=s(9564),I=s(9808),L=s(1217);const N=["inputField"];function B(r,d){if(1&r&&(t.ynx(0),t.TgZ(1,"progressbar",5),t.ALo(2,"async"),t._uU(3),t.qZA(),t.BQk()),2&r){const u=d.$implicit;t.xp6(1),t.Q6J("max",u.totalSize)("value",t.lcZ(2,3,u.progress$)),t.xp6(2),t.hij(" ",u.name," ")}}function H(r,d){if(1&r&&(t.TgZ(0,"div",3),t.YNc(1,B,4,5,"ng-container",4),t.qZA()),2&r){const u=t.oxw();t.Q6J("ngClass",u.containerClass),t.xp6(1),t.Q6J("ngForOf",u.files.value)}}class y{constructor(d,u,h,M){this.name=d,this.width=u,this.height=h,this.content=M,this.progress$=new j.X(0),this.uploadDone=!1}get totalSize(){return this.content.size}get progress(){return this.progress$.value}set progress(d){this.progress$.next(d)}}let z=(()=>{class r extends m.H{constructor(u,h,M,J,ie,me,re,_e){super(u),this.http=h,this.apiConfiguration=M,this.imagesService=J,this.changeDetector=ie,this.nextRequestState=me,this.authHelper=re,this.storedFileCacheService=_e,this.uploading$=new j.X(!1),this.containerClass="",this.max=1,this.owner="",this.user="",this.uploadDone=new t.vpe,this._keepUrls=!1,this.files=new j.X(null),this.urlsToRevoke=[]}get keepUrls(){return this._keepUrls}set keepUrls(u){this._keepUrls=(0,n.Iw)(u)}ngOnDestroy(){if(super.ngOnDestroy(),!this.keepUrls)for(const u of this.urlsToRevoke)URL.revokeObjectURL(u);this.subscription&&this.subscription.unsubscribe()}perform(){this.uploading$.value||this.inputField.nativeElement.click()}uploadFile(u){const h=this.dataForFrontendHolder.dataForUi;(0,n.tg)(u,(h||{}).maxImageWidth||2e3,(h||{}).maxImageHeight||2e3).pipe((0,x.P)(),(0,P.w)(ie=>{const me=new y(u.name,ie.width,ie.height,ie.content);return this.doUpload(me)})).subscribe(ie=>{this.uploadDone.emit([ie])})}filesSelected(u){if(0===u.length)return;this.uploading$.next(!0);const h=this.dataForFrontendHolder.dataForUi,M=(h||{}).maxImageWidth||2e3,J=(h||{}).maxImageHeight||2e3;this.files.next([]);const ie=[],me=[],re=Math.min(this.max,u.length);for(let _e=0;_e<re;_e++){const te=u.item(_e);ie.push((0,n.tg)(te,M,J)),me.push(te.name)}this.subscription=(0,Q.D)(ie).subscribe(_e=>{this.subscription.unsubscribe(),this.changeDetector.detectChanges();const te=[],le=[];for(let q=0;q<_e.length;q++){const ce=_e[q],ye=new y(me[q],ce.width,ce.height,ce.content);le.push(ye),te.push(this.doUpload(ye))}this.files.next(le),this.subscription=(0,Q.D)(te).subscribe(q=>{this.inputField.nativeElement.value=null,this.subscription.unsubscribe(),this.files.next([]),this.uploading$.next(!1),this.uploadDone.emit(q),this.changeDetector.detectChanges()})})}doUpload(u){return new R.y(h=>{let M,J="images/temp";switch(this.target){case l.Y.MARKETPLACE:if(!this.owner)throw new Error("Missing owner");J=`marketplace/${this.owner}/images`;break;case l.Y.PROFILE:if(!this.owner)throw new Error("Missing owner");J=`${this.owner}/images`;break;case l.Y.USER_CUSTOM:if(!this.owner)throw new Error("Missing owner");J=`${this.owner}/images`,M={kind:g.H.CUSTOM};break;case l.Y.SYSTEM_CUSTOM:if(!this.owner)throw new Error("Missing category");J=`/system-images/${this.owner}`;break;default:M={target:this.target,guestKey:this.authHelper.guestKey,user:this.user,customField:null==this.customField?null:this.customField.id,customFieldKind:null==this.customField?null:this.customField.kind}}const ie=new FormData;ie.append("image",u.content,u.name),J=this.nextRequestState.appendAuth(J),J=(0,n.e5)(this.apiConfiguration.rootUrl,J),u.subscription=this.http.post(J,ie,{observe:"events",reportProgress:!0,responseType:"text",params:M}).subscribe(me=>{me.type===e.dt.UploadProgress?u.progress=me.loaded:me.type===e.dt.Response&&(u.subscription.unsubscribe(),u.uploadDone=!0,this.addSub(this.imagesService.viewImage({idOrKey:me.body}).pipe((0,x.P)()).subscribe(re=>{u.image=re,this.storedFileCacheService.write(re),h.next(u.image),h.complete(),this.changeDetector.detectChanges()})))},me=>{(this.files.value||[]).forEach(re=>{re.subscription&&re.subscription.unsubscribe()}),this.files.next([]),this.uploading$.next(!1),h.error(me),h.complete(),this.changeDetector.detectChanges()})})}}return r.\u0275fac=function(u){return new(u||r)(t.Y36(t.zs3),t.Y36(e.eN),t.Y36(O.p),t.Y36(_.C),t.Y36(t.sBO),t.Y36(D.AM),t.Y36(C.N),t.Y36(E.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["image-upload"]],viewQuery:function(u,h){if(1&u&&t.Gf(N,7),2&u){let M;t.iGM(M=t.CRH())&&(h.inputField=M.first)}},inputs:{containerClass:"containerClass",max:"max",target:"target",owner:"owner",user:"user",customField:"customField",keepUrls:"keepUrls"},outputs:{uploadDone:"uploadDone"},features:[t.qOj],decls:4,vars:4,consts:[["type","file","accept","image/png,image/jpeg,image/gif",1,"d-none",3,"multiple","change"],["inputField",""],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],[1,"mt-1",3,"max","value"]],template:function(u,h){if(1&u){const M=t.EpF();t.TgZ(0,"input",0,1),t.NdJ("change",function(){t.CHM(M);const ie=t.MAs(1);return h.filesSelected(ie.files)}),t.qZA(),t.YNc(2,H,2,2,"div",2),t.ALo(3,"async")}if(2&u){let M;t.Q6J("multiple",h.max>1),t.xp6(2),t.Q6J("ngIf",(null==(M=t.lcZ(3,2,h.files))?null:M.length)>0)}},directives:[I.O5,I.mk,I.sg,L.O1],pipes:[I.Ov],encapsulation:2,changeDetection:0}),r})()},5910:(Te,se,s)=>{"use strict";s.d(se,{o:()=>me});var e=s(6435),t=s(3075),l=s(723),g=s(6163),m=s(744),n=s(2986),j=s(8664),Q=s(5204),R=s(1787),x=s(5905),P=s(6247),O=s(9564),_=s(9808),D=s(195),C=s(7229),E=s(8397),I=s(70),L=s(48),N=s(3455);const B=["focusHolder"],H=["imageUpload"];function y(re,_e){1&re&&e.GkF(0)}function z(re,_e){if(1&re&&(e.TgZ(0,"label-value",2),e.YNc(1,y,1,0,"ng-container",3),e.qZA()),2&re){const te=e.oxw(),le=e.MAs(2);e.Q6J("formField",te.self)("informationText",te.informationText),e.xp6(1),e.Q6J("ngTemplateOutlet",le)}}function r(re,_e){if(1&re&&e._UZ(0,"avatar-lightbox",13),2&re){const te=_e.$implicit,le=e.oxw(2);e.Q6J("size",le.avatarSize)("image",te)("additionalImages",le.images)}}function d(re,_e){if(1&re){const te=e.EpF();e.ynx(0),e.TgZ(1,"button",16,17),e.NdJ("click",function(q){e.CHM(te);const ve=e.MAs(2);e.oxw(2);const ce=e.MAs(8),ye=e.oxw();return ce.perform(),ye.blurIfClick(ve,q)}),e._UZ(3,"icon",18),e.qZA(),e.TgZ(4,"button",19),e.NdJ("click",function(){return e.CHM(te),e.oxw(3).captureCamera()}),e._UZ(5,"icon",18),e.qZA(),e.BQk()}if(2&re){const te=e.oxw(3);e.xp6(1),e.Q6J("tooltip",te.i18n.field.image.upload),e.xp6(2),e.Q6J("icon",te.SvgIcon.Upload),e.xp6(1),e.Q6J("tooltip",te.i18n.field.image.camera),e.xp6(1),e.Q6J("icon",te.SvgIcon.Camera)}}function u(re,_e){if(1&re){const te=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(te),e.oxw(3).manageImages()}),e._UZ(1,"icon",18),e.qZA()}if(2&re){const te=e.oxw(3);e.Q6J("tooltip",te.i18n.field.image.manage),e.xp6(1),e.Q6J("icon",te.SvgIcon.Pencil)}}function h(re,_e){if(1&re){const te=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(te),e.oxw(3).removeAllImages()}),e._UZ(1,"icon",18),e.qZA()}if(2&re){const te=e.oxw(3);e.Q6J("tooltip",te.i18n.field.image.remove),e.xp6(1),e.Q6J("icon",te.SvgIcon.Trash)}}function M(re,_e){if(1&re&&(e.ynx(0),e.TgZ(1,"div",14),e.YNc(2,d,6,4,"ng-container",9),e.YNc(3,u,2,2,"button",15),e.YNc(4,h,2,2,"button",15),e.qZA(),e.BQk()),2&re){const te=e.oxw(2);e.xp6(2),e.Q6J("ngIf",1===te.maxFiles||te.images.length<te.maxFiles),e.xp6(1),e.Q6J("ngIf",te.maxFiles>1&&te.images.length>0),e.xp6(1),e.Q6J("ngIf",1===te.maxFiles&&te.images.length>0)}}const J=function(re){return{"is-invalid":re}};function ie(re,_e){if(1&re){const te=e.EpF();e._UZ(0,"div",4,5),e.ALo(2,"async"),e.TgZ(3,"div",6)(4,"div",7),e.YNc(5,r,1,3,"avatar-lightbox",8),e.qZA(),e.YNc(6,M,5,3,"ng-container",9),e.qZA(),e.TgZ(7,"image-upload",10,11),e.NdJ("uploadDone",function(q){return e.CHM(te),e.oxw().onImagesUploaded(q)}),e.qZA(),e._UZ(9,"field-errors",12)}if(2&re){const te=e.oxw();e.Q6J("ngClass",e.VKq(10,J,"INVALID"===e.lcZ(2,8,te.formControl.statusChanges)&&te.formControl.touched)),e.xp6(5),e.Q6J("ngForOf",te.images),e.xp6(1),e.Q6J("ngIf",!te.disabled),e.xp6(1),e.Q6J("max",1==te.maxFiles?1:te.maxFiles-te.images.length)("owner",te.user)("target",te.target)("customField",te.customField),e.xp6(2),e.Q6J("control",te.formControl)}}let me=(()=>{class re extends l.T{constructor(te,le,q,ve,ce,ye,Se,Ne,Ze){super(te,le),this.layout=q,this.errorHandler=ve,this.imagesService=ce,this.changeDetector=ye,this.modal=Se,this.camera=Ne,this.storedFileCacheService=Ze,this.blurIfClick=g.XQ,this.maxFiles=1,this.separator=null,this.user="",this.avatarSize="small",this.upload=new e.vpe}preprocessValue(te){return(0,g.k)(te,this.separator)}ngOnInit(){super.ngOnInit(),this.disabledFormat="component",this.images=null==this.initialImages?[]:this.initialImages instanceof Array?this.initialImages:[this.initialImages],this.uploadedImages=[]}get imageIds(){return(0,g.b_)(this.value,this.separator)}getDisabledValue(){return this.imageIds.map(te=>{const le=this.images.find(q=>q.id===te);return null==le?null:le.name}).filter(te=>null!=te).join(", ")}onImagesUploaded(te){1===this.maxFiles&&this.removeAllImages();const le=this.imageIds;te.forEach(q=>le.push(q.id)),this.value=le,this.uploadedImages=[...te,...this.uploadedImages],this.images=[...this.images,...te],this.formControl.markAsTouched(),this.upload.emit(te),this.notifyTouched()}manageImages(){const te=this.modal.show(m.A,{class:"modal-form",initialState:{images:this.images}});this.addSub(te.content.result.pipe((0,n.q)(1)).subscribe(q=>{let ve=this.imageIds;null!=q.order&&(ve=q.order),(0,g.cS)(q.removedImages)||(this.uploadedImages.filter(ce=>q.removedImages.includes(ce.id)).forEach(ce=>this.addSub(this.imagesService.deleteImage({idOrKey:ce.id}).subscribe())),this.uploadedImages=this.uploadedImages.filter(ce=>!q.removedImages.includes(ce.id)),q.removedImages.forEach(ce=>this.storedFileCacheService.delete(ce))),this.images=ve.map(ce=>this.images.find(ye=>ye.id===ce)),this.value=ve,te.hide(),this.notifyTouched()}))}removeAllImages(){this.uploadedImages.forEach(te=>{this.errorHandler.requestWithCustomErrorHandler(()=>{this.addSub(this.imagesService.deleteImage({idOrKey:te.id}).subscribe())})}),this.images.forEach(te=>this.storedFileCacheService.delete(te.id)),this.images=[],this.value=[],this.notifyTouched()}onValueInitialized(te){this.imageIds.map(le=>this.storedFileCacheService.read(le)).filter(le=>le&&!this.images.find(q=>q.id===le.id)).forEach(le=>this.images.push(le))}notifyTouched(){super.notifyTouched(),this.changeDetector.detectChanges()}getFocusableControl(){return this.focusHolder.nativeElement}captureCamera(){this.camera.capture(te=>this.imageUpload.uploadFile(te))}}return re.\u0275fac=function(te){return new(te||re)(e.Y36(e.zs3),e.Y36(t.gN,13),e.Y36(j.Pb),e.Y36(Q.q),e.Y36(R.C),e.Y36(e.sBO),e.Y36(x.tT),e.Y36(P.y),e.Y36(O.d))},re.\u0275cmp=e.Xpm({type:re,selectors:[["images-field"]],viewQuery:function(te,le){if(1&te&&(e.Gf(B,5),e.Gf(H,5)),2&te){let q;e.iGM(q=e.CRH())&&(le.focusHolder=q.first),e.iGM(q=e.CRH())&&(le.imageUpload=q.first)}},inputs:{maxFiles:"maxFiles",separator:"separator",initialImages:"initialImages",target:"target",user:"user",customField:"customField",avatarSize:"avatarSize"},outputs:{upload:"upload"},features:[e._Bn([{provide:t.JU,useExisting:re,multi:!0}]),e.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],["tabindex","0",2,"width","0","height","0",3,"ngClass"],["focusHolder",""],[1,"d-flex","flex-column","flex-xs-row","w-100"],[1,"d-flex","flex-wrap","flex-grow-1","align-content-center","mt-1","mb-2","mb-xs-0"],["class","d-block mr-2",3,"size","image","additionalImages",4,"ngFor","ngForOf"],[4,"ngIf"],["containerClass","mt-3",3,"max","owner","target","customField","uploadDone"],["imageUpload",""],[3,"control"],[1,"d-block","mr-2",3,"size","image","additionalImages"],[1,"d-flex","align-items-center"],["type","button","class","ml-2 btn btn-icon d-flex align-content-center",3,"tooltip","click",4,"ngIf"],["type","button",1,"btn","btn-icon","d-flex","align-content-center",3,"tooltip","click"],["upload",""],[3,"icon"],["type","button",1,"ml-2","btn","btn-icon","d-flex","align-content-center",3,"tooltip","click"]],template:function(te,le){if(1&te&&(e.YNc(0,z,2,3,"label-value",0),e.YNc(1,ie,10,12,"ng-template",null,1,e.W1O)),2&te){const q=e.MAs(2);e.Q6J("ngIf",le.label)("ngIfElse",q)}},directives:[_.O5,D.t,_.tP,_.mk,_.sg,C.X,E.i9,I.o,L.J,N.e],pipes:[_.Ov],encapsulation:2}),re})()},3728:(Te,se,s)=>{"use strict";s.d(se,{q:()=>D});var e=s(6435),t=s(3075),l=s(723),g=s(9808),m=s(195),n=s(9697),j=s(9998),Q=s(3455);const R=["input"];function x(C,E){1&C&&e.GkF(0)}function P(C,E){if(1&C&&(e.TgZ(0,"label-value",2),e.YNc(1,x,1,0,"ng-container",3),e.qZA()),2&C){const I=e.oxw(),L=e.MAs(2);e.Q6J("formField",I.self)("informationText",I.informationText),e.xp6(1),e.Q6J("ngTemplateOutlet",L)}}const O=function(C,E){return{"is-invalid":C,"text-right":E}};function _(C,E){if(1&C){const I=e.EpF();e.TgZ(0,"input",4,5),e.NdJ("blur",function(N){return e.CHM(I),e.oxw().onblur.emit(N)})("focus",function(N){return e.CHM(I),e.oxw().onfocus.emit(N)})("keyup.enter",function(N){return e.CHM(I),e.oxw().enter.emit(N)})("input",function(N){return e.CHM(I),e.oxw().oninput.emit(N)}),e.ALo(2,"async"),e.qZA(),e._UZ(3,"field-errors",6)}if(2&C){const I=e.oxw();e.Q6J("id",I.id)("formControl",I.formControl)("name",I.name)("type",I.type)("numbersOnly","number"===I.type)("mask",I.mask)("maxlength",I.maxLength)("placeholder",I.placeholder||"")("autocomplete",I.autocomplete)("ngClass",e.WLB(13,O,"INVALID"===e.lcZ(2,11,I.formControl.statusChanges)&&I.formControl.touched,"number"===I.type)),e.xp6(3),e.Q6J("control",I.formControl)}}let D=(()=>{class C extends l.T{constructor(I,L){super(I,L),this.type="text",this.placeholder="",this.autocomplete="off",this.enter=new e.vpe,this.onblur=new e.vpe,this.onfocus=new e.vpe,this.oninput=new e.vpe}get input(){return this.inputRef?this.inputRef.nativeElement:null}onValueInitialized(I){const L=this.input;L&&(L.value=I)}onDisabledChange(I){this.inputRef&&this.inputRef.nativeElement&&(this.inputRef.nativeElement.disabled=I)}getFocusableControl(){return(this.inputRef||{}).nativeElement}getDisabledValue(){return this.value}}return C.\u0275fac=function(I){return new(I||C)(e.Y36(e.zs3),e.Y36(t.gN,13))},C.\u0275cmp=e.Xpm({type:C,selectors:[["input-field"]],viewQuery:function(I,L){if(1&I&&e.Gf(R,5),2&I){let N;e.iGM(N=e.CRH())&&(L.inputRef=N.first)}},inputs:{type:"type",placeholder:"placeholder",autocomplete:"autocomplete",mask:"mask",maxLength:"maxLength"},outputs:{enter:"enter",onblur:"onblur",onfocus:"onfocus",oninput:"oninput"},features:[e._Bn([{provide:t.JU,useExisting:C,multi:!0}]),e.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],[1,"form-control","w-100",3,"id","formControl","name","type","numbersOnly","mask","maxlength","placeholder","autocomplete","ngClass","blur","focus","keyup.enter","input"],["input",""],[3,"control"]],template:function(I,L){if(1&I&&(e.YNc(0,P,2,3,"label-value",0),e.YNc(1,_,4,16,"ng-template",null,1,e.W1O)),2&I){const N=e.MAs(2);e.Q6J("ngIf",L.label)("ngIfElse",N)}},directives:[g.O5,m.t,g.tP,t.Fj,t.JJ,t.oH,n.X,j.h,t.nD,g.mk,Q.e],pipes:[g.Ov],encapsulation:2,changeDetection:0}),C})()},195:(Te,se,s)=>{"use strict";s.d(se,{t:()=>r});var e=s(6435),t=s(2400),l=s(2208),g=s(6163),m=s(8664),n=s(9808),j=s(1879),Q=s(3261),R=s(8397),x=s(70);let P=(()=>{class d{constructor(h){this.notification=h}ngOnInit(){}get icon(){return j.l.InfoCircle}onClick(){this.notification.info(this.informationText)}}return d.\u0275fac=function(h){return new(h||d)(e.Y36(Q.g))},d.\u0275cmp=e.Xpm({type:d,selectors:[["information-text"]],inputs:{informationText:"informationText"},decls:3,vars:2,consts:[["type","button",1,"btn","btn-icon","d-flex","align-content-center",3,"tooltip","click"],["ttip","bs-tooltip"],[3,"icon"]],template:function(h,M){1&h&&(e.TgZ(0,"button",0,1),e.NdJ("click",function(){return M.onClick()}),e._UZ(2,"icon",2),e.qZA()),2&h&&(e.Q6J("tooltip",M.informationText),e.xp6(2),e.Q6J("icon",M.icon))},directives:[R.i9,x.o],encapsulation:2,changeDetection:0}),d})();var O=s(3317);function _(d,u){1&d&&(e.TgZ(0,"span",9),e._uU(1,"\xa0*"),e.qZA())}function D(d,u){if(1&d&&(e.ynx(0),e._uU(1),e.BQk()),2&d){const h=e.oxw();e.xp6(1),e.Oqu(h.value)}}function C(d,u){if(1&d&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&d){const h=e.oxw();e.xp6(1),e.Oqu(h.value)}}function E(d,u){if(1&d&&(e._UZ(0,"div",11),e.ALo(1,"trust")),2&d){const h=e.oxw();e.Q6J("innerHTML",e.lcZ(1,1,h.value),e.oJD)}}function I(d,u){1&d&&(e.ynx(0),e.Hsn(1),e.BQk())}function L(d,u){if(1&d&&e._UZ(0,"information-text",12),2&d){const h=e.oxw();e.Q6J("informationText",h.informationText)}}function N(d,u){1&d&&e.GkF(0)}const B=function(d){return{"flex-grow-0":d}};function H(d,u){if(1&d&&(e.TgZ(0,"div",13),e.YNc(1,N,1,0,"ng-container",14),e.qZA()),2&d){const h=e.oxw();e.Q6J("ngClass",e.VKq(2,B,h.informationText)),e.xp6(1),e.Q6J("ngTemplateOutlet",h.extraCell)}}const y=["*"];let r=(()=>{class d{constructor(h,M,J){this.changeDetector=h,this.layout=M,this.element=J,this.classLabelValue=!0,this.classAnyLabelValue=!0,this.classLabelOnSide=!1,this.subs=[],this.labelPosition="auto",this._ignoreExtraCell=!1,this._maximizeLabel=!1,this._required=!1,this._noWrapLabel=!1,this.fieldSize=t.s.FULL,this.forId=void 0,this._value=null,this.kind="view",this.valueFormat="plain"}get extraCell(){return this._ignoreExtraCell?null:this._extraCell}get ignoreExtraCell(){return this._ignoreExtraCell}set ignoreExtraCell(h){this._ignoreExtraCell=(0,g.Iw)(h)}get maximizeLabel(){return this._maximizeLabel}set maximizeLabel(h){this._maximizeLabel=(0,g.Iw)(h)}get required(){return this._required}set required(h){this._required=(0,g.Iw)(h)}get noWrapLabel(){return this._noWrapLabel}set noWrapLabel(h){this._noWrapLabel=(0,g.Iw)(h)}get value(){return this._value}set value(h){this._value=h}get view(){return"view"===this.kind}get field(){return"field"===this.kind}get fieldView(){return"fieldView"===this.kind}ngOnInit(){const h=this.formField;h&&(this.kind="field",this.label=h.label,this.labelPosition=h.labelPosition,this.required=h.required,this.fieldSize=h.fieldSize,this.forId=h.id,this.subs.push(h.disabledChange.subscribe(M=>this.updateFieldDisabled(M))),this.valueFormat=h.disabledFormat,this.updateFieldDisabled(h.disabled)),h&&this.changeDetector.detectChanges(),this.subs.push(this.layout.breakpointChanges$.subscribe(M=>{this.updateLabelOnSideClass(M)})),this.updateLabelOnSideClass(this.layout.activeBreakpoints),this.updateSizeClass()}ngOnChanges(h){h.labelOnSide&&this.updateLabelOnSideClass(this.layout.activeBreakpoints),h.fieldSize&&this.updateSizeClass()}updateSizeClass(){const h=this.element.nativeElement.classList;for(const M of Object.values(t.s))h.remove(`size-${M}`);this.fieldSize&&h.add(`size-${this.fieldSize}`)}updateLabelOnSideClass(h){const M=h.has("xxs")?"xxs":h.has("xs")?"xs":h.has("sm")?"sm":"md",J=this.isLabelOnSide(M);this.classLabelOnSide!==J&&(this.classLabelOnSide=J,this.element.nativeElement.classList[J?"add":"remove"]("label-on-side"),this.changeDetector.detectChanges())}isLabelOnSide(h){var M;if("sideForced"===this.labelPosition)return!0;switch(h){case"xxs":return!1;case"xs":let J=!1,ie=this.element.nativeElement;for(;ie;){if("PAGE-CONTENT"===ie.tagName){J="filters"===(null===(M=ie.attributes.getNamedItem("mode"))||void 0===M?void 0:M.value);break}ie=ie.parentElement}return J||"side"===this.labelPosition||"auto"===this.labelPosition&&["view","fieldView"].includes(this.kind);default:return"above"!==this.labelPosition}}updateFieldDisabled(h){this.kind=h?"fieldView":"field",this.value="component"===this.formField.disabledFormat?null:h?this.formField.disabledValue:null,this.changeDetector.detectChanges()}ngOnDestroy(){this.subs.forEach(h=>h.unsubscribe())}}return d.\u0275fac=function(h){return new(h||d)(e.Y36(e.sBO),e.Y36(m.Pb),e.Y36(e.SBq))},d.\u0275cmp=e.Xpm({type:d,selectors:[["label-value"]],contentQueries:function(h,M,J){if(1&h&&e.Suo(J,l.j,7,e.Rgc),2&h){let ie;e.iGM(ie=e.CRH())&&(M._extraCell=ie.first)}},hostVars:16,hostBindings:function(h,M){2&h&&e.ekj("label-value",M.classLabelValue)("any-label-value",M.classAnyLabelValue)("label-on-side",M.classLabelOnSide)("has-extra-cell",M.extraCell)("maximize-label",M.maximizeLabel)("view",M.view)("field",M.field)("field-view",M.fieldView)},inputs:{formField:"formField",label:"label",labelPosition:"labelPosition",informationText:"informationText",ignoreExtraCell:"ignoreExtraCell",maximizeLabel:"maximizeLabel",required:"required",noWrapLabel:"noWrapLabel",fieldSize:"fieldSize",forId:"forId",value:"value",kind:"kind",valueFormat:"valueFormat"},features:[e.TTD],ngContentSelectors:y,decls:12,vars:9,consts:[[1,"label-value-label"],["class","required-marker",4,"ngIf"],[1,"label-value-container"],[1,"d-flex","label-value-value"],[4,"ngIf"],["class","break-nl",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","informationText",3,"informationText",4,"ngIf"],["class","label-value-extra",3,"ngClass",4,"ngIf"],[1,"required-marker"],[1,"break-nl"],[3,"innerHTML"],[1,"informationText",3,"informationText"],[1,"label-value-extra",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(h,M){1&h&&(e.F$t(),e.TgZ(0,"label",0)(1,"span"),e._uU(2),e.YNc(3,_,2,0,"span",1),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3),e.YNc(6,D,2,1,"ng-container",4),e.YNc(7,C,2,1,"div",5),e.YNc(8,E,2,3,"div",6),e.YNc(9,I,2,0,"ng-container",4),e.qZA(),e.YNc(10,L,1,1,"information-text",7),e.YNc(11,H,2,4,"div",8),e.qZA()),2&h&&(e.uIk("for",M.forId),e.xp6(2),e.Oqu(M.label),e.xp6(1),e.Q6J("ngIf",M.required),e.xp6(3),e.Q6J("ngIf",null!=M.value&&"plain"==M.valueFormat),e.xp6(1),e.Q6J("ngIf",null!=M.value&&"break"==M.valueFormat),e.xp6(1),e.Q6J("ngIf",null!=M.value&&"html"==M.valueFormat),e.xp6(1),e.Q6J("ngIf",null==M.value),e.xp6(1),e.Q6J("ngIf",M.informationText),e.xp6(1),e.Q6J("ngIf",M.extraCell))},directives:[n.O5,P,n.mk,n.tP],pipes:[O.a],encapsulation:2,changeDetection:0}),d})()},744:(Te,se,s)=>{"use strict";s.d(se,{A:()=>C});var e=s(4167),t=s(6435),l=s(7947),g=s(3531),m=s(5905),n=s(9808),j=s(867),Q=s(70),R=s(6903),x=s(1556);function P(E,I){if(1&E){const L=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(L);const B=t.oxw().$implicit;return t.oxw().remove(B)}),t._UZ(1,"icon",13),t.qZA()}if(2&E){const L=t.oxw(2);t.xp6(1),t.Q6J("icon",L.SvgIcon.X)}}function O(E,I){if(1&E&&(t.TgZ(0,"div",7),t._UZ(1,"avatar",8),t.TgZ(2,"div",9),t._uU(3),t.qZA(),t.TgZ(4,"div",10),t.YNc(5,P,2,1,"button",11),t.qZA()()),2&E){const L=I.$implicit,N=t.oxw();t.xp6(1),t.Q6J("image",L),t.xp6(2),t.hij(" ",L.name," "),t.xp6(2),t.Q6J("ngIf",!(N.requireAtLeastOne&&1===(null==N.images?null:N.images.length)))}}function _(E,I){if(1&E&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&E){const L=t.oxw();t.xp6(1),t.hij(" ",L.i18n.field.image.manageAfterConfirm,"\n")}}class D{constructor(I,L){this.order=I,this.removedImages=L}}let C=(()=>{class E extends l.H{constructor(L,N,B){super(L),this.modalRef=N,this.changeDetector=B,this.images=[],this.manageAfterConfirm=!1,this.requireAtLeastOne=!1,this.result=new t.vpe}ngOnInit(){super.ngOnInit(),this.originalOrder=this.images.map(L=>L.id)}remove(L){this.images=this.images.filter(N=>N!=L),this.removedIds=[L.id,...this.removedIds||[]],this.changeDetector.detectChanges()}ok(){let L=null;const N=this.images.map(B=>B.id);(0,g.Z)(N,this.originalOrder)||(L=N),this.result.emit(new D(L,this.removedIds))}drop(L){(0,e.bA)(this.images,L.previousIndex,L.currentIndex)}}return E.\u0275fac=function(L){return new(L||E)(t.Y36(t.zs3),t.Y36(m.UZ),t.Y36(t.sBO))},E.\u0275cmp=t.Xpm({type:E,selectors:[["manage-images"]],inputs:{images:"images",manageAfterConfirm:"manageAfterConfirm",requireAtLeastOne:"requireAtLeastOne"},outputs:{result:"result"},features:[t.qOj],decls:10,vars:6,consts:[[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","class","d-flex justify-items-center mb-2 cursor-move",4,"ngFor","ngForOf"],["class","mt-4 text-primary",4,"ngIf"],["forceRow",""],[3,"label","action"],["outline","",3,"label","action"],["cdkDrag","",1,"d-flex","justify-items-center","mb-2","cursor-move"],["size","medium",3,"image"],[1,"ml-2","flex-grow-1","d-flex","align-items-center","text-truncate"],[1,"ml-2"],["type","button","class","btn btn-icon",3,"click",4,"ngIf"],["type","button",1,"btn","btn-icon",3,"click"],[3,"icon"],[1,"mt-4","text-primary"]],template:function(L,N){1&L&&(t.TgZ(0,"h1"),t._uU(1),t.qZA(),t.TgZ(2,"div",0),t._uU(3),t.qZA(),t.TgZ(4,"div",1),t.NdJ("cdkDropListDropped",function(H){return N.drop(H)}),t.YNc(5,O,6,3,"div",2),t.qZA(),t.YNc(6,_,2,1,"div",3),t.TgZ(7,"actions",4)(8,"action-button",5),t.NdJ("action",function(){return N.ok()}),t.qZA(),t.TgZ(9,"action-button",6),t.NdJ("action",function(){return N.modalRef.hide()}),t.qZA()()),2&L&&(t.xp6(1),t.Oqu(N.i18n.field.image.manage),t.xp6(2),t.Oqu(N.i18n.field.image.manageMessage),t.xp6(2),t.Q6J("ngForOf",N.images),t.xp6(1),t.Q6J("ngIf",N.manageAfterConfirm),t.xp6(2),t.Q6J("label",N.i18n.general.confirm),t.xp6(1),t.Q6J("label",N.i18n.general.cancel))},directives:[e.Wj,n.sg,e.Zt,j.A,n.O5,Q.o,R.h,x.x],encapsulation:2,changeDetection:0}),E})()},9998:(Te,se,s)=>{"use strict";s.d(se,{h:()=>j});var e=s(4391),t=s(6163),l=s(976),g=s(6435),m=s(3075);const n=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","End","Home","Delete","Backspace","Tab","Shift","Control","Alt","Super","Meta","Enter"];let j=(()=>{class Q{constructor(x,P,O){this.i18n=x,this.el=P,this.control=O}set mask(x){(0,t.cS)(x)?(this._mask=null,this.fields=null):(this._mask=new l.z(x),this.fields=this._mask.fields)}onKeyDown(x){if(!this._mask||n.indexOf(x.key)>=0||x.ctrlKey||x.altKey)return;const P=this.el.nativeElement;let O=P.value;if(null==O)return;let _=P.selectionStart,D=P.selectionEnd;if(_>=this.fields.length)return O=O.substring(0,this.fields.length),void x.preventDefault();D>_&&(O=O.substring(0,_)+O.substring(D+1),D=_);let C=this.fields[_];for(;C&&C.literal;)O=O.substring(0,_)+C.allowed+O.substring(_+1),C=this.fields[++_];if(C&&C.accepted(x.key)){const E=C.transform(x.key);O=O.substring(0,_)+E+O.substring(_+1),P.selectionStart=P.selectionEnd=++_;for(let I=_;I<this.fields.length&&I<O.length+1;I++){const L=this.fields[I];if(I<O.length&&!L.accepted(O.charAt(I))){O=O.substring(0,I);break}_===O.length&&L.literal&&(O=O.substring(0,_)+L.allowed+O.substring(_+1),_++)}}x.preventDefault(),x.stopPropagation(),this.control.control.setValue(O),this.control.control.updateValueAndValidity(),P.selectionStart=_,P.selectionEnd=_}onPaste(x){const P=this.el.nativeElement;if(null==P.value||!this._mask)return;const _=P.selectionEnd||P.value.length,D=P.value,C=D.substring(0,P.selectionStart||0)+(x.clipboardData.getData("text/plain")||"").trim()+D.substring(_),E=this._mask.apply(C);x.preventDefault(),x.stopPropagation(),this.control.control.setValue(E),this.control.control.updateValueAndValidity(),this._mask.isValid(E)||(this.control.control.setErrors({invalidValuePattern:!0}),this.control.control.markAsTouched()),P.selectionStart=E.length,P.selectionEnd=E.length}onBlur(x){const P=this.el.nativeElement;null==P.value||!this._mask||(this._mask.isValid(P.value)||(this.control.control.setValue(""),this.control.control.updateValueAndValidity()),x.stopPropagation())}}return Q.\u0275fac=function(x){return new(x||Q)(g.Y36(e.s),g.Y36(g.SBq),g.Y36(m.a5))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","mask",""]],hostBindings:function(x,P){1&x&&g.NdJ("keydown",function(_){return P.onKeyDown(_)})("paste",function(_){return P.onPaste(_)})("blur",function(_){return P.onBlur(_)})},inputs:{mask:"mask"}}),Q})()},976:(Te,se,s)=>{"use strict";s.d(se,{z:()=>D});var e=s(6163);let t="";for(let C=0;C<=9;C++)t+=C.toString();let l="";for(let C="a";C<="z";C=String.fromCodePoint(C.codePointAt(0)+1))l+=C;const g=l.toUpperCase(),m=l+g,n=t+m;class j{constructor(E,I=!1,L=null){this.allowed=E,this.literal=I,this.tx=L}transform(E){return this.literal?this.allowed:this.tx?this.tx(E):E}accepted(E){return null==this.allowed||this.allowed.indexOf(E)>=0}}const Q="#"+t;class D{constructor(E){if(this.fields=[],(0,e.cS)(E))throw new Error("Empty mask");let I=!1,L=!1;for(let N=0;N<E.length;N++){const B=E.charAt(N);let H=null,y=!1,z=!1;if(I)H=new j(B,!0);else if("\\"===B)y=!0;else if("?_".indexOf(B)>=0)H=new j(n);else if(Q.indexOf(B)>=0)H=new j(t);else if("aA".indexOf(B)>=0)H=new j(m);else if("lL".indexOf(B)>=0)H=new j(m,!1,r=>r.toLocaleLowerCase());else if("uU".indexOf(B)>=0)H=new j(m,!1,r=>r.toUpperCase());else if("cC".indexOf(B)>=0){const r=L;H=new j(m,!1,d=>r?d.toLowerCase():d.toUpperCase()),z=!0}else H=new j(B,!0);H&&this.fields.push(H),I=y,L=z}}apply(E){if((0,e.cS)(E))return"";const I=[];let L=0;for(let N=0;N<E.length;N++){const B=E.charAt(N);let H=this.fields[L];if(!H)break;if(H.accepted(B))I.push(B),L++;else{if(!H.literal)return"";for(;H&&H.literal;)I.push(H.allowed),H=this.fields[++L];N--}}return I.join("")}isValid(E,I=!1){if((0,e.cS)(E)||E.length>this.fields.length||E.length<this.fields.length&&!I)return!1;for(let L=0;L<E.length;L++)if(!this.fields[L].accepted(E.charAt(L)))return!1;return!0}}},5255:(Te,se,s)=>{"use strict";s.d(se,{x:()=>y});var e=s(3075),t=s(5766),l=s(3365),g=s(6163),m=s(6435),n=s(9808),j=s(195),Q=s(3077),R=s(3455),x=s(3317);const P=["container"];function O(z,r){1&z&&m.GkF(0)}function _(z,r){if(1&z&&(m.TgZ(0,"label-value",2),m.YNc(1,O,1,0,"ng-container",3),m.qZA()),2&z){const d=m.oxw(),u=m.MAs(2);m.Q6J("formField",d.self)("informationText",d.informationText),m.xp6(1),m.Q6J("ngTemplateOutlet",u)}}const D=function(z){return{"mt-3":z}};function C(z,r){if(1&z&&(m.TgZ(0,"div",16),m._uU(1),m.qZA()),2&z){const d=m.oxw(),h=d.$implicit;m.Q6J("ngClass",m.VKq(2,D,!d.first)),m.xp6(1),m.hij(" ",h.name," ")}}const E=function(z){return{"mt-1":z}};function I(z,r){if(1&z){const d=m.EpF();m.TgZ(0,"div",17,18),m.NdJ("click",function(){const M=m.CHM(d).$implicit;return m.oxw(4).toggle(M.value)})("keydown.space",function(h){return h.preventDefault(),h.stopPropagation()})("keyup.enter",function(){const M=m.CHM(d).$implicit;return m.oxw(4).toggle(M.value)})("keyup.esc",function(){return m.CHM(d),m.oxw(4).close()}),m._UZ(2,"input",19),m.TgZ(3,"label",20),m._uU(4),m.qZA()()}if(2&z){const d=r.$implicit,u=m.oxw(),h=u.$implicit,M=u.first,J=m.oxw(3);m.Tol(J.resolveStyle(d,h.name)),m.Q6J("ngClass",m.VKq(9,E,!(M&&!h.name))),m.xp6(2),m.Q6J("name",J.name)("id",J.id+"_"+d.value)("value",d.value)("checked",J.isSelected(d)),m.xp6(1),m.Q6J("for",J.id+"_"+d.value),m.xp6(1),m.hij(" ",d.text," ")}}function L(z,r){if(1&z&&(m.ynx(0),m.YNc(1,C,2,4,"div",14),m.YNc(2,I,5,11,"div",15),m.ALo(3,"async"),m.BQk()),2&z){const d=r.$implicit;m.xp6(1),m.Q6J("ngIf",d.name),m.xp6(1),m.Q6J("ngForOf",m.lcZ(3,2,d.options))}}function N(z,r){if(1&z&&(m.TgZ(0,"div",11,12),m.NdJ("click",function(u){return u.preventDefault(),u.stopPropagation()}),m.YNc(2,L,4,4,"ng-container",13),m.ALo(3,"async"),m.qZA()),2&z){const d=m.oxw(2);m.Q6J("ngClass",d.dropdownOnRight?"dropdown-menu-right":null),m.uIk("id",d.dropdownMenuId),m.xp6(2),m.Q6J("ngForOf",m.lcZ(3,3,d.categories))}}const B=function(z){return{"is-invalid":z}};function H(z,r){if(1&z){const d=m.EpF();m.TgZ(0,"div",4,5),m.NdJ("onShown",function(){return m.CHM(d),m.oxw().onShown()})("onHidden",function(){m.CHM(d);const h=m.MAs(3);return m.oxw().onHidden(),h.focus()}),m.TgZ(2,"button",6,7),m.ALo(4,"async"),m.ALo(5,"async"),m._UZ(6,"div",8),m.ALo(7,"trust"),m.ALo(8,"async"),m.qZA(),m.YNc(9,N,4,5,"div",9),m.qZA(),m._UZ(10,"field-errors",10)}if(2&z){const d=m.oxw();m.xp6(2),m.Q6J("id",d.id)("title",m.lcZ(4,6,d.display$))("ngClass",m.VKq(14,B,"INVALID"===m.lcZ(5,8,d.formControl.statusChanges)&&d.formControl.touched)),m.uIk("aria-controls",d.dropdownMenuId),m.xp6(4),m.Q6J("innerHTML",m.lcZ(7,10,m.lcZ(8,12,d.display$)),m.oJD),m.xp6(4),m.Q6J("control",d.formControl)}}let y=(()=>{class z extends l.I{constructor(d,u){super(d,u),this.separator=null,this.emptyLabel=null,this.hierarchyProperty=null}toggle(d){let u=this.selectedValues;const h=u.indexOf(d),M=this.findOption(d);if(M&&M.disabled)return;const J=this.optionsByParent(d).map(ie=>ie.value);h>=0?u=u.filter((ie,me)=>me!==h&&ie!==M.parent&&!J.includes(ie)):(u.push(d),Array.prototype.push.apply(u,J)),this.setValue(null==this.separator?u:u.join(this.separator))}preprocessValue(d){return(0,g.k)(d,this.separator)}getDisplay(){const d=this.selectedOptions;if((0,g.cS)(d))return(0,g.OW)(this.emptyLabel)?this.i18n.general.noOptionsSelected:this.emptyLabel;{const u=d.map(M=>M.value);return d.filter(M=>!M.parent||!u.includes(M.parent)).sort(t.pF).map(M=>M.category?`${M.category} - ${M.text}`:M.text).join(", ")}}getSelectedValues(){return(0,g.b_)(this.value,this.separator)}onShown(){super.onShown(),this.addShortcut(" ",()=>{this.toggle(this.allOptions[this.optionIndex].value)})}hasEmptyOption(){return!1}}return z.\u0275fac=function(d){return new(d||z)(m.Y36(m.zs3),m.Y36(e.gN,13))},z.\u0275cmp=m.Xpm({type:z,selectors:[["multi-selection-field"]],viewQuery:function(d,u){if(1&d&&m.Gf(P,5),2&d){let h;m.iGM(h=m.CRH())&&(u.container=h.first)}},inputs:{separator:"separator",emptyLabel:"emptyLabel",hierarchyProperty:"hierarchyProperty"},features:[m._Bn([{provide:e.JU,useExisting:z,multi:!0},{provide:t.GY,useExisting:z}]),m.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],["dropdown","",1,"w-100",3,"onShown","onHidden"],["dropdown","bs-dropdown"],["dropdownToggle","","type","button",1,"form-control","text-left","custom-select","w-100",3,"id","title","ngClass"],["toggleButton",""],[1,"w-100","mw-100","text-truncate","pr-3",3,"innerHTML"],["class","dropdown-menu","role","menu","style","visibility: hidden","attr.aria-labelledby","id",3,"ngClass","click",4,"dropdownMenu"],[3,"control"],["role","menu","attr.aria-labelledby","id",1,"dropdown-menu",2,"visibility","hidden",3,"ngClass","click"],["dropDownMenu",""],[4,"ngFor","ngForOf"],["class","pl-2 font-weight-bold",3,"ngClass",4,"ngIf"],["class","custom-control custom-checkbox d-flex align-content-center",3,"class","ngClass","click","keydown.space","keyup.enter","keyup.esc",4,"ngFor","ngForOf"],[1,"pl-2","font-weight-bold",3,"ngClass"],[1,"custom-control","custom-checkbox","d-flex","align-content-center",3,"ngClass","click","keydown.space","keyup.enter","keyup.esc"],["check",""],["type","checkbox",1,"custom-control-input",3,"name","id","value","checked"],[1,"custom-control-label",3,"for","ngClass"]],template:function(d,u){if(1&d&&(m.YNc(0,_,2,3,"label-value",0),m.YNc(1,H,11,16,"ng-template",null,1,m.W1O)),2&d){const h=m.MAs(2);m.Q6J("ngIf",u.label)("ngIfElse",h)}},directives:[n.O5,j.t,n.tP,Q.TO,Q.Mq,n.mk,Q.Hz,n.sg,R.e],pipes:[n.Ov,x.a],encapsulation:2,changeDetection:0}),z})()},9697:(Te,se,s)=>{"use strict";s.d(se,{X:()=>m});var e=s(6163),t=s(6435),l=s(6890);const g=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","End","Home","Delete","Backspace","Tab","Shift","Control","Alt","Super","Meta","0","1","2","3","4","5","6","7","8","9"];let m=(()=>{class n{constructor(Q){this.format=Q,this._allowDecimalSeparator=!1,this._allowNegative=!1}set numbersOnly(Q){this.enabled=(0,e.Iw)(Q)}get allowDecimalSeparator(){return this._allowDecimalSeparator}set allowDecimalSeparator(Q){this._allowDecimalSeparator=(0,e.Iw)(Q)}get allowNegative(){return this._allowNegative}set allowNegative(Q){this._allowNegative=(0,e.Iw)(Q)}get allowedValues(){return this.allowNegative?["-"].concat(g):g}onKeyDown(Q){if(this.enabled){let R=!Q.ctrlKey&&!Q.altKey;if(R)if(this.allowDecimalSeparator&&[",","."].includes(Q.key)){const x=Q.target,P=x.value,O=this.format.decimalSeparator,_=x.selectionStart;P.includes(O)||(x.value=P.substring(0,_)+O+P.substring(x.selectionEnd),x.setSelectionRange(_+1,_+1,"none"),x.dispatchEvent(new Event("input"))),R=!1}else R=this.allowedValues.includes(Q.key);R||Q.preventDefault()}}onPaste(Q){if(this.enabled){const R=Q.clipboardData.getData("text/plain");(this.allowDecimalSeparator?new RegExp(`^[\\d\\${this.format.decimalSeparator}]+$`):/^\d+$/).test(R)||Q.preventDefault()}}}return n.\u0275fac=function(Q){return new(Q||n)(t.Y36(l.H))},n.\u0275dir=t.lG2({type:n,selectors:[["","numbersOnly",""]],hostBindings:function(Q,R){1&Q&&t.NdJ("keydown",function(P){return R.onKeyDown(P)})("paste",function(P){return R.onPaste(P)})},inputs:{numbersOnly:"numbersOnly",allowDecimalSeparator:"allowDecimalSeparator",allowNegative:"allowNegative"}}),n})()},6897:(Te,se,s)=>{"use strict";s.d(se,{x:()=>t});var e=s(520);class t{constructor(g){this.results=g||[],this.page=0,this.pageSize=this.results.length,this.totalCount=this.results.length,this.pageCount=1,this.hasNext=!1}get hasResults(){return(this.results||[]).length>0}get hasTotalCount(){return null!=this.totalCount&&!isNaN(this.totalCount)}get firstItem(){return this.pageSize*this.page+1}get lastItem(){return this.firstItem+(this.results||[]).length-1}static from(g){const m=new t(g.body);return t.fillHeaders(m,g),m}static fillHeaders(g,m){var n,j,Q,R,x;g.page=null!==(n=parseInt(m.headers.get("X-Current-Page"),10))&&void 0!==n?n:g.page,g.pageSize=null!==(j=parseInt(m.headers.get("X-Page-Size"),10))&&void 0!==j?j:g.pageSize,g.totalCount=null!==(Q=parseInt(m.headers.get("X-Total-Count"),10))&&void 0!==Q?Q:g.totalCount,g.pageCount=null!==(R=parseInt(m.headers.get("X-Page-Count"),10))&&void 0!==R?R:g.pageCount,g.hasNext=[!0,"true"].includes(null!==(x=m.headers.get("X-Has-Next-Page"))&&void 0!==x?x:g.hasNext)}toHttpResponse(){return new e.Zn({body:this.results,status:200,headers:new e.WM({"X-Current-Page":String(this.page),"X-Page-Size":String(this.pageSize),"X-Total-Count":String(this.totalCount),"X-Page-Count":String(this.pageCount),"X-Has-Next-Page":String(this.hasNext)})})}}},5739:(Te,se,s)=>{"use strict";s.d(se,{Y:()=>E});var e=s(3075),t=s(5766),l=s(6163),g=s(6435),m=s(9808),n=s(195),j=s(3455);function Q(I,L){1&I&&g.GkF(0)}function R(I,L){if(1&I&&(g.TgZ(0,"label-value",2),g.YNc(1,Q,1,0,"ng-container",3),g.qZA()),2&I){const N=g.oxw(),B=g.MAs(2);g.Q6J("formField",N.self)("informationText",N.informationText),g.xp6(1),g.Q6J("ngTemplateOutlet",B)}}function x(I,L){if(1&I&&(g.TgZ(0,"div",9),g._uU(1),g.qZA()),2&I){const N=g.oxw().$implicit;g.xp6(1),g.hij("",N.name," ")}}const P=function(I,L){return{"mt-1":I,"custom-control-disabled":L}};function O(I,L){if(1&I){const N=g.EpF();g.TgZ(0,"div",10,11),g.NdJ("click",function(H){const z=g.CHM(N).$implicit;return g.oxw(3).value=z.value,H.preventDefault(),H.stopPropagation()})("keydown.space",function(H){return H.preventDefault(),H.stopPropagation()}),g.TgZ(2,"input",12),g.NdJ("keyup.enter",function(H){const z=g.CHM(N).$implicit;return g.oxw(3).value=z.value,H.preventDefault(),H.stopPropagation()}),g.qZA(),g.TgZ(3,"label",13),g._uU(4),g.qZA()()}if(2&I){const N=L.$implicit,B=L.first,H=g.oxw(3);g.Q6J("ngClass",g.WLB(8,P,!B&&H.asColumn,N.disabled)),g.xp6(2),g.Q6J("name",H.name)("id",H.id+"_"+N.value)("value",N.value)("disabled",N.disabled)("checked",H.isSelected(N)),g.xp6(1),g.Q6J("for",H.id+"_"+N.value),g.xp6(1),g.hij(" ",N.text," ")}}const _=function(I,L,N,B,H){return{"flex-wrap":I,"align-items-center":L,"flex-column":N,"align-items-left":B,"mt-3":H}};function D(I,L){if(1&I&&(g.ynx(0),g.TgZ(1,"div",6),g.YNc(2,x,2,1,"div",7),g.YNc(3,O,5,11,"div",8),g.ALo(4,"async"),g.qZA(),g.BQk()),2&I){const N=L.$implicit,B=L.first,H=g.oxw(2);g.xp6(1),g.Q6J("ngClass",g.qbA(5,_,!H.asColumn,!H.asColumn,H.asColumn,H.asColumn,!B)),g.xp6(1),g.Q6J("ngIf",N.name),g.xp6(1),g.Q6J("ngForOf",g.lcZ(4,3,N.options))}}function C(I,L){if(1&I&&(g.YNc(0,D,5,11,"ng-container",4),g.ALo(1,"async"),g._UZ(2,"field-errors",5)),2&I){const N=g.oxw();g.Q6J("ngForOf",g.lcZ(1,2,N.categories)),g.xp6(2),g.Q6J("control",N.formControl)}}let E=(()=>{class I extends t.l3{constructor(N,B){super(N,B),this.classBlock=!0,this.classW100=!0,this._asColumn=!1}get asColumn(){return this._asColumn}set asColumn(N){this._asColumn=(0,l.Iw)(N)}getSelectedValues(){const N=this.value;return(0,l.cS)(N)?[]:[N]}getFocusableControl(){return null}}return I.\u0275fac=function(N){return new(N||I)(g.Y36(g.zs3),g.Y36(e.gN,13))},I.\u0275cmp=g.Xpm({type:I,selectors:[["radio-group-field"]],hostVars:4,hostBindings:function(N,B){2&N&&g.ekj("d-block",B.classBlock)("w-100",B.classW100)},inputs:{asColumn:"asColumn"},features:[g._Bn([{provide:e.JU,useExisting:I,multi:!0},{provide:t.GY,useExisting:I}]),g.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[3,"control"],[1,"w-100","d-flex",3,"ngClass"],["class","mr-3 font-weight-bold","style","line-height: 1rem",4,"ngIf"],["class","custom-control custom-radio d-inline-flex mr-3 align-items-center",3,"ngClass","click","keydown.space",4,"ngFor","ngForOf"],[1,"mr-3","font-weight-bold",2,"line-height","1rem"],[1,"custom-control","custom-radio","d-inline-flex","mr-3","align-items-center",3,"ngClass","click","keydown.space"],["check",""],["type","radio",1,"custom-control-input",3,"name","id","value","disabled","checked","keyup.enter"],[1,"custom-control-label",3,"for"]],template:function(N,B){if(1&N&&(g.YNc(0,R,2,3,"label-value",0),g.YNc(1,C,3,4,"ng-template",null,1,g.W1O)),2&N){const H=g.MAs(2);g.Q6J("ngIf",B.label)("ngIfElse",H)}},directives:[m.O5,n.t,m.tP,m.sg,m.mk,j.e],pipes:[m.Ov],encapsulation:2,changeDetection:0}),I})()},1076:(Te,se,s)=>{"use strict";s.d(se,{J:()=>m});var e=s(6163),t=s(6435),l=s(3317);const g=["content"];let m=(()=>{class n{constructor(){this._autoHeight=!1}get autoHeight(){return this._autoHeight}set autoHeight(Q){this._autoHeight=(0,e.Iw)(Q)}ngAfterViewInit(){(0,e.G7)(this.content.nativeElement.getElementsByTagName("a")).forEach(Q=>{Q.href&&(Q.target="_blank"),Q.addEventListener("click",R=>{(0,e.XQ)(Q,R)},!1)})}}return n.\u0275fac=function(Q){return new(Q||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["rich-text-container"]],viewQuery:function(Q,R){if(1&Q&&t.Gf(g,7),2&Q){let x;t.iGM(x=t.CRH())&&(R.content=x.first)}},hostVars:2,hostBindings:function(Q,R){2&Q&&t.ekj("autoheight",R.autoHeight)},inputs:{value:"value",autoHeight:"autoHeight"},decls:3,vars:3,consts:[[1,"rich-text-content","clearfix",3,"innerHTML"],["content",""]],template:function(Q,R){1&Q&&(t._UZ(0,"div",0,1),t.ALo(2,"trust")),2&Q&&t.Q6J("innerHTML",t.lcZ(2,1,R.value),t.oJD)},pipes:[l.a],encapsulation:2,changeDetection:0}),n})()},1375:(Te,se,s)=>{"use strict";s.d(se,{u:()=>H});var e=s(6435),t=s(3075),l=s(7947),g=s(6163);function m(y,z,r,d,u,h,M){try{var J=y[h](M),ie=J.value}catch(me){return void r(me)}J.done?z(ie):Promise.resolve(ie).then(d,u)}function n(y){return function(){var z=this,r=arguments;return new Promise(function(d,u){var h=y.apply(z,r);function M(ie){m(h,d,u,M,J,"next",ie)}function J(ie){m(h,d,u,M,J,"throw",ie)}M(void 0)})}}const Q=(()=>{class y{constructor(r,d,u,h,M){this._legacyCanvasSize=y.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=r,this.$canvas=document.createElement("canvas"),u&&"object"==typeof u?this._onDecode=d:(console.warn(u||h||M?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=d),this._onDecodeError=(d="object"==typeof u?u:{}).onDecodeError||("function"==typeof u?u:this._onDecodeError),this._calculateScanRegion=d.calculateScanRegion||("function"==typeof h?h:this._calculateScanRegion),this._preferredCamera=d.preferredCamera||M||this._preferredCamera,this._legacyCanvasSize="number"==typeof u?u:"number"==typeof h?h:this._legacyCanvasSize,this._maxScansPerSecond=d.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),r.disablePictureInPicture=!0,r.playsInline=!0,r.muted=!0;let J=!1;if(r.hidden&&(r.hidden=!1,J=!0),document.body.contains(r)||(document.body.appendChild(r),J=!0),u=r.parentElement,d.highlightScanRegion||d.highlightCodeOutline){if(h=!!d.overlay,this.$overlay=d.overlay||document.createElement("div"),(M=this.$overlay.style).position="absolute",M.display="none",M.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!h&&d.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(ie){}u.insertBefore(this.$overlay,this.$video.nextSibling)}d.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(r),requestAnimationFrame(()=>{let ie=window.getComputedStyle(r);"none"===ie.display&&(r.style.setProperty("display","block","important"),J=!0),"visible"!==ie.visibility&&(r.style.setProperty("visibility","visible","important"),J=!0),J&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),r.style.opacity="0",r.style.width="0",r.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),r.addEventListener("play",this._onPlay),r.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=y.createQrEngine()}static set WORKER_PATH(r){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return n(function*(){try{return!!(yield y.listCameras(!1)).length}catch(r){return!1}})()}static listCameras(r=!1){return n(function*(){if(!navigator.mediaDevices)return[];let u,d=function(){var h=n(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(M=>"videoinput"===M.kind)});return function(){return h.apply(this,arguments)}}();try{r&&(yield d()).every(h=>!h.label)&&(u=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(h){}try{return(yield d()).map((h,M)=>({id:h.deviceId,label:h.label||(0===M?"Default Camera":`Camera ${M+1}`)}))}finally{u&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),y._stopVideoStream(u))}})()}hasFlash(){var r=this;return n(function*(){let d;try{if(r.$video.srcObject){if(!(r.$video.srcObject instanceof MediaStream))return!1;d=r.$video.srcObject}else d=(yield r._getCameraStream()).stream;return"torch"in d.getVideoTracks()[0].getSettings()}catch(u){return!1}finally{d&&d!==r.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),y._stopVideoStream(d))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var r=this;return n(function*(){r._flashOn?yield r.turnFlashOff():yield r.turnFlashOn()})()}turnFlashOn(){var r=this;return n(function*(){if(!r._flashOn&&!r._destroyed&&(r._flashOn=!0,r._active&&!r._paused))try{if(!(yield r.hasFlash()))throw"No flash available";yield r.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(d){throw r._flashOn=!1,d}})()}turnFlashOff(){var r=this;return n(function*(){r._flashOn&&(r._flashOn=!1,yield r._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),y._postWorkerMessage(this._qrEnginePromise,"close")}start(){var r=this;return n(function*(){if(r._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!r._active||r._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),r._active=!0,!document.hidden))if(r._paused=!1,r.$video.srcObject)yield r.$video.play();else try{let{stream:d,facingMode:u}=yield r._getCameraStream();!r._active||r._paused?y._stopVideoStream(d):(r._setVideoMirror(u),r.$video.srcObject=d,yield r.$video.play(),r._flashOn&&(r._flashOn=!1,r.turnFlashOn().catch(()=>{})))}catch(d){if(!r._paused)throw r._active=!1,d}})()}stop(){this.pause(),this._active=!1}pause(r=!1){var d=this;return n(function*(){if(d._paused=!0,!d._active)return!0;d.$video.pause(),d.$overlay&&(d.$overlay.style.display="none");let u=()=>{d.$video.srcObject instanceof MediaStream&&(y._stopVideoStream(d.$video.srcObject),d.$video.srcObject=null)};return r?(u(),!0):(yield new Promise(h=>setTimeout(h,300)),!!d._paused&&(u(),!0))})()}setCamera(r){var d=this;return n(function*(){r!==d._preferredCamera&&(d._preferredCamera=r,yield d._restartVideoStream())})()}static scanImage(r,d,u,h,M=!1,J=!1){return n(function*(){let ie,me=!1;d&&("scanRegion"in d||"qrEngine"in d||"canvas"in d||"disallowCanvasResizing"in d||"alsoTryWithoutScanRegion"in d||"returnDetailedScanResult"in d)?(ie=d.scanRegion,u=d.qrEngine,h=d.canvas,M=d.disallowCanvasResizing||!1,J=d.alsoTryWithoutScanRegion||!1,me=!0):console.warn(d||u||h||M||J?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),d=!!u;try{let re,_e,te;if([u,re]=yield Promise.all([u||y.createQrEngine(),y._loadImage(r)]),[h,_e]=y._drawToCanvas(re,ie,h,M),u instanceof Worker){let le=u;d||y._postWorkerMessageSync(le,"inversionMode","both"),te=yield new Promise((q,ve)=>{let ce,ye,Se,Ne=-1;ye=Ue=>{Ue.data.id===Ne&&(le.removeEventListener("message",ye),le.removeEventListener("error",Se),clearTimeout(ce),null!==Ue.data.data?q({data:Ue.data.data,cornerPoints:y._convertPoints(Ue.data.cornerPoints,ie)}):ve(y.NO_QR_CODE_FOUND))},Se=Ue=>{le.removeEventListener("message",ye),le.removeEventListener("error",Se),clearTimeout(ce),ve("Scanner error: "+(Ue?Ue.message||Ue:"Unknown Error"))},le.addEventListener("message",ye),le.addEventListener("error",Se),ce=setTimeout(()=>Se("timeout"),1e4);let Ze=_e.getImageData(0,0,h.width,h.height);Ne=y._postWorkerMessageSync(le,"decode",Ze,[Ze.data.buffer])})}else te=yield Promise.race([new Promise((le,q)=>window.setTimeout(()=>q("Scanner error: timeout"),1e4)),n(function*(){try{var[le]=yield u.detect(h);if(!le)throw y.NO_QR_CODE_FOUND;return{data:le.rawValue,cornerPoints:y._convertPoints(le.cornerPoints,ie)}}catch(q){if(/not implemented|service unavailable/.test(le=q.message||q))return y._disableBarcodeDetector=!0,y.scanImage(r,{scanRegion:ie,canvas:h,disallowCanvasResizing:M,alsoTryWithoutScanRegion:J});throw`Scanner error: ${le}`}})()]);return me?te:te.data}catch(re){if(!ie||!J)throw re;let _e=yield y.scanImage(r,{qrEngine:u,canvas:h,disallowCanvasResizing:M});return me?_e:_e.data}finally{d||y._postWorkerMessage(u,"close")}})()}setGrayscaleWeights(r,d,u,h=!0){y._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:r,green:d,blue:u,useIntegerApproximation:h})}setInversionMode(r){y._postWorkerMessage(this._qrEnginePromise,"inversionMode",r)}static createQrEngine(r){return n(function*(){if(r&&console.warn("Specifying a worker path is not required and not supported anymore."),r=()=>s.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(s.bind(s,6920)).then(u=>u.createWorker()),y._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return r();let d=navigator.userAgentData;return d&&d.brands.some(({brand:u})=>/Chromium/i.test(u))&&/mac ?OS/i.test(d.platform)&&(yield d.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:u,platformVersion:h})=>/arm/i.test(u||"arm")&&13<=parseInt(h||"13")).catch(()=>!0))?r():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(r){let d=Math.round(.6666666666666666*Math.min(r.videoWidth,r.videoHeight));return{x:Math.round((r.videoWidth-d)/2),y:Math.round((r.videoHeight-d)/2),width:d,height:d,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var r=this.$video,d=r.videoWidth,u=r.videoHeight,h=r.offsetWidth,M=r.offsetHeight,J=r.offsetLeft,ie=r.offsetTop,me=window.getComputedStyle(r),re=me.objectFit,_e=d/u,te=h/M;switch(re){case"none":var le=d,q=u;break;case"fill":le=h,q=M;break;default:("cover"===re?_e>te:_e<te)?le=(q=M)*_e:q=(le=h)/_e,"scale-down"===re&&(le=Math.min(le,d),q=Math.min(q,u))}var[ve,ce]=me.objectPosition.split(" ").map((Se,Ne)=>{const Ze=parseFloat(Se);return Se.endsWith("%")?(Ne?M-q:h-le)*Ze/100:Ze});te=this._scanRegion.height||u,re=this._scanRegion.x||0;var ye=this._scanRegion.y||0;(_e=this.$overlay.style).width=(me=this._scanRegion.width||d)/d*le+"px",_e.height=te/u*q+"px",_e.top=`${ie+ce+ye/u*q}px`,u=/scaleX\(-1\)/.test(r.style.transform),_e.left=`${J+(u?h-ve-le:ve)+(u?d-re-me:re)/d*le}px`,_e.transform=r.style.transform}})}static _convertPoints(r,d){if(!d)return r;let u=d.x||0,h=d.y||0,M=d.width&&d.downScaledWidth?d.width/d.downScaledWidth:1;d=d.height&&d.downScaledHeight?d.height/d.downScaledHeight:1;for(let J of r)J.x=J.x*M+u,J.y=J.y*d+h;return r}_scanFrame(){var r=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(n(function*(){if(!(1>=r.$video.readyState)){var d=Date.now()-r._lastScanTimestamp,u=1e3/r._maxScansPerSecond;d<u&&(yield new Promise(M=>setTimeout(M,u-d))),r._lastScanTimestamp=Date.now();try{var h=yield y.scanImage(r.$video,{scanRegion:r._scanRegion,qrEngine:r._qrEnginePromise,canvas:r.$canvas})}catch(M){if(!r._active)return;r._onDecodeError(M)}!y._disableBarcodeDetector||(yield r._qrEnginePromise)instanceof Worker||(r._qrEnginePromise=y.createQrEngine()),h?(r._onDecode?r._onDecode(h):r._legacyOnDecode&&r._legacyOnDecode(h.data),r.$codeOutlineHighlight&&(clearTimeout(r._codeOutlineHighlightRemovalTimeout),r._codeOutlineHighlightRemovalTimeout=void 0,r.$codeOutlineHighlight.setAttribute("viewBox",`${r._scanRegion.x||0} ${r._scanRegion.y||0} ${r._scanRegion.width||r.$video.videoWidth} ${r._scanRegion.height||r.$video.videoHeight}`),r.$codeOutlineHighlight.firstElementChild.setAttribute("points",h.cornerPoints.map(({x:M,y:J})=>`${M},${J}`).join(" ")),r.$codeOutlineHighlight.style.display="")):r.$codeOutlineHighlight&&!r._codeOutlineHighlightRemovalTimeout&&(r._codeOutlineHighlightRemovalTimeout=setTimeout(()=>r.$codeOutlineHighlight.style.display="none",100))}r._scanFrame()}))}_onDecodeError(r){r!==y.NO_QR_CODE_FOUND&&console.log(r)}_getCameraStream(){var r=this;return n(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let d=/^(environment|user)$/.test(r._preferredCamera)?"facingMode":"deviceId",u=[{width:{min:1024}},{width:{min:768}},{}],h=u.map(M=>Object.assign({},M,{[d]:{exact:r._preferredCamera}}));for(let M of[...h,...u])try{let J=yield navigator.mediaDevices.getUserMedia({video:M,audio:!1});return{stream:J,facingMode:r._getFacingMode(J)||(M.facingMode?r._preferredCamera:"environment"===r._preferredCamera?"user":"environment")}}catch(J){}throw"Camera not found."})()}_restartVideoStream(){var r=this;return n(function*(){let d=r._paused;(yield r.pause(!0))&&!d&&r._active&&(yield r.start())})()}static _stopVideoStream(r){for(let d of r.getTracks())d.stop(),r.removeTrack(d)}_setVideoMirror(r){this.$video.style.transform="scaleX("+("user"===r?-1:1)+")"}_getFacingMode(r){return(r=r.getVideoTracks()[0])?/rear|back|environment/i.test(r.label)?"environment":/front|user|face/i.test(r.label)?"user":null:null}static _drawToCanvas(r,d,u,h=!1){u=u||document.createElement("canvas");let M=d&&d.x?d.x:0,J=d&&d.y?d.y:0,ie=d&&d.width?d.width:r.videoWidth||r.width,me=d&&d.height?d.height:r.videoHeight||r.height;return h||(h=d&&d.downScaledWidth?d.downScaledWidth:ie,d=d&&d.downScaledHeight?d.downScaledHeight:me,u.width!==h&&(u.width=h),u.height!==d&&(u.height=d)),(d=u.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,d.drawImage(r,M,J,ie,me,0,0,u.width,u.height),[u,d]}static _loadImage(r){return n(function*(){if(r instanceof Image)return yield y._awaitImageLoad(r),r;if(r instanceof HTMLVideoElement||r instanceof HTMLCanvasElement||r instanceof SVGImageElement||"OffscreenCanvas"in window&&r instanceof OffscreenCanvas||"ImageBitmap"in window&&r instanceof ImageBitmap)return r;if(!(r instanceof File||r instanceof Blob||r instanceof URL||"string"==typeof r))throw"Unsupported image type.";{let d=new Image;d.src=r instanceof File||r instanceof Blob?URL.createObjectURL(r):r.toString();try{return yield y._awaitImageLoad(d),d}finally{(r instanceof File||r instanceof Blob)&&URL.revokeObjectURL(d.src)}}})()}static _awaitImageLoad(r){return n(function*(){r.complete&&0!==r.naturalWidth||(yield new Promise((d,u)=>{let h=M=>{r.removeEventListener("load",h),r.removeEventListener("error",h),M instanceof ErrorEvent?u("Image load error"):d()};r.addEventListener("load",h),r.addEventListener("error",h)}))})()}static _postWorkerMessage(r,d,u,h){return n(function*(){return y._postWorkerMessageSync(yield r,d,u,h)})()}static _postWorkerMessageSync(r,d,u,h){if(!(r instanceof Worker))return-1;let M=y._workerMessageId++;return r.postMessage({id:M,type:d,data:u},h),M}}return y.DEFAULT_CANVAS_SIZE=400,y.NO_QR_CODE_FOUND="No QR code found",y._disableBarcodeDetector=!1,y._workerMessageId=0,y})();var R=s(591),x=s(5905),P=s(9808),O=s(3812),_=s(6903),D=s(1556);const C=["video"];function E(y,z){1&y&&e._UZ(0,"spinner")}function I(y,z){if(1&y&&e._UZ(0,"option",6),2&y){const r=z.$implicit;e.Q6J("value",r.id)("text",r.label)}}function L(y,z){if(1&y&&(e.ynx(0),e.TgZ(1,"select",4),e.YNc(2,I,1,2,"option",5),e.qZA(),e.BQk()),2&y){const r=e.oxw();e.xp6(1),e.Q6J("formControl",r.cameraControl),e.xp6(1),e.Q6J("ngForOf",r.cameras$.value)}}const N=function(y){return{"d-none":y}};let H=(()=>{class y extends l.H{constructor(r,d){super(r),this.modalRef=d,this.ready$=new R.X(!1),this.cameras$=new R.X([]),this.select=new e.vpe}ngOnInit(){super.ngOnInit(),this.cameraControl=new t.NI,this.timerControl=setTimeout(()=>this.close(),6e4)}ngAfterViewInit(){Q.hasCamera().then(r=>{r?Q.listCameras(!0).then(d=>this.setupQrScanner(d)).catch(()=>this.noPermission()):this.noCameras()})}setupQrScanner(r){this.cameras$.next(r);const d=this.preferredCamera;this.qrScanner=new Q(this.video.nativeElement,u=>this.emit(u.data),{preferredCamera:d,highlightScanRegion:!0}),this.qrScanner.start().then(()=>this.initialize()).catch(()=>this.noPermission()),this.addSub(this.cameras$.subscribe(u=>{var h;if((0,g.cS)(this.cameraControl.value)){const M=null!==(h=u.find(J=>J.id===d))&&void 0!==h?h:u[0];this.cameraControl.setValue(null==M?void 0:M.id)}})),this.addSub(this.cameraControl.valueChanges.subscribe(u=>{this.preferredCamera=u,this.qrScanner.setCamera(u)}))}ngOnDestroy(){super.ngOnDestroy(),this.destroy(),clearTimeout(this.timerControl)}emit(r){this.select.emit(r),this.close()}close(){this.destroy(),this.modalRef.hide()}initialize(){this.ready$.next(!0);const r=this.video.nativeElement.style;r.opacity="",r.width="",r.height="",r.transform=""}destroy(){this.qrScanner&&this.qrScanner.destroy()}noCameras(){this.notification.error(this.i18n.field.camera.noCameras),this.close()}noPermission(){this.notification.error(this.i18n.field.camera.noPermission),this.close()}get preferredCamera(){return localStorage.getItem(y.PreferredCameraKey)}set preferredCamera(r){localStorage.setItem(y.PreferredCameraKey,r)}}return y.PreferredCameraKey="preferredCamera",y.\u0275fac=function(r){return new(r||y)(e.Y36(e.zs3),e.Y36(x.UZ))},y.\u0275cmp=e.Xpm({type:y,selectors:[["scan-qrcode"]],viewQuery:function(r,d){if(1&r&&e.Gf(C,7),2&r){let u;e.iGM(u=e.CRH())&&(d.video=u.first)}},outputs:{select:"select"},features:[e.qOj],decls:12,vars:13,consts:[[3,"ngClass"],["video",""],[4,"ngIf"],["outline","",3,"label","action"],[1,"mt-3","custom-select",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"]],template:function(r,d){1&r&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e._UZ(2,"video",0,1),e.ALo(4,"async"),e.YNc(5,E,1,0,"spinner",2),e.ALo(6,"async"),e.YNc(7,L,3,2,"ng-container",2),e.ALo(8,"async"),e.TgZ(9,"actions"),e._UZ(10,"span"),e.TgZ(11,"action-button",3),e.NdJ("action",function(){return d.modalRef.hide()}),e.qZA()()),2&r&&(e.xp6(1),e.Oqu(d.i18n.field.camera.titleQrCode),e.xp6(1),e.Q6J("ngClass",e.VKq(11,N,!1===e.lcZ(4,5,d.ready$))),e.xp6(3),e.Q6J("ngIf",!1===e.lcZ(6,7,d.ready$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,9,d.cameras$).length>1),e.xp6(4),e.Q6J("label",d.i18n.general.cancel))},directives:[P.mk,P.O5,O.O,t.EJ,t.JJ,t.oH,P.sg,t.YN,t.Kr,_.h,D.x],pipes:[P.Ov],encapsulation:2,changeDetection:0}),y})()},7816:(Te,se,s)=>{"use strict";s.d(se,{f:()=>z});var e=s(3075),t=s(5766),l=s(3365),g=s(6163),m=s(6435),n=s(9808),j=s(195),Q=s(3077),R=s(3455),x=s(3317);function P(r,d){1&r&&m.GkF(0)}function O(r,d){if(1&r&&(m.TgZ(0,"label-value",2),m.YNc(1,P,1,0,"ng-container",3),m.qZA()),2&r){const u=m.oxw(),h=m.MAs(2);m.Q6J("formField",u.self)("informationText",u.informationText),m.xp6(1),m.Q6J("ngTemplateOutlet",h)}}const _=function(r){return{selected:r}};function D(r,d){if(1&r){const u=m.EpF();m.TgZ(0,"a",15),m.NdJ("click",function(M){return m.CHM(u),m.oxw(3).select(null),M.preventDefault()}),m._uU(1),m.qZA()}if(2&r){const u=m.oxw(3);m.Q6J("id",u.id+"_")("ngClass",m.VKq(3,_,null==u.value||""===u.value)),m.xp6(1),m.Oqu(u.emptyLabel)}}const C=function(r){return{"mt-3":r}};function E(r,d){if(1&r&&(m.TgZ(0,"div",18),m._uU(1),m.qZA()),2&r){const u=m.oxw(),M=u.$implicit;m.Q6J("ngClass",m.VKq(2,C,!u.first)),m.xp6(1),m.hij(" ",M.name," ")}}const I=function(r,d,u){return{"mt-1":r,"pl-3":d,selected:u}};function L(r,d){if(1&r){const u=m.EpF();m.TgZ(0,"a",19),m.NdJ("click",function(M){const ie=m.CHM(u).$implicit;return m.oxw(4).select(ie),M.preventDefault()}),m._uU(1),m.qZA()}if(2&r){const u=d.$implicit,h=d.first,M=m.oxw(),J=M.$implicit,ie=M.first,me=m.oxw(3);m.Tol(me.resolveStyle(u,J.name)),m.Q6J("id",me.id+"_"+u.value)("ngClass",m.kEZ(5,I,null!=me.emptyLabel||!(ie&&h),J.name,me.isSelected(u))),m.xp6(1),m.hij(" ",u.text," ")}}function N(r,d){if(1&r&&(m.ynx(0),m.YNc(1,E,2,4,"div",16),m.YNc(2,L,2,9,"a",17),m.ALo(3,"async"),m.BQk()),2&r){const u=d.$implicit;m.xp6(1),m.Q6J("ngIf",u.name),m.xp6(1),m.Q6J("ngForOf",m.lcZ(3,2,u.options))}}function B(r,d){if(1&r&&(m.TgZ(0,"div",11,12),m.NdJ("click",function(h){return h.preventDefault(),h.stopPropagation()}),m.YNc(2,D,2,5,"a",13),m.YNc(3,N,4,4,"ng-container",14),m.ALo(4,"async"),m.qZA()),2&r){const u=m.oxw(2);m.Q6J("ngClass",u.dropdownOnRight?"dropdown-menu-right":null),m.uIk("id",u.dropdownMenuId),m.xp6(2),m.Q6J("ngIf",null!=u.emptyLabel),m.xp6(1),m.Q6J("ngForOf",m.lcZ(4,4,u.categories))}}const H=function(r){return{"is-invalid":r}};function y(r,d){if(1&r){const u=m.EpF();m.TgZ(0,"div",4,5),m.NdJ("onShown",function(){return m.CHM(u),m.oxw().onShown()})("onHidden",function(){m.CHM(u);const M=m.MAs(3);return m.oxw().onHidden(),M.focus()}),m.TgZ(2,"button",6,7),m.ALo(4,"async"),m.ALo(5,"async"),m._UZ(6,"div",8),m.ALo(7,"trust"),m.ALo(8,"async"),m.qZA(),m.YNc(9,B,5,6,"div",9),m.qZA(),m._UZ(10,"field-errors",10)}if(2&r){const u=m.oxw();m.xp6(2),m.Q6J("id",u.id)("title",m.lcZ(4,6,u.display$))("ngClass",m.VKq(14,H,"INVALID"===m.lcZ(5,8,u.formControl.statusChanges)&&u.formControl.touched)),m.uIk("aria-controls",u.dropdownMenuId),m.xp6(4),m.Q6J("innerHTML",m.lcZ(7,10,m.lcZ(8,12,u.display$)),m.oJD),m.xp6(4),m.Q6J("control",u.formControl)}}let z=(()=>{class r extends l.I{constructor(u,h){super(u,h),this.emptyOption=!1}get emptyLabel(){return!0===this.emptyOption?"":"string"==typeof this.emptyOption?this.emptyOption:null}getDisplay(){return(0,g.cS)(this.value)?this.emptyLabel||"":this.getDisabledValue()}getSelectedValues(){const u=this.value;return(0,g.cS)(u)?[]:[u]}select(u){u&&u.disabled||(this.value=u?u.value:null,this.close())}hasEmptyOption(){return!(null==this.emptyOption||!1===this.emptyOption)}}return r.\u0275fac=function(u){return new(u||r)(m.Y36(m.zs3),m.Y36(e.gN,13))},r.\u0275cmp=m.Xpm({type:r,selectors:[["single-selection-field"]],inputs:{emptyOption:"emptyOption"},features:[m._Bn([{provide:e.JU,useExisting:r,multi:!0},{provide:t.GY,useExisting:r}]),m.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],["dropdown","",1,"w-100",3,"onShown","onHidden"],["dropdown","bs-dropdown"],["dropdownToggle","","type","button",1,"form-control","text-left","custom-select","w-100",3,"id","title","ngClass"],["toggleButton",""],[1,"w-100","mw-100","text-truncate","pr-3",3,"innerHTML"],["class","dropdown-menu","role","listbox","style","visibility: hidden","attr.aria-labelledby","id",3,"ngClass","click",4,"dropdownMenu"],[3,"control"],["role","listbox","attr.aria-labelledby","id",1,"dropdown-menu",2,"visibility","hidden",3,"ngClass","click"],["dropDownMenu",""],["role","option","class","select-option mt-1","tabindex","0","href","#",3,"id","ngClass","click",4,"ngIf"],[4,"ngFor","ngForOf"],["role","option","tabindex","0","href","#",1,"select-option","mt-1",3,"id","ngClass","click"],["class","pl-2 font-weight-bold",3,"ngClass",4,"ngIf"],["tabindex","0","href","#","class","select-option",3,"class","id","ngClass","click",4,"ngFor","ngForOf"],[1,"pl-2","font-weight-bold",3,"ngClass"],["tabindex","0","href","#",1,"select-option",3,"id","ngClass","click"]],template:function(u,h){if(1&u&&(m.YNc(0,O,2,3,"label-value",0),m.YNc(1,y,11,16,"ng-template",null,1,m.W1O)),2&u){const M=m.MAs(2);m.Q6J("ngIf",h.label)("ngIfElse",M)}},directives:[n.O5,j.t,n.tP,Q.TO,Q.Mq,n.mk,Q.Hz,n.sg,R.e],pipes:[n.Ov,x.a],encapsulation:2,changeDetection:0}),r})()},1030:(Te,se,s)=>{"use strict";s.d(se,{u:()=>H});var l,g,e=s(3075),t=s(723),m="function"==typeof Map?new Map:(l=[],g=[],{has:function(y){return l.indexOf(y)>-1},get:function(y){return g[l.indexOf(y)]},set:function(y,z){-1===l.indexOf(y)&&(l.push(y),g.push(z))},delete:function(y){var z=l.indexOf(y);z>-1&&(l.splice(z,1),g.splice(z,1))}}),n=function(y){return new Event(y,{bubbles:!0})};try{new Event("test")}catch(y){n=function(z){var r=document.createEvent("Event");return r.initEvent(z,!0,!1),r}}function j(y){var z=m.get(y);z&&z.destroy()}function Q(y){var z=m.get(y);z&&z.update()}var R=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((R=function(y){return y}).destroy=function(y){return y},R.update=function(y){return y}):((R=function(y,z){return y&&Array.prototype.forEach.call(y.length?y:[y],function(r){return function(d){if(d&&d.nodeName&&"TEXTAREA"===d.nodeName&&!m.has(d)){var u,h=null,M=null,J=null,ie=function(){d.clientWidth!==M&&te()},me=function(le){window.removeEventListener("resize",ie,!1),d.removeEventListener("input",te,!1),d.removeEventListener("keyup",te,!1),d.removeEventListener("autosize:destroy",me,!1),d.removeEventListener("autosize:update",te,!1),Object.keys(le).forEach(function(q){d.style[q]=le[q]}),m.delete(d)}.bind(d,{height:d.style.height,resize:d.style.resize,overflowY:d.style.overflowY,overflowX:d.style.overflowX,wordWrap:d.style.wordWrap});d.addEventListener("autosize:destroy",me,!1),"onpropertychange"in d&&"oninput"in d&&d.addEventListener("keyup",te,!1),window.addEventListener("resize",ie,!1),d.addEventListener("input",te,!1),d.addEventListener("autosize:update",te,!1),d.style.overflowX="hidden",d.style.wordWrap="break-word",m.set(d,{destroy:me,update:te}),"vertical"===(u=window.getComputedStyle(d,null)).resize?d.style.resize="none":"both"===u.resize&&(d.style.resize="horizontal"),h="content-box"===u.boxSizing?-(parseFloat(u.paddingTop)+parseFloat(u.paddingBottom)):parseFloat(u.borderTopWidth)+parseFloat(u.borderBottomWidth),isNaN(h)&&(h=0),te()}function re(le){var q=d.style.width;d.style.width="0px",d.style.width=q,d.style.overflowY=le}function _e(){if(0!==d.scrollHeight){var le=function(q){for(var ve=[];q&&q.parentNode&&q.parentNode instanceof Element;)q.parentNode.scrollTop&&(q.parentNode.style.scrollBehavior="auto",ve.push([q.parentNode,q.parentNode.scrollTop])),q=q.parentNode;return function(){return ve.forEach(function(ce){var ye=ce[0];ye.scrollTop=ce[1],ye.style.scrollBehavior=null})}}(d);d.style.height="",d.style.height=d.scrollHeight+h+"px",M=d.clientWidth,le()}}function te(){_e();var le=Math.round(parseFloat(d.style.height)),q=window.getComputedStyle(d,null),ve="content-box"===q.boxSizing?Math.round(parseFloat(q.height)):d.offsetHeight;if(ve<le?"hidden"===q.overflowY&&(re("scroll"),_e(),ve="content-box"===q.boxSizing?Math.round(parseFloat(window.getComputedStyle(d,null).height)):d.offsetHeight):"hidden"!==q.overflowY&&(re("hidden"),_e(),ve="content-box"===q.boxSizing?Math.round(parseFloat(window.getComputedStyle(d,null).height)):d.offsetHeight),J!==ve){J=ve;var ce=n("autosize:resized");try{d.dispatchEvent(ce)}catch(ye){}}}}(r)}),y}).destroy=function(y){return y&&Array.prototype.forEach.call(y.length?y:[y],j),y},R.update=function(y){return y&&Array.prototype.forEach.call(y.length?y:[y],Q),y});const P=R;var O=s(6435),_=s(9808),D=s(195),C=s(3455);const E=["textarea"];function I(y,z){1&y&&O.GkF(0)}function L(y,z){if(1&y&&(O.TgZ(0,"label-value",2),O.YNc(1,I,1,0,"ng-container",3),O.qZA()),2&y){const r=O.oxw(),d=O.MAs(2);O.Q6J("formField",r.self)("informationText",r.informationText),O.xp6(1),O.Q6J("ngTemplateOutlet",d)}}const N=function(y){return{"is-invalid":y}};function B(y,z){if(1&y&&(O.TgZ(0,"textarea",4,5),O.ALo(2,"async"),O._uU(3),O.qZA(),O._UZ(4,"field-errors",6)),2&y){const r=O.oxw();O.Q6J("id",r.id)("formControl",r.formControl)("name",r.name)("placeholder",r.placeholder)("ngClass",O.VKq(10,N,"INVALID"===O.lcZ(2,8,r.formControl.statusChanges)&&r.formControl.touched)),O.uIk("autocomplete",r.autocomplete),O.xp6(3),O.Oqu(r.value),O.xp6(1),O.Q6J("control",r.formControl)}}let H=(()=>{class y extends t.T{constructor(r,d){super(r,d),this.placeholder="",this.autocomplete="off"}onDisabledChange(r){this.textareaRef&&this.textareaRef.nativeElement&&(this.textareaRef.nativeElement.disabled=r)}ngAfterViewInit(){if(this.textareaRef&&this.textareaRef.nativeElement){const r=this.textareaRef.nativeElement;P(r),setTimeout(()=>P.update(r),1)}}getFocusableControl(){return(this.textareaRef||{}).nativeElement}getDisabledValue(){return this.value}notifyValueChange(r){super.notifyValueChange(r),this.textareaRef&&this.textareaRef.nativeElement&&P.update(this.textareaRef.nativeElement)}}return y.\u0275fac=function(r){return new(r||y)(O.Y36(O.zs3),O.Y36(e.gN,13))},y.\u0275cmp=O.Xpm({type:y,selectors:[["textarea-field"]],viewQuery:function(r,d){if(1&r&&O.Gf(E,5),2&r){let u;O.iGM(u=O.CRH())&&(d.textareaRef=u.first)}},inputs:{placeholder:"placeholder",autocomplete:"autocomplete"},features:[O._Bn([{provide:e.JU,useExisting:y,multi:!0}]),O.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],["rows","3",1,"form-control",3,"id","formControl","name","placeholder","ngClass"],["textarea",""],[3,"control"]],template:function(r,d){if(1&r&&(O.YNc(0,L,2,3,"label-value",0),O.YNc(1,B,5,12,"ng-template",null,1,O.W1O)),2&r){const u=O.MAs(2);O.Q6J("ngIf",d.label)("ngIfElse",u)}},directives:[_.O5,D.t,_.tP,e.Fj,e.JJ,e.oH,_.mk,C.e],pipes:[_.Ov],encapsulation:2,changeDetection:0}),y})()},6736:(Te,se,s)=>{"use strict";s.d(se,{X:()=>_});var e=s(3075),t=s(723),l=s(6163),g=s(6435),m=s(9808),n=s(195),j=s(3455);const Q=["input"];function R(D,C){1&D&&g.GkF(0)}function x(D,C){if(1&D&&(g.TgZ(0,"label-value",2),g.YNc(1,R,1,0,"ng-container",3),g.qZA()),2&D){const E=g.oxw(),I=g.MAs(2);g.Q6J("formField",E.self)("informationText",E.informationText),g.xp6(1),g.Q6J("ngTemplateOutlet",I)}}const P=function(D){return{"is-invalid":D}};function O(D,C){if(1&D){const E=g.EpF();g.TgZ(0,"input",4,5),g.NdJ("blur",function(){return g.CHM(E),g.oxw().updateValue()}),g.ALo(2,"async"),g.qZA(),g._UZ(3,"field-errors",6)}if(2&D){const E=g.oxw();g.Q6J("id",E.id)("formControl",E.formControl)("name",E.name)("placeholder",E.placeholder)("autocomplete",E.autocomplete)("ngClass",g.VKq(9,P,"INVALID"===g.lcZ(2,7,E.formControl.statusChanges)&&E.formControl.touched)),g.xp6(3),g.Q6J("control",E.formControl)}}let _=(()=>{class D extends t.T{constructor(E,I){super(E,I),this.placeholder="",this.autocomplete="off"}get input(){return this.inputRef?this.inputRef.nativeElement:null}preprocessValue(E){return this.ensureScheme(E)}onValueInitialized(E){const I=this.input;I&&(I.value=E)}onDisabledChange(E){this.inputRef&&this.inputRef.nativeElement&&(this.inputRef.nativeElement.disabled=E)}updateValue(){const E=this.value,I=this.ensureScheme(E);E!==I&&(this.value=I,this.input.value=I)}getFocusableControl(){return(this.inputRef||{}).nativeElement}getDisabledValue(){return this.value}ensureScheme(E){if((0,l.cS)(E))return null;const I=String(E);return I.includes("://")?I:"http://"+I}}return D.\u0275fac=function(E){return new(E||D)(g.Y36(g.zs3),g.Y36(e.gN,13))},D.\u0275cmp=g.Xpm({type:D,selectors:[["url-field"]],viewQuery:function(E,I){if(1&E&&g.Gf(Q,5),2&E){let L;g.iGM(L=g.CRH())&&(I.inputRef=L.first)}},inputs:{placeholder:"placeholder",autocomplete:"autocomplete"},features:[g._Bn([{provide:e.JU,useExisting:D,multi:!0}]),g.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],[1,"form-control","w-100",3,"id","formControl","name","placeholder","autocomplete","ngClass","blur"],["input",""],[3,"control"]],template:function(E,I){if(1&E&&(g.YNc(0,x,2,3,"label-value",0),g.YNc(1,O,4,11,"ng-template",null,1,g.W1O)),2&E){const L=g.MAs(2);g.Q6J("ngIf",I.label)("ngIfElse",L)}},directives:[m.O5,n.t,m.tP,e.Fj,e.JJ,e.oH,m.mk,j.e],pipes:[m.Ov],encapsulation:2,changeDetection:0}),D})()},8747:(Te,se,s)=>{"use strict";s.d(se,{l:()=>De});var e=s(3075),t=s(7e3),l=s(6435),g=s(723),m=s(6163),n=s(8664),j=s(591),Q=s(2198),R=s(13),x=s(5778),P=s(7545);const O=["inputField"],_=["dropdown"];let D=(()=>{class he extends g.T{constructor(k,de){super(k,de),this.controlContainer=de,this.autoSearch=!0,this.selected=new l.vpe,this.selection$=new j.X(null),this.options$=new j.X(null),this.allowOptions=!0,this.inputFieldControl=new e.NI(null),this.layout=k.get(n.Pb)}get selection(){return this.selection$.value}set selection(k){this.select(k)}ngOnInit(){super.ngOnInit(),this.addSub(this.inputFieldControl.valueChanges.pipe((0,Q.h)(k=>(0,m.OW)(k))).subscribe(()=>{this.close()})),this.autoSearch&&this.allowOptions&&this.addSub(this.inputFieldControl.valueChanges.pipe((0,Q.h)(k=>!(0,m.OW)(k)),(0,R.b)(t.S.DEBOUNCE_TIME),(0,x.x)(),(0,P.w)(k=>this.query(k))).subscribe(k=>{!this.allowOptions||(0,m.OW)(this.inputFieldControl.value)?this.options$.next([]):(this.options$.next(k),(0,m.cS)(k)||this.open())})),this.addSub(this.formControl.statusChanges.subscribe(k=>{"INVALID"===k?this.inputFieldControl.setErrors(this.formControl.errors):"VALID"===k&&this.inputFieldControl.setErrors(null)})),this.bodyListener=()=>this.close()}search(k){!this.allowOptions||((0,m.OW)(k)&&(k=this.inputFieldControl.value),(0,m.OW)(k)?(this.options$.next([]),this.close()):this.addSub(this.query(k).subscribe(de=>{this.allowOptions&&(this.options$.next(de),(0,m.cS)(de)||this.open())})))}ngAfterViewInit(){this.dropdown.onShown.subscribe(()=>{document.body.addEventListener("click",this.bodyListener,!1)}),this.dropdown.onHidden.subscribe(()=>{document.body.removeEventListener("click",this.bodyListener,!1)})}onValueInitialized(){(0,m.cS)(this.value)?this.select(null):this.fetch(this.value).subscribe(k=>{this.select(k,this.value,{emitEvent:!1})})}getFocusableControl(){return this.inputField}onShown(){if(!this.inputField)return;const k=this.inputField.nativeElement,de=k.getBoundingClientRect(),we=window.innerHeight||document.documentElement.clientHeight;this.dropdown.dropup=de.bottom>we-100,this.layout.setFocusTrap(this.dropdownMenuId),setTimeout(()=>{const Be=document.getElementById(this.dropdownMenuId);Be.style.top="",Be.style.bottom="",Be.style.transform="",Be.style.minWidth=`${k.getBoundingClientRect().width}px`,Be.style.visibility="visible"})}onHidden(){this.layout.setFocusTrap(null)}onDisabledChange(k){this.inputField.nativeElement.disabled=k}select(k,de,we){we=we||{};const Be=de||(null==k?null:this.toValue(k));this.value!==Be&&(this.value=Be),this.selection$.next(k),!1!==we.emitEvent&&this.selected.emit(k),this.close(),null==k?this.inputFieldControl.setValue(null,we):this.inputFieldControl.value!==Be&&this.inputFieldControl.setValue(Be,we)}getDisabledValue(){return this.selection?this.toDisplay(this.selection):String(this.value||"")}close(){this.dropdown&&this.dropdown.hide(),this.options$.next(null)}open(){this.dropdown.show()}ngClassFor(k,de){const we={"mt-1":de>0,selected:this.value===this.toValue(k)};return we[`autocomplete-option-${de}`]=!0,we}onEscapePressed(){this.select(null)}get dropdownMenuId(){return`dropdown-menu-${this.id}`}}return he.\u0275fac=function(k){return new(k||he)(l.Y36(l.zs3),l.Y36(e.gN))},he.\u0275dir=l.lG2({type:he,viewQuery:function(k,de){if(1&k&&(l.Gf(O,5),l.Gf(_,5)),2&k){let we;l.iGM(we=l.CRH())&&(de.inputField=we.first),l.iGM(we=l.CRH())&&(de.dropdown=we.first)}},inputs:{autoSearch:"autoSearch"},outputs:{selected:"selected"},features:[l.qOj]}),he})();var C=s(7947),E=s(6897),I=s(3032),L=s(5905),N=s(9808),B=s(3812),H=s(6903),y=s(1556);function z(he,Fe){1&he&&l._UZ(0,"spinner")}function r(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"div",7)(1,"a",8),l.NdJ("click",function(we){const Ye=l.CHM(k).$implicit;return l.oxw(2).emit(Ye),we.preventDefault()}),l._uU(2),l.qZA()()}if(2&he){const k=Fe.$implicit;l.xp6(2),l.hij(" ",k.contact.display," ")}}function d(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"action-button",9),l.NdJ("action",function(){return l.CHM(k),l.oxw(2).update(1)}),l.qZA()}if(2&he){const k=l.oxw(2);l.Q6J("label",k.i18n.general.next)}}function u(he,Fe){1&he&&l._UZ(0,"span")}function h(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"action-button",9),l.NdJ("action",function(){return l.CHM(k),l.oxw(2).update(-1)}),l.qZA()}if(2&he){const k=l.oxw(2);l.Q6J("label",k.i18n.general.previous)}}function M(he,Fe){if(1&he&&(l.TgZ(0,"div"),l.YNc(1,r,3,1,"div",3),l.ALo(2,"async"),l.qZA(),l.TgZ(3,"actions",4),l.YNc(4,d,1,1,"action-button",5),l.YNc(5,u,1,0,"span",6),l.YNc(6,h,1,1,"action-button",5),l.qZA()),2&he){const k=l.oxw();let de;l.xp6(1),l.Q6J("ngForOf",null==(de=l.lcZ(2,4,k.results$))?null:de.results),l.xp6(3),l.Q6J("ngIf",k.results$.value.hasNext),l.xp6(1),l.Q6J("ngIf",!k.results$.value.hasNext),l.xp6(1),l.Q6J("ngIf",k.currentPage>0)}}let J=(()=>{class he extends C.H{constructor(k,de,we){super(k),this.contactsService=de,this.modalRef=we,this.currentPage=0,this.select=new l.vpe,this.results$=new j.X(null)}ngOnInit(){super.ngOnInit(),this.update()}update(k=0){this.currentPage+=k,this.results=null,this.addSub(this.contactsService.searchContactList$Response({user:t.S.SELF,fields:["contact"],pageSize:this.layout.ltmd?6:this.layout.md?10:20,page:this.currentPage,usersToExclude:this.usersToExclude}).subscribe(de=>this.results=E.x.from(de)))}emit(k){this.select.emit(k.contact),this.modalRef.hide()}get onClick(){return k=>this.emit(k)}get results(){return this.results$.value}set results(k){this.results$.next(k)}}return he.\u0275fac=function(k){return new(k||he)(l.Y36(l.zs3),l.Y36(I.P),l.Y36(L.UZ))},he.\u0275cmp=l.Xpm({type:he,selectors:[["pick-contact"]],inputs:{usersToExclude:"usersToExclude"},outputs:{select:"select"},features:[l.qOj],decls:8,vars:6,consts:[[4,"ngIf","ngIfElse"],["results",""],[1,"d-block","w-100",3,"label","action"],["class","mb-2",4,"ngFor","ngForOf"],["kind","secondary","forceRow",""],["outline","",3,"label","action",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],["href","#",3,"click"],["outline","",3,"label","action"]],template:function(k,de){if(1&k&&(l.TgZ(0,"h1"),l._uU(1),l.qZA(),l.YNc(2,z,1,0,"spinner",0),l.ALo(3,"async"),l.YNc(4,M,7,6,"ng-template",null,1,l.W1O),l.TgZ(6,"actions")(7,"action-button",2),l.NdJ("action",function(){return de.modalRef.hide()}),l.qZA()()),2&k){const we=l.MAs(5);l.xp6(1),l.Oqu(de.i18n.field.user.contactTitle),l.xp6(1),l.Q6J("ngIf",null===l.lcZ(3,4,de.results$))("ngIfElse",we),l.xp6(5),l.Q6J("label",de.i18n.general.cancel)}},directives:[N.O5,B.O,N.sg,H.h,y.x],pipes:[N.Ov],encapsulation:2,changeDetection:0}),he})();var ie=s(1375),me=s(1086),re=s(7224),_e=s(5420),te=s(7595),le=s(543),q=s(5204),ve=s(195),ce=s(3077),ye=s(3594),Se=s(8397),Ne=s(70),Ze=s(3455);const Ue=["contactListButton"];function fe(he,Fe){1&he&&l.GkF(0)}function Pe(he,Fe){if(1&he&&(l.TgZ(0,"label-value",3),l.YNc(1,fe,1,0,"ng-container",4),l.qZA()),2&he){const k=l.oxw(),de=l.MAs(2);l.Q6J("formField",k.self)("informationText",k.informationText),l.xp6(1),l.Q6J("ngTemplateOutlet",de)}}function ne(he,Fe){if(1&he&&(l.ynx(0),l._uU(1),l.BQk()),2&he){const k=l.oxw(3);l.xp6(1),l.AsE(" ",k.user.locatorPrincipal.value," - ",k.user.display," ")}}function Oe(he,Fe){if(1&he&&l._uU(0),2&he){const k=l.oxw(3);l.hij(" ",k.user.display," ")}}function Ee(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"chip",14),l.NdJ("close",function(){return l.CHM(k),l.oxw(2).select(null)}),l.YNc(1,ne,2,2,"ng-container",15),l.YNc(2,Oe,1,1,"ng-template",null,16,l.W1O),l.qZA()}if(2&he){const k=l.MAs(3),de=l.oxw(2);l.Q6J("image",de.user.image)("icon",de.SvgIcon.Person),l.xp6(1),l.Q6J("ngIf",null==de.user||null==de.user.locatorPrincipal?null:de.user.locatorPrincipal.value)("ngIfElse",k)}}const Me=function(he){return{"is-invalid":he}};function w(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"input",17,18),l.NdJ("focus",function(){return l.CHM(k),l.oxw(2).onInputFocus()})("blur",function(){return l.CHM(k),l.oxw(2).onInputBlur()}),l.ALo(2,"async"),l.qZA()}if(2&he){const k=l.oxw(2);l.Q6J("placeholder",k.placeholder)("formControl",k.inputFieldControl)("ngClass",l.VKq(5,Me,"INVALID"===l.lcZ(2,3,k.formControl.statusChanges)&&k.formControl.touched))}}function F(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"a",22),l.NdJ("click",function(we){const Ye=l.CHM(k).$implicit;return l.oxw(3).select(Ye),we.stopPropagation(),we.preventDefault()}),l._uU(1),l.qZA()}if(2&he){const k=Fe.$implicit,de=Fe.index,we=l.oxw(3);l.Q6J("ngClass",we.ngClassFor(k,de)),l.xp6(1),l.hij(" ",k.display," ")}}function a(he,Fe){if(1&he&&(l.TgZ(0,"div",19,20),l.NdJ("click",function(de){return de.preventDefault(),de.stopPropagation()}),l.YNc(2,F,2,2,"a",21),l.ALo(3,"async"),l.qZA()),2&he){const k=l.oxw(2);l.uIk("id",k.dropdownMenuId),l.xp6(2),l.Q6J("ngForOf",l.lcZ(3,2,k.options$))}}function v(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"button",25),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).locateUser()}),l._UZ(1,"icon",26),l.qZA()}if(2&he){const k=l.oxw(3);l.Q6J("tooltip",k.i18n.field.user.locateTooltip),l.xp6(1),l.Q6J("icon",k.SvgIcon.Search)}}function ee(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"button",25,27),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).showContactList()}),l._UZ(2,"icon",26),l.qZA()}if(2&he){const k=l.oxw(3);l.Q6J("tooltip",k.i18n.field.user.contactTooltip),l.xp6(2),l.Q6J("icon",k.SvgIcon.Book)}}function K(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"button",25,28),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).showScanQrCode()}),l._UZ(2,"icon",26),l.qZA()}if(2&he){const k=l.oxw(3);l.Q6J("tooltip",k.i18n.field.user.scanQrCodeTooltip),l.xp6(2),l.Q6J("icon",k.SvgIcon.QrCodeScan)}}function Ie(he,Fe){if(1&he&&(l.TgZ(0,"div",23),l.YNc(1,v,2,2,"button",24),l.YNc(2,ee,3,2,"button",24),l.YNc(3,K,3,2,"button",24),l.qZA()),2&he){const k=l.oxw(2);l.xp6(1),l.Q6J("ngIf",k.allowLocate&&!k.allowSearch),l.xp6(1),l.Q6J("ngIf",k.allowContacts),l.xp6(1),l.Q6J("ngIf",k.allowQrCode)}}function V(he,Fe){if(1&he){const k=l.EpF();l.TgZ(0,"div",5)(1,"div",6)(2,"div",7,8),l.NdJ("onShown",function(){return l.CHM(k),l.oxw().onShown()})("onHidden",function(){return l.CHM(k),l.oxw().onHidden()}),l.YNc(4,Ee,4,4,"chip",9),l.ALo(5,"async"),l.YNc(6,w,3,7,"input",10),l.ALo(7,"async"),l.YNc(8,a,4,4,"div",11),l.qZA()(),l.YNc(9,Ie,4,3,"div",12),l.qZA(),l._UZ(10,"field-errors",13)}if(2&he){const k=l.oxw();l.xp6(2),l.Q6J("autoClose",!1)("insideClick",!1),l.xp6(2),l.Q6J("ngIf",l.lcZ(5,6,k.selection$)),l.xp6(2),l.Q6J("ngIf",null==l.lcZ(7,8,k.selection$)),l.xp6(3),l.Q6J("ngIf",null==k.user&&(k.allowContacts||k.allowQrCode||!k.allowSearch)),l.xp6(1),l.Q6J("control",k.formControl)}}function ue(he,Fe){}let De=(()=>{class he extends D{constructor(k,de,we,Be,Ye,qe,tt){super(k,de),this.userCache=we,this.usersService=Be,this.nextRequestState=Ye,this.modal=qe,this.errorHandler=tt,this.allowPrincipal=!1,this.allowSearch=!0,this.allowContacts=!0,this.allowQrCode=!1,this.allowSelf=!1,this.allowLocate=!0,this.placeholder=""}get user(){return this.selection}set user(k){this.selection=k}ngOnInit(){super.ngOnInit(),this.fieldSub=this.inputFieldControl.valueChanges.pipe((0,x.x)((Be,Ye)=>t.S.locatorEquals(Be,Ye))).subscribe(Be=>this.setAsPrincipal(Be)),this.allowSearch?this.placeholder=this.i18n.field.user.placeholderAllowSearch:this.allowPrincipal&&(this.placeholder=(0,m.cS)(this.principalTypes)||this.principalTypes.length>3?this.i18n.field.user.placeholderPrincipal:this.principalTypes.map(Be=>Be.name).join(" / "));const k=(this.dataForFrontendHolder.auth||{}).permissions||{};(k.users||{}).search||(this.allowSearch=!1),(k.contacts||{}).enable||(this.allowContacts=!1),this.allowSearch||(this.allowOptions=!1)}locateUser(){let k=this.inputFieldControl.value;if(k=(k||"").trim(),k.startsWith("*:")&&(k=k.substring(2)),k)return this.errorHandler.requestWithCustomErrorHandler(()=>this.addSub(this.usersService.locateUser({user:k}).subscribe(de=>this.select(de),()=>this.select(null))))}ngOnDestroy(){super.ngOnDestroy(),this.fieldSub.unsubscribe()}onDisabledChange(k){super.onDisabledChange(k),this.contactListButton&&this.contactListButton.nativeElement&&(this.contactListButton.nativeElement.disabled=k)}fetch(k){return this.userCache.get(k)}query(k){if((k=(k||"").trim()).startsWith("*:")&&(k=k.substring(2)),!this.allowSearch||(0,m.cS)(k))return(0,me.of)([]);const de=this.filters?Object.assign({},this.filters):{};return de.ignoreProfileFieldsInList=!0,de.pageSize=10,de.keywords=k,de.usersToExclude=[...de.usersToExclude||[]],this.allowSelf||de.usersToExclude.push(t.S.SELF),this.nextRequestState.leaveNotification=!0,this.usersService.searchUsers(de)}toDisplay(k){return k.display}toValue(k){return k.locator?k.locator:`id:${k.id}`}showContactList(){this.modal.show(J,{class:"modal-form",initialState:{usersToExclude:(this.filters||{}).usersToExclude||[]}}).content.select.pipe((0,re.P)()).subscribe(we=>this.user=we),this.modal.onHide.pipe((0,re.P)()).subscribe(()=>(0,m.T_)(this.inputField,!0))}showScanQrCode(){this.modal.show(ie.u,{class:"modal-form"}).content.select.pipe((0,re.P)()).subscribe(we=>this.setAsPrincipal(we)),this.modal.onHide.pipe((0,re.P)()).subscribe(()=>(0,m.T_)(this.inputField,!0))}setAsPrincipal(k){if(!(0,m.cS)(k)&&this.allowPrincipal){let de=k;de=/^[\w\*]+\:/.test(de)?t.S.escapeNumeric(de):"*:"+de,this.value=de,this.inputField.nativeElement.value=k}}onInputFocus(){this.allowOptions=this.allowSearch}onInputBlur(){this.allowOptions=!1}onEscapePressed(){this.allowPrincipal?this.close():this.user=null}}return he.\u0275fac=function(k){return new(k||he)(l.Y36(l.zs3),l.Y36(e.gN,13),l.Y36(_e.K),l.Y36(te.f),l.Y36(le.AM),l.Y36(L.tT),l.Y36(q.q))},he.\u0275cmp=l.Xpm({type:he,selectors:[["user-field"]],viewQuery:function(k,de){if(1&k&&l.Gf(Ue,5),2&k){let we;l.iGM(we=l.CRH())&&(de.contactListButton=we.first)}},inputs:{user:"user",allowPrincipal:"allowPrincipal",principalTypes:"principalTypes",allowSearch:"allowSearch",allowContacts:"allowContacts",allowQrCode:"allowQrCode",allowSelf:"allowSelf",allowLocate:"allowLocate",filters:"filters"},features:[l._Bn([{provide:e.JU,useExisting:he,multi:!0}]),l.qOj],decls:5,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],["autocomplete",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],[1,"d-flex","mw-100","w-100"],[1,"d-flex","flex-grow-1","mw-100"],["dropdown","",1,"w-100","d-flex","align-items-center",2,"position","relative",3,"autoClose","insideClick","onShown","onHidden"],["dropdown","bs-dropdown"],[3,"image","icon","close",4,"ngIf"],["class","form-control","autocomplete","off",3,"placeholder","formControl","ngClass","focus","blur",4,"ngIf"],["class","dropdown-menu","role","listbox","attr.aria-labelledby","id",3,"click",4,"dropdownMenu"],["class","d-flex",4,"ngIf"],[3,"control"],[3,"image","icon","close"],[4,"ngIf","ngIfElse"],["displayOnly",""],["autocomplete","off",1,"form-control",3,"placeholder","formControl","ngClass","focus","blur"],["inputField",""],["role","listbox","attr.aria-labelledby","id",1,"dropdown-menu",3,"click"],["dropDownMenu",""],["class","select-option","href","#",3,"ngClass","click",4,"ngFor","ngForOf"],["href","#",1,"select-option",3,"ngClass","click"],[1,"d-flex"],["type","button","class","btn btn-icon ml-2",3,"tooltip","click",4,"ngIf"],["type","button",1,"btn","btn-icon","ml-2",3,"tooltip","click"],[3,"icon"],["contactListButton",""],["scanQrCodeButton",""]],template:function(k,de){if(1&k&&(l.YNc(0,Pe,2,3,"label-value",0),l.YNc(1,V,11,10,"ng-template",null,1,l.W1O),l.YNc(3,ue,0,0,"ng-template",null,2,l.W1O)),2&k){const we=l.MAs(2);l.Q6J("ngIf",de.label)("ngIfElse",we)}},directives:[N.O5,ve.t,N.tP,ce.TO,ye.Y,e.Fj,e.JJ,e.oH,N.mk,ce.Hz,N.sg,Se.i9,Ne.o,Ze.e],pipes:[N.Ov],encapsulation:2,changeDetection:0}),he})()},7107:(Te,se,s)=>{"use strict";s.d(se,{F:()=>D});var e=s(7947),t=s(6163),l=s(6435),g=s(8134),m=s(9808),n=s(3961),j=s(867);function Q(C,E){1&C&&l.GkF(0)}function R(C,E){if(1&C&&(l.TgZ(0,"maybe-link",2),l.YNc(1,Q,1,0,"ng-container",3),l.qZA()),2&C){const I=l.oxw(),L=l.MAs(2);l.Q6J("link",I.path),l.xp6(1),l.Q6J("ngTemplateOutlet",L)}}function x(C,E){if(1&C&&l._UZ(0,"avatar",8),2&C){const I=l.oxw(2);l.Q6J("image",null==I.user?null:I.user.image)("icon",I.user?I.SvgIcon.Person:I.SvgIcon.Briefcase)}}function P(C,E){if(1&C&&(l.ynx(0),l._uU(1),l.BQk()),2&C){const I=l.oxw(2);l.xp6(1),l.hij(" (",I.account.number,") ")}}const O=function(C){return{"has-link":C}};function _(C,E){if(1&C&&(l.TgZ(0,"div",4),l.YNc(1,x,1,2,"avatar",5),l.TgZ(2,"div",6),l._uU(3),l.YNc(4,P,2,1,"ng-container",7),l.qZA()()),2&C){const I=l.oxw();l.Q6J("ngClass",l.VKq(4,O,!!I.path)),l.xp6(1),l.Q6J("ngIf",!I.operator&&!I.hideIcon),l.xp6(2),l.hij(" ",I.display," "),l.xp6(1),l.Q6J("ngIf",null==I.account?null:I.account.number)}}let D=(()=>{class C extends e.H{constructor(I,L){super(I),this.authHelper=L,this._hideLink=!1,this._hideIcon=!1}get hideLink(){return this._hideLink}set hideLink(I){this._hideLink=(0,t.Iw)(I)}get hideIcon(){return this._hideIcon}set hideIcon(I){this._hideIcon=(0,t.Iw)(I)}ngOnInit(){if(super.ngOnInit(),null!=this.account&&null==this.user&&(this.user=this.account.user),this.operator=!!this.user&&!!this.user.user,null!=this.user&&null!=this.user.id&&!this.hideLink){const I=this.authHelper.isSelf(this.user)?this.ApiHelper.SELF:this.user.id;this.path=`/users/${I}/profile`}this.display||(null!=this.user?this.display=this.user.display:null!=this.account&&(this.display=(this.account.type||{}).name))}canViewProfile(){return this.authHelper.isSelfOrOwner(this.user)||(((this.dataForFrontendHolder.auth||{}).permissions||{}).users||{}).viewProfile&&(this.operator||!!this.user.id)}}return C.\u0275fac=function(I){return new(I||C)(l.Y36(l.zs3),l.Y36(g.N))},C.\u0275cmp=l.Xpm({type:C,selectors:[["user-link"]],inputs:{user:"user",hideLink:"hideLink",hideIcon:"hideIcon",account:"account",display:"display"},features:[l.qOj],decls:3,vars:2,consts:[["class","d-flex flex-row",3,"link",4,"ngIf","ngIfElse"],["displayTpl",""],[1,"d-flex","flex-row",3,"link"],[4,"ngTemplateOutlet"],[1,"d-flex","flex-row",3,"ngClass"],["ngClass","mr-2","size","small",3,"image","icon",4,"ngIf"],[1,"display-text"],[4,"ngIf"],["ngClass","mr-2","size","small",3,"image","icon"]],template:function(I,L){if(1&I&&(l.YNc(0,R,2,2,"maybe-link",0),l.YNc(1,_,5,6,"ng-template",null,1,l.W1O)),2&I){const N=l.MAs(2);l.Q6J("ngIf",null!=L.path&&L.canViewProfile())("ngIfElse",N)}},directives:[m.O5,n.O,m.tP,m.mk,j.A],encapsulation:2,changeDetection:0}),C})()},4443:(Te,se,s)=>{"use strict";s.d(se,{C:()=>le});var e=s(4167),t=s(3075),l=s(4391),g=s(6163),m=s(591),n=s(6435),j=s(5905),Q=s(9175),R=s(8134),x=s(2089),P=s(543),O=s(9808),_=s(1602),D=s(8361),C=s(244),E=s(6903),I=s(1556),L=s(3317);function N(q,ve){if(1&q&&(n.TgZ(0,"h1"),n._uU(1),n.qZA()),2&q){const ce=n.oxw();n.xp6(1),n.Oqu(ce.title)}}const B=function(q){return{"mt-3":q}};function H(q,ve){if(1&q&&(n._UZ(0,"div",9),n.ALo(1,"trust")),2&q){const ce=n.oxw();n.Q6J("ngClass",n.VKq(4,B,null!=ce.title))("innerHTML",n.lcZ(1,2,ce.message),n.oJD)}}function y(q,ve){if(1&q&&n._UZ(0,"custom-field-input",10),2&q){const ce=ve.$implicit,ye=ve.first,Se=n.oxw();n.Q6J("field",ce)("focused",ye)("labelPosition",Se.labelPosition)("formControl",Se.form.get("customValues").get(ce.internalName))}}const z=function(q,ve){return{"mt-3":q,"mt-4":ve}};function r(q,ve){if(1&q){const ce=n.EpF();n.TgZ(0,"confirmation-password",11),n.NdJ("showSubmit",function(Se){return n.CHM(ce),n.oxw().showSubmit$.next(Se)})("createDeviceConfirmationError",function(){return n.CHM(ce),n.oxw().hide()})("confirmed",function(Se){return n.CHM(ce),n.oxw().confirm(Se)}),n.qZA()}if(2&q){const ce=n.oxw();n.Q6J("focused",!ce.hasFields)("createDeviceConfirmation",ce.createDeviceConfirmation)("passwordInput",ce.passwordInput)("ngClass",n.WLB(4,z,ce.hasFields||null==ce.message,!ce.hasFields&&null!=ce.message))}}function d(q,ve){if(1&q){const ce=n.EpF();n.TgZ(0,"action-button",12),n.NdJ("action",function(){return n.CHM(ce),n.oxw().confirm()}),n.ALo(1,"async"),n.qZA()}if(2&q){const ce=n.oxw();n.Q6J("disabled",!ce.canConfirm||n.lcZ(1,2,ce.requesting$))("label",ce.confirmLabel)}}function u(q,ve){1&q&&n._uU(0,"\xa0")}let h=(()=>{class q{constructor(ce,ye,Se,Ne,Ze,Ue,fe){this.formBuilder=ce,this.i18n=ye,this.modalRef=Se,this.fieldHelper=Ne,this.authHelper=Ze,this.shortcut=Ue,this.hasFields=!1,this.hasForm=!1,this.showSubmit$=new m.X(!0),this.requesting$=fe.requesting$}ngOnInit(){this.form=this.formBuilder.group({}),this.passwordInput&&(this.form.setControl("confirmationPassword",this.formBuilder.control(null,t.kI.required)),this.hasForm=!0),this.canConfirm=this.authHelper.canConfirm(this.passwordInput),this.hasFields=!(0,g.cS)(this.customFields),this.hasFields&&(this.form.setControl("customValues",this.fieldHelper.customValuesFormGroup(this.customFields)),this.hasForm=!0),(0,g.OW)(this.cancelLabel)&&(this.cancelLabel=this.i18n.general.cancel),(0,g.OW)(this.confirmLabel)&&(this.confirmLabel=this.i18n.general.confirm),this.hasFields||(this.sub=this.shortcut.subscribe("Enter",()=>this.confirm()))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}confirm(ce){let ye;if(this.hasForm){if(ce&&this.form.patchValue({confirmationPassword:ce}),!(0,g.pt)(this.form))return;ye=this.form.value}else ye={};ce&&(ye.confirmationPassword=ce),this.callback(ye),null==this.passwordInput&&this.modalRef.hide()}hide(){this.modalRef.hide()}}return q.\u0275fac=function(ce){return new(ce||q)(n.Y36(t.qu),n.Y36(l.s),n.Y36(j.UZ),n.Y36(Q.A),n.Y36(R.N),n.Y36(x.Mc),n.Y36(P.AM))},q.\u0275cmp=n.Xpm({type:q,selectors:[["confirmation"]],inputs:{title:"title",message:"message",cancelLabel:"cancelLabel",confirmLabel:"confirmLabel",customFields:"customFields",labelPosition:"labelPosition",createDeviceConfirmation:"createDeviceConfirmation",callback:"callback",passwordInput:"passwordInput"},decls:11,vars:10,consts:[[4,"ngIf"],[3,"formGroup"],["class","mb-1",3,"ngClass","innerHTML",4,"ngIf"],[3,"field","focused","labelPosition","formControl",4,"ngFor","ngForOf"],["formControlName","confirmationPassword",3,"focused","createDeviceConfirmation","passwordInput","ngClass","showSubmit","createDeviceConfirmationError","confirmed",4,"ngIf"],["forceRow",""],[3,"disabled","label","action",4,"ngIf","ngIfElse"],["blank",""],["outline","",3,"label","action"],[1,"mb-1",3,"ngClass","innerHTML"],[3,"field","focused","labelPosition","formControl"],["formControlName","confirmationPassword",3,"focused","createDeviceConfirmation","passwordInput","ngClass","showSubmit","createDeviceConfirmationError","confirmed"],[3,"disabled","label","action"]],template:function(ce,ye){if(1&ce&&(n.YNc(0,N,2,1,"h1",0),n.ynx(1,1),n.YNc(2,H,2,6,"div",2),n.YNc(3,y,1,4,"custom-field-input",3),n.YNc(4,r,1,7,"confirmation-password",4),n.TgZ(5,"actions",5),n.YNc(6,d,2,4,"action-button",6),n.ALo(7,"async"),n.YNc(8,u,1,0,"ng-template",null,7,n.W1O),n.TgZ(10,"action-button",8),n.NdJ("action",function(){return ye.hide()}),n.qZA()(),n.BQk()),2&ce){const Se=n.MAs(9);n.Q6J("ngIf",ye.title),n.xp6(1),n.Q6J("formGroup",ye.form),n.xp6(1),n.Q6J("ngIf",ye.message&&ye.canConfirm),n.xp6(1),n.Q6J("ngForOf",ye.customFields),n.xp6(1),n.Q6J("ngIf",ye.passwordInput),n.xp6(2),n.Q6J("ngIf",n.lcZ(7,8,ye.showSubmit$))("ngIfElse",Se),n.xp6(4),n.Q6J("label",ye.cancelLabel)}},directives:[O.O5,t.JL,t.sg,O.mk,O.sg,_.G,D.A,t.JJ,t.oH,C.y,t.u,E.h,I.x],pipes:[L.a,O.Ov],encapsulation:2,changeDetection:0}),q})();var M=s(5426),J=s(3290),ie=s(6939),me=s(1217),re=s(3140),_e=s(7295),te=s(5744);let le=(()=>{class q{constructor(ce){ce.confirmHandler=(ye,Se)=>ye.show(h,{class:"modal-form",initialState:Se})}}return q.\u0275fac=function(ce){return new(ce||q)(n.LFG(te.Y))},q.\u0275mod=n.oAB({type:q}),q.\u0275inj=n.cJS({imports:[[M.P,J.a,J.lQ,me.HC.forRoot(),ie.u3.forRoot(),_e.Tm,re.ji,e._t],M.P,ie.u3,J.a,J.lQ,me.HC,_e.Tm,re.ji,e._t]}),q})()},7420:function(Te,se){var t;void 0!==(t=function(){"use strict";return function(g,m,n){m=m||"",n=n||512;for(var j=atob(g),Q=[],R=0;R<j.length;R+=n){for(var x=j.slice(R,R+n),P=new Array(x.length),O=0;O<x.length;O++)P[O]=x.charCodeAt(O);var _=new Uint8Array(P);Q.push(_)}return new Blob(Q,{type:m})}}.apply(se,[]))&&(Te.exports=t)},6939:(Te,se,s)=>{"use strict";s.d(se,{Qt:()=>y,u3:()=>z});var e=s(6435),t=s(3075),l=s(9808);const g=function(r,d){return{"pull-left":r,"float-left":d}},m=function(r,d){return{"pull-right":r,"float-right":d}},n=function(r,d){return{disabled:r,currentPage:d}};function j(r,d){if(1&r){const u=e.EpF();e.TgZ(0,"li",11)(1,"a",12),e.NdJ("click",function(M){return e.CHM(u),e.oxw().selectPage(1,M)}),e.GkF(2,13),e.qZA()()}if(2&r){const u=e.oxw(),h=e.MAs(13);e.ekj("disabled",u.noPrevious()||u.disabled),e.xp6(2),e.Q6J("ngTemplateOutlet",u.customFirstTemplate||h)("ngTemplateOutletContext",e.WLB(4,n,u.noPrevious()||u.disabled,u.page))}}function Q(r,d){if(1&r){const u=e.EpF();e.TgZ(0,"li",14)(1,"a",12),e.NdJ("click",function(M){e.CHM(u);const J=e.oxw();return J.selectPage(J.page-1,M)}),e.GkF(2,13),e.qZA()()}if(2&r){const u=e.oxw(),h=e.MAs(11);e.ekj("disabled",u.noPrevious()||u.disabled),e.xp6(2),e.Q6J("ngTemplateOutlet",u.customPreviousTemplate||h)("ngTemplateOutletContext",e.WLB(4,n,u.noPrevious()||u.disabled,u.page))}}const R=function(r,d,u){return{disabled:r,$implicit:d,currentPage:u}};function x(r,d){if(1&r){const u=e.EpF();e.TgZ(0,"li",15)(1,"a",12),e.NdJ("click",function(M){const ie=e.CHM(u).$implicit;return e.oxw().selectPage(ie.number,M)}),e.GkF(2,13),e.qZA()()}if(2&r){const u=d.$implicit,h=e.oxw(),M=e.MAs(7);e.ekj("active",u.active)("disabled",h.disabled&&!u.active),e.xp6(2),e.Q6J("ngTemplateOutlet",h.customPageTemplate||M)("ngTemplateOutletContext",e.kEZ(6,R,h.disabled,u,h.page))}}function P(r,d){if(1&r){const u=e.EpF();e.TgZ(0,"li",16)(1,"a",12),e.NdJ("click",function(M){e.CHM(u);const J=e.oxw();return J.selectPage(J.page+1,M)}),e.GkF(2,13),e.qZA()()}if(2&r){const u=e.oxw(),h=e.MAs(9);e.ekj("disabled",u.noNext()||u.disabled),e.xp6(2),e.Q6J("ngTemplateOutlet",u.customNextTemplate||h)("ngTemplateOutletContext",e.WLB(4,n,u.noNext()||u.disabled,u.page))}}function O(r,d){if(1&r){const u=e.EpF();e.TgZ(0,"li",17)(1,"a",12),e.NdJ("click",function(M){e.CHM(u);const J=e.oxw();return J.selectPage(J.totalPages,M)}),e.GkF(2,13),e.qZA()()}if(2&r){const u=e.oxw(),h=e.MAs(15);e.ekj("disabled",u.noNext()||u.disabled),e.xp6(2),e.Q6J("ngTemplateOutlet",u.customLastTemplate||h)("ngTemplateOutletContext",e.WLB(4,n,u.noNext()||u.disabled,u.page))}}function _(r,d){1&r&&e._uU(0),2&r&&e.Oqu(d.$implicit.text)}function D(r,d){if(1&r&&e._uU(0),2&r){const u=e.oxw();e.Oqu(u.getText("next"))}}function C(r,d){if(1&r&&e._uU(0),2&r){const u=e.oxw();e.Oqu(u.getText("previous"))}}function E(r,d){if(1&r&&e._uU(0),2&r){const u=e.oxw();e.Oqu(u.getText("first"))}}function I(r,d){if(1&r&&e._uU(0),2&r){const u=e.oxw();e.Oqu(u.getText("last"))}}let L=(()=>{class r{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xab Previous",nextText:"Next \xbb",pageBtnClass:"",align:!0}}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=(0,e.Yz7)({factory:function(){return new r},token:r,providedIn:"root"}),r})();const N={provide:t.JU,useExisting:(0,e.Gpc)(()=>B),multi:!0};let B=(()=>{class r{constructor(u,h,M){this.elementRef=u,this.changeDetection=M,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xab Previous",this.nextText="Next \xbb",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new e.vpe,this.pageChanged=new e.vpe,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=u,this.config||this.configureOptions(Object.assign({},h.main,h.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(u){this._itemsPerPage=u,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(u){this._totalItems=u,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(u){this._totalPages=u,this.numPages.emit(u),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(u){const h=this._page;this._page=u>this.totalPages?this.totalPages:u||1,this.changeDetection.markForCheck(),h!==this._page&&void 0!==h&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(u){this.config=Object.assign({},u)}ngOnInit(){var u,h,M,J,ie,me;"undefined"!=typeof window&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),void 0===this.maxSize&&(this.maxSize=(null===(u=this.config)||void 0===u?void 0:u.maxSize)||0),void 0===this.rotate&&(this.rotate=!!(null===(h=this.config)||void 0===h?void 0:h.rotate)),void 0===this.boundaryLinks&&(this.boundaryLinks=!!(null===(M=this.config)||void 0===M?void 0:M.boundaryLinks)),void 0===this.directionLinks&&(this.directionLinks=!!(null===(J=this.config)||void 0===J?void 0:J.directionLinks)),void 0===this.pageBtnClass&&(this.pageBtnClass=(null===(ie=this.config)||void 0===ie?void 0:ie.pageBtnClass)||""),void 0===this.itemsPerPage&&(this.itemsPerPage=(null===(me=this.config)||void 0===me?void 0:me.itemsPerPage)||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(u){this.page=u,this.pages=this.getPages(this.page,this.totalPages)}getText(u){return this[`${u}Text`]||this.config[`${u}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(u){this.onChange=u}registerOnTouched(u){this.onTouched=u}selectPage(u,h){h&&h.preventDefault(),this.disabled||(h&&h.target&&h.target.blur(),this.writeValue(u),this.onChange(this.page))}makePage(u,h,M){return{text:h,number:u,active:M}}getPages(u,h){const M=[];let J=1,ie=h;const me=void 0!==this.maxSize&&this.maxSize<h;me&&this.maxSize&&(this.rotate?(J=Math.max(u-Math.floor(this.maxSize/2),1),ie=J+this.maxSize-1,ie>h&&(ie=h,J=ie-this.maxSize+1)):(J=(Math.ceil(u/this.maxSize)-1)*this.maxSize+1,ie=Math.min(J+this.maxSize-1,h)));for(let re=J;re<=ie;re++){const _e=this.makePage(re,re.toString(),re===u);M.push(_e)}if(me&&!this.rotate){if(J>1){const re=this.makePage(J-1,"...",!1);M.unshift(re)}if(ie<h){const re=this.makePage(ie+1,"...",!1);M.push(re)}}return M}calculateTotalPages(){const u=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(u||0,1)}}return r.\u0275fac=function(u){return new(u||r)(e.Y36(e.SBq),e.Y36(L),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["pager"]],inputs:{align:"align",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems",maxSize:"maxSize"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[e._Bn([N])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(u,h){1&u&&(e.TgZ(0,"ul",0)(1,"li",1)(2,"a",2),e.NdJ("click",function(J){return h.selectPage(h.page-1,J)}),e._uU(3),e.qZA()(),e.TgZ(4,"li",1)(5,"a",2),e.NdJ("click",function(J){return h.selectPage(h.page+1,J)}),e._uU(6),e.qZA()()()),2&u&&(e.xp6(1),e.Tol(h.pageBtnClass),e.ekj("disabled",h.noPrevious())("previous",h.align),e.Q6J("ngClass",e.WLB(18,g,h.align,h.align)),e.xp6(2),e.Oqu(h.getText("previous")),e.xp6(1),e.Tol(h.pageBtnClass),e.ekj("disabled",h.noNext())("next",h.align),e.Q6J("ngClass",e.WLB(21,m,h.align,h.align)),e.xp6(2),e.Oqu(h.getText("next")))},directives:[l.mk],encapsulation:2}),r})();const H={provide:t.JU,useExisting:(0,e.Gpc)(()=>y),multi:!0};let y=(()=>{class r{constructor(u,h,M){this.elementRef=u,this.changeDetection=M,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new e.vpe,this.pageChanged=new e.vpe,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=u,this.config||this.configureOptions(h.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(u){this._itemsPerPage=u,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(u){this._totalItems=u,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(u){this._totalPages=u,this.numPages.emit(u),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(u){const h=this._page;this._page=u>this.totalPages?this.totalPages:u||1,this.changeDetection.markForCheck(),h!==this._page&&void 0!==h&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(u){this.config=Object.assign({},u)}ngOnInit(){var u,h,M,J,ie,me;"undefined"!=typeof window&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),void 0===this.maxSize&&(this.maxSize=(null===(u=this.config)||void 0===u?void 0:u.maxSize)||0),void 0===this.rotate&&(this.rotate=!!(null===(h=this.config)||void 0===h?void 0:h.rotate)),void 0===this.boundaryLinks&&(this.boundaryLinks=!!(null===(M=this.config)||void 0===M?void 0:M.boundaryLinks)),void 0===this.directionLinks&&(this.directionLinks=!!(null===(J=this.config)||void 0===J?void 0:J.directionLinks)),void 0===this.pageBtnClass&&(this.pageBtnClass=(null===(ie=this.config)||void 0===ie?void 0:ie.pageBtnClass)||""),void 0===this.itemsPerPage&&(this.itemsPerPage=(null===(me=this.config)||void 0===me?void 0:me.itemsPerPage)||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(u){this.page=u,this.pages=this.getPages(this.page,this.totalPages)}getText(u){return this[`${u}Text`]||this.config[`${u}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(u){this.onChange=u}registerOnTouched(u){this.onTouched=u}selectPage(u,h){h&&h.preventDefault(),this.disabled||(h&&h.target&&h.target.blur(),this.writeValue(u),this.onChange(this.page))}makePage(u,h,M){return{text:h,number:u,active:M}}getPages(u,h){const M=[];let J=1,ie=h;const me=void 0!==this.maxSize&&this.maxSize<h;me&&this.maxSize&&(this.rotate?(J=Math.max(u-Math.floor(this.maxSize/2),1),ie=J+this.maxSize-1,ie>h&&(ie=h,J=ie-this.maxSize+1)):(J=(Math.ceil(u/this.maxSize)-1)*this.maxSize+1,ie=Math.min(J+this.maxSize-1,h)));for(let re=J;re<=ie;re++){const _e=this.makePage(re,re.toString(),re===u);M.push(_e)}if(me&&!this.rotate){if(J>1){const re=this.makePage(J-1,"...",!1);M.unshift(re)}if(ie<h){const re=this.makePage(ie+1,"...",!1);M.push(re)}}return M}calculateTotalPages(){const u=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(u||0,1)}}return r.\u0275fac=function(u){return new(u||r)(e.Y36(e.SBq),e.Y36(L),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["pagination"]],inputs:{align:"align",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems",maxSize:"maxSize",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[e._Bn([H])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(u,h){1&u&&(e.TgZ(0,"ul",0),e.YNc(1,j,3,7,"li",1),e.YNc(2,Q,3,7,"li",2),e.YNc(3,x,3,10,"li",3),e.YNc(4,P,3,7,"li",4),e.YNc(5,O,3,7,"li",5),e.qZA(),e.YNc(6,_,1,1,"ng-template",null,6,e.W1O),e.YNc(8,D,1,1,"ng-template",null,7,e.W1O),e.YNc(10,C,1,1,"ng-template",null,8,e.W1O),e.YNc(12,E,1,1,"ng-template",null,9,e.W1O),e.YNc(14,I,1,1,"ng-template",null,10,e.W1O)),2&u&&(e.Q6J("ngClass",h.classMap),e.xp6(1),e.Q6J("ngIf",h.boundaryLinks),e.xp6(1),e.Q6J("ngIf",h.directionLinks),e.xp6(1),e.Q6J("ngForOf",h.pages),e.xp6(1),e.Q6J("ngIf",h.directionLinks),e.xp6(1),e.Q6J("ngIf",h.boundaryLinks))},directives:[l.mk,l.O5,l.tP,l.sg],encapsulation:2}),r})(),z=(()=>{class r{static forRoot(){return{ngModule:r,providers:[]}}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[l.ez]]}),r})()},1217:(Te,se,s)=>{"use strict";s.d(se,{HC:()=>O,O1:()=>P});var e=s(6435),t=s(4559),l=s(9808);const g=["*"];function m(_,D){1&_&&e.GkF(0)}function n(_,D){if(1&_&&(e.TgZ(0,"bar",3),e.Hsn(1),e.qZA()),2&_){const C=e.oxw();e.Q6J("type",C.type)("value",C._value)("max",C.max)("animate",C.animate)("striped",C.striped)}}function j(_,D){if(1&_&&(e.TgZ(0,"bar",3),e._uU(1),e.qZA()),2&_){const C=D.$implicit,E=e.oxw(2);e.Q6J("type",C.type)("value",C.value)("max",C.max||E.max)("animate",E.animate)("striped",E.striped),e.xp6(1),e.Oqu(C.label)}}function Q(_,D){if(1&_&&e.YNc(0,j,2,6,"bar",4),2&_){const C=e.oxw();e.Q6J("ngForOf",C._values)}}let R=(()=>{class _{constructor(C,E){this.el=C,this.renderer=E,this.max=100,this.value=0,this.animate=!1,this.striped=!1,this.type="info",this.percent=100}get isBs3(){return(0,t.XA)()}ngOnChanges(C){var E;(C.value||C.max)&&(this.percent=Number(C.value.currentValue||0)/Number((null===(E=C.max)||void 0===E?void 0:E.currentValue)||this.max||100)*100),C.type&&this.applyTypeClasses()}applyTypeClasses(){if(this._prevType){const E=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,E),this._prevType=void 0}if(this.type){const E=`bg-${this.type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this.type}`),this.renderer.addClass(this.el.nativeElement,E),this._prevType=this.type}}}return _.\u0275fac=function(C){return new(C||_)(e.Y36(e.SBq),e.Y36(e.Qsj))},_.\u0275cmp=e.Xpm({type:_,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(C,E){2&C&&(e.uIk("aria-valuenow",E.value)("aria-valuetext",E.percent?E.percent.toFixed(0)+"%":"")("aria-valuemax",E.max),e.Udp("height","100","%")("width",E.percent,"%"),e.ekj("progress-bar",!0)("progress-bar-animated",!E.isBs3&&E.animate)("progress-bar-striped",E.striped)("active",E.isBs3&&E.animate))},inputs:{max:"max",value:"value",animate:"animate",striped:"striped",type:"type"},features:[e.TTD],ngContentSelectors:g,decls:1,vars:0,template:function(C,E){1&C&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),_})(),x=(()=>{class _{constructor(){this.animate=!1,this.max=100}}return _.\u0275fac=function(C){return new(C||_)},_.\u0275prov=(0,e.Yz7)({factory:function(){return new _},token:_,providedIn:"root"}),_})(),P=(()=>{class _{constructor(C){this.max=100,this.animate=!1,this.striped=!1,this.isStacked=!1,this._value=0,Object.assign(this,C)}set value(C){this.isStacked=Array.isArray(C),"number"==typeof C?(this._value=C,this._values=void 0):(this._value=void 0,this._values=C)}}return _.\u0275fac=function(C){return new(C||_)(e.Y36(x))},_.\u0275cmp=e.Xpm({type:_,selectors:[["progressbar"]],hostVars:3,hostBindings:function(C,E){2&C&&(e.uIk("max",E.max),e.ekj("progress",!0))},inputs:{max:"max",animate:"animate",striped:"striped",value:"value",type:"type"},ngContentSelectors:g,decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["NotStacked",""],["Stacked",""],[3,"type","value","max","animate","striped"],[3,"type","value","max","animate","striped",4,"ngFor","ngForOf"]],template:function(C,E){if(1&C&&(e.F$t(),e.YNc(0,m,1,0,"ng-container",0),e.YNc(1,n,2,5,"ng-template",null,1,e.W1O),e.YNc(3,Q,1,1,"ng-template",null,2,e.W1O)),2&C){const I=e.MAs(2),L=e.MAs(4);e.Q6J("ngIf",!E.isStacked)("ngIfThen",I)("ngIfElse",L)}},directives:[l.O5,R,l.sg],styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"],changeDetection:0}),_})(),O=(()=>{class _{static forRoot(){return{ngModule:_,providers:[]}}}return _.\u0275fac=function(C){return new(C||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[[l.ez]]}),_})()},3140:(Te,se,s)=>{"use strict";s.d(se,{J5:()=>le,g$:()=>fe,ji:()=>Ee,zw:()=>te});var e=s(655),t=s(6435),l=s(9808),g=s(2313);const m=["previewImage"];function n(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-arrows",15),t.NdJ("onPrevClick",function(){return t.CHM(a),t.oxw().showPrev()})("onNextClick",function(){return t.CHM(a),t.oxw().showNext()}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("prevDisabled",!a.canShowPrev())("nextDisabled",!a.canShowNext())("arrowPrevIcon",a.arrowPrevIcon)("arrowNextIcon",a.arrowNextIcon)}}function j(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",16),t.NdJ("onClick",function(ee){const Ie=t.CHM(a).$implicit,V=t.oxw();return Ie.onClick(ee,V.index)}),t.qZA()}if(2&w){const a=F.$implicit;t.Q6J("icon",a.icon)("disabled",a.disabled)("titleText",a.titleText)}}function Q(w,F){if(1&w&&(t.TgZ(0,"a",17),t._UZ(1,"i"),t.qZA()),2&w){const a=t.oxw();t.Q6J("href",a.src,t.LSH),t.xp6(1),t.Gre("ngx-gallery-icon-content ",a.downloadIcon,"")}}function R(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",18),t.NdJ("onClick",function(){return t.CHM(a),t.oxw().zoomOut()}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("icon",a.zoomOutIcon)("disabled",!a.canZoomOut())}}function x(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",18),t.NdJ("onClick",function(){return t.CHM(a),t.oxw().zoomIn()}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("icon",a.zoomInIcon)("disabled",!a.canZoomIn())}}function P(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",7),t.NdJ("onClick",function(){return t.CHM(a),t.oxw().rotateLeft()}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("icon",a.rotateLeftIcon)}}function O(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",7),t.NdJ("onClick",function(){return t.CHM(a),t.oxw().rotateRight()}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("icon",a.rotateRightIcon)}}function _(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",7),t.NdJ("onClick",function(){return t.CHM(a),t.oxw().manageFullscreen()}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("icon","ngx-gallery-fullscreen "+a.fullscreenIcon)}}function D(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"img",19,20),t.NdJ("click",function(ee){return ee.stopPropagation()})("mouseenter",function(){return t.CHM(a),t.oxw().imageMouseEnter()})("mouseleave",function(){return t.CHM(a),t.oxw().imageMouseLeave()})("mousedown",function(ee){return t.CHM(a),t.oxw().mouseDownHandler(ee)})("touchstart",function(ee){return t.CHM(a),t.oxw().mouseDownHandler(ee)}),t.qZA()}if(2&w){const a=t.oxw();t.Udp("transform",a.getTransform())("left",a.positionLeft+"px")("top",a.positionTop+"px"),t.ekj("ngx-gallery-active",!a.loading)("animation",a.animation)("ngx-gallery-grab",a.canDragOnZoom()),t.Q6J("src",a.src,t.LSH)}}function C(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-bullets",21),t.NdJ("onChange",function(ee){return t.CHM(a),t.oxw().showAtIndex(ee)}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("count",a.images.length)("active",a.index)}}function E(w,F){if(1&w&&(t.TgZ(0,"div",22),t.NdJ("click",function(v){return v.stopPropagation()}),t.qZA()),2&w){const a=t.oxw();t.Q6J("innerHTML",a.description,t.oJD)}}function I(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",7),t.NdJ("onClick",function(ee){const Ie=t.CHM(a).$implicit,V=t.oxw().$implicit;return Ie.onClick(ee,V.index)}),t.qZA()}if(2&w){const a=F.$implicit;t.Q6J("icon",a.icon)("disabled",a.disabled)("titleText",a.titleText)}}function L(w,F){if(1&w&&(t.TgZ(0,"div",8),t.NdJ("click",function(v){return v.stopPropagation()}),t.qZA()),2&w){const a=t.oxw().$implicit,v=t.oxw();t.Q6J("innerHTML",v.descriptions[a.index],t.oJD)}}const N=function(w,F,a,v){return{"ngx-gallery-active":w,"ngx-gallery-inactive-left":F,"ngx-gallery-inactive-right":a,"ngx-gallery-clickable":v}};function B(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(ee){const Ie=t.CHM(a).$implicit;return t.oxw().handleClick(ee,Ie.index)}),t.TgZ(1,"div",4),t.YNc(2,I,1,3,"ngx-gallery-action",5),t.qZA(),t.YNc(3,L,1,1,"div",6),t.qZA()}if(2&w){const a=F.$implicit,v=t.oxw();t.Udp("background-image",v.getSafeUrl(a.src)),t.Q6J("ngClass",t.l5B(5,N,v.selectedIndex==a.index,v.selectedIndex>a.index,v.selectedIndex<a.index,v.clickable)),t.xp6(2),t.Q6J("ngForOf",v.actions),t.xp6(1),t.Q6J("ngIf",v.showDescription&&v.descriptions[a.index])}}function H(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-bullets",9),t.NdJ("onChange",function(ee){return t.CHM(a),t.oxw().show(ee)}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("count",a.images.length)("active",a.selectedIndex)}}function y(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-arrows",10),t.NdJ("onPrevClick",function(){return t.CHM(a),t.oxw().showPrev()})("onNextClick",function(){return t.CHM(a),t.oxw().showNext()}),t.qZA()}if(2&w){const a=t.oxw();t.Gre("ngx-gallery-image-size-",a.size,""),t.Q6J("prevDisabled",!a.canShowPrev())("nextDisabled",!a.canShowNext())("arrowPrevIcon",a.arrowPrevIcon)("arrowNextIcon",a.arrowNextIcon)}}function z(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-action",7),t.NdJ("onClick",function(ee){const Ie=t.CHM(a).$implicit,V=t.oxw().index;return Ie.onClick(ee,V)}),t.qZA()}if(2&w){const a=F.$implicit;t.Q6J("icon",a.icon)("disabled",a.disabled)("titleText",a.titleText)}}function r(w,F){if(1&w&&(t.TgZ(0,"div",8)(1,"span",9),t._uU(2),t.qZA()()),2&w){const a=t.oxw(2);t.xp6(2),t.hij("+",a.remainingCountValue,"")}}const d=function(w,F){return{"ngx-gallery-active":w,"ngx-gallery-clickable":F}};function u(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"a",3),t.NdJ("click",function(ee){const Ie=t.CHM(a).index;return t.oxw().handleClick(ee,Ie)}),t.TgZ(1,"div",4),t.YNc(2,z,1,3,"ngx-gallery-action",5),t.qZA(),t.YNc(3,r,3,1,"div",6),t.qZA()}if(2&w){const a=F.$implicit,v=F.index,ee=t.oxw();t.Udp("background-image",ee.getSafeUrl(a))("width",ee.getThumbnailWidth())("height",ee.getThumbnailHeight())("left",ee.getThumbnailLeft(v))("top",ee.getThumbnailTop(v)),t.Q6J("href",ee.hasLink(v)?ee.links[v]:"#",t.LSH)("target",ee.linkTarget)("ngClass",t.WLB(16,d,v==ee.selectedIndex,ee.clickable)),t.uIk("aria-label",ee.labels[v]),t.xp6(2),t.Q6J("ngForOf",ee.actions),t.xp6(1),t.Q6J("ngIf",ee.remainingCount&&ee.remainingCountValue&&v==ee.rows*ee.columns-1)}}function h(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-arrows",10),t.NdJ("onPrevClick",function(){return t.CHM(a),t.oxw().moveLeft()})("onNextClick",function(){return t.CHM(a),t.oxw().moveRight()}),t.qZA()}if(2&w){const a=t.oxw();t.Q6J("prevDisabled",!a.canMoveLeft())("nextDisabled",!a.canMoveRight())("arrowPrevIcon",a.arrowPrevIcon)("arrowNextIcon",a.arrowNextIcon)}}function M(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-image",3),t.NdJ("onClick",function(ee){return t.CHM(a),t.oxw().openPreview(ee)})("onActiveChange",function(ee){return t.CHM(a),t.oxw().selectFromImage(ee)}),t.qZA()}if(2&w){const a=t.oxw();t.Udp("height",a.getImageHeight()),t.Q6J("images",a.mediumImages)("clickable",null==a.currentOptions?null:a.currentOptions.preview)("selectedIndex",a.selectedIndex)("arrows",null==a.currentOptions?null:a.currentOptions.imageArrows)("arrowsAutoHide",null==a.currentOptions?null:a.currentOptions.imageArrowsAutoHide)("arrowPrevIcon",null==a.currentOptions?null:a.currentOptions.arrowPrevIcon)("arrowNextIcon",null==a.currentOptions?null:a.currentOptions.arrowNextIcon)("swipe",null==a.currentOptions?null:a.currentOptions.imageSwipe)("animation",null==a.currentOptions?null:a.currentOptions.imageAnimation)("size",null==a.currentOptions?null:a.currentOptions.imageSize)("autoPlay",null==a.currentOptions?null:a.currentOptions.imageAutoPlay)("autoPlayInterval",null==a.currentOptions?null:a.currentOptions.imageAutoPlayInterval)("autoPlayPauseOnHover",null==a.currentOptions?null:a.currentOptions.imageAutoPlayPauseOnHover)("infinityMove",null==a.currentOptions?null:a.currentOptions.imageInfinityMove)("lazyLoading",null==a.currentOptions?null:a.currentOptions.lazyLoading)("actions",null==a.currentOptions?null:a.currentOptions.imageActions)("descriptions",a.descriptions)("showDescription",null==a.currentOptions?null:a.currentOptions.imageDescription)("bullets",null==a.currentOptions?null:a.currentOptions.imageBullets)}}const J=function(){return[]};function ie(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"ngx-gallery-thumbnails",4),t.NdJ("onActiveChange",function(ee){return t.CHM(a),t.oxw().selectFromThumbnails(ee)}),t.qZA()}if(2&w){const a=t.oxw();t.Udp("margin-top",a.getThumbnailsMarginTop())("margin-bottom",a.getThumbnailsMarginBottom())("height",a.getThumbnailsHeight()),t.Q6J("images",a.smallImages)("links",null!=a.currentOptions&&a.currentOptions.thumbnailsAsLinks?a.links:t.DdM(26,J))("labels",a.labels)("linkTarget",null==a.currentOptions?null:a.currentOptions.linkTarget)("selectedIndex",a.selectedIndex)("columns",null==a.currentOptions?null:a.currentOptions.thumbnailsColumns)("rows",null==a.currentOptions?null:a.currentOptions.thumbnailsRows)("margin",null==a.currentOptions?null:a.currentOptions.thumbnailMargin)("arrows",null==a.currentOptions?null:a.currentOptions.thumbnailsArrows)("arrowsAutoHide",null==a.currentOptions?null:a.currentOptions.thumbnailsArrowsAutoHide)("arrowPrevIcon",null==a.currentOptions?null:a.currentOptions.arrowPrevIcon)("arrowNextIcon",null==a.currentOptions?null:a.currentOptions.arrowNextIcon)("clickable",(null==a.currentOptions?null:a.currentOptions.image)||(null==a.currentOptions?null:a.currentOptions.preview))("swipe",null==a.currentOptions?null:a.currentOptions.thumbnailsSwipe)("size",null==a.currentOptions?null:a.currentOptions.thumbnailSize)("moveSize",null==a.currentOptions?null:a.currentOptions.thumbnailsMoveSize)("order",null==a.currentOptions?null:a.currentOptions.thumbnailsOrder)("remainingCount",null==a.currentOptions?null:a.currentOptions.thumbnailsRemainingCount)("lazyLoading",null==a.currentOptions?null:a.currentOptions.lazyLoading)("actions",null==a.currentOptions?null:a.currentOptions.thumbnailActions)}}const me=function(w){return{"ngx-gallery-active":w}};function re(w,F){if(1&w){const a=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(ee){const Ie=t.CHM(a).index;return t.oxw().handleChange(ee,Ie)}),t.qZA()}if(2&w){const a=F.index,v=t.oxw();t.Q6J("ngClass",t.VKq(1,me,a==v.active))}}let _e=(()=>{let w=class{constructor(a){this.renderer=a,this.swipeHandlers=new Map}manageSwipe(a,v,ee,K,Ie){const V=this.getSwipeHandlers(ee);try{a&&!V?this.swipeHandlers.set(ee,[this.renderer.listen(v.nativeElement,"swipeleft",()=>K()),this.renderer.listen(v.nativeElement,"swiperight",()=>Ie())]):!a&&V&&(V.map(ue=>ue()),this.removeSwipeHandlers(ee))}catch(ue){}}validateUrl(a){return a.replace?a.replace(new RegExp(" ","g"),"%20").replace(new RegExp("'","g"),"%27"):a}getBackgroundUrl(a){return"url('"+this.validateUrl(a)+"')"}getSwipeHandlers(a){return this.swipeHandlers.get(a)}removeSwipeHandlers(a){this.swipeHandlers.delete(a)}};return w.\u0275fac=function(a){return new(a||w)(t.LFG(t.Qsj))},w.\u0275prov=t.Yz7({token:w,factory:function(F){return w.\u0275fac(F)}}),w})(),te=(()=>{class w{}return w.Fade="fade",w.Slide="slide",w.Rotate="rotate",w.Zoom="zoom",w})(),le=(()=>{class w{}return w.Cover="cover",w.Contain="contain",w})(),q=(()=>{class w{}return w.ThumbnailsTop="thumbnails-top",w.ThumbnailsBottom="thumbnails-bottom",w})(),ve=(()=>{class w{}return w.Column=1,w.Row=2,w.Page=3,w})();class ce{constructor(F){this.icon=F.icon,this.disabled=!!F.disabled&&F.disabled,this.titleText=F.titleText?F.titleText:"",this.onClick=F.onClick}}class ye{constructor(F){const a=void 0!==F.breakpoint;function v(ee,K){return F&&(void 0!==ee||a)?ee:K}this.breakpoint=v(F.breakpoint,void 0),this.width=v(F.width,"500px"),this.height=v(F.height,"400px"),this.fullWidth=v(F.fullWidth,!1),this.layout=v(F.layout,q.ThumbnailsBottom),this.startIndex=v(F.startIndex,0),this.linkTarget=v(F.linkTarget,"_blank"),this.lazyLoading=v(F.lazyLoading,!0),this.image=v(F.image,!0),this.imagePercent=v(F.imagePercent,75),this.imageArrows=v(F.imageArrows,!0),this.imageArrowsAutoHide=v(F.imageArrowsAutoHide,!1),this.imageSwipe=v(F.imageSwipe,!1),this.imageAnimation=v(F.imageAnimation,te.Fade),this.imageSize=v(F.imageSize,le.Cover),this.imageAutoPlay=v(F.imageAutoPlay,!1),this.imageAutoPlayInterval=v(F.imageAutoPlayInterval,2e3),this.imageAutoPlayPauseOnHover=v(F.imageAutoPlayPauseOnHover,!1),this.imageInfinityMove=v(F.imageInfinityMove,!1),F&&F.imageActions&&F.imageActions.length&&(F.imageActions=F.imageActions.map(ee=>new ce(ee))),this.imageActions=v(F.imageActions,[]),this.imageDescription=v(F.imageDescription,!1),this.imageBullets=v(F.imageBullets,!1),this.thumbnails=v(F.thumbnails,!0),this.thumbnailsColumns=v(F.thumbnailsColumns,4),this.thumbnailsRows=v(F.thumbnailsRows,1),this.thumbnailsPercent=v(F.thumbnailsPercent,25),this.thumbnailsMargin=v(F.thumbnailsMargin,10),this.thumbnailsArrows=v(F.thumbnailsArrows,!0),this.thumbnailsArrowsAutoHide=v(F.thumbnailsArrowsAutoHide,!1),this.thumbnailsSwipe=v(F.thumbnailsSwipe,!1),this.thumbnailsMoveSize=v(F.thumbnailsMoveSize,1),this.thumbnailsOrder=v(F.thumbnailsOrder,ve.Column),this.thumbnailsRemainingCount=v(F.thumbnailsRemainingCount,!1),this.thumbnailsAsLinks=v(F.thumbnailsAsLinks,!1),this.thumbnailsAutoHide=v(F.thumbnailsAutoHide,!1),this.thumbnailMargin=v(F.thumbnailMargin,10),this.thumbnailSize=v(F.thumbnailSize,le.Cover),F&&F.thumbnailActions&&F.thumbnailActions.length&&(F.thumbnailActions=F.thumbnailActions.map(ee=>new ce(ee))),this.thumbnailActions=v(F.thumbnailActions,[]),this.preview=v(F.preview,!0),this.previewDescription=v(F.previewDescription,!0),this.previewArrows=v(F.previewArrows,!0),this.previewArrowsAutoHide=v(F.previewArrowsAutoHide,!1),this.previewSwipe=v(F.previewSwipe,!1),this.previewFullscreen=v(F.previewFullscreen,!1),this.previewForceFullscreen=v(F.previewForceFullscreen,!1),this.previewCloseOnClick=v(F.previewCloseOnClick,!1),this.previewCloseOnEsc=v(F.previewCloseOnEsc,!1),this.previewKeyboardNavigation=v(F.previewKeyboardNavigation,!1),this.previewAnimation=v(F.previewAnimation,!0),this.previewAutoPlay=v(F.previewAutoPlay,!1),this.previewAutoPlayInterval=v(F.previewAutoPlayInterval,2e3),this.previewAutoPlayPauseOnHover=v(F.previewAutoPlayPauseOnHover,!1),this.previewInfinityMove=v(F.previewInfinityMove,!1),this.previewZoom=v(F.previewZoom,!1),this.previewZoomStep=v(F.previewZoomStep,.1),this.previewZoomMax=v(F.previewZoomMax,2),this.previewZoomMin=v(F.previewZoomMin,.5),this.previewRotate=v(F.previewRotate,!1),this.previewDownload=v(F.previewDownload,!1),this.previewCustom=v(F.previewCustom,void 0),this.previewBullets=v(F.previewBullets,!1),this.arrowPrevIcon=v(F.arrowPrevIcon,"fa fa-arrow-circle-left"),this.arrowNextIcon=v(F.arrowNextIcon,"fa fa-arrow-circle-right"),this.closeIcon=v(F.closeIcon,"fa fa-times-circle"),this.fullscreenIcon=v(F.fullscreenIcon,"fa fa-arrows-alt"),this.spinnerIcon=v(F.spinnerIcon,"fa fa-spinner fa-pulse fa-3x fa-fw"),this.zoomInIcon=v(F.zoomInIcon,"fa fa-search-plus"),this.zoomOutIcon=v(F.zoomOutIcon,"fa fa-search-minus"),this.rotateLeftIcon=v(F.rotateLeftIcon,"fa fa-undo"),this.rotateRightIcon=v(F.rotateRightIcon,"fa fa-repeat"),this.downloadIcon=v(F.downloadIcon,"fa fa-arrow-circle-down"),F&&F.actions&&F.actions.length&&(F.actions=F.actions.map(ee=>new ce(ee))),this.actions=v(F.actions,[])}}class Se{constructor(F){this.src=F.src,this.index=F.index}}let Ne=(()=>{let w=class{constructor(a,v,ee,K,Ie){this.sanitization=a,this.elementRef=v,this.helperService=ee,this.renderer=K,this.changeDetectorRef=Ie,this.showSpinner=!1,this.positionLeft=0,this.positionTop=0,this.zoomValue=1,this.loading=!1,this.rotateValue=0,this.index=0,this.onOpen=new t.vpe,this.onClose=new t.vpe,this.onActiveChange=new t.vpe,this.isOpen=!1,this.initialX=0,this.initialY=0,this.initialLeft=0,this.initialTop=0,this.isMove=!1}ngOnInit(){this.arrows&&this.arrowsAutoHide&&(this.arrows=!1)}ngOnChanges(a){a.swipe&&this.helperService.manageSwipe(this.swipe,this.elementRef,"preview",()=>this.showNext(),()=>this.showPrev())}ngOnDestroy(){this.keyDownListener&&this.keyDownListener()}onMouseEnter(){this.arrowsAutoHide&&!this.arrows&&(this.arrows=!0)}onMouseLeave(){this.arrowsAutoHide&&this.arrows&&(this.arrows=!1)}onKeyDown(a){this.isOpen&&(this.keyboardNavigation&&(this.isKeyboardPrev(a)?this.showPrev():this.isKeyboardNext(a)&&this.showNext()),this.closeOnEsc&&this.isKeyboardEsc(a)&&this.close())}open(a){this.onOpen.emit(),this.index=a,this.isOpen=!0,this.show(!0),this.forceFullscreen&&this.manageFullscreen(),this.keyDownListener=this.renderer.listen("window","keydown",v=>this.onKeyDown(v))}close(){this.isOpen=!1,this.closeFullscreen(),this.onClose.emit(),this.stopAutoPlay(),this.keyDownListener&&this.keyDownListener()}imageMouseEnter(){this.autoPlay&&this.autoPlayPauseOnHover&&this.stopAutoPlay()}imageMouseLeave(){this.autoPlay&&this.autoPlayPauseOnHover&&this.startAutoPlay()}startAutoPlay(){this.autoPlay&&(this.stopAutoPlay(),this.timer=setTimeout(()=>{this.showNext()||(this.index=-1,this.showNext())},this.autoPlayInterval))}stopAutoPlay(){this.timer&&clearTimeout(this.timer)}showAtIndex(a){this.index=a,this.show()}showNext(){return!!this.canShowNext()&&(this.index++,this.index===this.images.length&&(this.index=0),this.show(),!0)}showPrev(){this.canShowPrev()&&(this.index--,this.index<0&&(this.index=this.images.length-1),this.show())}canShowNext(){return!this.loading&&!!this.images&&!!(this.infinityMove||this.index<this.images.length-1)}canShowPrev(){return!this.loading&&!!this.images&&!!(this.infinityMove||this.index>0)}manageFullscreen(){if(this.fullscreen||this.forceFullscreen){const a=document;a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement?this.closeFullscreen():this.openFullscreen()}}getSafeUrl(a){return"data:image"===a.substr(0,10)?a:this.sanitization.bypassSecurityTrustUrl(a)}zoomIn(){this.canZoomIn()&&(this.zoomValue+=this.zoomStep,this.zoomValue>this.zoomMax&&(this.zoomValue=this.zoomMax))}zoomOut(){this.canZoomOut()&&(this.zoomValue-=this.zoomStep,this.zoomValue<this.zoomMin&&(this.zoomValue=this.zoomMin),this.zoomValue<=1&&this.resetPosition())}rotateLeft(){this.rotateValue-=90}rotateRight(){this.rotateValue+=90}getTransform(){return this.sanitization.bypassSecurityTrustStyle("scale("+this.zoomValue+") rotate("+this.rotateValue+"deg)")}canZoomIn(){return this.zoomValue<this.zoomMax}canZoomOut(){return this.zoomValue>this.zoomMin}canDragOnZoom(){return this.zoom&&this.zoomValue>1}mouseDownHandler(a){this.canDragOnZoom()&&(this.initialX=this.getClientX(a),this.initialY=this.getClientY(a),this.initialLeft=this.positionLeft,this.initialTop=this.positionTop,this.isMove=!0,a.preventDefault())}mouseUpHandler(a){this.isMove=!1}mouseMoveHandler(a){this.isMove&&(this.positionLeft=this.initialLeft+(this.getClientX(a)-this.initialX),this.positionTop=this.initialTop+(this.getClientY(a)-this.initialY))}getClientX(a){return a.touches&&a.touches.length?a.touches[0].clientX:a.clientX}getClientY(a){return a.touches&&a.touches.length?a.touches[0].clientY:a.clientY}resetPosition(){this.zoom&&(this.positionLeft=0,this.positionTop=0)}isKeyboardNext(a){return 39===a.keyCode}isKeyboardPrev(a){return 37===a.keyCode}isKeyboardEsc(a){return 27===a.keyCode}openFullscreen(){const a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}closeFullscreen(){if(this.isFullscreen()){const a=document;a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitExitFullscreen&&a.webkitExitFullscreen()}}isFullscreen(){const a=document;return a.fullscreenElement||a.webkitFullscreenElement||a.mozFullScreenElement||a.msFullscreenElement}show(a=!1){this.loading=!0,this.stopAutoPlay(),this.onActiveChange.emit(this.index),a||!this.animation?this._show():setTimeout(()=>this._show(),600)}_show(){this.zoomValue=1,this.rotateValue=0,this.resetPosition(),this.src=this.getSafeUrl(this.images[this.index]),this.srcIndex=this.index,this.description=this.descriptions[this.index],this.changeDetectorRef.markForCheck(),setTimeout(()=>{this.isLoaded(this.previewImage.nativeElement)?(this.loading=!1,this.startAutoPlay(),this.changeDetectorRef.markForCheck()):(setTimeout(()=>{this.loading&&(this.showSpinner=!0,this.changeDetectorRef.markForCheck())}),this.previewImage.nativeElement.onload=()=>{this.loading=!1,this.showSpinner=!1,this.previewImage.nativeElement.onload=null,this.startAutoPlay(),this.changeDetectorRef.markForCheck()})})}isLoaded(a){return!(!a.complete||void 0!==a.naturalWidth&&0===a.naturalWidth)}};return w.\u0275fac=function(a){return new(a||w)(t.Y36(g.H7),t.Y36(t.SBq),t.Y36(_e),t.Y36(t.Qsj),t.Y36(t.sBO))},w.\u0275cmp=t.Xpm({type:w,selectors:[["ngx-gallery-preview"]],viewQuery:function(a,v){if(1&a&&t.Gf(m,5),2&a){let ee;t.iGM(ee=t.CRH())&&(v.previewImage=ee.first)}},hostBindings:function(a,v){1&a&&t.NdJ("mouseenter",function(){return v.onMouseEnter()})("mouseleave",function(){return v.onMouseLeave()})},inputs:{arrows:"arrows",images:"images",descriptions:"descriptions",showDescription:"showDescription",arrowsAutoHide:"arrowsAutoHide",swipe:"swipe",fullscreen:"fullscreen",forceFullscreen:"forceFullscreen",closeOnClick:"closeOnClick",closeOnEsc:"closeOnEsc",keyboardNavigation:"keyboardNavigation",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon",closeIcon:"closeIcon",fullscreenIcon:"fullscreenIcon",spinnerIcon:"spinnerIcon",autoPlay:"autoPlay",autoPlayInterval:"autoPlayInterval",autoPlayPauseOnHover:"autoPlayPauseOnHover",infinityMove:"infinityMove",zoom:"zoom",zoomStep:"zoomStep",zoomMax:"zoomMax",zoomMin:"zoomMin",zoomInIcon:"zoomInIcon",zoomOutIcon:"zoomOutIcon",animation:"animation",actions:"actions",rotate:"rotate",rotateLeftIcon:"rotateLeftIcon",rotateRightIcon:"rotateRightIcon",download:"download",downloadIcon:"downloadIcon",bullets:"bullets"},outputs:{onOpen:"onOpen",onClose:"onClose",onActiveChange:"onActiveChange"},features:[t.TTD],decls:18,vars:17,consts:[[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","onPrevClick","onNextClick",4,"ngIf"],[1,"ngx-gallery-preview-top"],[1,"ngx-gallery-preview-icons"],[3,"icon","disabled","titleText","onClick",4,"ngFor","ngForOf"],["class","ngx-gallery-icon","aria-hidden","true","download","",3,"href",4,"ngIf"],[3,"icon","disabled","onClick",4,"ngIf"],[3,"icon","onClick",4,"ngIf"],[3,"icon","onClick"],[1,"ngx-spinner-wrapper","ngx-gallery-center"],["aria-hidden","true"],[1,"ngx-gallery-preview-wrapper",3,"click","mouseup","mousemove","touchend","touchmove"],[1,"ngx-gallery-preview-img-wrapper"],["class","ngx-gallery-preview-img ngx-gallery-center",3,"src","ngx-gallery-active","animation","ngx-gallery-grab","transform","left","top","click","mouseenter","mouseleave","mousedown","touchstart",4,"ngIf"],[3,"count","active","onChange",4,"ngIf"],["class","ngx-gallery-preview-text",3,"innerHTML","click",4,"ngIf"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","onPrevClick","onNextClick"],[3,"icon","disabled","titleText","onClick"],["aria-hidden","true","download","",1,"ngx-gallery-icon",3,"href"],[3,"icon","disabled","onClick"],[1,"ngx-gallery-preview-img","ngx-gallery-center",3,"src","click","mouseenter","mouseleave","mousedown","touchstart"],["previewImage",""],[3,"count","active","onChange"],[1,"ngx-gallery-preview-text",3,"innerHTML","click"]],template:function(a,v){1&a&&(t.YNc(0,n,1,4,"ngx-gallery-arrows",0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,j,1,3,"ngx-gallery-action",3),t.YNc(4,Q,2,4,"a",4),t.YNc(5,R,1,2,"ngx-gallery-action",5),t.YNc(6,x,1,2,"ngx-gallery-action",5),t.YNc(7,P,1,1,"ngx-gallery-action",6),t.YNc(8,O,1,1,"ngx-gallery-action",6),t.YNc(9,_,1,1,"ngx-gallery-action",6),t.TgZ(10,"ngx-gallery-action",7),t.NdJ("onClick",function(){return v.close()}),t.qZA()()(),t.TgZ(11,"div",8),t._UZ(12,"i",9),t.qZA(),t.TgZ(13,"div",10),t.NdJ("click",function(){return v.closeOnClick&&v.close()})("mouseup",function(K){return v.mouseUpHandler(K)})("mousemove",function(K){return v.mouseMoveHandler(K)})("touchend",function(K){return v.mouseUpHandler(K)})("touchmove",function(K){return v.mouseMoveHandler(K)}),t.TgZ(14,"div",11),t.YNc(15,D,2,13,"img",12),t.YNc(16,C,1,2,"ngx-gallery-bullets",13),t.qZA(),t.YNc(17,E,1,1,"div",14),t.qZA()),2&a&&(t.Q6J("ngIf",v.arrows),t.xp6(3),t.Q6J("ngForOf",v.actions),t.xp6(1),t.Q6J("ngIf",v.download&&v.src),t.xp6(1),t.Q6J("ngIf",v.zoom),t.xp6(1),t.Q6J("ngIf",v.zoom),t.xp6(1),t.Q6J("ngIf",v.rotate),t.xp6(1),t.Q6J("ngIf",v.rotate),t.xp6(1),t.Q6J("ngIf",v.fullscreen),t.xp6(1),t.Q6J("icon","ngx-gallery-close "+v.closeIcon),t.xp6(1),t.ekj("ngx-gallery-active",v.showSpinner),t.xp6(1),t.Gre("ngx-gallery-icon ngx-gallery-spinner ",v.spinnerIcon,""),t.xp6(3),t.Q6J("ngIf",v.src),t.xp6(1),t.Q6J("ngIf",v.bullets),t.xp6(1),t.Q6J("ngIf",v.showDescription&&v.description))},directives:function(){return[l.O5,ne,l.sg,Pe,Oe]},styles:[".ngx-gallery-active[_nghost-%COMP%]{width:100%;height:100%;position:fixed;left:0;top:0;background:rgba(0,0,0,.7);z-index:10000;display:inline-block}[_nghost-%COMP%]{display:none}[_nghost-%COMP%] .ngx-gallery-arrow{font-size:50px}[_nghost-%COMP%] ngx-gallery-bullets{height:5%;-webkit-box-align:center;align-items:center;padding:0}.ngx-gallery-preview-img[_ngcontent-%COMP%]{opacity:0;max-width:90%;max-height:90%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s}.ngx-gallery-preview-img.animation[_ngcontent-%COMP%]{-webkit-transition:opacity .5s linear,-webkit-transform .5s;transition:opacity .5s linear,transform .5s,-webkit-transform .5s}.ngx-gallery-preview-img.ngx-gallery-active[_ngcontent-%COMP%]{opacity:1}.ngx-gallery-preview-img.ngx-gallery-grab[_ngcontent-%COMP%]{cursor:grab;cursor:-webkit-grab}.ngx-gallery-icon.ngx-gallery-spinner[_ngcontent-%COMP%]{font-size:50px;left:0;display:inline-block}[_nghost-%COMP%] .ngx-gallery-preview-top{position:absolute;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%] .ngx-gallery-preview-icons{float:right}[_nghost-%COMP%] .ngx-gallery-preview-icons .ngx-gallery-icon{position:relative;margin-right:10px;margin-top:10px;font-size:25px;cursor:pointer;text-decoration:none}[_nghost-%COMP%] .ngx-gallery-preview-icons .ngx-gallery-icon.ngx-gallery-icon-disabled{cursor:default;opacity:.4}.ngx-spinner-wrapper[_ngcontent-%COMP%]{width:50px;height:50px;display:none}.ngx-spinner-wrapper.ngx-gallery-active[_ngcontent-%COMP%]{display:inline-block}.ngx-gallery-center[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;margin:auto;top:0}.ngx-gallery-preview-text[_ngcontent-%COMP%]{width:100%;background:rgba(0,0,0,.7);padding:10px;text-align:center;color:#fff;font-size:16px;-webkit-box-flex:0;flex:0 1 auto;z-index:10}.ngx-gallery-preview-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.ngx-gallery-preview-img-wrapper[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto;position:relative}"]}),(0,e.gn)([(0,t.IIB)()],w.prototype,"images",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"descriptions",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"showDescription",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrows",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowsAutoHide",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"swipe",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"fullscreen",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"forceFullscreen",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"closeOnClick",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"closeOnEsc",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"keyboardNavigation",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowPrevIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowNextIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"closeIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"fullscreenIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"spinnerIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"autoPlay",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"autoPlayInterval",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"autoPlayPauseOnHover",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"infinityMove",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"zoom",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"zoomStep",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"zoomMax",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"zoomMin",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"zoomInIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"zoomOutIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"animation",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"actions",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"rotate",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"rotateLeftIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"rotateRightIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"download",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"downloadIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"bullets",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onOpen",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onClose",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onActiveChange",void 0),(0,e.gn)([(0,t.i9L)("previewImage")],w.prototype,"previewImage",void 0),(0,e.gn)([(0,t.L6J)("mouseenter")],w.prototype,"onMouseEnter",null),(0,e.gn)([(0,t.L6J)("mouseleave")],w.prototype,"onMouseLeave",null),w})(),Ze=(()=>{let w=class{constructor(a,v,ee){this.sanitization=a,this.elementRef=v,this.helperService=ee,this.onClick=new t.vpe,this.onActiveChange=new t.vpe,this.canChangeImage=!0}ngOnInit(){this.arrows&&this.arrowsAutoHide&&(this.arrows=!1),this.autoPlay&&this.startAutoPlay()}ngOnChanges(a){a.swipe&&this.helperService.manageSwipe(this.swipe,this.elementRef,"image",()=>this.showNext(),()=>this.showPrev())}onMouseEnter(){this.arrowsAutoHide&&!this.arrows&&(this.arrows=!0),this.autoPlay&&this.autoPlayPauseOnHover&&this.stopAutoPlay()}onMouseLeave(){this.arrowsAutoHide&&this.arrows&&(this.arrows=!1),this.autoPlay&&this.autoPlayPauseOnHover&&this.startAutoPlay()}reset(a){this.selectedIndex=a}getImages(){if(!this.images)return[];if(this.lazyLoading){let a=[this.selectedIndex],v=this.selectedIndex-1;-1===v&&this.infinityMove?a.push(this.images.length-1):v>=0&&a.push(v);let ee=this.selectedIndex+1;return ee==this.images.length&&this.infinityMove?a.push(0):ee<this.images.length&&a.push(ee),this.images.filter((K,Ie)=>-1!=a.indexOf(Ie))}return this.images}startAutoPlay(){this.stopAutoPlay(),this.timer=setInterval(()=>{this.showNext()||(this.selectedIndex=-1,this.showNext())},this.autoPlayInterval)}stopAutoPlay(){this.timer&&clearInterval(this.timer)}handleClick(a,v){this.clickable&&(this.onClick.emit(v),a.stopPropagation(),a.preventDefault())}show(a){this.selectedIndex=a,this.onActiveChange.emit(this.selectedIndex),this.setChangeTimeout()}showNext(){return!(!this.canShowNext()||!this.canChangeImage||(this.selectedIndex++,this.selectedIndex===this.images.length&&(this.selectedIndex=0),this.onActiveChange.emit(this.selectedIndex),this.setChangeTimeout(),0))}showPrev(){this.canShowPrev()&&this.canChangeImage&&(this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.images.length-1),this.onActiveChange.emit(this.selectedIndex),this.setChangeTimeout())}setChangeTimeout(){this.canChangeImage=!1;let a=1e3;(this.animation===te.Slide||this.animation===te.Fade)&&(a=500),setTimeout(()=>{this.canChangeImage=!0},a)}canShowNext(){return!!this.images&&!!(this.infinityMove||this.selectedIndex<this.images.length-1)}canShowPrev(){return!!this.images&&!!(this.infinityMove||this.selectedIndex>0)}getSafeUrl(a){return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(a))}};return w.\u0275fac=function(a){return new(a||w)(t.Y36(g.H7),t.Y36(t.SBq),t.Y36(_e))},w.\u0275cmp=t.Xpm({type:w,selectors:[["ngx-gallery-image"]],hostBindings:function(a,v){1&a&&t.NdJ("mouseenter",function(){return v.onMouseEnter()})("mouseleave",function(){return v.onMouseLeave()})},inputs:{arrows:"arrows",selectedIndex:"selectedIndex",images:"images",clickable:"clickable",arrowsAutoHide:"arrowsAutoHide",swipe:"swipe",animation:"animation",size:"size",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon",autoPlay:"autoPlay",autoPlayInterval:"autoPlayInterval",autoPlayPauseOnHover:"autoPlayPauseOnHover",infinityMove:"infinityMove",lazyLoading:"lazyLoading",actions:"actions",descriptions:"descriptions",showDescription:"showDescription",bullets:"bullets"},outputs:{onClick:"onClick",onActiveChange:"onActiveChange"},features:[t.TTD],decls:4,vars:7,consts:[["class","ngx-gallery-image",3,"ngClass","background-image","click",4,"ngFor","ngForOf"],[3,"count","active","onChange",4,"ngIf"],[3,"class","prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","onPrevClick","onNextClick",4,"ngIf"],[1,"ngx-gallery-image",3,"ngClass","click"],[1,"ngx-gallery-icons-wrapper"],[3,"icon","disabled","titleText","onClick",4,"ngFor","ngForOf"],["class","ngx-gallery-image-text",3,"innerHTML","click",4,"ngIf"],[3,"icon","disabled","titleText","onClick"],[1,"ngx-gallery-image-text",3,"innerHTML","click"],[3,"count","active","onChange"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","onPrevClick","onNextClick"]],template:function(a,v){1&a&&(t.TgZ(0,"div"),t.YNc(1,B,4,10,"div",0),t.qZA(),t.YNc(2,H,1,2,"ngx-gallery-bullets",1),t.YNc(3,y,1,7,"ngx-gallery-arrows",2)),2&a&&(t.MT6("ngx-gallery-image-wrapper ngx-gallery-animation-",v.animation," ngx-gallery-image-size-",v.size,""),t.xp6(1),t.Q6J("ngForOf",v.getImages()),t.xp6(1),t.Q6J("ngIf",v.bullets),t.xp6(1),t.Q6J("ngIf",v.arrows))},directives:function(){return[l.sg,l.mk,Pe,l.O5,Oe,ne]},styles:["[_nghost-%COMP%]{width:100%;display:inline-block;position:relative}.ngx-gallery-image-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0;overflow:hidden}.ngx-gallery-image[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;height:100%;width:100%;position:absolute;top:0}.ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%]{z-index:1000}.ngx-gallery-image-size-cover[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{background-size:cover}.ngx-gallery-image-size-contain[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{background-size:contain}.ngx-gallery-animation-fade[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{left:0;opacity:0;-webkit-transition:.5s ease-in-out;transition:.5s ease-in-out}.ngx-gallery-animation-fade[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%]{opacity:1}.ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{-webkit-transition:.5s ease-in-out;transition:.5s ease-in-out}.ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%]{left:0}.ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-inactive-left[_ngcontent-%COMP%]{left:-100%}.ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-inactive-right[_ngcontent-%COMP%]{left:100%}.ngx-gallery-animation-rotate[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{-webkit-transition:1s;transition:1s;-webkit-transform:scale(3.5,3.5) rotate(90deg);transform:scale(3.5,3.5) rotate(90deg);left:0;opacity:0}.ngx-gallery-animation-rotate[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%]{-webkit-transform:scale(1,1) rotate(0);transform:scale(1,1) rotate(0);opacity:1}.ngx-gallery-animation-zoom[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{-webkit-transition:1s;transition:1s;-webkit-transform:scale(2.5,2.5);transform:scale(2.5,2.5);left:0;opacity:0}.ngx-gallery-animation-zoom[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%]{-webkit-transform:scale(1,1);transform:scale(1,1);opacity:1}.ngx-gallery-image-text[_ngcontent-%COMP%]{width:100%;background:rgba(0,0,0,.7);padding:10px;text-align:center;color:#fff;font-size:16px;position:absolute;bottom:0;z-index:10}"]}),(0,e.gn)([(0,t.IIB)()],w.prototype,"images",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"clickable",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"selectedIndex",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrows",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowsAutoHide",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"swipe",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"animation",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"size",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowPrevIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowNextIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"autoPlay",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"autoPlayInterval",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"autoPlayPauseOnHover",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"infinityMove",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"lazyLoading",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"actions",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"descriptions",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"showDescription",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"bullets",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onClick",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onActiveChange",void 0),(0,e.gn)([(0,t.L6J)("mouseenter")],w.prototype,"onMouseEnter",null),(0,e.gn)([(0,t.L6J)("mouseleave")],w.prototype,"onMouseLeave",null),w})(),Ue=(()=>{let w=class{constructor(a,v,ee){this.sanitization=a,this.elementRef=v,this.helperService=ee,this.minStopIndex=0,this.onActiveChange=new t.vpe,this.index=0}ngOnChanges(a){a.selectedIndex&&this.validateIndex(),a.swipe&&this.helperService.manageSwipe(this.swipe,this.elementRef,"thumbnails",()=>this.moveRight(),()=>this.moveLeft()),this.images&&(this.remainingCountValue=this.images.length-this.rows*this.columns)}onMouseEnter(){this.mouseenter=!0}onMouseLeave(){this.mouseenter=!1}reset(a){this.selectedIndex=a,this.setDefaultPosition(),this.index=0,this.validateIndex()}getImages(){if(!this.images)return[];if(this.remainingCount)return this.images.slice(0,this.rows*this.columns);if(this.lazyLoading&&this.order!=ve.Row){let a=0;return this.order===ve.Column?a=(this.index+this.columns+this.moveSize)*this.rows:this.order===ve.Page&&(a=this.index+this.columns*this.rows*2),a<=this.minStopIndex?a=this.minStopIndex:this.minStopIndex=a,this.images.slice(0,a)}return this.images}handleClick(a,v){this.hasLink(v)||(this.selectedIndex=v,this.onActiveChange.emit(v),a.stopPropagation(),a.preventDefault())}hasLink(a){if(this.links&&this.links.length&&this.links[a])return!0}moveRight(){if(this.canMoveRight()){this.index+=this.moveSize;let a=this.getMaxIndex()-this.columns;this.index>a&&(this.index=a),this.setThumbnailsPosition()}}moveLeft(){this.canMoveLeft()&&(this.index-=this.moveSize,this.index<0&&(this.index=0),this.setThumbnailsPosition())}canMoveRight(){return this.index+this.columns<this.getMaxIndex()}canMoveLeft(){return 0!==this.index}getThumbnailLeft(a){let v;return v=this.order===ve.Column?Math.floor(a/this.rows):this.order===ve.Page?a%this.columns+Math.floor(a/(this.rows*this.columns))*this.columns:this.order==ve.Row&&this.remainingCount?a%this.columns:a%Math.ceil(this.images.length/this.rows),this.getThumbnailPosition(v,this.columns)}getThumbnailTop(a){let v;return v=this.order===ve.Column?a%this.rows:this.order===ve.Page?Math.floor(a/this.columns)-Math.floor(a/(this.rows*this.columns))*this.rows:this.order==ve.Row&&this.remainingCount?Math.floor(a/this.columns):Math.floor(a/Math.ceil(this.images.length/this.rows)),this.getThumbnailPosition(v,this.rows)}getThumbnailWidth(){return this.getThumbnailDimension(this.columns)}getThumbnailHeight(){return this.getThumbnailDimension(this.rows)}setThumbnailsPosition(){this.thumbnailsLeft=-100/this.columns*this.index+"%",this.thumbnailsMarginLeft=-(this.margin-(this.columns-1)*this.margin/this.columns)*this.index+"px"}setDefaultPosition(){this.thumbnailsLeft="0px",this.thumbnailsMarginLeft="0px"}canShowArrows(){return!this.remainingCount&&!(!(this.arrows&&this.images&&this.images.length>this.getVisibleCount())||this.arrowsAutoHide&&!this.mouseenter)}validateIndex(){if(this.images){let a;if(a=this.order===ve.Column?Math.floor(this.selectedIndex/this.rows):this.selectedIndex%Math.ceil(this.images.length/this.rows),this.remainingCount&&(a=0),a<this.index||a>=this.index+this.columns){const v=this.getMaxIndex()-this.columns;this.index=a>v?v:a,this.setThumbnailsPosition()}}}getSafeUrl(a){return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(a))}getThumbnailPosition(a,v){return this.getSafeStyle("calc("+100/v*a+"% + "+(this.margin-(v-1)*this.margin/v)*a+"px)")}getThumbnailDimension(a){return this.getSafeStyle(0!==this.margin?"calc("+100/a+"% - "+(a-1)*this.margin/a+"px)":"calc("+100/a+"% + 1px)")}getMaxIndex(){if(this.order==ve.Page){let a=Math.floor(this.images.length/this.getVisibleCount())*this.columns;return this.images.length%this.getVisibleCount()>this.columns?a+=this.columns:a+=this.images.length%this.getVisibleCount(),a}return Math.ceil(this.images.length/this.rows)}getVisibleCount(){return this.columns*this.rows}getSafeStyle(a){return this.sanitization.bypassSecurityTrustStyle(a)}};return w.\u0275fac=function(a){return new(a||w)(t.Y36(g.H7),t.Y36(t.SBq),t.Y36(_e))},w.\u0275cmp=t.Xpm({type:w,selectors:[["ngx-gallery-thumbnails"]],hostBindings:function(a,v){1&a&&t.NdJ("mouseenter",function(){return v.onMouseEnter()})("mouseleave",function(){return v.onMouseLeave()})},inputs:{selectedIndex:"selectedIndex",images:"images",links:"links",labels:"labels",linkTarget:"linkTarget",columns:"columns",rows:"rows",arrows:"arrows",arrowsAutoHide:"arrowsAutoHide",margin:"margin",clickable:"clickable",swipe:"swipe",size:"size",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon",moveSize:"moveSize",order:"order",remainingCount:"remainingCount",lazyLoading:"lazyLoading",actions:"actions"},outputs:{onActiveChange:"onActiveChange"},features:[t.TTD],decls:4,vars:9,consts:[[1,"ngx-gallery-thumbnails"],["class","ngx-gallery-thumbnail",3,"href","target","background-image","width","height","left","top","ngClass","click",4,"ngFor","ngForOf"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","onPrevClick","onNextClick",4,"ngIf"],[1,"ngx-gallery-thumbnail",3,"href","target","ngClass","click"],[1,"ngx-gallery-icons-wrapper"],[3,"icon","disabled","titleText","onClick",4,"ngFor","ngForOf"],["class","ngx-gallery-remaining-count-overlay",4,"ngIf"],[3,"icon","disabled","titleText","onClick"],[1,"ngx-gallery-remaining-count-overlay"],[1,"ngx-gallery-remaining-count"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","onPrevClick","onNextClick"]],template:function(a,v){1&a&&(t.TgZ(0,"div")(1,"div",0),t.YNc(2,u,4,19,"a",1),t.qZA()(),t.YNc(3,h,1,4,"ngx-gallery-arrows",2)),2&a&&(t.Gre("ngx-gallery-thumbnails-wrapper ngx-gallery-thumbnail-size-",v.size,""),t.xp6(1),t.Udp("transform","translateX("+v.thumbnailsLeft+")")("margin-left",v.thumbnailsMarginLeft),t.xp6(1),t.Q6J("ngForOf",v.getImages()),t.xp6(1),t.Q6J("ngIf",v.canShowArrows()))},directives:function(){return[l.sg,l.mk,Pe,l.O5,ne]},styles:["[_nghost-%COMP%]{width:100%;display:inline-block;position:relative}.ngx-gallery-thumbnails-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}.ngx-gallery-thumbnails[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;left:0;-webkit-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform .5s ease-in-out;transition:transform .5s ease-in-out;transition:transform .5s ease-in-out,-webkit-transform .5s ease-in-out;will-change:transform}.ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]{position:absolute;height:100%;background-position:center;background-repeat:no-repeat;text-decoration:none}.ngx-gallery-thumbnail-size-cover[_ngcontent-%COMP%]   .ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]{background-size:cover}.ngx-gallery-thumbnail-size-contain[_ngcontent-%COMP%]   .ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]{background-size:contain}.ngx-gallery-remaining-count-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0;background-color:rgba(0,0,0,.4)}.ngx-gallery-remaining-count[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;font-size:30px}"]}),(0,e.gn)([(0,t.IIB)()],w.prototype,"images",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"links",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"labels",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"linkTarget",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"columns",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"rows",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrows",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowsAutoHide",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"margin",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"selectedIndex",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"clickable",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"swipe",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"size",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowPrevIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowNextIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"moveSize",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"order",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"remainingCount",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"lazyLoading",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"actions",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onActiveChange",void 0),(0,e.gn)([(0,t.L6J)("mouseenter")],w.prototype,"onMouseEnter",null),(0,e.gn)([(0,t.L6J)("mouseleave")],w.prototype,"onMouseLeave",null),w})(),fe=(()=>{let w=class{constructor(a){this.myElement=a,this.imagesReady=new t.vpe,this.change=new t.vpe,this.previewOpen=new t.vpe,this.previewClose=new t.vpe,this.previewChange=new t.vpe,this.oldImagesLength=0,this.selectedIndex=0,this.breakpoint=void 0,this.prevBreakpoint=void 0}ngOnInit(){this.options=this.options.map(a=>new ye(a)),this.sortOptions(),this.setBreakpoint(),this.setOptions(),this.checkFullWidth(),this.currentOptions&&(this.selectedIndex=this.currentOptions.startIndex)}ngDoCheck(){(void 0!==this.images&&this.images.length!==this.oldImagesLength||this.images!==this.oldImages)&&(this.oldImagesLength=this.images.length,this.oldImages=this.images,this.setOptions(),this.setImages(),this.images&&this.images.length&&this.imagesReady.emit(),this.image&&this.image.reset(this.currentOptions.startIndex),this.currentOptions.thumbnailsAutoHide&&this.currentOptions.thumbnails&&this.images.length<=1&&(this.currentOptions.thumbnails=!1,this.currentOptions.imageArrows=!1),this.resetThumbnails())}ngAfterViewInit(){this.checkFullWidth()}onResize(){this.setBreakpoint(),this.prevBreakpoint!==this.breakpoint&&(this.setOptions(),this.resetThumbnails()),this.currentOptions&&this.currentOptions.fullWidth&&(this.fullWidthTimeout&&clearTimeout(this.fullWidthTimeout),this.fullWidthTimeout=setTimeout(()=>{this.checkFullWidth()},200))}getImageHeight(){return this.currentOptions&&this.currentOptions.thumbnails?this.currentOptions.imagePercent+"%":"100%"}getThumbnailsHeight(){return this.currentOptions&&this.currentOptions.image?"calc("+this.currentOptions.thumbnailsPercent+"% - "+this.currentOptions.thumbnailsMargin+"px)":"100%"}getThumbnailsMarginTop(){return this.currentOptions&&this.currentOptions.layout===q.ThumbnailsBottom?this.currentOptions.thumbnailsMargin+"px":"0px"}getThumbnailsMarginBottom(){return this.currentOptions&&this.currentOptions.layout===q.ThumbnailsTop?this.currentOptions.thumbnailsMargin+"px":"0px"}openPreview(a){this.currentOptions.previewCustom?this.currentOptions.previewCustom(a):(this.previewEnabled=!0,this.preview.open(a))}onPreviewOpen(){this.previewOpen.emit(),this.image&&this.image.autoPlay&&this.image.stopAutoPlay()}onPreviewClose(){this.previewEnabled=!1,this.previewClose.emit(),this.image&&this.image.autoPlay&&this.image.startAutoPlay()}selectFromImage(a){this.select(a)}selectFromThumbnails(a){this.select(a),this.currentOptions&&this.currentOptions.thumbnails&&this.currentOptions.preview&&(!this.currentOptions.image||this.currentOptions.thumbnailsRemainingCount)&&this.openPreview(this.selectedIndex)}show(a){this.select(a)}showNext(){this.image.showNext()}showPrev(){this.image.showPrev()}canShowNext(){return!(!this.images||!this.currentOptions||!(this.currentOptions.imageInfinityMove||this.selectedIndex<this.images.length-1))}canShowPrev(){return!(!this.images||!this.currentOptions||!(this.currentOptions.imageInfinityMove||this.selectedIndex>0))}previewSelect(a){this.previewChange.emit({index:a,image:this.images[a]})}moveThumbnailsRight(){this.thubmnails.moveRight()}moveThumbnailsLeft(){this.thubmnails.moveLeft()}canMoveThumbnailsRight(){return this.thubmnails.canMoveRight()}canMoveThumbnailsLeft(){return this.thubmnails.canMoveLeft()}resetThumbnails(){this.thubmnails&&this.thubmnails.reset(this.currentOptions.startIndex)}select(a){this.selectedIndex=a,this.change.emit({index:a,image:this.images[a]})}checkFullWidth(){this.currentOptions&&this.currentOptions.fullWidth&&(this.width=document.body.clientWidth+"px",this.left=-(document.body.clientWidth-this.myElement.nativeElement.parentNode.innerWidth)/2+"px")}setImages(){this.smallImages=this.images.map(a=>a.small),this.mediumImages=this.images.map((a,v)=>new Se({src:a.medium,index:v})),this.bigImages=this.images.map(a=>a.big),this.descriptions=this.images.map(a=>a.description),this.links=this.images.map(a=>a.url),this.labels=this.images.map(a=>a.label)}setBreakpoint(){let a;this.prevBreakpoint=this.breakpoint,"undefined"!=typeof window&&(a=this.options.filter(v=>v.breakpoint>=window.innerWidth).map(v=>v.breakpoint)),this.breakpoint=a&&a.length?a.pop():void 0}sortOptions(){this.options=[...this.options.filter(a=>void 0===a.breakpoint),...this.options.filter(a=>void 0!==a.breakpoint).sort((a,v)=>v.breakpoint-a.breakpoint)]}setOptions(){this.currentOptions=new ye({}),this.options.filter(a=>void 0===a.breakpoint||a.breakpoint>=this.breakpoint).map(a=>this.combineOptions(this.currentOptions,a)),this.width=this.currentOptions.width,this.height=this.currentOptions.height}combineOptions(a,v){Object.keys(v).map(ee=>a[ee]=void 0!==v[ee]?v[ee]:a[ee])}};return w.\u0275fac=function(a){return new(a||w)(t.Y36(t.SBq))},w.\u0275cmp=t.Xpm({type:w,selectors:[["ngx-gallery"]],viewQuery:function(a,v){if(1&a&&(t.Gf(Ne,5),t.Gf(Ze,5),t.Gf(Ue,5)),2&a){let ee;t.iGM(ee=t.CRH())&&(v.preview=ee.first),t.iGM(ee=t.CRH())&&(v.image=ee.first),t.iGM(ee=t.CRH())&&(v.thubmnails=ee.first)}},hostVars:6,hostBindings:function(a,v){1&a&&t.NdJ("resize",function(){return v.onResize()},!1,t.Jf7),2&a&&t.Udp("width",v.width)("left",v.left)("height",v.height)},inputs:{options:"options",images:"images"},outputs:{imagesReady:"imagesReady",change:"change",previewOpen:"previewOpen",previewClose:"previewClose",previewChange:"previewChange"},features:[t._Bn([_e])],decls:4,vars:41,consts:[[3,"height","images","clickable","selectedIndex","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","swipe","animation","size","autoPlay","autoPlayInterval","autoPlayPauseOnHover","infinityMove","lazyLoading","actions","descriptions","showDescription","bullets","onClick","onActiveChange",4,"ngIf"],[3,"marginTop","marginBottom","height","images","links","labels","linkTarget","selectedIndex","columns","rows","margin","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","clickable","swipe","size","moveSize","order","remainingCount","lazyLoading","actions","onActiveChange",4,"ngIf"],[3,"images","descriptions","showDescription","arrowPrevIcon","arrowNextIcon","closeIcon","fullscreenIcon","spinnerIcon","arrows","arrowsAutoHide","swipe","fullscreen","forceFullscreen","closeOnClick","closeOnEsc","keyboardNavigation","animation","autoPlay","autoPlayInterval","autoPlayPauseOnHover","infinityMove","zoom","zoomStep","zoomMax","zoomMin","zoomInIcon","zoomOutIcon","actions","rotate","rotateLeftIcon","rotateRightIcon","download","downloadIcon","bullets","onClose","onOpen","onActiveChange"],[3,"images","clickable","selectedIndex","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","swipe","animation","size","autoPlay","autoPlayInterval","autoPlayPauseOnHover","infinityMove","lazyLoading","actions","descriptions","showDescription","bullets","onClick","onActiveChange"],[3,"images","links","labels","linkTarget","selectedIndex","columns","rows","margin","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","clickable","swipe","size","moveSize","order","remainingCount","lazyLoading","actions","onActiveChange"]],template:function(a,v){1&a&&(t.TgZ(0,"div"),t.YNc(1,M,1,21,"ngx-gallery-image",0),t.YNc(2,ie,1,27,"ngx-gallery-thumbnails",1),t.TgZ(3,"ngx-gallery-preview",2),t.NdJ("onClose",function(){return v.onPreviewClose()})("onOpen",function(){return v.onPreviewOpen()})("onActiveChange",function(K){return v.previewSelect(K)}),t.qZA()()),2&a&&(t.Gre("ngx-gallery-layout ",null==v.currentOptions?null:v.currentOptions.layout,""),t.xp6(1),t.Q6J("ngIf",null==v.currentOptions?null:v.currentOptions.image),t.xp6(1),t.Q6J("ngIf",null==v.currentOptions?null:v.currentOptions.thumbnails),t.xp6(1),t.ekj("ngx-gallery-active",v.previewEnabled),t.Q6J("images",v.bigImages)("descriptions",v.descriptions)("showDescription",null==v.currentOptions?null:v.currentOptions.previewDescription)("arrowPrevIcon",null==v.currentOptions?null:v.currentOptions.arrowPrevIcon)("arrowNextIcon",null==v.currentOptions?null:v.currentOptions.arrowNextIcon)("closeIcon",null==v.currentOptions?null:v.currentOptions.closeIcon)("fullscreenIcon",null==v.currentOptions?null:v.currentOptions.fullscreenIcon)("spinnerIcon",null==v.currentOptions?null:v.currentOptions.spinnerIcon)("arrows",null==v.currentOptions?null:v.currentOptions.previewArrows)("arrowsAutoHide",null==v.currentOptions?null:v.currentOptions.previewArrowsAutoHide)("swipe",null==v.currentOptions?null:v.currentOptions.previewSwipe)("fullscreen",null==v.currentOptions?null:v.currentOptions.previewFullscreen)("forceFullscreen",null==v.currentOptions?null:v.currentOptions.previewForceFullscreen)("closeOnClick",null==v.currentOptions?null:v.currentOptions.previewCloseOnClick)("closeOnEsc",null==v.currentOptions?null:v.currentOptions.previewCloseOnEsc)("keyboardNavigation",null==v.currentOptions?null:v.currentOptions.previewKeyboardNavigation)("animation",null==v.currentOptions?null:v.currentOptions.previewAnimation)("autoPlay",null==v.currentOptions?null:v.currentOptions.previewAutoPlay)("autoPlayInterval",null==v.currentOptions?null:v.currentOptions.previewAutoPlayInterval)("autoPlayPauseOnHover",null==v.currentOptions?null:v.currentOptions.previewAutoPlayPauseOnHover)("infinityMove",null==v.currentOptions?null:v.currentOptions.previewInfinityMove)("zoom",null==v.currentOptions?null:v.currentOptions.previewZoom)("zoomStep",null==v.currentOptions?null:v.currentOptions.previewZoomStep)("zoomMax",null==v.currentOptions?null:v.currentOptions.previewZoomMax)("zoomMin",null==v.currentOptions?null:v.currentOptions.previewZoomMin)("zoomInIcon",null==v.currentOptions?null:v.currentOptions.zoomInIcon)("zoomOutIcon",null==v.currentOptions?null:v.currentOptions.zoomOutIcon)("actions",null==v.currentOptions?null:v.currentOptions.actions)("rotate",null==v.currentOptions?null:v.currentOptions.previewRotate)("rotateLeftIcon",null==v.currentOptions?null:v.currentOptions.rotateLeftIcon)("rotateRightIcon",null==v.currentOptions?null:v.currentOptions.rotateRightIcon)("download",null==v.currentOptions?null:v.currentOptions.previewDownload)("downloadIcon",null==v.currentOptions?null:v.currentOptions.downloadIcon)("bullets",null==v.currentOptions?null:v.currentOptions.previewBullets))},directives:[l.O5,Ze,Ue,Ne],styles:["[_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{float:left}[_nghost-%COMP%] *{box-sizing:border-box}[_nghost-%COMP%] .ngx-gallery-icon{color:#fff;font-size:25px;position:absolute;z-index:2000;display:inline-block}[_nghost-%COMP%] .ngx-gallery-icon .ngx-gallery-icon-content{display:block}[_nghost-%COMP%] .ngx-gallery-clickable{cursor:pointer}[_nghost-%COMP%] .ngx-gallery-icons-wrapper .ngx-gallery-icon{position:relative;margin-right:5px;margin-top:5px;font-size:20px;cursor:pointer}[_nghost-%COMP%] .ngx-gallery-icons-wrapper{float:right}[_nghost-%COMP%]   .ngx-gallery-layout[_ngcontent-%COMP%]{width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}[_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-top[_ngcontent-%COMP%]   ngx-gallery-image[_ngcontent-%COMP%]{-webkit-box-ordinal-group:3;order:2}[_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-top[_ngcontent-%COMP%]   ngx-gallery-thumbnails[_ngcontent-%COMP%]{-webkit-box-ordinal-group:2;order:1}[_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-bottom[_ngcontent-%COMP%]   ngx-gallery-image[_ngcontent-%COMP%]{-webkit-box-ordinal-group:2;order:1}[_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-bottom[_ngcontent-%COMP%]   ngx-gallery-thumbnails[_ngcontent-%COMP%]{-webkit-box-ordinal-group:3;order:2}"]}),(0,e.gn)([(0,t.IIB)()],w.prototype,"options",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"images",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"imagesReady",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"change",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"previewOpen",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"previewClose",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"previewChange",void 0),(0,e.gn)([(0,t.i9L)(Ne)],w.prototype,"preview",void 0),(0,e.gn)([(0,t.i9L)(Ze)],w.prototype,"image",void 0),(0,e.gn)([(0,t.i9L)(Ue)],w.prototype,"thubmnails",void 0),(0,e.gn)([(0,t.pfw)("style.width")],w.prototype,"width",void 0),(0,e.gn)([(0,t.pfw)("style.height")],w.prototype,"height",void 0),(0,e.gn)([(0,t.pfw)("style.left")],w.prototype,"left",void 0),(0,e.gn)([(0,t.L6J)("window:resize")],w.prototype,"onResize",null),w})(),Pe=(()=>{let w=class{constructor(){this.disabled=!1,this.titleText="",this.onClick=new t.vpe}handleClick(a){this.disabled||this.onClick.emit(a),a.stopPropagation(),a.preventDefault()}};return w.\u0275fac=function(a){return new(a||w)},w.\u0275cmp=t.Xpm({type:w,selectors:[["ngx-gallery-action"]],inputs:{disabled:"disabled",titleText:"titleText",icon:"icon"},outputs:{onClick:"onClick"},decls:2,vars:6,consts:[["aria-hidden","true",1,"ngx-gallery-icon",3,"title","click"]],template:function(a,v){1&a&&(t.TgZ(0,"div",0),t.NdJ("click",function(K){return v.handleClick(K)}),t._UZ(1,"i"),t.qZA()),2&a&&(t.ekj("ngx-gallery-icon-disabled",v.disabled),t.s9C("title",v.titleText),t.xp6(1),t.Gre("ngx-gallery-icon-content ",v.icon,""))},styles:[""],changeDetection:0}),(0,e.gn)([(0,t.IIB)()],w.prototype,"icon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"disabled",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"titleText",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onClick",void 0),w})(),ne=(()=>{let w=class{constructor(){this.onPrevClick=new t.vpe,this.onNextClick=new t.vpe}handlePrevClick(){this.onPrevClick.emit()}handleNextClick(){this.onNextClick.emit()}};return w.\u0275fac=function(a){return new(a||w)},w.\u0275cmp=t.Xpm({type:w,selectors:[["ngx-gallery-arrows"]],inputs:{prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon"},outputs:{onPrevClick:"onPrevClick",onNextClick:"onNextClick"},decls:6,vars:10,consts:[[1,"ngx-gallery-arrow-wrapper","ngx-gallery-arrow-left"],["aria-hidden","true",1,"ngx-gallery-icon","ngx-gallery-arrow",3,"click"],[1,"ngx-gallery-arrow-wrapper","ngx-gallery-arrow-right"]],template:function(a,v){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return v.handlePrevClick()}),t._UZ(2,"i"),t.qZA()(),t.TgZ(3,"div",2)(4,"div",1),t.NdJ("click",function(){return v.handleNextClick()}),t._UZ(5,"i"),t.qZA()()),2&a&&(t.xp6(1),t.ekj("ngx-gallery-disabled",v.prevDisabled),t.xp6(1),t.Gre("ngx-gallery-icon-content ",v.arrowPrevIcon,""),t.xp6(2),t.ekj("ngx-gallery-disabled",v.nextDisabled),t.xp6(1),t.Gre("ngx-gallery-icon-content ",v.arrowNextIcon,""))},styles:[".ngx-gallery-arrow-wrapper[_ngcontent-%COMP%]{position:absolute;height:100%;width:1px;display:table;z-index:2000;table-layout:fixed}.ngx-gallery-arrow-left[_ngcontent-%COMP%]{left:0}.ngx-gallery-arrow-right[_ngcontent-%COMP%]{right:0}.ngx-gallery-arrow[_ngcontent-%COMP%]{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);cursor:pointer}.ngx-gallery-arrow.ngx-gallery-disabled[_ngcontent-%COMP%]{opacity:.6;cursor:default}.ngx-gallery-arrow-left[_ngcontent-%COMP%]   .ngx-gallery-arrow[_ngcontent-%COMP%]{left:10px}.ngx-gallery-arrow-right[_ngcontent-%COMP%]   .ngx-gallery-arrow[_ngcontent-%COMP%]{right:10px}"]}),(0,e.gn)([(0,t.IIB)()],w.prototype,"prevDisabled",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"nextDisabled",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowPrevIcon",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"arrowNextIcon",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onPrevClick",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onNextClick",void 0),w})(),Oe=(()=>{let w=class{constructor(){this.active=0,this.onChange=new t.vpe}getBullets(){return Array(this.count)}handleChange(a,v){this.onChange.emit(v)}};return w.\u0275fac=function(a){return new(a||w)},w.\u0275cmp=t.Xpm({type:w,selectors:[["ngx-gallery-bullets"]],inputs:{active:"active",count:"count"},outputs:{onChange:"onChange"},decls:1,vars:1,consts:[["class","ngx-gallery-bullet",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"ngx-gallery-bullet",3,"ngClass","click"]],template:function(a,v){1&a&&t.YNc(0,re,1,3,"div",0),2&a&&t.Q6J("ngForOf",v.getBullets())},directives:[l.sg,l.mk],styles:["[_nghost-%COMP%]{position:absolute;z-index:2000;display:-webkit-inline-box;display:inline-flex;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:0;padding:10px}.ngx-gallery-bullet[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;cursor:pointer;background:#fff}.ngx-gallery-bullet[_ngcontent-%COMP%]:not(:first-child){margin-left:5px}.ngx-gallery-bullet.ngx-gallery-active[_ngcontent-%COMP%], .ngx-gallery-bullet[_ngcontent-%COMP%]:hover{background:#000}"]}),(0,e.gn)([(0,t.IIB)()],w.prototype,"count",void 0),(0,e.gn)([(0,t.IIB)()],w.prototype,"active",void 0),(0,e.gn)([(0,t.r_U)()],w.prototype,"onChange",void 0),w})(),Ee=(()=>{let w=class{};return w.\u0275fac=function(a){return new(a||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[[l.ez]]}),w})()},1715:(Te,se,s)=>{"use strict";s.d(se,{F:()=>g});var e=s(2916),t=s(353),l=s(4241);function g(n=0,j=t.P){return(!(0,l.k)(n)||n<0)&&(n=0),(!j||"function"!=typeof j.schedule)&&(j=t.P),new e.y(Q=>(Q.add(j.schedule(m,n,{subscriber:Q,counter:0,period:n})),Q))}function m(n){const{subscriber:j,counter:Q,period:R}=n;j.next(Q),this.schedule({subscriber:j,counter:Q+1,period:R},R)}},4167:(Te,se,s)=>{"use strict";s.d(se,{Zt:()=>Bi,Bh:()=>Li,Wj:()=>Ri,_t:()=>Zi,bA:()=>Mn});var e=s(6435),t=s(9808),l=s(925),g=s(3191),ze=s(8929),ut=s(2654),jn=s(1715),hn=s(352),St=s(2916),pn=s(6787),wt=s(7625),Mt=s(1059),Xn=s(4850),mn=s(2986),qn=s(2868),ei=s(7545),ti=s(1086),ni=s(3753);let ii=1;const oi=Promise.resolve(),It={};function gn(b){return b in It&&(delete It[b],!0)}const fn={setImmediate(b){const o=ii++;return It[o]=!0,oi.then(()=>gn(o)&&b()),o},clearImmediate(b){gn(b)}};var si=s(6686),ai=s(2268);new class li extends ai.v{flush(o){this.active=!0,this.scheduled=void 0;const{actions:i}=this;let c,f=-1,S=i.length;o=o||i.shift();do{if(c=o.execute(o.state,o.delay))break}while(++f<S&&(o=i.shift()));if(this.active=!1,c){for(;++f<S&&(o=i.shift());)o.unsubscribe();throw c}}}(class ri extends si.o{constructor(o,i){super(o,i),this.scheduler=o,this.work=i}requestAsyncId(o,i,c=0){return null!==c&&c>0?super.requestAsyncId(o,i,c):(o.actions.push(this),o.scheduled||(o.scheduled=fn.setImmediate(o.flush.bind(o,null))))}recycleAsyncId(o,i,c=0){if(null!==c&&c>0||null===c&&this.delay>0)return super.recycleAsyncId(o,i,c);0===o.actions.length&&(fn.clearImmediate(i),o.scheduled=void 0)}});var di=s(353),Ft=s(1177);class hi{constructor(o){this.durationSelector=o}call(o,i){return i.subscribe(new pi(o,this.durationSelector))}}class pi extends Ft.Ds{constructor(o,i){super(o),this.durationSelector=i,this.hasValue=!1}_next(o){if(this.value=o,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:f}=this;i=f(o)}catch(f){return this.destination.error(f)}const c=(0,Ft.ft)(i,new Ft.IY(this));!c||c.closed?this.clearThrottle():this.add(this.throttled=c)}}clearThrottle(){const{value:o,hasValue:i,throttled:c}=this;c&&(this.remove(c),this.throttled=void 0,c.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(o))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var mi=s(8723);function _n(b,o=di.P){return function ui(b){return function(i){return i.lift(new hi(b))}}(()=>(0,mi.H)(b,o))}var gi=s(2198);let _i=(()=>{class b{constructor(i,c,f){this._ngZone=i,this._platform=c,this._scrolled=new ze.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=f}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const c=this.scrollContainers.get(i);c&&(c.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new St.y(c=>{this._globalSubscription||this._addGlobalListener();const f=i>0?this._scrolled.pipe(_n(i)).subscribe(c):this._scrolled.subscribe(c);return this._scrolledCount++,()=>{f.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ti.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,c)=>this.deregister(c)),this._scrolled.complete()}ancestorScrolled(i,c){const f=this.getAncestorScrollContainers(i);return this.scrolled(c).pipe((0,gi.h)(S=>!S||f.indexOf(S)>-1))}getAncestorScrollContainers(i){const c=[];return this.scrollContainers.forEach((f,S)=>{this._scrollableContainsElement(S,i)&&c.push(S)}),c}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,c){let f=(0,g.fI)(c),S=i.getElementRef().nativeElement;do{if(f==S)return!0}while(f=f.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const i=this._getWindow();return(0,ni.R)(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return b.\u0275fac=function(i){return new(i||b)(e.LFG(e.R0b),e.LFG(l.t4),e.LFG(t.K0,8))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),Ci=(()=>{class b{constructor(i,c,f){this._platform=i,this._change=new ze.xQ,this._changeListener=S=>{this._change.next(S)},this._document=f,c.runOutsideAngular(()=>{if(i.isBrowser){const S=this._getWindow();S.addEventListener("resize",this._changeListener),S.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:c,height:f}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+f,right:i.left+c,height:f,width:c}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,c=this._getWindow(),f=i.documentElement,S=f.getBoundingClientRect();return{top:-S.top||i.body.scrollTop||c.scrollY||f.scrollTop||0,left:-S.left||i.body.scrollLeft||c.scrollX||f.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(_n(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return b.\u0275fac=function(i){return new(i||b)(e.LFG(l.t4),e.LFG(e.R0b),e.LFG(t.K0,8))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),xi=(()=>{class b{}return b.\u0275fac=function(i){return new(i||b)},b.\u0275mod=e.oAB({type:b}),b.\u0275inj=e.cJS({}),b})();const yi=new e.OlP("cdk-dir-doc",{providedIn:"root",factory:function bi(){return(0,e.f3M)(t.K0)}}),wi=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let vn=(()=>{class b{constructor(i){if(this.value="ltr",this.change=new e.vpe,i){const f=i.documentElement?i.documentElement.dir:null;this.value=function Ii(b){const o=(null==b?void 0:b.toLowerCase())||"";return"auto"===o&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?wi.test(navigator.language)?"rtl":"ltr":"rtl"===o?"rtl":"ltr"}((i.body?i.body.dir:null)||f||"ltr")}}ngOnDestroy(){this.change.complete()}}return b.\u0275fac=function(i){return new(i||b)(e.LFG(yi,8))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function At(b,o,i){for(let c in o)if(o.hasOwnProperty(c)){const f=o[c];f?b.setProperty(c,f,(null==i?void 0:i.has(c))?"important":""):b.removeProperty(c)}return b}function at(b,o){const i=o?"":"none";At(b.style,{"touch-action":o?"":"none","-webkit-user-drag":o?"":"none","-webkit-tap-highlight-color":o?"":"transparent","user-select":i,"-ms-user-select":i,"-webkit-user-select":i,"-moz-user-select":i})}function Cn(b,o,i){At(b.style,{position:o?"":"fixed",top:o?"":"0",opacity:o?"":"0",left:o?"":"-999em"},i)}function Tt(b,o){return o&&"none"!=o?b+" "+o:b}function xn(b){const o=b.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(b)*o}function Rt(b,o){return b.getPropertyValue(o).split(",").map(c=>c.trim())}function Lt(b){const o=b.getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,width:o.width,height:o.height,x:o.x,y:o.y}}function kt(b,o,i){const{top:c,bottom:f,left:S,right:Y}=b;return i>=c&&i<=f&&o>=S&&o<=Y}function ht(b,o,i){b.top+=o,b.bottom=b.top+b.height,b.left+=i,b.right=b.left+b.width}function yn(b,o,i,c){const{top:f,right:S,bottom:Y,left:$,width:pe,height:be}=b,Re=pe*o,Je=be*o;return c>f-Je&&c<Y+Je&&i>$-Re&&i<S+Re}class bn{constructor(o){this._document=o,this.positions=new Map}clear(){this.positions.clear()}cache(o){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),o.forEach(i=>{this.positions.set(i,{scrollPosition:{top:i.scrollTop,left:i.scrollLeft},clientRect:Lt(i)})})}handleScroll(o){const i=(0,l.sA)(o),c=this.positions.get(i);if(!c)return null;const f=c.scrollPosition;let S,Y;if(i===this._document){const be=this.getViewportScrollPosition();S=be.top,Y=be.left}else S=i.scrollTop,Y=i.scrollLeft;const $=f.top-S,pe=f.left-Y;return this.positions.forEach((be,Re)=>{be.clientRect&&i!==Re&&i.contains(Re)&&ht(be.clientRect,$,pe)}),f.top=S,f.left=Y,{top:$,left:pe}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function wn(b){const o=b.cloneNode(!0),i=o.querySelectorAll("[id]"),c=b.nodeName.toLowerCase();o.removeAttribute("id");for(let f=0;f<i.length;f++)i[f].removeAttribute("id");return"canvas"===c?En(b,o):("input"===c||"select"===c||"textarea"===c)&&Tn(b,o),In("canvas",b,o,En),In("input, textarea, select",b,o,Tn),o}function In(b,o,i,c){const f=o.querySelectorAll(b);if(f.length){const S=i.querySelectorAll(b);for(let Y=0;Y<f.length;Y++)c(f[Y],S[Y])}}let Ei=0;function Tn(b,o){"file"!==o.type&&(o.value=b.value),"radio"===o.type&&o.name&&(o.name=`mat-clone-${o.name}-${Ei++}`)}function En(b,o){const i=o.getContext("2d");if(i)try{i.drawImage(b,0,0)}catch(c){}}const On=(0,l.i$)({passive:!0}),Et=(0,l.i$)({passive:!1}),Nt=new Set(["position"]);class Di{constructor(o,i,c,f,S,Y){this._config=i,this._document=c,this._ngZone=f,this._viewportRuler=S,this._dragDropRegistry=Y,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new ze.xQ,this._pointerMoveSubscription=ut.w.EMPTY,this._pointerUpSubscription=ut.w.EMPTY,this._scrollSubscription=ut.w.EMPTY,this._resizeSubscription=ut.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new ze.xQ,this.started=new ze.xQ,this.released=new ze.xQ,this.ended=new ze.xQ,this.entered=new ze.xQ,this.exited=new ze.xQ,this.dropped=new ze.xQ,this.moved=this._moveEvents,this._pointerDown=$=>{if(this.beforeStarted.next(),this._handles.length){const pe=this._getTargetHandle($);pe&&!this._disabledHandles.has(pe)&&!this.disabled&&this._initializeDragSequence(pe,$)}else this.disabled||this._initializeDragSequence(this._rootElement,$)},this._pointerMove=$=>{const pe=this._getPointerPositionOnPage($);if(!this._hasStartedDragging){if(Math.abs(pe.x-this._pickupPositionOnPage.x)+Math.abs(pe.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const st=Date.now()>=this._dragStartTime+this._getDragStartDelay($),rt=this._dropContainer;if(!st)return void this._endDragSequence($);(!rt||!rt.isDragging()&&!rt.isReceiving())&&($.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence($)))}return}$.preventDefault();const be=this._getConstrainedPointerPosition(pe);if(this._hasMoved=!0,this._lastKnownPointerPosition=pe,this._updatePointerDirectionDelta(be),this._dropContainer)this._updateActiveDropContainer(be,pe);else{const Re=this._activeTransform;Re.x=be.x-this._pickupPositionOnPage.x+this._passiveTransform.x,Re.y=be.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(Re.x,Re.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:be,event:$,distance:this._getDragDistance(be),delta:this._pointerDirectionDelta})})},this._pointerUp=$=>{this._endDragSequence($)},this._nativeDragStart=$=>{if(this._handles.length){const pe=this._getTargetHandle($);pe&&!this._disabledHandles.has(pe)&&!this.disabled&&$.preventDefault()}else this.disabled||$.preventDefault()},this.withRootElement(o).withParent(i.parentDragRef||null),this._parentPositions=new bn(c),Y.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(o){const i=(0,g.Ig)(o);i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(c=>at(c,i)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(o){this._handles=o.map(c=>(0,g.fI)(c)),this._handles.forEach(c=>at(c,this.disabled)),this._toggleNativeDragInteractions();const i=new Set;return this._disabledHandles.forEach(c=>{this._handles.indexOf(c)>-1&&i.add(c)}),this._disabledHandles=i,this}withPreviewTemplate(o){return this._previewTemplate=o,this}withPlaceholderTemplate(o){return this._placeholderTemplate=o,this}withRootElement(o){const i=(0,g.fI)(o);return i!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{i.addEventListener("mousedown",this._pointerDown,Et),i.addEventListener("touchstart",this._pointerDown,On),i.addEventListener("dragstart",this._nativeDragStart,Et)}),this._initialTransform=void 0,this._rootElement=i),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(o){return this._boundaryElement=o?(0,g.fI)(o):null,this._resizeSubscription.unsubscribe(),o&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(o){return this._parentDragRef=o,this}dispose(){var o,i;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(o=this._rootElement)||void 0===o||o.remove()),null===(i=this._anchor)||void 0===i||i.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(o){!this._disabledHandles.has(o)&&this._handles.indexOf(o)>-1&&(this._disabledHandles.add(o),at(o,!0))}enableHandle(o){this._disabledHandles.has(o)&&(this._disabledHandles.delete(o),at(o,this.disabled))}withDirection(o){return this._direction=o,this}_withDropContainer(o){this._dropContainer=o}getFreeDragPosition(){const o=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:o.x,y:o.y}}setFreeDragPosition(o){return this._activeTransform={x:0,y:0},this._passiveTransform.x=o.x,this._passiveTransform.y=o.y,this._dropContainer||this._applyRootElementTransform(o.x,o.y),this}withPreviewContainer(o){return this._previewContainer=o,this}_sortFromLastPointerPosition(){const o=this._lastKnownPointerPosition;o&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(o),o)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var o,i;null===(o=this._preview)||void 0===o||o.remove(),null===(i=this._previewRef)||void 0===i||i.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var o,i;null===(o=this._placeholder)||void 0===o||o.remove(),null===(i=this._placeholderRef)||void 0===i||i.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(o){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(o),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const i=this._getPointerPositionOnPage(o);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(i),dropPoint:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(o){pt(o)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const i=this._dropContainer;if(i){const c=this._rootElement,f=c.parentNode,S=this._placeholder=this._createPlaceholderElement(),Y=this._anchor=this._anchor||this._document.createComment(""),$=this._getShadowRoot();f.insertBefore(Y,c),this._initialTransform=c.style.transform||"",this._preview=this._createPreviewElement(),Cn(c,!1,Nt),this._document.body.appendChild(f.replaceChild(S,c)),this._getPreviewInsertionPoint(f,$).appendChild(this._preview),this.started.next({source:this}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(o,i){this._parentDragRef&&i.stopPropagation();const c=this.isDragging(),f=pt(i),S=!f&&0!==i.button,Y=this._rootElement,$=(0,l.sA)(i),pe=!f&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),be=f?function Kn(b){const o=b.touches&&b.touches[0]||b.changedTouches&&b.changedTouches[0];return!(!o||-1!==o.identifier||null!=o.radiusX&&1!==o.radiusX||null!=o.radiusY&&1!==o.radiusY)}(i):function Gn(b){return 0===b.buttons||0===b.offsetX&&0===b.offsetY}(i);if($&&$.draggable&&"mousedown"===i.type&&i.preventDefault(),c||S||pe||be)return;if(this._handles.length){const We=Y.style;this._rootElementTapHighlight=We.webkitTapHighlightColor||"",We.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(We=>this._updateOnScroll(We)),this._boundaryElement&&(this._boundaryRect=Lt(this._boundaryElement));const Re=this._previewTemplate;this._pickupPositionInElement=Re&&Re.template&&!Re.matchSize?{x:0,y:0}:this._getPointerPositionInElement(o,i);const Je=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(i);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:Je.x,y:Je.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,i)}_cleanupDragArtifacts(o){Cn(this._rootElement,!0,Nt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const i=this._dropContainer,c=i.getItemIndex(this),f=this._getPointerPositionOnPage(o),S=this._getDragDistance(f),Y=i._isOverContainer(f.x,f.y);this.ended.next({source:this,distance:S,dropPoint:f}),this.dropped.next({item:this,currentIndex:c,previousIndex:this._initialIndex,container:i,previousContainer:this._initialContainer,isPointerOverContainer:Y,distance:S,dropPoint:f}),i.drop(this,c,this._initialIndex,this._initialContainer,Y,S,f),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:o,y:i},{x:c,y:f}){let S=this._initialContainer._getSiblingContainerFromPosition(this,o,i);!S&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(o,i)&&(S=this._initialContainer),S&&S!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=S,this._dropContainer.enter(this,o,i,S===this._initialContainer&&S.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:S,currentIndex:S.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(c,f),this._dropContainer._sortItem(this,o,i,this._pointerDirectionDelta),this._applyPreviewTransform(o-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y))}_createPreviewElement(){const o=this._previewTemplate,i=this.previewClass,c=o?o.template:null;let f;if(c&&o){const S=o.matchSize?this._rootElement.getBoundingClientRect():null,Y=o.viewContainer.createEmbeddedView(c,o.context);Y.detectChanges(),f=Pn(Y,this._document),this._previewRef=Y,o.matchSize?Sn(f,S):f.style.transform=Ot(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const S=this._rootElement;f=wn(S),Sn(f,S.getBoundingClientRect()),this._initialTransform&&(f.style.transform=this._initialTransform)}return At(f.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Nt),at(f,!1),f.classList.add("cdk-drag-preview"),f.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach(S=>f.classList.add(S)):f.classList.add(i)),f}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const o=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(o.left,o.top);const i=function Ti(b){const o=getComputedStyle(b),i=Rt(o,"transition-property"),c=i.find($=>"transform"===$||"all"===$);if(!c)return 0;const f=i.indexOf(c),S=Rt(o,"transition-duration"),Y=Rt(o,"transition-delay");return xn(S[f])+xn(Y[f])}(this._preview);return 0===i?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(c=>{const f=Y=>{var $;(!Y||(0,l.sA)(Y)===this._preview&&"transform"===Y.propertyName)&&(null===($=this._preview)||void 0===$||$.removeEventListener("transitionend",f),c(),clearTimeout(S))},S=setTimeout(f,1.5*i);this._preview.addEventListener("transitionend",f)}))}_createPlaceholderElement(){const o=this._placeholderTemplate,i=o?o.template:null;let c;return i?(this._placeholderRef=o.viewContainer.createEmbeddedView(i,o.context),this._placeholderRef.detectChanges(),c=Pn(this._placeholderRef,this._document)):c=wn(this._rootElement),c.style.pointerEvents="none",c.classList.add("cdk-drag-placeholder"),c}_getPointerPositionInElement(o,i){const c=this._rootElement.getBoundingClientRect(),f=o===this._rootElement?null:o,S=f?f.getBoundingClientRect():c,Y=pt(i)?i.targetTouches[0]:i,$=this._getViewportScrollPosition();return{x:S.left-c.left+(Y.pageX-S.left-$.left),y:S.top-c.top+(Y.pageY-S.top-$.top)}}_getPointerPositionOnPage(o){const i=this._getViewportScrollPosition(),c=pt(o)?o.touches[0]||o.changedTouches[0]||{pageX:0,pageY:0}:o,f=c.pageX-i.left,S=c.pageY-i.top;if(this._ownerSVGElement){const Y=this._ownerSVGElement.getScreenCTM();if(Y){const $=this._ownerSVGElement.createSVGPoint();return $.x=f,$.y=S,$.matrixTransform(Y.inverse())}}return{x:f,y:S}}_getConstrainedPointerPosition(o){const i=this._dropContainer?this._dropContainer.lockAxis:null;let{x:c,y:f}=this.constrainPosition?this.constrainPosition(o,this):o;if("x"===this.lockAxis||"x"===i?f=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===i)&&(c=this._pickupPositionOnPage.x),this._boundaryRect){const{x:S,y:Y}=this._pickupPositionInElement,$=this._boundaryRect,{width:pe,height:be}=this._getPreviewRect(),Re=$.top+Y,Je=$.bottom-(be-Y);c=Dn(c,$.left+S,$.right-(pe-S)),f=Dn(f,Re,Je)}return{x:c,y:f}}_updatePointerDirectionDelta(o){const{x:i,y:c}=o,f=this._pointerDirectionDelta,S=this._pointerPositionAtLastDirectionChange,Y=Math.abs(i-S.x),$=Math.abs(c-S.y);return Y>this._config.pointerDirectionChangeThreshold&&(f.x=i>S.x?1:-1,S.x=i),$>this._config.pointerDirectionChangeThreshold&&(f.y=c>S.y?1:-1,S.y=c),f}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const o=this._handles.length>0||!this.isDragging();o!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=o,at(this._rootElement,o))}_removeRootElementListeners(o){o.removeEventListener("mousedown",this._pointerDown,Et),o.removeEventListener("touchstart",this._pointerDown,On),o.removeEventListener("dragstart",this._nativeDragStart,Et)}_applyRootElementTransform(o,i){const c=Ot(o,i),f=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=f.transform&&"none"!=f.transform?f.transform:""),f.transform=Tt(c,this._initialTransform)}_applyPreviewTransform(o,i){var c;const f=(null===(c=this._previewTemplate)||void 0===c?void 0:c.template)?void 0:this._initialTransform,S=Ot(o,i);this._preview.style.transform=Tt(S,f)}_getDragDistance(o){const i=this._pickupPositionOnPage;return i?{x:o.x-i.x,y:o.y-i.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:o,y:i}=this._passiveTransform;if(0===o&&0===i||this.isDragging()||!this._boundaryElement)return;const c=this._boundaryElement.getBoundingClientRect(),f=this._rootElement.getBoundingClientRect();if(0===c.width&&0===c.height||0===f.width&&0===f.height)return;const S=c.left-f.left,Y=f.right-c.right,$=c.top-f.top,pe=f.bottom-c.bottom;c.width>f.width?(S>0&&(o+=S),Y>0&&(o-=Y)):o=0,c.height>f.height?($>0&&(i+=$),pe>0&&(i-=pe)):i=0,(o!==this._passiveTransform.x||i!==this._passiveTransform.y)&&this.setFreeDragPosition({y:i,x:o})}_getDragStartDelay(o){const i=this.dragStartDelay;return"number"==typeof i?i:pt(o)?i.touch:i?i.mouse:0}_updateOnScroll(o){const i=this._parentPositions.handleScroll(o);if(i){const c=(0,l.sA)(o);this._boundaryRect&&c!==this._boundaryElement&&c.contains(this._boundaryElement)&&ht(this._boundaryRect,i.top,i.left),this._pickupPositionOnPage.x+=i.left,this._pickupPositionOnPage.y+=i.top,this._dropContainer||(this._activeTransform.x-=i.left,this._activeTransform.y-=i.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var o;return(null===(o=this._parentPositions.positions.get(this._document))||void 0===o?void 0:o.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,l.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(o,i){const c=this._previewContainer||"global";if("parent"===c)return o;if("global"===c){const f=this._document;return i||f.fullscreenElement||f.webkitFullscreenElement||f.mozFullScreenElement||f.msFullscreenElement||f.body}return(0,g.fI)(c)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(o){return this._handles.find(i=>o.target&&(o.target===i||i.contains(o.target)))}}function Ot(b,o){return`translate3d(${Math.round(b)}px, ${Math.round(o)}px, 0)`}function Dn(b,o,i){return Math.max(o,Math.min(i,b))}function pt(b){return"t"===b.type[0]}function Pn(b,o){const i=b.rootNodes;if(1===i.length&&i[0].nodeType===o.ELEMENT_NODE)return i[0];const c=o.createElement("div");return i.forEach(f=>c.appendChild(f)),c}function Sn(b,o){b.style.width=`${o.width}px`,b.style.height=`${o.height}px`,b.style.transform=Ot(o.left,o.top)}function Mn(b,o,i){const c=mt(o,b.length-1),f=mt(i,b.length-1);if(c===f)return;const S=b[c],Y=f<c?-1:1;for(let $=c;$!==f;$+=Y)b[$]=b[$+Y];b[f]=S}function mt(b,o){return Math.max(0,Math.min(o,b))}class Pi{constructor(o,i,c,f,S){this._dragDropRegistry=i,this._ngZone=f,this._viewportRuler=S,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ze.xQ,this.entered=new ze.xQ,this.exited=new ze.xQ,this.dropped=new ze.xQ,this.sorted=new ze.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=ut.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new ze.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,jn.F)(0,hn.Z).pipe((0,wt.R)(this._stopScrollTimers)).subscribe(()=>{const Y=this._scrollNode,$=this.autoScrollStep;1===this._verticalScrollDirection?Y.scrollBy(0,-$):2===this._verticalScrollDirection&&Y.scrollBy(0,$),1===this._horizontalScrollDirection?Y.scrollBy(-$,0):2===this._horizontalScrollDirection&&Y.scrollBy($,0)})},this.element=(0,g.fI)(o),this._document=c,this.withScrollableParents([this.element]),i.registerDropContainer(this),this._parentPositions=new bn(c)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(o,i,c,f){let S;this._draggingStarted(),null==f?(S=this.sortingDisabled?this._draggables.indexOf(o):-1,-1===S&&(S=this._getItemIndexFromPointerPosition(o,i,c))):S=f;const Y=this._activeDraggables,$=Y.indexOf(o),pe=o.getPlaceholderElement();let be=Y[S];if(be===o&&(be=Y[S+1]),!be&&(null==S||-1===S||S<Y.length-1)&&this._shouldEnterAsFirstChild(i,c)&&(be=Y[0]),$>-1&&Y.splice($,1),be&&!this._dragDropRegistry.isDragging(be)){const Re=be.getRootElement();Re.parentElement.insertBefore(pe,Re),Y.splice(S,0,o)}else(0,g.fI)(this.element).appendChild(pe),Y.push(o);pe.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:o,container:this,currentIndex:this.getItemIndex(o)})}exit(o){this._reset(),this.exited.next({item:o,container:this})}drop(o,i,c,f,S,Y,$){this._reset(),this.dropped.next({item:o,currentIndex:i,previousIndex:c,container:this,previousContainer:f,isPointerOverContainer:S,distance:Y,dropPoint:$})}withItems(o){const i=this._draggables;return this._draggables=o,o.forEach(c=>c._withDropContainer(this)),this.isDragging()&&(i.filter(f=>f.isDragging()).every(f=>-1===o.indexOf(f))?this._reset():this._cacheItems()),this}withDirection(o){return this._direction=o,this}connectedTo(o){return this._siblings=o.slice(),this}withOrientation(o){return this._orientation=o,this}withScrollableParents(o){const i=(0,g.fI)(this.element);return this._scrollableElements=-1===o.indexOf(i)?[i,...o]:o.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(o){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(c=>c.drag===o):this._draggables.indexOf(o)}isReceiving(){return this._activeSiblings.size>0}_sortItem(o,i,c,f){if(this.sortingDisabled||!this._clientRect||!yn(this._clientRect,.05,i,c))return;const S=this._itemPositions,Y=this._getItemIndexFromPointerPosition(o,i,c,f);if(-1===Y&&S.length>0)return;const $="horizontal"===this._orientation,pe=S.findIndex(Ge=>Ge.drag===o),be=S[Y],Je=be.clientRect,We=pe>Y?1:-1,st=this._getItemOffsetPx(S[pe].clientRect,Je,We),rt=this._getSiblingOffsetPx(pe,S,We),lt=S.slice();Mn(S,pe,Y),this.sorted.next({previousIndex:pe,currentIndex:Y,container:this,item:o}),S.forEach((Ge,zi)=>{if(lt[zi]===Ge)return;const Bn=Ge.drag===o,zt=Bn?st:rt,Zn=Bn?o.getPlaceholderElement():Ge.drag.getRootElement();Ge.offset+=zt,$?(Zn.style.transform=Tt(`translate3d(${Math.round(Ge.offset)}px, 0, 0)`,Ge.initialTransform),ht(Ge.clientRect,0,zt)):(Zn.style.transform=Tt(`translate3d(0, ${Math.round(Ge.offset)}px, 0)`,Ge.initialTransform),ht(Ge.clientRect,zt,0))}),this._previousSwap.overlaps=kt(Je,i,c),this._previousSwap.drag=be.drag,this._previousSwap.delta=$?f.x:f.y}_startScrollingIfNecessary(o,i){if(this.autoScrollDisabled)return;let c,f=0,S=0;if(this._parentPositions.positions.forEach((Y,$)=>{$===this._document||!Y.clientRect||c||yn(Y.clientRect,.05,o,i)&&([f,S]=function Si(b,o,i,c){const f=Rn(o,c),S=Ln(o,i);let Y=0,$=0;if(f){const pe=b.scrollTop;1===f?pe>0&&(Y=1):b.scrollHeight-pe>b.clientHeight&&(Y=2)}if(S){const pe=b.scrollLeft;1===S?pe>0&&($=1):b.scrollWidth-pe>b.clientWidth&&($=2)}return[Y,$]}($,Y.clientRect,o,i),(f||S)&&(c=$))}),!f&&!S){const{width:Y,height:$}=this._viewportRuler.getViewportSize(),pe={width:Y,height:$,top:0,right:Y,bottom:$,left:0};f=Rn(pe,i),S=Ln(pe,o),c=window}c&&(f!==this._verticalScrollDirection||S!==this._horizontalScrollDirection||c!==this._scrollNode)&&(this._verticalScrollDirection=f,this._horizontalScrollDirection=S,this._scrollNode=c,(f||S)&&c?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const o=(0,g.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=o.msScrollSnapType||o.scrollSnapType||"",o.scrollSnapType=o.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const o=(0,g.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(o).clientRect}_cacheItemPositions(){const o="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(i=>{const c=i.getVisibleElement();return{drag:i,offset:0,initialTransform:c.style.transform||"",clientRect:Lt(c)}}).sort((i,c)=>o?i.clientRect.left-c.clientRect.left:i.clientRect.top-c.clientRect.top)}_reset(){this._isDragging=!1;const o=(0,g.fI)(this.element).style;o.scrollSnapType=o.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(i=>{var c;const f=i.getRootElement();if(f){const S=null===(c=this._itemPositions.find(Y=>Y.drag===i))||void 0===c?void 0:c.initialTransform;f.style.transform=S||""}}),this._siblings.forEach(i=>i._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(o,i,c){const f="horizontal"===this._orientation,S=i[o].clientRect,Y=i[o+-1*c];let $=S[f?"width":"height"]*c;if(Y){const pe=f?"left":"top",be=f?"right":"bottom";-1===c?$-=Y.clientRect[pe]-S[be]:$+=S[pe]-Y.clientRect[be]}return $}_getItemOffsetPx(o,i,c){const f="horizontal"===this._orientation;let S=f?i.left-o.left:i.top-o.top;return-1===c&&(S+=f?i.width-o.width:i.height-o.height),S}_shouldEnterAsFirstChild(o,i){if(!this._activeDraggables.length)return!1;const c=this._itemPositions,f="horizontal"===this._orientation;if(c[0].drag!==this._activeDraggables[0]){const Y=c[c.length-1].clientRect;return f?o>=Y.right:i>=Y.bottom}{const Y=c[0].clientRect;return f?o<=Y.left:i<=Y.top}}_getItemIndexFromPointerPosition(o,i,c,f){const S="horizontal"===this._orientation,Y=this._itemPositions.findIndex(({drag:$,clientRect:pe})=>{if($===o)return!1;if(f){const be=S?f.x:f.y;if($===this._previousSwap.drag&&this._previousSwap.overlaps&&be===this._previousSwap.delta)return!1}return S?i>=Math.floor(pe.left)&&i<Math.floor(pe.right):c>=Math.floor(pe.top)&&c<Math.floor(pe.bottom)});return-1!==Y&&this.sortPredicate(Y,o,this)?Y:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(o,i){return null!=this._clientRect&&kt(this._clientRect,o,i)}_getSiblingContainerFromPosition(o,i,c){return this._siblings.find(f=>f._canReceive(o,i,c))}_canReceive(o,i,c){if(!this._clientRect||!kt(this._clientRect,i,c)||!this.enterPredicate(o,this))return!1;const f=this._getShadowRoot().elementFromPoint(i,c);if(!f)return!1;const S=(0,g.fI)(this.element);return f===S||S.contains(f)}_startReceiving(o,i){const c=this._activeSiblings;!c.has(o)&&i.every(f=>this.enterPredicate(f,this)||this._draggables.indexOf(f)>-1)&&(c.add(o),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(o){this._activeSiblings.delete(o),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(o=>{if(this.isDragging()){const i=this._parentPositions.handleScroll(o);i&&(this._itemPositions.forEach(({clientRect:c})=>{ht(c,i.top,i.left)}),this._itemPositions.forEach(({drag:c})=>{this._dragDropRegistry.isDragging(c)&&c._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const o=(0,l.kV)((0,g.fI)(this.element));this._cachedShadowRoot=o||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const o=this._activeDraggables.filter(i=>i.isDragging());this._siblings.forEach(i=>i._startReceiving(this,o))}}function Rn(b,o){const{top:i,bottom:c,height:f}=b,S=.05*f;return o>=i-S&&o<=i+S?1:o>=c-S&&o<=c+S?2:0}function Ln(b,o){const{left:i,right:c,width:f}=b,S=.05*f;return o>=i-S&&o<=i+S?1:o>=c-S&&o<=c+S?2:0}const Dt=(0,l.i$)({passive:!1,capture:!0});let Mi=(()=>{class b{constructor(i,c){this._ngZone=i,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=f=>f.isDragging(),this.pointerMove=new ze.xQ,this.pointerUp=new ze.xQ,this.scroll=new ze.xQ,this._preventDefaultWhileDragging=f=>{this._activeDragInstances.length>0&&f.preventDefault()},this._persistentTouchmoveListener=f=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&f.preventDefault(),this.pointerMove.next(f))},this._document=c}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Dt)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Dt)}startDragging(i,c){if(!(this._activeDragInstances.indexOf(i)>-1)&&(this._activeDragInstances.push(i),1===this._activeDragInstances.length)){const f=c.type.startsWith("touch");this._globalListeners.set(f?"touchend":"mouseup",{handler:S=>this.pointerUp.next(S),options:!0}).set("scroll",{handler:S=>this.scroll.next(S),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Dt}),f||this._globalListeners.set("mousemove",{handler:S=>this.pointerMove.next(S),options:Dt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((S,Y)=>{this._document.addEventListener(Y,S.handler,S.options)})})}}stopDragging(i){const c=this._activeDragInstances.indexOf(i);c>-1&&(this._activeDragInstances.splice(c,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(i){return this._activeDragInstances.indexOf(i)>-1}scrolled(i){const c=[this.scroll];return i&&i!==this._document&&c.push(new St.y(f=>this._ngZone.runOutsideAngular(()=>{const Y=$=>{this._activeDragInstances.length&&f.next($)};return i.addEventListener("scroll",Y,!0),()=>{i.removeEventListener("scroll",Y,!0)}}))),(0,pn.T)(...c)}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((i,c)=>{this._document.removeEventListener(c,i.handler,i.options)}),this._globalListeners.clear()}}return b.\u0275fac=function(i){return new(i||b)(e.LFG(e.R0b),e.LFG(t.K0))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Fi={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ut=(()=>{class b{constructor(i,c,f,S){this._document=i,this._ngZone=c,this._viewportRuler=f,this._dragDropRegistry=S}createDrag(i,c=Fi){return new Di(i,c,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(i){return new Pi(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return b.\u0275fac=function(i){return new(i||b)(e.LFG(t.K0),e.LFG(e.R0b),e.LFG(Ci),e.LFG(Mi))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Bt=new e.OlP("CDK_DRAG_PARENT"),kn=new e.OlP("CdkDropListGroup"),Nn=new e.OlP("CDK_DRAG_CONFIG");let Ai=0;const Un=new e.OlP("CdkDropList");let Ri=(()=>{class b{constructor(i,c,f,S,Y,$,pe){this.element=i,this._changeDetectorRef=f,this._scrollDispatcher=S,this._dir=Y,this._group=$,this._destroyed=new ze.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+Ai++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=c.createDropList(i),this._dropListRef.data=this,pe&&this._assignDefaults(pe),this._dropListRef.enterPredicate=(be,Re)=>this.enterPredicate(be.data,Re.data),this._dropListRef.sortPredicate=(be,Re,Je)=>this.sortPredicate(be,Re.data,Je.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),b._dropLists.push(this),$&&$._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(i){this._dropListRef.disabled=this._disabled=(0,g.Ig)(i)}addItem(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(i){this._unsortedItems.delete(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((i,c)=>i._dragRef.getVisibleElement().compareDocumentPosition(c._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const i=b._dropLists.indexOf(this);i>-1&&b._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(i){this._dir&&this._dir.change.pipe((0,Mt.O)(this._dir.value),(0,wt.R)(this._destroyed)).subscribe(c=>i.withDirection(c)),i.beforeStarted.subscribe(()=>{const c=(0,g.Eq)(this.connectedTo).map(f=>"string"==typeof f?b._dropLists.find(Y=>Y.id===f):f);if(this._group&&this._group._items.forEach(f=>{-1===c.indexOf(f)&&c.push(f)}),!this._scrollableParentsResolved){const f=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(S=>S.getElementRef().nativeElement);this._dropListRef.withScrollableParents(f),this._scrollableParentsResolved=!0}i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.sortingDisabled=(0,g.Ig)(this.sortingDisabled),i.autoScrollDisabled=(0,g.Ig)(this.autoScrollDisabled),i.autoScrollStep=(0,g.su)(this.autoScrollStep,2),i.connectedTo(c.filter(f=>f&&f!==this).map(f=>f._dropListRef)).withOrientation(this.orientation)})}_handleEvents(i){i.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(c=>{this.entered.emit({container:this,item:c.item.data,currentIndex:c.currentIndex})}),i.exited.subscribe(c=>{this.exited.emit({container:this,item:c.item.data}),this._changeDetectorRef.markForCheck()}),i.sorted.subscribe(c=>{this.sorted.emit({previousIndex:c.previousIndex,currentIndex:c.currentIndex,container:this,item:c.item.data})}),i.dropped.subscribe(c=>{this.dropped.emit({previousIndex:c.previousIndex,currentIndex:c.currentIndex,previousContainer:c.previousContainer.data,container:c.container.data,item:c.item.data,isPointerOverContainer:c.isPointerOverContainer,distance:c.distance,dropPoint:c.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(i){const{lockAxis:c,draggingDisabled:f,sortingDisabled:S,listAutoScrollDisabled:Y,listOrientation:$}=i;this.disabled=null!=f&&f,this.sortingDisabled=null!=S&&S,this.autoScrollDisabled=null!=Y&&Y,this.orientation=$||"vertical",c&&(this.lockAxis=c)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(i=>i._dragRef))}}return b._dropLists=[],b.\u0275fac=function(i){return new(i||b)(e.Y36(e.SBq),e.Y36(Ut),e.Y36(e.sBO),e.Y36(_i),e.Y36(vn,8),e.Y36(kn,12),e.Y36(Nn,8))},b.\u0275dir=e.lG2({type:b,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,c){2&i&&(e.uIk("id",c.id),e.ekj("cdk-drop-list-disabled",c.disabled)("cdk-drop-list-dragging",c._dropListRef.isDragging())("cdk-drop-list-receiving",c._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[e._Bn([{provide:kn,useValue:void 0},{provide:Un,useExisting:b}])]}),b})();const Zt=new e.OlP("CdkDragHandle");let Li=(()=>{class b{constructor(i,c){this.element=i,this._stateChanges=new ze.xQ,this._disabled=!1,this._parentDrag=c}get disabled(){return this._disabled}set disabled(i){this._disabled=(0,g.Ig)(i),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return b.\u0275fac=function(i){return new(i||b)(e.Y36(e.SBq),e.Y36(Bt,12))},b.\u0275dir=e.lG2({type:b,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[e._Bn([{provide:Zt,useExisting:b}])]}),b})();const ki=new e.OlP("CdkDragPlaceholder"),Ni=new e.OlP("CdkDragPreview");let Bi=(()=>{class b{constructor(i,c,f,S,Y,$,pe,be,Re,Je,We){this.element=i,this.dropContainer=c,this._ngZone=S,this._viewContainerRef=Y,this._dir=pe,this._changeDetectorRef=Re,this._selfHandle=Je,this._parentDrag=We,this._destroyed=new ze.xQ,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new St.y(st=>{const rt=this._dragRef.moved.pipe((0,Xn.U)(lt=>({source:this,pointerPosition:lt.pointerPosition,event:lt.event,delta:lt.delta,distance:lt.distance}))).subscribe(st);return()=>{rt.unsubscribe()}}),this._dragRef=be.createDrag(i,{dragStartThreshold:$&&null!=$.dragStartThreshold?$.dragStartThreshold:5,pointerDirectionChangeThreshold:$&&null!=$.pointerDirectionChangeThreshold?$.pointerDirectionChangeThreshold:5,zIndex:null==$?void 0:$.zIndex}),this._dragRef.data=this,b._dragInstances.push(this),$&&this._assignDefaults($),c&&(this._dragRef._withDropContainer(c._dropListRef),c.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(i){this._disabled=(0,g.Ig)(i),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,mn.q)(1),(0,wt.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(i){const c=i.rootElementSelector,f=i.freeDragPosition;c&&!c.firstChange&&this._updateRootElement(),f&&!f.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const i=b._dragInstances.indexOf(this);i>-1&&b._dragInstances.splice(i,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var i;const c=this.element.nativeElement;let f=c;this.rootElementSelector&&(f=void 0!==c.closest?c.closest(this.rootElementSelector):null===(i=c.parentElement)||void 0===i?void 0:i.closest(this.rootElementSelector)),this._dragRef.withRootElement(f||c)}_getBoundaryElement(){const i=this.boundaryElement;return i?"string"==typeof i?this.element.nativeElement.closest(i):(0,g.fI)(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){const c=this._dir,f=this.dragStartDelay,S=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,Y=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.dragStartDelay="object"==typeof f&&f?f:(0,g.su)(f),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(S).withPreviewTemplate(Y).withPreviewContainer(this.previewContainer||"global"),c&&i.withDirection(c.value)}}),i.beforeStarted.pipe((0,mn.q)(1)).subscribe(()=>{var c;if(this._parentDrag)return void i.withParent(this._parentDrag._dragRef);let f=this.element.nativeElement.parentElement;for(;f;){if(f.classList.contains("cdk-drag")){i.withParent((null===(c=b._dragInstances.find(S=>S.element.nativeElement===f))||void 0===c?void 0:c._dragRef)||null);break}f=f.parentElement}})}_handleEvents(i){i.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(()=>{this.released.emit({source:this})}),i.ended.subscribe(c=>{this.ended.emit({source:this,distance:c.distance,dropPoint:c.dropPoint}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(c=>{this.entered.emit({container:c.container.data,item:this,currentIndex:c.currentIndex})}),i.exited.subscribe(c=>{this.exited.emit({container:c.container.data,item:this})}),i.dropped.subscribe(c=>{this.dropped.emit({previousIndex:c.previousIndex,currentIndex:c.currentIndex,previousContainer:c.previousContainer.data,container:c.container.data,isPointerOverContainer:c.isPointerOverContainer,item:this,distance:c.distance,dropPoint:c.dropPoint})})}_assignDefaults(i){const{lockAxis:c,dragStartDelay:f,constrainPosition:S,previewClass:Y,boundaryElement:$,draggingDisabled:pe,rootElementSelector:be,previewContainer:Re}=i;this.disabled=null!=pe&&pe,this.dragStartDelay=f||0,c&&(this.lockAxis=c),S&&(this.constrainPosition=S),Y&&(this.previewClass=Y),$&&(this.boundaryElement=$),be&&(this.rootElementSelector=be),Re&&(this.previewContainer=Re)}_setupHandlesListener(){this._handles.changes.pipe((0,Mt.O)(this._handles),(0,qn.b)(i=>{const c=i.filter(f=>f._parentDrag===this).map(f=>f.element);this._selfHandle&&this.rootElementSelector&&c.push(this.element),this._dragRef.withHandles(c)}),(0,ei.w)(i=>(0,pn.T)(...i.map(c=>c._stateChanges.pipe((0,Mt.O)(c))))),(0,wt.R)(this._destroyed)).subscribe(i=>{const c=this._dragRef,f=i.element.nativeElement;i.disabled?c.disableHandle(f):c.enableHandle(f)})}}return b._dragInstances=[],b.\u0275fac=function(i){return new(i||b)(e.Y36(e.SBq),e.Y36(Un,12),e.Y36(t.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(Nn,8),e.Y36(vn,8),e.Y36(Ut),e.Y36(e.sBO),e.Y36(Zt,10),e.Y36(Bt,12))},b.\u0275dir=e.lG2({type:b,selectors:[["","cdkDrag",""]],contentQueries:function(i,c,f){if(1&i&&(e.Suo(f,Ni,5),e.Suo(f,ki,5),e.Suo(f,Zt,5)),2&i){let S;e.iGM(S=e.CRH())&&(c._previewTemplate=S.first),e.iGM(S=e.CRH())&&(c._placeholderTemplate=S.first),e.iGM(S=e.CRH())&&(c._handles=S)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,c){2&i&&e.ekj("cdk-drag-disabled",c.disabled)("cdk-drag-dragging",c._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[e._Bn([{provide:Bt,useExisting:b}]),e.TTD]}),b})(),Zi=(()=>{class b{}return b.\u0275fac=function(i){return new(i||b)},b.\u0275mod=e.oAB({type:b}),b.\u0275inj=e.cJS({providers:[Ut],imports:[xi]}),b})()},3290:(Te,se,s)=>{"use strict";s.d(se,{Vd:()=>B,a:()=>I,lQ:()=>H,wT:()=>C});var e=s(6435),t=s(9808),l=s(1086),g=s(591),m=s(3075);const n=new e.OlP("recaptcha-language"),j=new e.OlP("recaptcha-base-url"),Q=new e.OlP("recaptcha-nonce-tag"),R=new e.OlP("recaptcha-settings"),x=new e.OlP("recaptcha-v3-site-key"),O_loadScript=function P(y,z,r,d,u){window.ng2recaptchaloaded=()=>{z(grecaptcha)};const h=document.createElement("script");h.innerHTML="",h.src=`${d||"https://www.google.com/recaptcha/api.js"}?render=${y}&onload=ng2recaptchaloaded${r}`,u&&(h.nonce=u),h.async=!0,h.defer=!0,document.head.appendChild(h)};let _=(()=>{class y{constructor(r,d,u,h,M){this.platformId=r,this.language=d,this.baseUrl=u,this.nonce=h,this.v3SiteKey=M,this.init(),this.ready=(0,t.NF)(this.platformId)?y.ready.asObservable():(0,l.of)()}init(){if(!y.ready&&(0,t.NF)(this.platformId)){const r=new g.X(null);y.ready=r,O_loadScript(this.v3SiteKey||"explicit",h=>r.next(h),this.language?"&hl="+this.language:"",this.baseUrl,this.nonce)}}}return y.ready=null,y.\u0275fac=function(r){return new(r||y)(e.LFG(e.Lbi),e.LFG(n,8),e.LFG(j,8),e.LFG(Q,8),e.LFG(x,8))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac}),y})(),D=0,C=(()=>{class y{constructor(r,d,u,h){this.elementRef=r,this.loader=d,this.zone=u,this.id="ngrecaptcha-"+D++,this.errorMode="default",this.resolved=new e.vpe,this.error=new e.vpe,h&&(this.siteKey=h.siteKey,this.theme=h.theme,this.type=h.type,this.size=h.size,this.badge=h.badge)}ngAfterViewInit(){this.subscription=this.loader.ready.subscribe(r=>{null!=r&&r.render instanceof Function&&(this.grecaptcha=r,this.renderRecaptcha())})}ngOnDestroy(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()}execute(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)}reset(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())}get __unsafe_widgetValue(){return null!=this.widget?this.grecaptcha.getResponse(this.widget):null}expired(){this.resolved.emit(null)}errored(r){this.error.emit(r)}captchaResponseCallback(r){this.resolved.emit(r)}grecaptchaReset(){null!=this.widget&&this.zone.runOutsideAngular(()=>this.grecaptcha.reset(this.widget))}renderRecaptcha(){const r={badge:this.badge,callback:d=>{this.zone.run(()=>this.captchaResponseCallback(d))},"expired-callback":()=>{this.zone.run(()=>this.expired())},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};"handled"===this.errorMode&&(r["error-callback"]=(...d)=>{this.zone.run(()=>this.errored(d))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,r),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())}}return y.\u0275fac=function(r){return new(r||y)(e.Y36(e.SBq),e.Y36(_),e.Y36(e.R0b),e.Y36(R,8))},y.\u0275cmp=e.Xpm({type:y,selectors:[["re-captcha"]],hostVars:1,hostBindings:function(r,d){2&r&&e.uIk("id",d.id)},inputs:{id:"id",siteKey:"siteKey",theme:"theme",type:"type",size:"size",tabIndex:"tabIndex",badge:"badge",errorMode:"errorMode"},outputs:{resolved:"resolved",error:"error"},exportAs:["reCaptcha"],decls:0,vars:0,template:function(r,d){},encapsulation:2}),y})(),E=(()=>{class y{}return y.\u0275fac=function(r){return new(r||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({}),y})(),I=(()=>{class y{}return y.\u0275fac=function(r){return new(r||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({providers:[_],imports:[[E]]}),y})(),B=(()=>{class y{constructor(r){this.host=r,this.requiresControllerReset=!1}writeValue(r){r?this.host.__unsafe_widgetValue!==r&&!1===Boolean(this.host.__unsafe_widgetValue)&&(this.requiresControllerReset=!0):this.host.reset()}registerOnChange(r){this.onChange=r,this.requiresControllerReset&&(this.requiresControllerReset=!1,this.onChange(null))}registerOnTouched(r){this.onTouched=r}onResolve(r){this.onChange&&this.onChange(r),this.onTouched&&this.onTouched()}}return y.\u0275fac=function(r){return new(r||y)(e.Y36(C))},y.\u0275dir=e.lG2({type:y,selectors:[["re-captcha","formControlName",""],["re-captcha","formControl",""],["re-captcha","ngModel",""]],hostBindings:function(r,d){1&r&&e.NdJ("resolved",function(h){return d.onResolve(h)})},features:[e._Bn([{multi:!0,provide:m.JU,useExisting:(0,e.Gpc)(()=>y)}])]}),y})(),H=(()=>{class y{}return y.\u0275fac=function(r){return new(r||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[[m.u5,E]]}),y})()},7295:(Te,se,s)=>{"use strict";s.d(se,{Tm:()=>x,i3:()=>Q});var e=s(6435),t=s(9808);const l=["video"],g=["canvas"];function m(_,D){if(1&_){const C=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){return e.CHM(C),e.oxw().rotateVideoInput(!0)}),e.qZA()}}class n{constructor(D,C,E){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=C,this._imageAsDataUrl=D,this._imageData=E}static getDataFromDataUrl(D,C){return D.replace(`data:${C};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=n.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}let Q=(()=>{class _{constructor(){this.width=640,this.height=480,this.videoOptions=_.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=_.DEFAULT_IMAGE_TYPE,this.imageQuality=_.DEFAULT_IMAGE_QUALITY,this.imageCapture=new e.vpe,this.initError=new e.vpe,this.imageClick=new e.vpe,this.cameraSwitched=new e.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(C){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=C.subscribe(()=>{this.takeSnapshot()})}set switchCamera(C){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=C.subscribe(E=>{"string"==typeof E?this.switchToVideoInput(E):this.rotateVideoInput(!1!==E)})}static getMediaConstraintsForDevice(C,E){const I=E||this.DEFAULT_VIDEO_OPTIONS;return C&&(I.deviceId={exact:C}),I}static getDeviceIdFromMediaStreamTrack(C){if(C.getSettings&&C.getSettings()&&C.getSettings().deviceId)return C.getSettings().deviceId;if(C.getConstraints&&C.getConstraints()&&C.getConstraints().deviceId){const E=C.getConstraints().deviceId;return _.getValueFromConstrainDOMString(E)}}static getFacingModeFromMediaStreamTrack(C){if(C){if(C.getSettings&&C.getSettings()&&C.getSettings().facingMode)return C.getSettings().facingMode;if(C.getConstraints&&C.getConstraints()&&C.getConstraints().facingMode){const E=C.getConstraints().facingMode;return _.getValueFromConstrainDOMString(E)}}}static isUserFacing(C){const E=_.getFacingModeFromMediaStreamTrack(C);return!!E&&"user"===E.toLowerCase()}static getValueFromConstrainDOMString(C){if(C){if(C instanceof String)return String(C);if(Array.isArray(C)&&Array(C).length>0)return String(C[0]);if("object"==typeof C){if(C.exact)return String(C.exact);if(C.ideal)return String(C.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(C=>{this.initError.next({message:C}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const C=this.nativeVideoElement,E={width:this.width,height:this.height};C.videoWidth&&(E.width=C.videoWidth,E.height=C.videoHeight);const I=this.canvas.nativeElement;I.width=E.width,I.height=E.height;const L=I.getContext("2d");L.drawImage(C,0,0);const N=this.imageType?this.imageType:_.DEFAULT_IMAGE_TYPE,H=I.toDataURL(N,this.imageQuality?this.imageQuality:_.DEFAULT_IMAGE_QUALITY);let y=null;this.captureImageData&&(y=L.getImageData(0,0,I.width,I.height)),this.imageCapture.next(new n(H,N,y))}rotateVideoInput(C){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(C?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(C){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(C,this.videoOptions)}videoResize(){}get videoWidth(){const C=this.getVideoAspectRatio();return Math.min(this.width,this.height*C)}get videoHeight(){const C=this.getVideoAspectRatio();return Math.min(this.height,this.width/C)}get videoStyleClasses(){let C="";return this.isMirrorImage()&&(C+="mirrored "),C.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const C=this.nativeVideoElement;return C.videoWidth&&C.videoWidth>0&&C.videoHeight&&C.videoHeight>0?C.videoWidth/C.videoHeight:this.width/this.height}initWebcam(C,E){const I=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const L=_.getMediaConstraintsForDevice(C,E);navigator.mediaDevices.getUserMedia({video:L}).then(N=>{this.mediaStream=N,I.srcObject=N,I.play(),this.activeVideoSettings=N.getVideoTracks()[0].getSettings();const B=_.getDeviceIdFromMediaStreamTrack(N.getVideoTracks()[0]);this.cameraSwitched.next(B),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=B?this.availableVideoInputs.findIndex(H=>H.deviceId===B):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(N=>{this.initError.next({message:N.message,mediaStreamError:N})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let C="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?C=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(C=this.mirrorImage.x.toLowerCase())),C){case"always":return!0;case"never":return!1}}return _.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(C=>C.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((C,E)=>{(class j{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((D,C)=>{navigator.mediaDevices.enumerateDevices().then(E=>{D(E.filter(I=>"videoinput"===I.kind))}).catch(E=>{C(E.message||E)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(I=>{this.availableVideoInputs=I,C(I)}).catch(I=>{this.availableVideoInputs=[],E(I)})})}}return _.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},_.DEFAULT_IMAGE_TYPE="image/jpeg",_.DEFAULT_IMAGE_QUALITY=.92,_.\u0275fac=function(C){return new(C||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["webcam"]],viewQuery:function(C,E){if(1&C&&(e.Gf(l,7),e.Gf(g,7)),2&C){let I;e.iGM(I=e.CRH())&&(E.video=I.first),e.iGM(I=e.CRH())&&(E.canvas=I.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(C,E){1&C&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return E.imageClick.next()}),e.TgZ(1,"video",1,2),e.NdJ("resize",function(){return E.videoResize()}),e.qZA(),e.YNc(3,m,1,0,"div",3),e._UZ(4,"canvas",4,5),e.qZA()),2&C&&(e.xp6(1),e.Tol(E.videoStyleClasses),e.Q6J("width",E.videoWidth)("height",E.videoHeight),e.xp6(2),e.Q6J("ngIf",E.allowCameraSwitch&&E.availableVideoInputs.length>1&&E.videoInitialized),e.xp6(1),e.Q6J("width",E.width)("height",E.height))},directives:[t.O5],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),_})(),x=(()=>{class _{}return _.\u0275fac=function(C){return new(C||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[[t.ez]]}),_})()}}]);