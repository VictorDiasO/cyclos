"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([["src_app_ui_dashboard_dashboard_module_ts"],{7045:(Q,y,c)=>{c.d(y,{$:()=>_});var _=(()=>{return(m=_||(_={})).SIMPLE="simple",m.WEBSHOP="webshop",_;var m})()},2180:(Q,y,c)=>{c.d(y,{H:()=>E});var _=c(6163),m=c(6435),F=c(6890);let E=(()=>{class T{constructor(O){this.formatService=O}transform(O,R,I=!1){return this.formatService.formatAsCurrency(R,O,(0,_.Iw)(I))}}return T.\u0275fac=function(O){return new(O||T)(m.Y36(F.H,16))},T.\u0275pipe=m.Yjl({name:"currency",type:T,pure:!0}),T})()},3030:(Q,y,c)=>{c.d(y,{u:()=>F});var _=c(6435),m=c(6890);let F=(()=>{class E{constructor(r){this.formatService=r}transform(r){return this.formatService.formatAsDate(r)}}return E.\u0275fac=function(r){return new(r||E)(_.Y36(m.H,16))},E.\u0275pipe=_.Yjl({name:"date",type:E,pure:!0}),E})()},5041:(Q,y,c)=>{c.r(y),c.d(y,{DashboardModule:()=>On});var _=c(5300),m=c(4746),F=c(2771),E=c(2462),T=c(686),r=c(853),O=c(7045),R=c(1879),I=c(5466),x=c(7e3),ot=c(2614),o=c(6243),it=c(2340),ct=c(6066),W=c(1086),V=c(7545),t=c(6435),rt=c(3410),lt=c(8571),ut=c(9474),dt=c(7055),h=c(9808),pt=c(1963),ht=c(2525),gt=c(2089),j=c(6163),G=c(7947),J=c(591);let Z=(()=>{class e extends G.H{constructor(){super(...arguments),this.classItem=!0,this.fullWidth=!1,this.headingActions$=new J.X(null)}get headingActions(){return this.headingActions$.value}set headingActions(n){this.headingActions$.next(n)}}return e.\u0275fac=function(){let s;return function(a){return(s||(s=t.n5z(e)))(a||e)}}(),e.\u0275dir=t.lG2({type:e,hostVars:4,hostBindings:function(n,a){2&n&&t.ekj("dashboard-item",a.classItem)("dashboard-item-full",a.fullWidth)},features:[t.qOj]}),e})();var D=c(9641),mt=c(9746),N=c(2032),_t=c(70);const ft=function(e,s){return{shortcut:e,label:s}};function xt(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(2).$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.i18n.dashboard.quickAccessShortcutTemplate(t.WLB(1,ft,a.shortcutKey(n),n.label))," ")}}function vt(e,s){if(1&e&&t._uU(0),2&e){const n=t.oxw(2).$implicit;t.hij(" ",n.label," ")}}const At=function(e){return[e]};function St(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",5),t.ALo(1,"async"),t.TgZ(2,"a",6,7),t.NdJ("click",function(i){t.CHM(n);const u=t.MAs(3),g=t.oxw().$implicit,p=t.oxw();return p.navigate(g,i),p.blurIfClick(u,i)}),t.TgZ(4,"div",8),t._UZ(5,"icon",9),t.qZA(),t.TgZ(6,"div",10),t.YNc(7,xt,2,4,"ng-container",11),t.YNc(8,vt,1,1,"ng-template",null,12,t.W1O),t.qZA()()()}if(2&e){const n=t.MAs(9),a=t.oxw().$implicit,i=t.oxw();t.Q6J("ngClass",t.lcZ(1,5,i.itemClass$)),t.xp6(2),t.uIk("href",i.router.createUrlTree(t.VKq(7,At,a.url||a.entry.url)),t.LSH),t.xp6(3),t.Q6J("icon",a.icon),t.xp6(2),t.Q6J("ngIf",i.shortcutKey(a))("ngIfElse",n)}}function Et(e,s){if(1&e&&(t.ynx(0),t.YNc(1,St,10,9,"div",4),t.BQk()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("ngIf",n.entry)}}let Tt=(()=>{class e extends Z{constructor(n,a,i){super(n),this.menu=a,this.breadcrumb=i,this.blurIfClick=j.XQ,this.itemClass$=new J.X(null)}ngOnInit(){super.ngOnInit(),this.layout.gtsm&&this.dataForFrontendHolder.dataForFrontend.canManageQuickAccess&&(this.headingActions=[new I.Yu(R.l.Gear,this.i18n.dashboard.customizeQuickAccess,a=>this.menu.navigate({menu:new o.oX(o.v2.QUICK_ACCESS_SETTINGS),clear:!1,event:a}),!0)]),this.addShortcut(gt.ki,a=>{(0,j.Ku)(this.layout,this.element,a,{horizontalOffset:1,verticalOffset:2})});for(let a=0;a<9&&a<this.actions.length;a++){const i=this.actions[a];this.addShortcut(String(a+1),u=>{if(this.layout.gtxs)return!1;this.navigate(i,u)})}this.updateItemClass(this.layout.activeBreakpoints),this.addSub(this.layout.breakpointChanges$.subscribe(a=>this.updateItemClass(a))),this.fullWidth=this.actions.length>6}updateItemClass(n){const a=n.has("lt-sm")?2:n.has("sm")?3:n.has("md")?5:n.has("lg")?6:8,i=this.actions.length;let u;if(i<=6)u=Math.min(a,3);else{const g=Math.ceil(1*i/a);u=Math.ceil(i/g)}this.itemClass$.next(`quick-access-item-container-${u}`)}navigate(n,a){if(n.onClick)a&&(a.stopPropagation(),a.preventDefault()),n.onClick();else{this.breadcrumb.clear(),this.breadcrumb.breadcrumb$.next(["/"]);let i={clear:!1,event:a};n.url?(i.url=n.url,i.menu=n.entry.activeMenu):i.entry=n.entry,this.menu.navigate(i)}}shortcutKey(n){if(this.layout.xxs){const a=this.actions.indexOf(n);if(a>=0&&a<9)return String(a+1)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3),t.Y36(D.h),t.Y36(mt.p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["quick-access"]],inputs:{data:"data",actions:"actions"},features:[t.qOj],decls:6,vars:8,consts:[["hideBack","",3,"heading","mode","headingActions"],[1,"quick-access"],[1,"quick-access-container"],[4,"ngFor","ngForOf"],["class","quick-access-item-container",3,"ngClass",4,"ngIf"],[1,"quick-access-item-container",3,"ngClass"],[1,"quick-access-item",3,"click"],["anchor",""],[1,"quick-access-icon"],["size","2.2rem",3,"icon"],[1,"quick-access-text"],[4,"ngIf","ngIfElse"],["plainLabel",""]],template:function(n,a){1&n&&(t.TgZ(0,"page-content",0),t.ALo(1,"async"),t.ALo(2,"async"),t.TgZ(3,"div",1)(4,"div",2),t.YNc(5,Et,2,1,"ng-container",3),t.qZA()()()),2&n&&(t.Q6J("heading",a.i18n.dashboard.quickAccess)("mode",t.lcZ(1,4,a.layout.xxs$)?"fullHeightTight":"tight")("headingActions",t.lcZ(2,6,a.headingActions$)),t.xp6(5),t.Q6J("ngForOf",a.actions))},directives:[N.Y,h.sg,h.O5,h.mk,_t.o],pipes:[h.Ov],encapsulation:2,changeDetection:0}),e})();var Ct=c(2568),bt=c(2113),yt=c.n(bt),Ot=c(1715),wt=c(3489);class kt{constructor(s,n){this.predicate=s,this.inclusive=n}call(s,n){return n.subscribe(new Rt(s,this.predicate,this.inclusive))}}class Rt extends wt.L{constructor(s,n,a){super(s),this.predicate=n,this.inclusive=a,this.index=0}_next(s){const n=this.destination;let a;try{a=this.predicate(s,this.index++)}catch(i){return void n.error(i)}this.nextOrComplete(s,a)}nextOrComplete(s,n){const a=this.destination;Boolean(n)?a.next(s):(this.inclusive&&a.next(s),a.complete())}}var q=c(8397);function It(e,s){if(1&e&&(t.O4$(),t._UZ(0,"line",16)),2&e){const n=s.$implicit,a=t.oxw(2);t.uIk("x1",n)("x2",n)("y1",a.yMax)("y2",a.yMax+10)}}function Pt(e,s){if(1&e&&(t.O4$(),t._UZ(0,"line",17)),2&e){const n=s.$implicit,a=t.oxw(2);t.uIk("x1",a.xMin)("x2",a.xMin-10)("y1",n)("y2",n)}}function Nt(e,s){if(1&e&&(t.O4$(),t.TgZ(0,"text",18),t._uU(1),t.qZA()),2&e){const n=s.$implicit,a=s.index,i=t.oxw(2);t.uIk("x",i.xPoints[a])("y",i.yMax+22),t.xp6(1),t.Oqu(n)}}function Ft(e,s){if(1&e&&(t.O4$(),t.TgZ(0,"text",19),t._uU(1),t.qZA()),2&e){const n=s.$implicit,a=s.index,i=t.oxw(2);t.uIk("x",i.xMin-12)("y",i.yPoints[i.yPoints.length-a-1]),t.xp6(1),t.Oqu(n)}}function Zt(e,s){if(1&e&&(t.O4$(),t._UZ(0,"circle",20)),2&e){const n=s.$implicit;t.Q6J("tooltip",n.formattedValue),t.uIk("cx",n.x)("cy",n.y)}}function Dt(e,s){if(1&e&&(t.O4$(),t.TgZ(0,"svg",1)(1,"g",2),t._UZ(2,"line",3)(3,"line",4),t.qZA(),t.TgZ(4,"g",5),t.YNc(5,It,1,4,"line",6),t.YNc(6,Pt,1,4,"line",7),t.qZA(),t.TgZ(7,"g",8),t._UZ(8,"line",9),t.qZA(),t.TgZ(9,"g",10),t.YNc(10,Nt,2,3,"text",11),t.qZA(),t.TgZ(11,"g",12),t.YNc(12,Ft,2,3,"text",13),t.qZA(),t.TgZ(13,"g",14),t._UZ(14,"polyline"),t.YNc(15,Zt,1,3,"circle",15),t.qZA()()),2&e){const n=t.oxw();t.uIk("viewBox","0 0 "+n.width+" "+n.height),t.xp6(2),t.uIk("x1",n.xMin)("x2",n.xMax)("y1",n.yMax)("y2",n.yMax),t.xp6(1),t.uIk("x1",n.xMin)("x2",n.xMin)("y1",n.yMin)("y2",n.yMax),t.xp6(2),t.Q6J("ngForOf",n.xPoints),t.xp6(1),t.Q6J("ngForOf",n.yPoints),t.xp6(4),t.Q6J("ngForOf",n.xLabels),t.xp6(2),t.Q6J("ngForOf",n.yLabels),t.xp6(2),t.uIk("points",n.linePoints),t.xp6(1),t.Q6J("ngForOf",n.data)}}let z=(()=>{class e extends G.H{constructor(n){super(n),this.initialized$=new J.X(!1)}ngAfterViewInit(){const n=this.element;this.addSub((0,Ot.F)(50).pipe(function Mt(e,s=!1){return n=>n.lift(new kt(e,s))}(()=>!this.initialized$.value)).subscribe(()=>{const a=n.getBoundingClientRect();a.width>0&&(this.init(a),this.initialized$.next(!0))}))}init(n){var a;this.width=n.width,this.height=n.height,this.xMax=this.width-20,this.yMin=15,this.yMax=this.height-40;const i=this.account.account.currency,u=(null===(a=this.account)||void 0===a?void 0:a.balanceHistory)||[];if(u.length<=1)return;const g=u.map(d=>parseFloat(d.amount));let p=Math.max(...g),f=Math.min(...g),w=p-f,P=String(Math.floor(w));P.startsWith("-")&&(P=P.substring(1));const C=Math.pow(10,Math.max(0,P.length-2));p=Math.floor(p/C)*C+C,f=Math.floor(f/C)*C,w=p-f;const Y=this.yMax-this.yMin,H=d=>((d>p||d<f)&&console.error(`Bad range! Expected from ${f} to ${p}, got ${d}`),this.yMax-(d-f)*Y/w),$=new Set(g).size,U=Math.min(3,$);this.yPoints=[],this.yLabels=[];const L=w/U;for(let d=0;d<=U;d++){const v=L*d+f;this.yPoints.push(H(v)),this.yLabels.unshift(this.format.formatAsNumber(v,0))}this.xLabels=u.map(d=>this.format.shortMonthName(yt()(d.date).month()));const S=Math.max(...this.yLabels.map(d=>d.length));this.xMin=20+7*S;const l=(this.xMax-this.xMin)/(u.length-1);this.xPoints=[];for(let d=0;d<=u.length-1;d++)this.xPoints.push(this.xMin+d*l);this.data=u.map((d,v)=>{const M=parseFloat(d.amount);return{x:this.xPoints[v],y:H(M),value:M,formattedValue:this.format.formatAsCurrency(i,d.amount)}}),this.linePoints="",this.data.forEach(d=>this.linePoints+=` ${d.x},${d.y}`),this.linePoints=this.linePoints.trim()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3))},e.\u0275cmp=t.Xpm({type:e,selectors:[["balance-history-graph"]],inputs:{account:"account"},features:[t.qOj],decls:2,vars:3,consts:[["version","1.2","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","aria-labelledby","title","role","img",4,"ngIf"],["version","1.2","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","aria-labelledby","title","role","img"],[1,"axes"],[1,"x-axis"],[1,"y-axis"],[1,"ticks"],["class","x-tick",4,"ngFor","ngForOf"],["class","y-tick",4,"ngFor","ngForOf"],[1,"grid","y-grid"],["x1","90","x2","705","y1","370","y2","370"],[1,"labels","x-labels"],["text-anchor","middle","dominant-baseline","end",4,"ngFor","ngForOf"],[1,"labels","y-labels"],["text-anchor","end","dominant-baseline","middle",4,"ngFor","ngForOf"],[1,"data"],["r","4",3,"tooltip",4,"ngFor","ngForOf"],[1,"x-tick"],[1,"y-tick"],["text-anchor","middle","dominant-baseline","end"],["text-anchor","end","dominant-baseline","middle"],["r","4",3,"tooltip"]],template:function(n,a){1&n&&(t.YNc(0,Dt,16,15,"svg",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,a.initialized$))},directives:[h.O5,h.sg,q.i9],pipes:[h.Ov],encapsulation:2,changeDetection:0}),e})();var K=c(2180),Ut=c(3030);const Yt=function(e,s){return{negative:e,positive:s}};function Ht(e,s){if(1&e&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t._uU(4),t.ALo(5,"currency"),t.qZA()()),2&e){const n=t.oxw();t.xp6(2),t.Oqu(n.i18n.account.balance),t.xp6(1),t.Q6J("ngClass",t.WLB(6,Yt,n.format.isNegative(n.balance),n.format.isPositive(n.balance))),t.xp6(1),t.hij(" ",t.xi3(5,3,n.balance,n.currency)," ")}}function Lt(e,s){1&e&&t.GkF(0)}const tt=function(e){return{"border-0":e}},Qt=function(e,s,n){return{negative:e,positive:s,"border-0":n}};function Jt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"tr",14),t.NdJ("click",function(i){const g=t.CHM(n).$implicit;return t.oxw(3).viewTransfer(g,i)}),t.TgZ(1,"td",15),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td",16)(5,"div",17),t._uU(6),t.qZA()(),t.TgZ(7,"td",18),t._uU(8),t.ALo(9,"currency"),t.qZA()()}if(2&e){const n=s.$implicit,a=s.last,i=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(11,tt,a)),t.xp6(1),t.hij(" ",t.lcZ(3,6,n.date)," "),t.xp6(2),t.Q6J("ngClass",t.VKq(13,tt,a)),t.xp6(2),t.Oqu(i.subjectName(n)),t.xp6(1),t.Q6J("ngClass",t.kEZ(15,Qt,i.format.isNegative(n.amount),i.format.isPositive(n.amount),a)),t.xp6(1),t.hij(" ",t.xi3(9,8,n.amount,i.currency)," ")}}function Bt(e,s){if(1&e&&(t.TgZ(0,"table",12),t.YNc(1,Jt,10,19,"tr",13),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.account.lastTransfers)}}function $t(e,s){if(1&e&&t._uU(0),2&e){const n=t.oxw(2);t.hij(" ",n.i18n.dashboard.noPayments," ")}}function Xt(e,s){if(1&e&&(t.TgZ(0,"div",8)(1,"h3",9),t._uU(2),t.qZA(),t.YNc(3,Bt,2,1,"table",10),t.YNc(4,$t,1,1,"ng-template",null,11,t.W1O),t.qZA()),2&e){const n=t.MAs(5),a=t.oxw();t.xp6(2),t.Oqu(a.i18n.dashboard.lastPayments),t.xp6(1),t.Q6J("ngIf",a.account.lastTransfers.length>0)("ngIfElse",n)}}let Wt=(()=>{class e extends Z{constructor(n,a,i){super(n),this.bankingHelper=a,this.menu=i}get type(){return this.account.account.type}get currency(){return this.account.account.currency}get balance(){return this.account.balance}ngOnInit(){var n;if(super.ngOnInit(),this.title=1===this.bankingHelper.ownerAccountTypes().length?this.i18n.dashboard.accountStatus:this.type.name,(null===(n=this.account.balanceHistory)||void 0===n?void 0:n.length)>0){const i=u=>this.format.formatAsCurrency(this.account.account.currency,u);this.chartData=this.account.balanceHistory.map(u=>({label:this.format.formatAsDate(u.date),value:parseFloat(u.amount),formatter:i}))}this.headingActions=[new I.Yu(R.l.Search,this.i18n.general.view,i=>this.menu.navigate({entry:this.menu.accountEntry(this.type),clear:!1,event:i}),!0)]}subjectName(n){return n.relatedName||this.bankingHelper.subjectName(n.relatedAccount)}viewTransfer(n,a){const i=this.bankingHelper.transactionNumberOrId(n);this.menu.navigate({url:`/banking/transfer/${this.account.account.id}/${i}`,menu:new o.oX(o.v2.ACCOUNT_HISTORY,{accountType:this.type}),clear:!1,event:a})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3),t.Y36(Ct.J),t.Y36(D.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["account-status"]],inputs:{account:"account"},features:[t.qOj],decls:6,vars:6,consts:[["hideBack","",3,"heading","mobileHeading","headingActions"],["class","balance",4,"ngIf"],[3,"account"],[4,"ngTemplateOutlet"],["transfersTpl",""],[1,"balance"],[1,"balance-label"],[1,"balance-value",3,"ngClass"],[1,"flex-grow-1","d-flex","flex-column","justify-content-end"],[1,"last-transfers"],["class","table table-fixed table-hover table-auto-height mb-0 cursor-pointer",4,"ngIf","ngIfElse"],["noTransfers",""],[1,"table","table-fixed","table-hover","table-auto-height","mb-0","cursor-pointer"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"text-left","pl-0","text-muted",2,"width","20%",3,"ngClass"],[1,"text-center","text-muted",2,"width","55%",3,"ngClass"],[1,"single-line"],[1,"text-right",2,"width","25%",3,"ngClass"]],template:function(n,a){if(1&n&&(t.TgZ(0,"page-content",0),t.YNc(1,Ht,6,9,"div",1),t._UZ(2,"balance-history-graph",2),t.YNc(3,Lt,1,0,"ng-container",3),t.qZA(),t.YNc(4,Xt,6,3,"ng-template",null,4,t.W1O)),2&n){const i=t.MAs(5);t.Q6J("heading",a.title)("mobileHeading",a.i18n.account.mobileTitle.account)("headingActions",a.headingActions),t.xp6(1),t.Q6J("ngIf",a.balance),t.xp6(1),t.Q6J("account",a.account),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}},directives:[N.Y,h.O5,h.mk,z,h.tP,h.sg],pipes:[K.H,Ut.u],encapsulation:2,changeDetection:0}),e})();function Vt(e,s){1&e&&t._UZ(0,"div",11)}const jt=function(e,s){return{negative:e,positive:s}};function Gt(e,s){if(1&e&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw().$implicit,a=t.oxw();t.Q6J("ngClass",t.WLB(5,jt,a.format.isNegative(n.balance),a.format.isPositive(n.balance))),t.xp6(1),t.hij(" ",t.xi3(2,2,n.balance,n.account.currency)," ")}}function qt(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.YNc(1,Vt,1,0,"div",3),t.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"a",7),t.NdJ("click",function(i){const g=t.CHM(n).$implicit,p=t.oxw();return p.menu.navigate({entry:p.menu.accountEntry(g.account.type),clear:!1,event:i})}),t._uU(6),t.qZA()(),t.YNc(7,Gt,3,8,"div",8),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"balance-history-graph",10),t.qZA()(),t.BQk()}if(2&e){const n=s.$implicit,a=s.index,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.lineBreak(a)),t.xp6(1),t.Q6J("ngClass",i.cellClass(a)),t.xp6(3),t.Q6J("tooltip",n.account.type.name),t.xp6(1),t.hij(" ",n.account.type.name," "),t.xp6(1),t.Q6J("ngIf",n.balance),t.xp6(2),t.Q6J("account",n)}}let zt=(()=>{class e extends Z{constructor(n,a){super(n),this.menu=a}isFull(n){return this.accounts.length<3||3===this.accounts.length&&0===n}cellClass(n){return this.isFull(n)?"col-12":"col-6"}chartWidth(n){return this.isFull(n)?600:320}chartHeight(n){return this.isFull(n)?120:140}lineBreak(n){switch(this.accounts.length){case 2:case 3:return 1==n;case 4:return 2==n;default:return!1}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3),t.Y36(D.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["combined-account-status"]],inputs:{accounts:"accounts"},features:[t.qOj],decls:3,vars:2,consts:[["hideBack","",3,"heading"],[1,"row","no-gutters","flex-grow-1"],[4,"ngFor","ngForOf"],["class","mt-1 col-12",4,"ngIf"],[1,"col",3,"ngClass"],[1,"balance"],[1,"balance-label"],["href","#",1,"account-name",3,"tooltip","click"],["class","balance-value",3,"ngClass",4,"ngIf"],[1,"px-3"],[3,"account"],[1,"mt-1","col-12"],[1,"balance-value",3,"ngClass"]],template:function(n,a){1&n&&(t.TgZ(0,"page-content",0)(1,"div",1),t.YNc(2,qt,10,6,"ng-container",2),t.qZA()()),2&n&&(t.Q6J("heading",a.i18n.dashboard.accounts),t.xp6(2),t.Q6J("ngForOf",a.accounts))},directives:[N.Y,h.sg,h.O5,h.mk,q.i9,z],pipes:[K.H],encapsulation:2,changeDetection:0}),e})();var nt=c(867);function Kt(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",4)(2,"a",5),t.NdJ("click",function(i){const g=t.CHM(n).$implicit;return t.oxw().navigate(g,i)}),t.TgZ(3,"div",6)(4,"div",7),t._UZ(5,"avatar",8),t.qZA()(),t.TgZ(6,"div",9),t._uU(7),t.qZA()()(),t.BQk()}if(2&e){const n=s.$implicit,a=t.oxw();t.xp6(2),t.Q6J("routerLink",a.path(n)),t.xp6(3),t.Q6J("roundBorders",!1)("image",n.image),t.xp6(1),t.Q6J("title",n.name),t.xp6(1),t.hij(" ",n.name," ")}}let tn=(()=>{class e extends Z{constructor(n,a){super(n),this.menu=a,this.classIconResult=!0}ngOnInit(){super.ngOnInit(),this.headingActions=[new I.Yu(R.l.Search,this.i18n.general.view,n=>this.menu.navigate({menu:new o.oX(o.v2.SEARCH_ADS),url:"/marketplace/search?latest=true",clear:!1,event:n}),!0)]}path(n){return`/marketplace/view/${n.id}`}navigate(n,a){this.menu.navigate({url:this.path(n),menu:new o.oX(o.v2.SEARCH_ADS),clear:!1,event:a})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3),t.Y36(D.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["latest-ads"]],hostVars:2,hostBindings:function(n,a){2&n&&t.ekj("dashboard-icon-result",a.classIconResult)},inputs:{ads:"ads"},features:[t.qOj],decls:5,vars:5,consts:[["hideBack","",3,"heading","headingActions"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12","col-xs-6","col-sm-4"],[1,"d-flex","flex-column","undecorated",3,"routerLink","click"],[1,"text-center"],[1,"images"],["size","xlarge",1,"main-image",3,"roundBorders","image"],[1,"content-text",3,"title"]],template:function(n,a){1&n&&(t.TgZ(0,"page-content",0),t.ALo(1,"async"),t.TgZ(2,"div",1)(3,"div",2),t.YNc(4,Kt,8,5,"ng-container",3),t.qZA()()()),2&n&&(t.Q6J("heading",a.i18n.dashboard.latestAds)("headingActions",t.lcZ(1,3,a.headingActions$)),t.xp6(4),t.Q6J("ngForOf",a.ads))},directives:[N.Y,h.sg,_.yS,nt.A],pipes:[h.Ov],encapsulation:2,changeDetection:0}),e})();function nn(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",4)(2,"a",5),t.NdJ("click",function(i){const g=t.CHM(n).$implicit;return t.oxw().navigate(g,i)}),t.TgZ(3,"div",6)(4,"div",7),t._UZ(5,"avatar",8),t.qZA()(),t.TgZ(6,"div",9),t._uU(7),t.qZA()()(),t.BQk()}if(2&e){const n=s.$implicit,a=t.oxw();t.xp6(2),t.Q6J("routerLink",a.path(n)),t.xp6(3),t.Q6J("roundBorders",!1)("image",n.image),t.xp6(1),t.Q6J("title",n.display),t.xp6(1),t.hij(" ",n.display," ")}}let en=(()=>{class e extends Z{constructor(n,a){super(n),this.menu=a,this.classIconResult=!0}ngOnInit(){super.ngOnInit(),this.headingActions=[new I.Yu(R.l.Search,this.i18n.general.view,n=>this.menu.navigate({menu:new o.oX(o.v2.SEARCH_USERS),clear:!1,event:n}),!0)]}path(n){return`/users/${n.id}/profile`}navigate(n,a){this.menu.navigate({url:this.path(n),menu:new o.oX(o.v2.SEARCH_USERS),clear:!1,event:a})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3),t.Y36(D.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["latest-users"]],hostVars:2,hostBindings:function(n,a){2&n&&t.ekj("dashboard-icon-result",a.classIconResult)},inputs:{users:"users"},features:[t.qOj],decls:5,vars:5,consts:[["hideBack","",3,"heading","headingActions"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12","col-xs-6","col-lg-4"],[1,"d-flex","flex-column","undecorated",3,"routerLink","click"],[1,"text-center"],[1,"images"],["size","xlarge",1,"main-image",3,"roundBorders","image"],[1,"content-text",3,"title"]],template:function(n,a){1&n&&(t.TgZ(0,"page-content",0),t.ALo(1,"async"),t.TgZ(2,"div",1)(3,"div",2),t.YNc(4,nn,8,5,"ng-container",3),t.qZA()()()),2&n&&(t.Q6J("heading",a.i18n.dashboard.latestUsers)("headingActions",t.lcZ(1,3,a.headingActions$)),t.xp6(4),t.Q6J("ngForOf",a.users))},directives:[N.Y,h.sg,_.yS,nt.A],pipes:[h.Ov],encapsulation:2,changeDetection:0}),e})();var an=c(3812),sn=c(3317);const B=function(){return["/personal","passwords"]};function on(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"notification",15),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"a",16),t.NdJ("click",function(i){return t.CHM(n),t.oxw(3).goToPasswords(i)}),t._uU(4),t.qZA()()}if(2&e){const n=s.$implicit,a=t.oxw(3);t.xp6(1),t.hij(" ",a.passwordMessage(n)," "),t.xp6(2),t.Q6J("routerLink",t.DdM(3,B)),t.xp6(1),t.hij(" ",a.i18n.dashboard.passwords.proceed," ")}}function cn(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"notification",15),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"a",16),t.NdJ("click",function(i){return t.CHM(n),t.oxw(3).goToPasswords(i)}),t._uU(4),t.qZA()()}if(2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.i18n.dashboard.passwords.totp," "),t.xp6(2),t.Q6J("routerLink",t.DdM(3,B)),t.xp6(1),t.hij(" ",n.i18n.dashboard.passwords.proceed," ")}}function rn(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"notification",15),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"a",16),t.NdJ("click",function(i){return t.CHM(n),t.oxw(3).goToPasswords(i)}),t._uU(4),t.qZA()()}if(2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.i18n.dashboard.passwords.securityAnswer," "),t.xp6(2),t.Q6J("routerLink",t.DdM(3,B)),t.xp6(1),t.hij(" ",n.i18n.dashboard.passwords.proceed," ")}}function ln(e,s){if(1&e&&(t.TgZ(0,"div",12),t.YNc(1,on,5,4,"notification",13),t.YNc(2,cn,5,4,"notification",14),t.YNc(3,rn,5,4,"notification",14),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.data.passwordsNeedingAttention),t.xp6(1),t.Q6J("ngIf",n.data.pendingTotp),t.xp6(1),t.Q6J("ngIf",n.data.pendingSecurityQuestion)}}function un(e,s){if(1&e&&t._UZ(0,"quick-access",17),2&e){const n=t.oxw(2);t.Q6J("data",n.data)("actions",n.actions)}}function dn(e,s){if(1&e&&t._UZ(0,"account-status",20),2&e){const n=t.oxw().$implicit;t.Q6J("account",n[0])}}function pn(e,s){if(1&e&&t._UZ(0,"combined-account-status",21),2&e){const n=t.oxw().$implicit;t.Q6J("accounts",n)}}function hn(e,s){if(1&e&&(t.ynx(0),t.YNc(1,dn,1,1,"account-status",18),t.YNc(2,pn,1,1,"combined-account-status",19),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.data.mergeAccounts),t.xp6(1),t.Q6J("ngIf",n.data.mergeAccounts)}}function gn(e,s){if(1&e&&t._UZ(0,"latest-ads",22),2&e){const n=t.oxw(2);t.Q6J("ads",n.data.latestAds)}}function mn(e,s){if(1&e&&t._UZ(0,"latest-users",23),2&e){const n=t.oxw(2);t.Q6J("users",n.data.latestUsers)}}function _n(e,s){1&e&&t.GkF(0)}const fn=function(e){return{"dashboard-item-full":e}};function xn(e,s){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,_n,1,0,"ng-container",25),t.qZA()),2&e){const n=t.oxw(2),a=t.MAs(3);t.Q6J("ngClass",t.VKq(2,fn,n.data.fullWidthContent)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function vn(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"page-layout",3)(2,"div",4),t.YNc(3,ln,4,3,"div",5),t.TgZ(4,"div",6),t.YNc(5,un,1,2,"quick-access",7),t.YNc(6,hn,3,2,"ng-container",8),t.YNc(7,gn,1,1,"latest-ads",9),t.YNc(8,mn,1,1,"latest-users",10),t.YNc(9,xn,2,4,"div",11),t.qZA()()(),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",(null==n.data.passwordsNeedingAttention?null:n.data.passwordsNeedingAttention.length)>0||n.data.pendingSecurityQuestion||n.data.pendingTotp),t.xp6(2),t.Q6J("ngIf",(null==n.actions?null:n.actions.length)>0),t.xp6(1),t.Q6J("ngForOf",n.accounts),t.xp6(1),t.Q6J("ngIf",n.data.showLatestAds),t.xp6(1),t.Q6J("ngIf",n.data.showLatestUsers),t.xp6(1),t.Q6J("ngIf",n.data.content)}}function An(e,s){if(1&e&&(t.TgZ(0,"page-content",28),t._UZ(1,"div",29),t.ALo(2,"trust"),t.qZA()),2&e){const n=t.oxw(2);t.Q6J("heading",n.data.content.title)("mobileHeading",n.data.content.title)("mode",n.data.content.layout===n.FrontendContentLayoutEnum.CARD_TIGHT?"tight":"normal"),t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,4,n.data.content.content),t.oJD)}}function Sn(e,s){if(1&e&&(t._UZ(0,"div",29),t.ALo(1,"trust")),2&e){const n=t.oxw(2);t.Q6J("innerHTML",t.lcZ(1,1,n.data.content.content),t.oJD)}}function En(e,s){if(1&e&&(t.YNc(0,An,3,6,"page-content",26),t.YNc(1,Sn,2,3,"div",27)),2&e){const n=t.oxw();t.Q6J("ngIf",n.data.content.layout!==n.FrontendContentLayoutEnum.FULL),t.xp6(1),t.Q6J("ngIf",n.data.content.layout===n.FrontendContentLayoutEnum.FULL)}}function Tn(e,s){1&e&&t._UZ(0,"spinner")}const Cn=[{path:"",component:(()=>{class e extends ot.y{constructor(n,a,i,u,g){super(n),this.frontendService=a,this.quickAccessHelper=i,this.iconLoadingService=u,this.runOperationHelper=g,this.FrontendContentLayoutEnum=F.K,this.pendingSecurityAnswer=!1}ngOnInit(){super.ngOnInit(),null!=this.login.user?this.addSub(this.frontendService.dataForFrontendHome({screenSize:this.layout.screenSize}).pipe((0,V.w)(n=>{var a;const i=null===(a=n.quickAccess)||void 0===a?void 0:a.map(u=>this.quickAccessHelper.iconAndLabel(u).icon).filter(u=>!!u);return 0===i.length?(0,W.of)(n):this.iconLoadingService.load(i,!1).pipe((0,V.w)(()=>(0,W.of)(n)))})).subscribe(n=>{this.data=n})):this.router.navigate(["/home"],{replaceUrl:!0})}onDataInitialized(n){if(n.accounts){const a=(0,ct.Z)(n.accounts,n.mergeAccounts?4:1);if(n.mergeAccounts&&a.length>1){const i=a[a.length-1],u=a[a.length-2];if(1===i.length){const g=u.splice(u.length-1,1);Array.prototype.unshift.apply(i,g)}}this.accounts=a}this.initDashboardActions(n)}updateTitleFrom(){return"menu"}passwordMessage(n){const a=n.type.name;switch(n.status){case m.M.EXPIRED:return this.i18n.dashboard.passwords.expired(a);case m.M.RESET:return this.i18n.dashboard.passwords.reset(a);case m.M.PENDING:return this.i18n.dashboard.passwords.pending(a);case m.M.NEVER_CREATED:return this.i18n.dashboard.passwords.neverCreated(a)}}goToPasswords(n){this.menu.navigate({menu:new o.oX(o.v2.PASSWORDS),event:n,clear:!1})}resolveMenu(){return o.v2.DASHBOARD}initDashboardActions(n){var a;this.actions=[];const g=this.dataForFrontendHolder.auth.permissions||{};this.layout.gtsm&&this.dataForFrontendHolder.dataForFrontend.canManageQuickAccess&&(this.headingActions=[new I.Yu(R.l.Gear,this.i18n.dashboard.customizeQuickAccess,S=>this.menu.navigate({menu:new o.oX(o.v2.QUICK_ACCESS_SETTINGS),clear:!1,event:S}),!0)]);const p=this.dataForFrontendHolder.role===E.g.ADMINISTRATOR,f=p?x.S.SYSTEM:x.S.SELF,w=new o.oX(p?o.v2.SEARCH_VOUCHERS:this.dataForFrontendHolder.dataForFrontend.voucherBuyingMenu==T.K.MARKETPLACE?o.v2.SEARCH_MY_VOUCHERS_MARKETPLACE:o.v2.SEARCH_MY_VOUCHERS_BANKING),P=new o.oX(o.v2.VOUCHER_TRANSACTIONS),C=new o.oX(o.v2.PAYMENT_REQUESTS),Y=new o.oX(o.v2.EXTERNAL_PAYMENTS),H=new o.oX(o.v2.SEARCH_USER_ADS),$=new o.oX(o.v2.SEARCH_USER_WEBSHOP),U=new o.oX(p?o.v2.SYSTEM_MESSAGES:o.v2.MESSAGES),L=new o.oX(o.v2.SEARCH_USERS);for(const S of n.quickAccess){const l=(d,v,M,X)=>{const k=this.menu.menuEntry(d);if(k){const b=this.quickAccessHelper.iconAndLabel(S);this.actions.push({icon:null==b?void 0:b.icon,label:null!=M?M:null==b?void 0:b.label,entry:k,onClick:v,url:X})}};switch(S.type){case r.P.ACCOUNT:const d=g.banking.accounts||[],v=d.filter(A=>this.layout.ltmd||A.visible&&!A.viewStatus).map(A=>A.account);if(v.length>=x.S.MIN_ACCOUNTS_FOR_SUMMARY)l(new o.oX(o.v2.ACCOUNTS_SUMMARY));else for(const A of v){const st=A.type,wn=1===d.length?this.i18n.dashboard.action.account:st.name;l(new o.oX(o.v2.ACCOUNT_HISTORY,{accountType:st}),null,wn)}break;case r.P.TRANSFERS_OVERVIEW:l(new o.oX(p?o.v2.ADMIN_TRANSFERS_OVERVIEW:o.v2.BROKER_TRANSFERS_OVERVIEW));break;case r.P.BALANCES_OVERVIEW:l(new o.oX(o.v2.USER_BALANCES_OVERVIEW));break;case r.P.PAY_USER:l(new o.oX(o.v2.PAYMENT_TO_USER));break;case r.P.PAY_SYSTEM:l(new o.oX(o.v2.PAYMENT_TO_SYSTEM));break;case r.P.PAY_SELF:l(new o.oX(o.v2.PAYMENT_TO_SELF));break;case r.P.POS:l(new o.oX(o.v2.POS));break;case r.P.RECEIVE_QR_PAYMENT:l(new o.oX(o.v2.RECEIVE_QR_PAYMENT));break;case r.P.SCHEDULED_PAYMENTS:l(new o.oX(o.v2.SCHEDULED_PAYMENTS));break;case r.P.REQUEST_PAYMENT_FROM_USER:l(C,null,null,`/banking/${f}/payment-request`);break;case r.P.REQUEST_PAYMENT_FROM_SYSTEM:l(C,null,null,`/banking/${f}/payment-request/${x.S.SYSTEM}`);break;case r.P.PAYMENT_REQUESTS:l(C);break;case r.P.PAY_EXTERNAL_USER:l(Y,null,null,`/banking/${f}/external-payment`);break;case r.P.EXTERNAL_PAYMENTS:l(Y);break;case r.P.VOUCHERS:l(w);break;case r.P.BUY_VOUCHER:l(w,null,null,`/banking/${x.S.SELF}/vouchers/buy`);break;case r.P.SEND_VOUCHER:l(w,null,null,`/banking/${x.S.SELF}/vouchers/send`);break;case r.P.VOUCHER_TRANSACTIONS:const M=this.dataForFrontendHolder.dataForFrontend.topUpEnabled?this.i18n.dashboard.action.voucherTransactions:this.i18n.dashboard.action.voucherTransactionsRedeems;l(new o.oX(o.v2.VOUCHER_TRANSACTIONS),null,M);break;case r.P.REDEEM_VOUCHER:l(P,null,null,`/banking/${x.S.SELF}/vouchers/redeem`);break;case r.P.TOP_UP_VOUCHER:l(P,null,null,`/banking/${x.S.SELF}/vouchers/top-up`);break;case r.P.CONTACTS:l(new o.oX(o.v2.CONTACTS));break;case r.P.PENDING_USERS:(g.users||{}).viewPending&&l(L,null,null,"/users/search/pending");break;case r.P.SEARCH_USERS:n.showLatestUsers||l(L);break;case r.P.BROKERED_USERS:l(new o.oX(o.v2.MY_BROKERED_USERS));break;case r.P.REGISTER_USER:l(new o.oX(p?o.v2.ADMIN_REGISTRATION:o.v2.BROKER_REGISTRATION));break;case r.P.INVITE_USER:l(new o.oX(o.v2.INVITE));break;case r.P.SEARCH_ADS:n.showLatestAds||l(new o.oX(o.v2.SEARCH_ADS));break;case r.P.AD_INTERESTS:l(new o.oX(o.v2.AD_INTERESTS));break;case r.P.PURCHASES:l(new o.oX(o.v2.PURCHASES));break;case r.P.MY_ADS:l(new o.oX(o.v2.SEARCH_USER_ADS));break;case r.P.CREATE_AD:l(H,null,null,`/marketplace/${x.S.SELF}/${O.$.SIMPLE}/ad/new`);break;case r.P.MY_WEBSHOP:l(new o.oX(o.v2.SEARCH_USER_WEBSHOP));break;case r.P.CREATE_WEBSHOP_AD:l($,null,null,`/marketplace/${x.S.SELF}/${O.$.WEBSHOP}/ad/new`);break;case r.P.SALES:l(new o.oX(o.v2.SALES));break;case r.P.EDIT_PROFILE:l(new o.oX(o.v2.EDIT_MY_PROFILE));break;case r.P.PASSWORDS:const X=1===g.passwords.passwords.length?this.i18n.dashboard.action.password:this.i18n.dashboard.action.passwords;l(new o.oX(o.v2.PASSWORDS),null,X);break;case r.P.DOCUMENTS:p||l(new o.oX(o.v2.MY_DOCUMENTS));break;case r.P.MESSAGES:l(U);break;case r.P.SEND_MESSAGE:l(U,null,null,"/users/messages/send");break;case r.P.NOTIFICATIONS:l(new o.oX(o.v2.NOTIFICATIONS));break;case r.P.REFERENCES:l(new o.oX(o.v2.REFERENCES));break;case r.P.TRANSACTION_FEEDBACKS:l(new o.oX(o.v2.FEEDBACKS));break;case r.P.SWITCH_THEME:l(new o.oX(o.v2.SETTINGS),()=>this.layout.darkTheme=!this.layout.darkTheme);break;case r.P.SWITCH_FRONTEND:it.N.standalone||l(new o.oX(o.v2.SETTINGS),()=>this.dataForFrontendHolder.useClassicFrontend(!0));break;case r.P.SETTINGS:l(new o.oX(o.v2.SETTINGS));break;case r.P.OPERATION:const k=S.operation,b=this.menu.operationEntry(null==k?void 0:k.id);if(b){const A=this.runOperationHelper.canRunDirectly(k)?()=>this.runOperationHelper.run(k,p?null:x.S.SELF):null;l(b.activeMenu,A)}break;case r.P.WIZARD:const et=this.menu.wizardEntry(null===(a=S.wizard)||void 0===a?void 0:a.id);et&&l(et.activeMenu);break;case r.P.RECORD:const at=this.menu.activeMenuForRecordType(p,S.recordType);at&&l(at);break;case r.P.TOKEN:if(!p){const A=this.menu.activeMenuForTokenType(S.tokenType);A&&l(A)}}}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3),t.Y36(rt.O),t.Y36(lt.Z),t.Y36(ut.C),t.Y36(dt.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["dashboard"]],features:[t.qOj],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["showContent",""],["spinner",""],["hideMenu",""],[1,"dashboard"],["class","notifications",4,"ngIf"],[1,"dashboard-cards"],[3,"data","actions",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ads",4,"ngIf"],[3,"users",4,"ngIf"],["class","dashboard-item",3,"ngClass",4,"ngIf"],[1,"notifications"],["type","warning",4,"ngFor","ngForOf"],["type","warning",4,"ngIf"],["type","warning"],[1,"mt-2",3,"routerLink","click"],[3,"data","actions"],[3,"account",4,"ngIf"],[3,"accounts",4,"ngIf"],[3,"account"],[3,"accounts"],[3,"ads"],[3,"users"],[1,"dashboard-item",3,"ngClass"],[4,"ngTemplateOutlet"],["last","","hideBack","",3,"heading","mobileHeading","mode",4,"ngIf"],["class","custom-content-container",3,"innerHTML",4,"ngIf"],["last","","hideBack","",3,"heading","mobileHeading","mode"],[1,"custom-content-container",3,"innerHTML"]],template:function(n,a){if(1&n&&(t.YNc(0,vn,10,6,"ng-container",0),t.ALo(1,"async"),t.YNc(2,En,2,2,"ng-template",null,1,t.W1O),t.YNc(4,Tn,1,0,"ng-template",null,2,t.W1O)),2&n){const i=t.MAs(5);t.Q6J("ngIf",t.lcZ(1,2,a.data$))("ngIfElse",i)}},directives:[h.O5,pt.w,h.sg,ht.c,_.yS,Tt,Wt,zt,tn,en,h.mk,h.tP,N.Y,an.O],pipes:[h.Ov,sn.a],encapsulation:2,changeDetection:0}),e})()}];let bn=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[_.Bz.forChild(Cn)],_.Bz]}),e})();var yn=c(4443);let On=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[bn,yn.C]]}),e})()}}]);