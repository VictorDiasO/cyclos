"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([["src_app_ui_shared_address-details_component_ts-src_app_ui_wizards_wizards_module_ts"],{5174:(q,P,r)=>{r.d(P,{B:()=>A});var A=(()=>{return(e=A||(A={})).ACCOUNT_NUMBER="accountNumber",e.ADDRESS="address",e.EMAIL="email",e.IMAGE="image",e.NAME="name",e.PHONE="phone",e.USERNAME="username",A;var e})()},871:(q,P,r)=>{r.d(P,{l:()=>A});var A=(()=>{return(e=A||(A={})).ACCEPT_ORDER="acceptOrder",e.APPROVE_TICKET="approveTicket",e.BUY_VOUCHERS="buyVouchers",e.CHANGE_ACCOUNT_LIMITS="changeAccountLimits",e.CHARGEBACK="chargeback",e.CLIENT_ACTION="clientAction",e.EDIT_PROFILE="editProfile",e.GENERATE_PASSWORD="generatePassword",e.GENERATE_VOUCHERS="generateVouchers",e.IMPORT_PAYMENTS="importPayments",e.IMPORT_USER_PAYMENTS="importUserPayments",e.IMPORT_USER_SEND_VOUCHERS="importUserSendVouchers",e.MANAGE_ADDRESS="manageAddress",e.MANAGE_AUTHORIZATION="manageAuthorization",e.MANAGE_CONTACT_INFO="manageContactInfo",e.MANAGE_DEVICE="manageDevice",e.MANAGE_EXTERNAL_PAYMENT="manageExternalPayment",e.MANAGE_FAILED_OCCURRENCE="manageFailedOccurrence",e.MANAGE_INSTALLMENT="manageInstallment",e.MANAGE_PAYMENT_REQUEST="managePaymentRequest",e.MANAGE_PHONE="managePhone",e.MANAGE_RECORD="manageRecord",e.MANAGE_RECURRING_PAYMENT="manageRecurringPayment",e.MANAGE_SCHEDULED_PAYMENT="manageScheduledPayment",e.MANAGE_VOUCHER="manageVoucher",e.PERFORM_EXTERNAL_PAYMENT="performExternalPayment",e.PERFORM_PAYMENT="performPayment",e.PERSONALIZE_NFC="personalizeNfc",e.REMOVE_TOTP_SECRET="removeTotpSecret",e.RUN_OPERATION="runOperation",e.RUN_WIZARD="runWizard",e.SECONDARY_LOGIN="secondaryLogin",e.SEND_VOUCHER="sendVoucher",e.SHOPPING_CART_CHECKOUT="shoppingCartCheckout",e.TOP_UP_VOUCHER="topUpVoucher",A;var e})()},6649:(q,P,r)=>{r.d(P,{b:()=>y});var A=r(7947),e=r(6435),W=r(3551),b=r(722),Z=r(9808);function Q(d,c){if(1&d&&(e.TgZ(0,"div",2),e._uU(1),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(1),e.hij(" ",l.address.addressLine1,"\n")}}function V(d,c){if(1&d&&(e.TgZ(0,"div",2),e._uU(1),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(1),e.hij(" ",l.address.addressLine2,"\n")}}function I(d,c){if(1&d&&(e.TgZ(0,"div",2),e._uU(1),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(1),e.hij(" ",l.addressHelper.addressStreet(l.address),"\n")}}function L(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.address.neighborhood),e.xp6(1),e.hij(" ",l.address.neighborhood,"\n")}}function M(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.address.poBox),e.xp6(1),e.hij(" ",l.address.poBox,"\n")}}function m(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.address.zip),e.xp6(1),e.hij(" ",l.address.zip,"\n")}}function O(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.address.city),e.xp6(1),e.hij(" ",l.address.city,"\n")}}function H(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.address.region),e.xp6(1),e.hij(" ",l.address.region,"\n")}}function D(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&d){const l=e.oxw();e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.address.country),e.xp6(1),e.hij(" ",l.country,"\n")}}function B(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e.TgZ(3,"a",4),e._uU(4),e.qZA()()),2&d){const l=e.oxw(2);e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.user.email),e.xp6(1),e.Q6J("href","mailTo:"+l.contactInfo.email,e.LSH),e.xp6(1),e.hij(" ",l.contactInfo.email," ")}}function G(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e.TgZ(3,"a",4),e._uU(4),e.qZA()()),2&d){const l=e.oxw(2);e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.phone.mobile),e.xp6(1),e.Q6J("href","tel:"+l.contactInfo.normalizedMobilePhone,e.LSH),e.xp6(1),e.hij(" ",l.contactInfo.mobilePhone," ")}}function R(d,c){if(1&d&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2),e.qZA(),e.TgZ(3,"a",4),e._uU(4),e.qZA()()),2&d){const l=e.oxw(2);e.Q6J("ngClass",l.elementClass),e.xp6(2),e.Oqu(l.i18n.phone.landLine),e.xp6(1),e.Q6J("href","tel:"+l.contactInfo.normalizedLandLinePhone,e.LSH),e.xp6(1),e.hij(" ",l.contactInfo.landLinePhone," ")}}function $(d,c){if(1&d&&(e.ynx(0),e.YNc(1,B,5,4,"div",0),e.YNc(2,G,5,4,"div",0),e.YNc(3,R,5,4,"div",0),e.BQk()),2&d){const l=e.oxw();e.xp6(1),e.Q6J("ngIf",l.contactInfo.email),e.xp6(1),e.Q6J("ngIf",l.contactInfo.mobilePhone),e.xp6(1),e.Q6J("ngIf",l.contactInfo.landLinePhone)}}let y=(()=>{class d extends A.H{constructor(l,h,j){super(l),this.addressHelper=h,this.countriesResolve=j,this.elementClass="data-item"}ngOnInit(){super.ngOnInit();const l=this.address;l&&l.contactInfo&&(this.contactInfo=l.contactInfo)}get country(){if(this.address.country)return this.countriesResolve.name(this.address.country)}}return d.\u0275fac=function(l){return new(l||d)(e.Y36(e.zs3),e.Y36(W.u),e.Y36(b.W))},d.\u0275cmp=e.Xpm({type:d,selectors:[["address-details"]],inputs:{address:"address",elementClass:"elementClass"},features:[e.qOj],decls:11,vars:12,consts:[[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[1,"inline-label"],[3,"href"]],template:function(l,h){1&l&&(e.YNc(0,Q,2,2,"div",0),e.YNc(1,V,2,2,"div",0),e.YNc(2,I,2,2,"div",0),e.YNc(3,L,4,3,"div",0),e.YNc(4,M,4,3,"div",0),e.YNc(5,m,4,3,"div",0),e.YNc(6,O,4,3,"div",0),e.YNc(7,H,4,3,"div",0),e.YNc(8,D,4,3,"div",0),e.ALo(9,"async"),e.YNc(10,$,4,3,"ng-container",1)),2&l&&(e.Q6J("ngIf",h.address.addressLine1),e.xp6(1),e.Q6J("ngIf",h.address.addressLine2),e.xp6(1),e.Q6J("ngIf",h.address.street),e.xp6(1),e.Q6J("ngIf",h.address.neighborhood),e.xp6(1),e.Q6J("ngIf",h.address.poBox),e.xp6(1),e.Q6J("ngIf",h.address.zip),e.xp6(1),e.Q6J("ngIf",h.address.city),e.xp6(1),e.Q6J("ngIf",h.address.region),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,10,h.address.country&&h.countriesResolve.data)),e.xp6(2),e.Q6J("ngIf",h.contactInfo))},directives:[Z.O5,Z.mk],pipes:[Z.Ov],encapsulation:2,changeDetection:0}),d})()},417:(q,P,r)=>{r.r(P),r.d(P,{WizardsModule:()=>fn});var A=r(4443),e=r(6435),W=(()=>{return(n=W||(W={})).AGREEMENTS="agreements",n.BASIC_PROFILE_FIELD="basicProfileField",n.CAPTCHA="captcha",n.CONTACT_INFO="contactInfo",n.CUSTOM_PROFILE_FIELD="customProfileField",n.PASSWORDS="passwords",n.SECURITY_QUESTION="securityQuestion",n.WIZARD_FIELD="wizardField",W;var n})(),b=r(5174),Z=r(288),Q=r(3126),V=(()=>{return(n=V||(V={})).ADVERTISEMENT="advertisement",n.CONTACT_INFO="contactInfo",n.CUSTOM_VALUE="customValue",n.USER_PROFILE="userProfile",n.USER_REGISTRATION="userRegistration",V;var n})(),I=(()=>{return(n=I||(I={})).MENU="menu",n.REGISTRATION="registration",n.SYSTEM="system",n.USER="user",I;var n})(),L=r(7334),M=r(7947),m=r(6163),O=r(591),H=r(2916),D=r(1086),B=r(1787),G=r(8064),R=r(520),$=r(1352),y=r(8637),d=r(2198),c=r(4850),l=r(297);let h=(()=>{class n extends $.b{constructor(t,i){super(t,i)}startWizard$Response(t,i){const o=new y.c(this.rootUrl,n.StartWizardPath,"post");return t&&(o.path("key",t.key,{}),o.query("fields",t.fields,{explode:!1}),o.query("inviteToken",t.inviteToken,{}),o.query("externalPaymentToken",t.externalPaymentToken,{}),o.query("userAgentId",t.userAgentId,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}startWizard(t,i){return this.startWizard$Response(t,i).pipe((0,c.U)(o=>o.body))}startUserWizard$Response(t,i){const o=new y.c(this.rootUrl,n.StartUserWizardPath,"post");return t&&(o.path("user",t.user,{}),o.path("key",t.key,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}startUserWizard(t,i){return this.startUserWizard$Response(t,i).pipe((0,c.U)(o=>o.body))}startMenuWizard$Response(t,i){const o=new y.c(this.rootUrl,n.StartMenuWizardPath,"post");return t&&(o.path("menu",t.menu,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}startMenuWizard(t,i){return this.startMenuWizard$Response(t,i).pipe((0,c.U)(o=>o.body))}getCurrentWizardExecution$Response(t,i){const o=new y.c(this.rootUrl,n.GetCurrentWizardExecutionPath,"get");return t&&(o.path("key",t.key,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}getCurrentWizardExecution(t,i){return this.getCurrentWizardExecution$Response(t,i).pipe((0,c.U)(o=>o.body))}transitionWizardExecution$Response(t,i){const o=new y.c(this.rootUrl,n.TransitionWizardExecutionPath,"post");return t&&(o.path("key",t.key,{}),o.query("fields",t.fields,{explode:!1}),o.query("transition",t.transition,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}transitionWizardExecution(t,i){return this.transitionWizardExecution$Response(t,i).pipe((0,c.U)(o=>o.body))}cancelWizardExecution$Response(t,i){const o=new y.c(this.rootUrl,n.CancelWizardExecutionPath,"delete");return t&&o.path("key",t.key,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s.clone({body:void 0})))}cancelWizardExecution(t,i){return this.cancelWizardExecution$Response(t,i).pipe((0,c.U)(o=>o.body))}backWizardExecution$Response(t,i){const o=new y.c(this.rootUrl,n.BackWizardExecutionPath,"post");return t&&(o.path("key",t.key,{}),o.query("fields",t.fields,{explode:!1}),o.query("steps",t.steps,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}backWizardExecution(t,i){return this.backWizardExecution$Response(t,i).pipe((0,c.U)(o=>o.body))}redirectWizardExecution$Response(t,i){const o=new y.c(this.rootUrl,n.RedirectWizardExecutionPath,"post");return t&&(o.path("key",t.key,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"text/plain",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}redirectWizardExecution(t,i){return this.redirectWizardExecution$Response(t,i).pipe((0,c.U)(o=>o.body))}runWizardCallback$Response(t,i){const o=new y.c(this.rootUrl,n.RunWizardCallbackPath,"post");return t&&(o.path("key",t.key,{}),o.query("fields",t.fields,{explode:!1}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s))}runWizardCallback(t,i){return this.runWizardCallback$Response(t,i).pipe((0,c.U)(o=>o.body))}sendWizardVerificationCode$Response(t,i){const o=new y.c(this.rootUrl,n.SendWizardVerificationCodePath,"post");return t&&(o.path("key",t.key,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,d.h)(s=>s instanceof R.Zn),(0,c.U)(s=>s.clone({body:void 0})))}sendWizardVerificationCode(t,i){return this.sendWizardVerificationCode$Response(t,i).pipe((0,c.U)(o=>o.body))}}return n.StartWizardPath="/wizards/{key}/start",n.StartUserWizardPath="/users/{user}/wizards/{key}/start",n.StartMenuWizardPath="/menu/{menu}/wizards/start",n.GetCurrentWizardExecutionPath="/wizard-executions/{key}",n.TransitionWizardExecutionPath="/wizard-executions/{key}",n.CancelWizardExecutionPath="/wizard-executions/{key}",n.BackWizardExecutionPath="/wizard-executions/{key}/back",n.RedirectWizardExecutionPath="/wizard-executions/{key}/redirect",n.RunWizardCallbackPath="/wizard-executions/{key}/callback",n.SendWizardVerificationCodePath="/wizard-executions/{key}/verification-code",n.\u0275fac=function(t){return new(t||n)(e.LFG(l.p),e.LFG(R.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var j=r(9175),_=r(3075),T=(()=>{return(n=T||(T={})).EMAIL_VERIFICATION="emailVerification",n.FORM_FIELDS="formFields",n.GROUP="group",n.IDENTITY_PROVIDER="identityProvider",n.PHONE_VERIFICATION="phoneVerification",T;var n})(),N=(()=>{return(n=N||(N={})).PLAIN_TEXT="plainText",n.REGISTRATION="registration",n.RICH_TEXT="richText",N;var n})(),z=(()=>{return(n=z||(z={})).ALREADY_EXECUTED="alreadyExecuted",n.EXTERNAL_REDIRECT="externalRedirect",n.FINISH="finish",n.STEP="step",z;var n})(),pe=r(871),_e=r(7707),ee=r(2614),X=r(6243),te=r(4514),ne=r(5244),me=r(7224),fe=r(6849),ge=r(8089),he=r(543),xe=r(9564);function Ce(n,a){1&n&&e.GkF(0)}function be(n,a){1&n&&e.GkF(0)}function ve(n,a){if(1&n&&(e.TgZ(0,"alert",18),e._UZ(1,"div",19),e.ALo(2,"trust"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,1,t.informationText),e.oJD)}}function Ie(n,a){if(1&n&&e._UZ(0,"run-wizard-step-group",20),2&n){const t=e.oxw(3);e.Q6J("groups",t.data.step.groups)("control",t.group)}}function Te(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"run-wizard-step-idp",21),e.NdJ("continue",function(o){return e.CHM(t),e.oxw(3).continueWithProvider(o)}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("identityProviders",t.data.step.identityProviders)}}function Ae(n,a){if(1&n&&e._UZ(0,"run-wizard-step-field",23),2&n){const t=a.$implicit,i=e.oxw(4);e.Q6J("field",t)("data",i.data)("user",i.user)("emailValidation",i.emailValidation)("smsValidation",i.smsValidation)("mobilePhone",i.mobilePhone)("landLinePhone",i.landLinePhone)("defineAddress",i.defineAddress)("address",i.address)("defineContactInfo",i.defineContactInfo)("contactInfo",i.contactInfo)("customValues",i.customValues)("submitAction",i.resolveSubmitAction())}}function Re(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ae,1,13,"run-wizard-step-field",22),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.data.step.fields)}}function ye(n,a){if(1&n&&e._UZ(0,"run-wizard-step-verification",24),2&n){const t=e.oxw(3);e.Q6J("data",t.data)("control",t.verificationCode)}}function Ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",27),e.NdJ("action",function(){const s=e.CHM(t).$implicit;return e.oxw(4).transition(s)}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw(4);e.Q6J("disabled",e.lcZ(1,2,i.requesting$))("label",t.label)}}function we(n,a){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,Ee,2,4,"action-button",26),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.transitions)}}function Ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",28),e.NdJ("action",function(){return e.CHM(t),e.oxw(3).resolveSubmitAction()()}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("disabled",e.lcZ(1,2,t.requesting$))("label",t.i18n.general.finish)}}function ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",28),e.NdJ("action",function(){return e.CHM(t),e.oxw(3).externalRedirect()}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("disabled",e.lcZ(1,2,t.requesting$))("label",t.i18n.general.next)}}function Se(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",28),e.NdJ("action",function(){e.CHM(t);const o=e.oxw(4);return o.transition(o.singleTransition)}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("disabled",e.lcZ(1,2,t.requesting$))("label",t.singleTransition.label)}}function Fe(n,a){1&n&&e._UZ(0,"span")}function Pe(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Se,2,4,"action-button",29),e.YNc(2,Fe,1,0,"span",5),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.singleTransition),e.xp6(1),e.Q6J("ngIf",!t.singleTransition)}}const We=function(n,a){return{current:n,total:a}};function Ze(n,a){if(1&n&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.i18n.wizard.currentStep(e.WLB(1,We,t.data.stepNumber,t.data.stepCount))," ")}}function Qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",31),e.NdJ("action",function(){return e.CHM(t),e.oxw(3).back()}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("disabled",e.lcZ(1,2,t.requesting$))("label",t.i18n.general.back)}}function Oe(n,a){1&n&&e._UZ(0,"div")}const Je=function(n,a){return[n,a]};function Ue(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ve,3,3,"alert",6),e.TgZ(2,"div",7),e.YNc(3,Ie,1,2,"run-wizard-step-group",8),e.YNc(4,Te,1,1,"run-wizard-step-idp",9),e.YNc(5,Re,2,1,"ng-container",5),e.YNc(6,ye,1,2,"run-wizard-step-verification",10),e.YNc(7,we,2,1,"div",11),e.qZA(),e.TgZ(8,"actions",12),e.YNc(9,Ne,2,4,"action-button",13),e.YNc(10,ze,2,4,"action-button",13),e.YNc(11,Pe,3,2,"ng-container",14),e.YNc(12,Ze,2,4,"div",15),e.YNc(13,Qe,2,4,"action-button",16),e.YNc(14,Oe,1,0,"ng-template",null,17,e.W1O),e.qZA(),e.BQk()),2&n){const t=e.MAs(15),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.informationText),e.xp6(2),e.Q6J("ngIf",i.data.step.kind===i.WizardStepKind.GROUP),e.xp6(1),e.Q6J("ngIf",i.data.step.kind===i.WizardStepKind.IDENTITY_PROVIDER),e.xp6(1),e.Q6J("ngIf",i.data.step.kind===i.WizardStepKind.FORM_FIELDS&&i.data.action!==i.WizardActionEnum.ALREADY_EXECUTED),e.xp6(1),e.Q6J("ngIf",e.WLB(12,Je,i.WizardStepKind.EMAIL_VERIFICATION,i.WizardStepKind.PHONE_VERIFICATION).includes(i.data.step.kind)),e.xp6(1),e.Q6J("ngIf",(null==i.transitions?null:i.transitions.length)>0),e.xp6(1),e.Q6J("ngSwitch",i.data.action),e.xp6(1),e.Q6J("ngSwitchCase",i.WizardActionEnum.FINISH),e.xp6(1),e.Q6J("ngSwitchCase",i.WizardActionEnum.EXTERNAL_REDIRECT),e.xp6(2),e.Q6J("ngIf",null!=i.data.stepCount),e.xp6(1),e.Q6J("ngIf",i.showBack)("ngIfElse",t)}}function Ve(n,a){if(1&n&&(e.TgZ(0,"page-content",4),e.ALo(1,"async"),e.YNc(2,Ue,16,15,"ng-container",5),e.ALo(3,"async"),e.qZA()),2&n){const t=e.oxw();e.Q6J("heading",t.data.step.title)("mobileHeading",t.data.step.title)("mode",e.lcZ(1,5,t.layout.ltsm$)?"fullHeight":"normal")("hideBack",t.showBack),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(3,7,t.updating$))}}function Le(n,a){if(1&n&&(e._UZ(0,"p",19),e.ALo(1,"trust")),2&n){const t=e.oxw(3);e.Q6J("innerHTML",e.lcZ(1,1,t.registrationPrincipals),e.oJD)}}function Me(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.registrationPasswords)}}function ke(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"p",19),e.ALo(2,"trust"),e.YNc(3,Le,2,3,"p",36),e.YNc(4,Me,2,1,"p",5),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,3,t.registrationMessage),e.oJD),e.xp6(2),e.Q6J("ngIf",t.registrationPrincipals),e.xp6(1),e.Q6J("ngIf",t.registrationPasswords)}}function Ye(n,a){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.resultMessage)}}function qe(n,a){if(1&n&&e._UZ(0,"rich-text-container",38),2&n){const t=e.oxw(2);e.Q6J("value",t.resultMessage)}}function He(n,a){if(1&n&&(e.TgZ(0,"page-content",32),e.ALo(1,"async"),e.YNc(2,ke,5,5,"ng-container",33),e.YNc(3,Ye,2,1,"div",34),e.YNc(4,qe,1,1,"rich-text-container",35),e.qZA()),2&n){const t=e.oxw();e.Q6J("heading",t.resultTitle)("mobileHeading",t.mobileResultTitle)("mode",e.lcZ(1,7,t.layout.ltsm$)?"fullHeight":"normal")("ngSwitch",t.data.resultType),e.xp6(2),e.Q6J("ngSwitchCase",t.WizardResultTypeEnum.REGISTRATION),e.xp6(1),e.Q6J("ngSwitchCase",t.WizardResultTypeEnum.PLAIN_TEXT),e.xp6(1),e.Q6J("ngSwitchCase",t.WizardResultTypeEnum.RICH_TEXT)}}let S=(()=>{class n extends ee.y{constructor(t,i,o,s,p,f){super(t),this.userHelper=i,this.captchaHelper=o,this.nextRequestState=s,this.wizardsService=p,this.storedFileCacheService=f,this.WizardStepKind=T,this.WizardResultTypeEnum=N,this.WizardActionEnum=z,this.updating$=new O.X(!1)}ngOnInit(){super.ngOnInit();const t=this.route.snapshot,i=t.params.key,o=t.params.user,s=t.params.menu,p=t.params.wizard;let f;if(i){const v=`wizard-execution-${i}`,w=this.stateManager.getGlobal(v);w?(this.stateManager.deleteGlobal(v),this.data=w):this.addSub(this.wizardsService.getCurrentWizardExecution({key:i}).subscribe(F=>this.data=F))}else f=o?this.wizardsService.startUserWizard({user:o,key:p}):s?this.wizardsService.startMenuWizard({menu:s}):this.wizardsService.startWizard({key:p,inviteToken:localStorage.getItem("inviteToken")||ne.Z.get("inviteToken"),userAgentId:this.login.getUserAgentId(),externalPaymentToken:this.route.snapshot.params.externalPaymentToken}),this.addSub(f.subscribe(v=>{this.stateManager.setGlobal(`wizard-execution-${v.key}`,v),this.data=v}))}onDataInitialized(t){if(this.createDeviceConfirmation=()=>({type:pe.l.RUN_WIZARD,wizard:this.data.wizard.id}),this.route.snapshot.params.key!==t.key)return this.breadcrumb.pop(),void this.router.navigate(["/wizards","run",t.key],{replaceUrl:!0});this.key=t.key,this.data$.subscribe(o=>this.update(o))}update(t){if(this.updating$.next(!0),this.showBack=((t=t||{}).path||[]).length>0,t.step){const i=t.transitions||[];this.singleTransition=1===i.length?i[0]:null,this.transitions=i.length>1?i:null,this.informationText=t.action===z.ALREADY_EXECUTED?this.i18n.wizard.alreadyExecuted:t.step.informationText,setTimeout(()=>{this.setupForms(t),this.updating$.next(!1)})}else if(t.resultType)switch(this.informationText=null,t.resultType){case N.REGISTRATION:const i=t.registrationResult;this.registrationMessage=this.userHelper.registrationMessageHtml(i,!1),null==this.login.user&&"active"==i.status&&(this.registrationPrincipals=this.userHelper.registrationPrincipalsHtml(i),this.registrationPasswords=this.userHelper.registrationPasswordsMessage(i)),localStorage.removeItem("inviteToken"),ne.Z.remove("inviteToken",{path:"/"});break;case N.PLAIN_TEXT:this.resultMessage=(t.result||"").split("\n").join("<br>");break;case N.RICH_TEXT:this.resultMessage=t.result||""}}setupForms(t){var i,o,s,p,f,v,w,F;if(this.group=null,this.user=null,this.emailValidation=null,this.smsValidation=null,this.mobilePhone=null,this.landLinePhone=null,this.customValues=null,this.address=null,this.defineAddress=null,this.contactInfo=null,this.defineContactInfo=null,this.verificationCode=null,null!=t.step){const E=t.step;switch(E.kind){case T.GROUP:this.group=this.formBuilder.control(t.params.group||t.step.groups[0].internalName||t.step.groups[0].id,_.kI.required);break;case T.FORM_FIELDS:if(this.customValues=this.fieldHelper.customValuesFormGroup(E.customFields||[],{currentValues:(t.params||{}).customValues}),t.wizard.kind===I.REGISTRATION){const u=E.dataForNew,C=t.params.user;u.user=C;const J=[];for(let g in null===(i=u.binaryValues)||void 0===i?void 0:i.fileValues)u.binaryValues.fileValues[g].forEach(U=>J.push(U));for(let g in null===(o=u.binaryValues)||void 0===o?void 0:o.imageValues)u.binaryValues.imageValues[g].forEach(U=>J.push(U));for(let g in null===(s=u.contactInfoBinaryValues)||void 0===s?void 0:s.fileValues)u.contactInfoBinaryValues.fileValues[g].forEach(U=>J.push(U));for(let g in null===(p=u.contactInfoBinaryValues)||void 0===p?void 0:p.imageValues)u.contactInfoBinaryValues.imageValues[g].forEach(U=>J.push(U));J.length>0&&!this.storedFileCacheService.contains(J[0].id)&&J.forEach(g=>this.storedFileCacheService.write(g)),this.user=this.formBuilder.group({group:C.group,hiddenFields:[C.hiddenFields||[]]}),[this.mobilePhone,this.landLinePhone]=this.userHelper.setupRegistrationForm(this.user,u,!0),(null===(f=t.step.fields)||void 0===f?void 0:f.find(g=>g.basicProfileField===b.B.EMAIL&&g.requireVerification))&&(this.emailValidation=new _.NI(null),u.emailRequired?this.emailValidation.addValidators(_.kI.required):this.addSub(null===(v=this.user.controls.email)||void 0===v?void 0:v.valueChanges.subscribe(()=>{this.user.controls.email.value?this.emailValidation.addValidators(_.kI.required):this.emailValidation.removeValidators(_.kI.required)}))),(null===(w=t.step.fields)||void 0===w?void 0:w.find(g=>g.phoneKind===Z.k.MOBILE&&g.requireVerification))&&(this.smsValidation=new _.NI(null),u.phoneConfiguration.mobileAvailability===Q.e.REQUIRED?this.smsValidation.addValidators(_.kI.required):this.addSub(null===(F=this.mobilePhone.controls.number)||void 0===F?void 0:F.valueChanges.subscribe(()=>{this.mobilePhone.controls.number.value?this.smsValidation.addValidators(_.kI.required):this.smsValidation.removeValidators(_.kI.required)}))),u.phoneConfiguration&&((0,m.cS)(C.mobilePhones)||(u.phoneConfiguration.mobilePhone=C.mobilePhones[0]),(0,m.cS)(C.landLinePhones)||(u.phoneConfiguration.landLinePhone=C.landLinePhones[0])),u.addressConfiguration&&((0,m.cS)(C.addresses)||(u.addressConfiguration.address=C.addresses[0])),u.contactInfoConfiguration&&((0,m.cS)(C.contactInfos)||(u.contactInfoConfiguration.contactInfo=C.contactInfos[0]));const ce=u.imageConfiguration.availability;ce!==Q.e.DISABLED&&this.user.addControl("images",new _.NI(C.images,ce===Q.e.REQUIRED?_.kI.required:null));const k=E.fields.find(g=>g.kind===W.CONTACT_INFO);k&&(this.contactInfo=this.buildContactInfoForm(u.contactInfoConfiguration,k),this.defineContactInfo=this.formBuilder.control(!(0,m.cS)(C.contactInfos)),this.addSub(this.defineContactInfo.valueChanges.subscribe(()=>{this.defineContactInfo.value&&!k.readOnly?this.contactInfo.get("name").addValidators(_.kI.required):this.contactInfo.get("name").removeValidators(_.kI.required)})),k.readOnly&&(this.contactInfo.disable(),this.defineContactInfo.disable()));const Y=E.fields.find(g=>g.basicProfileField===b.B.ADDRESS);let ue;[this.address,this.defineAddress,ue]=this.userHelper.registrationAddressForm(u.addressConfiguration,Y),this.defineAddress&&!(0,m.cS)(C.addresses)&&this.defineAddress.setValue(!0),(null==Y?void 0:Y.readOnly)&&(this.address.disable(),this.defineAddress.disable()),ue.forEach(g=>this.addSub(g));const gn=this.userHelper.passwordRegistrationForms(u);this.user.addControl("passwords",this.formBuilder.array(gn)),(0,m.cS)(u.securityQuestions)||(this.user.setControl("securityQuestion",this.formBuilder.control(C.securityQuestion)),this.user.setControl("securityAnswer",this.formBuilder.control(C.securityAnswer,this.userHelper.securityAnswerValidation))),(0,m.cS)(u.agreements)||this.user.setControl("acceptAgreements",this.formBuilder.control(C.acceptAgreements)),u.captchaInput&&this.user.setControl("captcha",this.captchaHelper.captchaFormGroup(u.captchaInput))}break;case T.EMAIL_VERIFICATION:case T.PHONE_VERIFICATION:this.verificationCode=new _.NI(null,_.kI.required)}}}buildContactInfoForm(t,i){var o;const s=this.formBuilder.group({id:null,version:null,hidden:null,name:[null,(null===(o=t.contactInfo)||void 0===o?void 0:o.name)&&!i.readOnly?_.kI.required:null],image:null,email:null,mobilePhone:null,landLinePhone:null,landLineExtension:null});return s.setControl("customValues",this.fieldHelper.customValuesFormGroup(t.customFields)),s.patchValue(t.contactInfo),s}resolveMenu(t){var i;const o=t.wizard;switch(o.kind){case I.REGISTRATION:return X.v2.RUN_REGISTRATION_WIZARD;case I.SYSTEM:return new X.oX(this.menu.menuForWizard(o),{wizard:o});case I.USER:return this.menu.userMenu(t.user,new X.oX(this.menu.menuForWizard(o),{wizard:o}));case I.MENU:const p=this.ApiHelper.internalNameOrId(t.menuItem);return null===(i=this.menu.contentPageEntry(p))||void 0===i?void 0:i.activeMenu}}back(){this.addSub(this.wizardsService.backWizardExecution({key:this.key}).subscribe(t=>this.data=t))}transition(t,i){const o=this.data.params;o.confirmationPassword=i,this.validateAndSubmit(()=>{this.addSub(this.wizardsService.transitionWizardExecution({key:this.key,transition:t?t.id:null,body:o}).subscribe(s=>{this.confirmation.hide(),this.data.wizard.kind===I.REGISTRATION&&(t?localStorage.setItem(te.H,this.data.key):localStorage.removeItem(te.H)),this.data=s}))})}externalRedirect(){this.validateAndSubmit(()=>this.addSub(this.wizardsService.redirectWizardExecution({key:this.key,body:this.data.params}).subscribe(t=>{this.nextRequestState.willExternalRedirect(),window.location.assign(t)})))}resolveSubmitAction(){switch(this.data.action){case z.FINISH:return this.data.confirmationPasswordInput?()=>this.confirmation.confirm({title:this.data.wizard.name,createDeviceConfirmation:this.createDeviceConfirmation,passwordInput:this.data.confirmationPasswordInput,callback:t=>this.transition(null,t.confirmationPassword)}):()=>this.transition(null);case z.ALREADY_EXECUTED:case z.STEP:return this.singleTransition?()=>this.transition(this.singleTransition):null;case z.EXTERNAL_REDIRECT:return()=>this.externalRedirect()}}validateAndSubmit(t){var i,o;const s=this.data.params;switch(this.data.step.kind){case T.GROUP:if(!(0,m.pt)(this.group))return void(0,m.LZ)();s.group=this.group.value,t();break;case T.IDENTITY_PROVIDER:t();break;case T.FORM_FIELDS:const p=new _.cw({});this.customValues&&p.addControl("customValues",this.customValues),this.data.wizard.kind===I.REGISTRATION&&(this.user&&p.addControl("user",this.user),this.emailValidation&&this.user.contains("email")&&!this.emailAlreadyVerified&&p.addControl("emailValidation",this.emailValidation),this.mobilePhone&&!this.smsAlreadyVerified&&p.addControl("mobilePhone",this.mobilePhone),this.smsValidation&&this.mobilePhone&&!this.smsAlreadyVerified&&p.addControl("smsValidation",this.smsValidation),this.landLinePhone&&p.addControl("landLinePhone",this.landLinePhone),this.address&&(null===(i=this.defineAddress)||void 0===i?void 0:i.value)&&p.addControl("address",this.address),this.contactInfo&&(null===(o=this.contactInfo)||void 0===o?void 0:o.value)&&p.addControl("contactInfo",this.contactInfo));const f=(0,m.pt)(p,!0);this.addSub((0,m.BH)(f).subscribe(v=>{var w,F;if(v){if(s.customValues=this.customValues?this.customValues.value:null,this.data.wizard.kind===I.REGISTRATION){const E=this.user?Object.assign({},this.user.value):{};if(this.mobilePhone){const u=this.mobilePhone.value||{};u.number&&(E.mobilePhones=[u])}if(this.landLinePhone){const u=this.landLinePhone.value||{};u.number&&(E.landLinePhones=[u])}if((null===(w=this.contactInfo)||void 0===w?void 0:w.value)&&(null===(F=this.defineContactInfo)||void 0===F?void 0:F.value)&&(E.contactInfos=[this.contactInfo.value]),this.address){const u=this.defineAddress&&this.defineAddress.value?this.address.value:null;u&&(E.addresses=[u])}s.user=E,this.emailValidation&&!this.emailAlreadyVerified&&(s.emailVerification=this.emailValidation.value),this.smsValidation&&!this.smsAlreadyVerified&&(s.smsVerification=this.smsValidation.value)}t()}else(0,m.LZ)()}));break;case T.EMAIL_VERIFICATION:(0,m.pt)(this.verificationCode)&&(s.emailVerification=this.verificationCode.value,t());break;case T.PHONE_VERIFICATION:(0,m.pt)(this.verificationCode)&&(s.smsVerification=this.verificationCode.value,t())}}get emailAlreadyVerified(){if(!this.user||!this.data.step)return!1;const t=this.data.step.verifiedEmail,i=this.user.value.email;return!(0,m.cS)(t)&&t===i}get smsAlreadyVerified(){if(!this.mobilePhone||!this.data.step)return!1;const t=this.data.step.verifiedSms,i=this.mobilePhone.value.number;return!(0,m.cS)(t)&&this.userHelper.phoneNumberMatches(t,i)}continueWithProvider(t){this.authHelper.identityProviderPopup(t,"wizard",null,this.key).pipe((0,me.P)()).subscribe(i=>{i.status===_e.G.WIZARD?this.data=i.wizardExecutionData:this.notification.error(i.errorMessage||this.i18n.error.general)})}get resultTitle(){return this.data.resultType===N.REGISTRATION?this.i18n.user.title.registrationDone:this.data.resultTitle}get mobileResultTitle(){return this.data.resultType===N.REGISTRATION?this.i18n.user.mobileTitle.registrationDone:this.data.resultTitle}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(fe.T),e.Y36(ge.D),e.Y36(he.AM),e.Y36(h),e.Y36(xe.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["run-wizard"]],features:[e.qOj],decls:8,vars:7,consts:[["size","large",3,"ready"],[4,"ngIf","ngIfThen"],["step",""],["result",""],["last","",3,"heading","mobileHeading","mode","hideBack"],[4,"ngIf"],["type","info","class","mb-3",4,"ngIf"],[1,"flex-grow-1"],[3,"groups","control",4,"ngIf"],[3,"identityProviders","continue",4,"ngIf"],[3,"data","control",4,"ngIf"],["class","d-flex flex-column mt-3 mt-md-4",4,"ngIf"],["forceRow","",3,"ngSwitch"],[3,"disabled","label","action",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","d-flex align-items-center justify-content-center py-2",4,"ngIf"],["outline","",3,"disabled","label","action",4,"ngIf","ngIfElse"],["noBack",""],["type","info",1,"mb-3"],[3,"innerHTML"],[3,"groups","control"],[3,"identityProviders","continue"],[3,"field","data","user","emailValidation","smsValidation","mobilePhone","landLinePhone","defineAddress","address","defineContactInfo","contactInfo","customValues","submitAction",4,"ngFor","ngForOf"],[3,"field","data","user","emailValidation","smsValidation","mobilePhone","landLinePhone","defineAddress","address","defineContactInfo","contactInfo","customValues","submitAction"],[3,"data","control"],[1,"d-flex","flex-column","mt-3","mt-md-4"],["type","button","actionKind","primary","class","centered-button",3,"disabled","label","action",4,"ngFor","ngForOf"],["type","button","actionKind","primary",1,"centered-button",3,"disabled","label","action"],[3,"disabled","label","action"],[3,"disabled","label","action",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","py-2"],["outline","",3,"disabled","label","action"],["last","","hideBack","",3,"heading","mobileHeading","mode","ngSwitch"],[4,"ngSwitchCase"],["class","break-nl",4,"ngSwitchCase"],[3,"value",4,"ngSwitchCase"],[3,"innerHTML",4,"ngIf"],[1,"break-nl"],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Ce,1,0,"ng-container",1),e.YNc(3,be,1,0,"ng-container",1),e.qZA(),e.YNc(4,Ve,4,9,"ng-template",null,2,e.W1O),e.YNc(6,He,5,9,"ng-template",null,3,e.W1O)),2&t){const o=e.MAs(5),s=e.MAs(7);e.Q6J("ready",e.lcZ(1,5,i.data$)),e.xp6(2),e.Q6J("ngIf",null==i.data?null:i.data.step)("ngIfThen",o),e.xp6(1),e.Q6J("ngIf",null==i.data?null:i.data.resultType)("ngIfThen",s)}},encapsulation:2,changeDetection:0}),n})();var x=r(9808),De=r(195),Be=r(1873),ie=r(3728),Ge=r(2208),$e=r(4976),je=r(1902),Xe=r(1321),Ke=r(9597),et=r(507),oe=r(1556),tt=r(5910),nt=r(1602),ae=r(5350),it=r(9048),ot=r(7816),se=r(8868),at=r(4435),st=r(4113);function rt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"label-value",2),e._UZ(2,"format-field-value",3),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("label",t.label),e.xp6(1),e.Q6J("fieldValue",t.field.readOnlyFieldValue)}}function lt(n,a){if(1&n&&e._UZ(0,"field-privacy",13),2&n){const t=e.oxw(3);e.Q6J("field",t.privacyField)("control",t.privacyControl)}}function dt(n,a){if(1&n&&(e.TgZ(0,"label-value",10),e._UZ(1,"input-field",11),e.YNc(2,lt,1,2,"field-privacy",12),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.label)("required",t.required)("ignoreExtraCell",!t.privacyControl),e.xp6(1),e.Q6J("formControl",t.formControl)}}function ct(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"label-value",14)(1,"div",15)(2,"div",16),e._UZ(3,"input-field",17),e.qZA(),e.TgZ(4,"div",18)(5,"countdown-button",19,20),e.NdJ("action",function(){e.CHM(t);const o=e.MAs(6);return e.oxw(2).sendEmailCode(o)}),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.wizard.emailVerificationCode),e.xp6(3),e.Q6J("formControl",t.emailValidation),e.xp6(2),e.Q6J("label",t.i18n.general.sendCode)("disabledSeconds",t.data.step.verificationCodeSeconds)("disabledKey",t.codeSentMessage)}}function ut(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"label-value",14)(1,"div",15)(2,"div",16),e._UZ(3,"input-field",17),e.qZA(),e.TgZ(4,"div",18)(5,"countdown-button",19,21),e.NdJ("action",function(){e.CHM(t);const o=e.MAs(6);return e.oxw(2).sendSmsCode(o)}),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.wizard.smsVerificationCode),e.xp6(3),e.Q6J("formControl",t.smsValidation),e.xp6(2),e.Q6J("label",t.i18n.general.sendCode)("disabledSeconds",t.data.step.verificationCodeSeconds)("disabledKey",t.codeSentMessage)}}function pt(n,a){if(1&n&&(e.TgZ(0,"label-value",22),e._UZ(1,"input-field",11),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.phone.extension),e.xp6(1),e.Q6J("formControl",t.landLinePhone.controls.extension)}}function _t(n,a){if(1&n&&e._UZ(0,"boolean-field",25),2&n){const t=e.oxw(3);e.Q6J("formControl",t.defineAddress)("label",t.i18n.user.addressDefine)}}function mt(n,a){if(1&n&&e._UZ(0,"address-form",26),2&n){const t=e.oxw(3);e.Q6J("addressForm",t.address)("configuration",t.dataForNew.addressConfiguration)("managePrivacy",t.dataForNew.addressConfiguration.managePrivacy)}}function ft(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"static-map",29),e.NdJ("imageLoaded",function(){return e.CHM(t),e.oxw(4).mapShown()}),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("address",t.address.value)}}function gt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",30),e.NdJ("action",function(){return e.CHM(t),e.oxw(4).locateAddress()}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("disabled",e.lcZ(1,2,t.locatingAddress$))("label",t.i18n.general.mapView)}}function ht(n,a){if(1&n&&(e.TgZ(0,"label-value",22),e.YNc(1,ft,1,1,"static-map",27),e.YNc(2,gt,2,4,"ng-template",null,28,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw(3);e.Q6J("label",i.i18n.general.map),e.xp6(1),e.Q6J("ngIf",null!=i.address.get("location").value.latitude)("ngIfElse",t)}}function xt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,_t,1,2,"boolean-field",23),e.YNc(2,mt,1,3,"address-form",24),e.YNc(3,ht,4,3,"label-value",6),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.dataForNew.addressConfiguration.availability===t.AvailabilityEnum.OPTIONAL),e.xp6(1),e.Q6J("ngIf",t.defineAddress.value),e.xp6(1),e.Q6J("ngIf",t.defineAddress.value&&t.maps.enabled)}}function Ct(n,a){if(1&n&&e._UZ(0,"images-field",31),2&n){const t=e.oxw(2);e.Q6J("label",1===t.dataForNew.imageConfiguration.maxImages?t.i18n.user.title.image:t.i18n.user.title.images)("formControl",t.user.controls.images)("required",t.dataForNew.imageConfiguration.availability===t.AvailabilityEnum.REQUIRED)("maxFiles",t.dataForNew.imageConfiguration.maxImages)("initialImages",t.dataForNew.images)("target",t.TempImageTargetEnum.USER_REGISTRATION)}}function bt(n,a){if(1&n&&e._UZ(0,"field-privacy",13),2&n){const t=e.oxw(3);e.Q6J("field",t.privacyField)("control",t.privacyControl)}}function vt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"label-value",32)(1,"custom-field-input",33),e.NdJ("imagesUploaded",function(o){return e.CHM(t),e.oxw(2).customImagesUploaded.emit(o)})("filesUploaded",function(o){return e.CHM(t),e.oxw(2).customFilesUploaded.emit(o)}),e.qZA(),e.YNc(2,bt,1,2,"field-privacy",12),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("label",t.customField.name)("ignoreExtraCell",!t.privacyControl)("fieldSize",t.customField.size)("required",t.customField.required)("informationText",t.customField.informationText),e.xp6(1),e.Q6J("field",t.customField)("formControl",t.formControl)}}function It(n,a){if(1&n&&e._UZ(0,"images-field",46),2&n){const t=e.oxw(4);e.Q6J("initialImages",t.dataForNew.contactInfoImage)("label",t.i18n.general.image)}}function Tt(n,a){if(1&n&&e._UZ(0,"input-field",47),2&n){const t=e.oxw(4);e.Q6J("id","contact-info_email")("label",t.i18n.user.email)}}function At(n,a){if(1&n&&e._UZ(0,"input-field",48),2&n){const t=e.oxw(4);e.Q6J("id","contact-info_mobilePhone")("label",t.i18n.phone.mobile)}}function Rt(n,a){if(1&n&&e._UZ(0,"input-field",49),2&n){const t=e.oxw(4);e.Q6J("id","contact-info_landLinePhone")("label",t.i18n.phone.landLine)}}function yt(n,a){if(1&n&&e._UZ(0,"input-field",50),2&n){const t=e.oxw(4);e.Q6J("id","contact-info_landLineExtension")("label",t.i18n.phone.extension)}}function Et(n,a){if(1&n&&e._UZ(0,"custom-field-input",52),2&n){const t=e.oxw().$implicit;e.Q6J("field",t)("formControlName",t.internalName)}}function wt(n,a){if(1&n&&(e.ynx(0,35),e.YNc(1,Et,1,2,"custom-field-input",51),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(4);let o;e.Q6J("formGroup",i.contactInfo.get("customValues")),e.xp6(1),e.Q6J("ngIf",!i.isContactInfoReadonly()||(null==(o=i.contactInfo.get("customValues").get(t.internalName))?null:o.value))}}function Nt(n,a){if(1&n&&(e.ynx(0,35),e.YNc(1,It,1,2,"images-field",36),e._UZ(2,"input-field",37),e.YNc(3,Tt,1,2,"input-field",38),e.YNc(4,At,1,2,"input-field",39),e.YNc(5,Rt,1,2,"input-field",40),e.YNc(6,yt,1,2,"input-field",41),e.YNc(7,wt,2,2,"ng-container",42),e.TgZ(8,"label-value",43)(9,"div",44),e._UZ(10,"field-privacy",45),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);let i,o,s,p,f;e.Q6J("formGroup",t.contactInfo),e.xp6(1),e.Q6J("ngIf",!t.isContactInfoReadonly()||(null==(i=t.contactInfo.get("image"))?null:i.value)),e.xp6(1),e.Q6J("id","contact-info_name")("label",t.i18n.general.name)("required",(null==t.defineContactInfo?null:t.defineContactInfo.value)&&!t.isContactInfoReadonly()),e.xp6(1),e.Q6J("ngIf",!t.isContactInfoReadonly()||(null==(o=t.contactInfo.get("email"))?null:o.value)),e.xp6(1),e.Q6J("ngIf",!t.isContactInfoReadonly()||(null==(s=t.contactInfo.get("mobilePhone"))?null:s.value)),e.xp6(1),e.Q6J("ngIf",!t.isContactInfoReadonly()||(null==(p=t.contactInfo.get("landLinePhone"))?null:p.value)),e.xp6(1),e.Q6J("ngIf",(!t.isContactInfoReadonly()||(null==(f=t.contactInfo.get("landLineExtension"))?null:f.value))&&t.dataForNew.phoneConfiguration.extensionEnabled),e.xp6(1),e.Q6J("ngForOf",t.dataForNew.contactInfoConfiguration.customFields),e.xp6(1),e.Q6J("label",t.i18n.field.privacy.name),e.xp6(2),e.Q6J("control",t.contactInfo.get("hidden"))}}function zt(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"boolean-field",25),e.YNc(2,Nt,11,12,"ng-container",34),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("formControl",t.defineContactInfo)("label",t.i18n.user.contactInfoDefine),e.xp6(1),e.Q6J("ngIf",t.defineContactInfo.value)}}function St(n,a){if(1&n&&(e.TgZ(0,"alert",55),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.description)}}function Ft(n,a){if(1&n&&(e.TgZ(0,"label-value",61),e._UZ(1,"password-hints",62),e.qZA()),2&n){const t=e.oxw(2),i=t.$implicit,o=t.index,s=e.oxw(3);e.xp6(1),e.Q6J("passwordType",i)("control",s.passwordForm(o).controls.value)}}function Pt(n,a){if(1&n&&e._UZ(0,"password-hints",63),2&n){const t=e.oxw(2),i=t.$implicit,o=t.index,s=e.oxw(3);e.Q6J("passwordType",i)("control",s.passwordForm(o).controls.value)}}function Wt(n,a){if(1&n&&e._UZ(0,"boolean-field",64),2&n){const t=e.oxw(5);e.Q6J("label",t.i18n.user.registration.passwordForceChange)}}function Zt(n,a){if(1&n&&(e.ynx(0,35),e._UZ(1,"input-field",56),e.YNc(2,Ft,2,2,"label-value",57),e.ALo(3,"async"),e.YNc(4,Pt,1,2,"password-hints",58),e.ALo(5,"async"),e._UZ(6,"input-field",59),e.YNc(7,Wt,1,1,"boolean-field",60),e.BQk()),2&n){const t=a.ngIf,i=e.oxw().$implicit,o=e.oxw(3);e.Q6J("formGroup",t),e.xp6(1),e.Q6J("label",i.name)("maxLength",i.maxLength),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,7,o.layout.gtxs$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,9,o.layout.ltsm$)),e.xp6(2),e.Q6J("label",o.i18n.user.passwordConfirmation(i.name)),e.xp6(1),e.Q6J("ngIf",i.canForceChange)}}function Qt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,St,2,1,"alert",54),e.YNc(2,Zt,8,11,"ng-container",34),e.BQk()),2&n){const t=a.$implicit,i=a.index,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.description),e.xp6(1),e.Q6J("ngIf",o.passwordForm(i))}}function Ot(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Qt,3,2,"ng-container",53),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.dataForNew.passwordTypes)}}function Jt(n,a){if(1&n&&e._UZ(0,"field-option",68),2&n){const t=a.$implicit;e.Q6J("value",t.internalName)("text",t.name)}}function Ut(n,a){if(1&n&&e._UZ(0,"input-field",69,70),2&n){const t=e.oxw(3);e.Q6J("formControl",t.user.controls.securityAnswer)("label",t.i18n.securityQuestion.answer)}}function Vt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"single-selection-field",65),e.YNc(2,Jt,1,2,"field-option",66),e.qZA(),e.YNc(3,Ut,2,2,"input-field",67),e.ALo(4,"async"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("formControl",t.user.controls.securityQuestion)("label",t.i18n.securityQuestion.question)("required",t.dataForNew.requireSecurityQuestion)("emptyOption",t.i18n.user.securityQuestionEmpty),e.xp6(1),e.Q6J("ngForOf",t.dataForNew.securityQuestions),e.xp6(1),e.Q6J("ngIf",!t.empty(e.lcZ(4,6,t.user.controls.securityQuestion.valueChanges))||t.user.controls.securityQuestion.value)}}function Lt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"label-value",22),e._UZ(2,"accept-agreements",71),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.user.profile.agreements),e.xp6(1),e.Q6J("agreements",t.dataForNew.agreements)("formControl",t.user.controls.acceptAgreements)}}function Mt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"label-value",14),e._UZ(2,"captcha",72),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.user.captcha),e.xp6(1),e.Q6J("captchaInput",t.dataForNew.captchaInput)("form",t.user.controls.captcha)}}function kt(n,a){if(1&n&&(e.YNc(0,dt,3,4,"label-value",4),e.YNc(1,ct,7,5,"label-value",5),e.ALo(2,"async"),e.YNc(3,ut,7,5,"label-value",5),e.ALo(4,"async"),e.YNc(5,pt,2,2,"label-value",6),e.YNc(6,xt,4,3,"ng-container",7),e.YNc(7,Ct,1,6,"images-field",8),e.YNc(8,vt,3,7,"label-value",9),e.YNc(9,zt,3,3,"ng-container",7),e.YNc(10,Ot,2,1,"ng-container",7),e.YNc(11,Vt,5,8,"ng-container",7),e.YNc(12,Lt,3,3,"ng-container",7),e.YNc(13,Mt,3,3,"ng-container",7)),2&n){const t=e.oxw();e.Q6J("ngIf",t.basicOrPhone),e.xp6(1),e.Q6J("ngIf",t.field.basicProfileField===t.BasicProfileFieldEnum.EMAIL&&t.field.requireVerification&&(!t.data.step.verifiedEmail||t.data.step.verifiedEmail!==(e.lcZ(2,12,t.formControl.valueChanges)||t.formControl.value))),e.xp6(2),e.Q6J("ngIf",t.field.phoneKind===t.PhoneKind.MOBILE&&t.field.requireVerification&&(!t.data.step.verifiedSms||t.data.step.verifiedSms!==(e.lcZ(4,14,t.mobilePhone.controls.number.valueChanges)||t.mobilePhone.controls.number.value))),e.xp6(2),e.Q6J("ngIf",t.field.phoneKind===t.PhoneKind.LAND_LINE&&t.dataForNew.phoneConfiguration.extensionEnabled),e.xp6(1),e.Q6J("ngIf",t.field.basicProfileField===t.BasicProfileFieldEnum.ADDRESS),e.xp6(1),e.Q6J("ngIf",t.field.basicProfileField===t.BasicProfileFieldEnum.IMAGE),e.xp6(1),e.Q6J("ngIf",t.customField),e.xp6(1),e.Q6J("ngIf",t.field.kind===t.WizardStepFieldKind.CONTACT_INFO),e.xp6(1),e.Q6J("ngIf",t.field.kind===t.WizardStepFieldKind.PASSWORDS),e.xp6(1),e.Q6J("ngIf",t.field.kind===t.WizardStepFieldKind.SECURITY_QUESTION),e.xp6(1),e.Q6J("ngIf",t.field.kind===t.WizardStepFieldKind.AGREEMENTS),e.xp6(1),e.Q6J("ngIf",t.field.kind===t.WizardStepFieldKind.CAPTCHA&&t.dataForNew.captchaInput&&!t.dataForNew.user.identityProviderRequestId)}}let Yt=(()=>{class n extends M.H{constructor(t,i,o,s,p,f,v){super(t),this.changeDetector=i,this.imagesService=o,this.maps=s,this.wizardsService=p,this.fieldHelper=f,this.runWizard=v,this.anyLabelValueClass=!0,this.dFlexClass=!0,this.flexColumnClass=!0,this.keepMarginsClass=!0,this.WizardStepFieldKind=W,this.BasicProfileFieldEnum=b.B,this.PhoneKind=Z.k,this.AvailabilityEnum=Q.e,this.TempImageTargetEnum=V,this.empty=m.cS,this.imageUploaded=new e.vpe,this.imageRemoved=new e.vpe,this.customImagesUploaded=new e.vpe,this.customFilesUploaded=new e.vpe,this.image$=new O.X(null),this.location$=new O.X(null),this.locatingAddress$=new O.X(!1)}get user(){return this._user}set user(t){this._user=t,this.customProfileValues=t?t.controls.customValues:null}get image(){return this.image$.value}set image(t){this.image$.next(t)}get location(){return this.location$.value}set location(t){this.location$.next(t)}ngOnInit(){var t,i;if(super.ngOnInit(),this.step=this.data.step,this.field.wizardField&&(this.customField=null===(t=this.step.customFields)||void 0===t?void 0:t.find(o=>o.internalName===this.field.wizardField),this.label=this.customField.name,this.formControl=this.customValues.controls[this.customField.internalName],this.binaryValues=this.data.binaryValues),this.data.wizard.kind===I.REGISTRATION){this.dataForNew=this.step.dataForNew||{};const s=this.dataForNew.profileFieldActions[this.field.basicProfileField||this.field.customProfileField],p=null==s?void 0:s.managePrivacy;if(this.field.customProfileField)this.customField=null===(i=this.dataForNew.customFields)||void 0===i?void 0:i.find(v=>v.internalName===this.field.customProfileField),this.label=this.customField.name,this.formControl=this.user.controls.customValues.controls[this.customField.internalName],this.privacyControl=p?this.user.controls.hiddenFields:null,this.privacyField=p?this.customField.internalName:null,this.binaryValues=this.dataForNew.binaryValues;else switch(this.basicOrPhone=[b.B.NAME,b.B.USERNAME,b.B.EMAIL,b.B.PHONE].includes(this.field.basicProfileField),this.field.basicProfileField){case b.B.IMAGE:this.label=this.i18n.user.title.image;break;case b.B.NAME:this.label=this.dataForNew.nameLabel||this.i18n.user.name,this.formControl=this.user.controls.name,this.required=!0;break;case b.B.USERNAME:this.label=this.i18n.user.username,this.formControl=this.user.controls.username,this.required=!0;break;case b.B.EMAIL:this.label=this.i18n.user.email,this.formControl=this.user.controls.email,this.required=this.dataForNew.emailRequired,p&&(this.privacyControl=this.user.controls.hiddenFields,this.privacyField=b.B.EMAIL);break;case b.B.ADDRESS:this.label=this.i18n.address.address;break;case b.B.PHONE:switch(this.field.phoneKind){case Z.k.LAND_LINE:this.label=this.i18n.phone.landLine,this.formControl=this.landLinePhone.controls.number,this.required=this.dataForNew.phoneConfiguration.landLineAvailability===Q.e.REQUIRED,p&&(this.privacyControl=this.landLinePhone.controls.hidden);break;case Z.k.MOBILE:this.label=this.i18n.phone.mobile,this.formControl=this.mobilePhone.controls.number,this.required=this.dataForNew.phoneConfiguration.mobileAvailability===Q.e.REQUIRED,p&&(this.privacyControl=this.mobilePhone.controls.hidden)}}}}onUploadDone(t){this.addSub(this.doRemoveImage().subscribe(()=>{this.image=t,this.imageUploaded.emit(this.image),this.changeDetector.detectChanges()}))}removeImage(){this.addSub(this.doRemoveImage().subscribe())}doRemoveImage(){if(this.image){const t=this.image;return this.errorHandler.requestWithCustomErrorHandler(()=>new H.y(i=>{this.imagesService.deleteImage({idOrKey:this.image.id}).subscribe(()=>{this.imageRemoved.emit(this.image),this.image=null,this.changeDetector.detectChanges(),i.next(t)})}))}return(0,D.of)(null)}locateAddress(){const t=this.address.value;this.locatingAddress$.next(!0),this.addSub(this.maps.geocode(t).subscribe(i=>{this.address.patchValue({location:i}),this.changeDetector.detectChanges()},()=>this.mapShown()))}mapShown(){this.locatingAddress$.next(!1),this.changeDetector.detectChanges()}passwordForm(t){const i=this.user?this.user.controls.passwords:null;return i?i.controls[t]:null}sendEmailCode(t){this.doSendCode(t,this.user.controls.email,L.x.EMAIL)}sendSmsCode(t){this.doSendCode(t,this.mobilePhone.controls.number,L.x.SMS)}get codeSentMessage(){return()=>this.i18n.wizard.codeSent}doSendCode(t,i,o){const s=(0,m.pt)(i,!0);(0,m.BH)(s).subscribe(p=>{const f=i.value;p?this.addSub(this.wizardsService.sendWizardVerificationCode({key:this.data.key,body:{medium:o,to:f}}).subscribe(()=>{this.notification.snackBar(this.i18n.general.sentCodeTo(f))})):(t.reenable(),(0,m.LZ)())})}isContactInfoReadonly(){var t;return null===(t=this.step.fields.find(i=>i.kind===W.CONTACT_INFO))||void 0===t?void 0:t.readOnly}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(e.sBO),e.Y36(B.C),e.Y36(G.Q),e.Y36(h),e.Y36(j.A),e.Y36(S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["0"],["run-wizard-step-field"]],hostVars:8,hostBindings:function(t,i){2&t&&e.ekj("any-label-value",i.anyLabelValueClass)("d-flex",i.dFlexClass)("flex-column",i.flexColumnClass)("keep-margins",i.keepMarginsClass)},inputs:{data:"data",field:"field",user:"user",mobilePhone:"mobilePhone",landLinePhone:"landLinePhone",defineAddress:"defineAddress",address:"address",defineContactInfo:"defineContactInfo",contactInfo:"contactInfo",customValues:"customValues",emailValidation:"emailValidation",smsValidation:"smsValidation",submitAction:"submitAction",image:"image"},outputs:{imageUploaded:"imageUploaded",imageRemoved:"imageRemoved",customImagesUploaded:"customImagesUploaded",customFilesUploaded:"customFilesUploaded"},features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["fieldInput",""],["kind","fieldView",3,"label"],[3,"fieldValue"],["kind","field",3,"label","required","ignoreExtraCell",4,"ngIf"],["kind","field","required","",3,"label",4,"ngIf"],["kind","field",3,"label",4,"ngIf"],[4,"ngIf"],["avatarSize","large",3,"label","formControl","required","maxFiles","initialImages","target",4,"ngIf"],["kind","field",3,"label","ignoreExtraCell","fieldSize","required","informationText",4,"ngIf"],["kind","field",3,"label","required","ignoreExtraCell"],[3,"formControl"],[3,"field","control",4,"extraCell"],[3,"field","control"],["kind","field","required","",3,"label"],[1,"row","no-gutters","w-100"],[1,"col-6","col-md-4"],["size","full",3,"formControl"],[1,"col-6","col-md-8","pl-2"],[3,"label","disabledSeconds","disabledKey","action"],["emailCode",""],["smsCode",""],["kind","field",3,"label"],[3,"formControl","label",4,"ngIf"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy",4,"ngIf"],[3,"formControl","label"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy"],[3,"address","imageLoaded",4,"ngIf","ngIfElse"],["viewMap",""],[3,"address","imageLoaded"],["outline","",3,"disabled","label","action"],["avatarSize","large",3,"label","formControl","required","maxFiles","initialImages","target"],["kind","field",3,"label","ignoreExtraCell","fieldSize","required","informationText"],["hideLabel","","hideInformationText","",3,"field","formControl","imagesUploaded","filesUploaded"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formControlName","image","target","contactInfo","separator","@","avatarSize","large",3,"initialImages","label",4,"ngIf"],["formControlName","name",3,"id","label","required"],["formControlName","email",3,"id","label",4,"ngIf"],["formControlName","mobilePhone",3,"id","label",4,"ngIf"],["formControlName","landLinePhone",3,"id","label",4,"ngIf"],["formControlName","landLineExtension",3,"id","label",4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],["kind","field","labelPosition","sideForced",3,"label"],[1,"d-flex","w-100","justify-content-between"],["justifyStart","",3,"control"],["formControlName","image","target","contactInfo","separator","@","avatarSize","large",3,"initialImages","label"],["formControlName","email",3,"id","label"],["formControlName","mobilePhone",3,"id","label"],["formControlName","landLinePhone",3,"id","label"],["formControlName","landLineExtension",3,"id","label"],[3,"field","formControlName",4,"ngIf"],[3,"field","formControlName"],[4,"ngFor","ngForOf"],["type","info",4,"ngIf"],["type","info"],["required","","formControlName","value","type","password","autocomplete","new-password",3,"label","maxLength"],["label"," ",4,"ngIf"],["ngClass","mb-3",3,"passwordType","control",4,"ngIf"],["required","","formControlName","confirmationValue","type","password","autocomplete","new-password",3,"label"],["formControlName","forceChange",3,"label",4,"ngIf"],["label"," "],[3,"passwordType","control"],["ngClass","mb-3",3,"passwordType","control"],["formControlName","forceChange",3,"label"],[3,"formControl","label","required","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],["required","",3,"formControl","label",4,"ngIf"],[3,"value","text"],["required","",3,"formControl","label"],["securityAnswer",""],[3,"agreements","formControl"],[3,"captchaInput","form"]],template:function(t,i){if(1&t&&(e.YNc(0,rt,3,2,"ng-container",0),e.YNc(1,kt,14,16,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",i.field.readOnly&&i.field.basicProfileField!==i.BasicProfileFieldEnum.ADDRESS&&i.field.kind!==i.WizardStepFieldKind.CONTACT_INFO)("ngIfElse",o)}},directives:[x.O5,De.t,Be.x,ie.q,_.JJ,_.oH,Ge.j,$e.x,je.E,Xe.M,Ke.C,et.O,oe.x,tt.o,_.Q7,nt.G,_.JL,_.sg,_.u,x.sg,ae.wx,it.w,x.mk,ot.f,se.s,at.l,st.h],pipes:[x.Ov],encapsulation:2,changeDetection:0}),n})();var qt=r(5739);function Ht(n,a){if(1&n&&e._UZ(0,"field-option",4),2&n){const t=a.$implicit;e.Q6J("value",t.internalName||t.id)("id",t.id)("internalName",t.internalName)("text",t.name)}}function Dt(n,a){if(1&n&&(e.TgZ(0,"radio-group-field",2),e.YNc(1,Ht,1,4,"field-option",3),e.qZA()),2&n){const t=e.oxw();e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.groups)}}function Bt(n,a){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function Gt(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._UZ(3,"input",9),e.TgZ(4,"label",10)(5,"div",11),e._uU(6),e.YNc(7,Bt,2,1,"div",12),e.qZA()()()()()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("formControl",i.control)("id","group_"+t.id)("value",t.internalName||t.id),e.xp6(1),e.Q6J("for","group_"+t.id),e.xp6(2),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.description)}}function $t(n,a){if(1&n&&e.YNc(0,Gt,8,6,"div",5),2&n){const t=e.oxw();e.Q6J("ngForOf",t.groups)}}let jt=(()=>{class n extends M.H{constructor(t){super(t)}ngOnInit(){super.ngOnInit(),this.singleLine=this.groups.length<=3&&0===this.groups.filter(t=>t.description).length}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["run-wizard-step-group"]],inputs:{groups:"groups",control:"control"},features:[e.qOj],decls:3,vars:2,consts:[[3,"formControl",4,"ngIf","ngIfElse"],["multiLine",""],[3,"formControl"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["class","row mb-2",4,"ngFor","ngForOf"],[1,"row","mb-2"],[1,"col-12","col-6","col-sm-8"],[1,"custom-control","custom-radio"],["type","radio",1,"custom-control-input",3,"formControl","id","value"],[1,"custom-control-label",3,"for"],[1,"ml-1"],["class","text-muted mt-1 mb-3",4,"ngIf"],[1,"text-muted","mt-1","mb-3"]],template:function(t,i){if(1&t&&(e.YNc(0,Dt,2,2,"radio-group-field",0),e.YNc(1,$t,1,1,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",i.singleLine)("ngIfElse",o)}},directives:[x.O5,qt.Y,_.JJ,_.oH,x.sg,se.s,_._,_.Fj],encapsulation:2,changeDetection:0}),n})();var K=r(3317);function Xt(n,a){if(1&n&&e._UZ(0,"img",4),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.image.url,e.LSH)("alt",t.name)}}const Kt=function(n,a,t){return{border:n,background:a,color:t}};function en(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().registerWith(s)}),e.YNc(1,Xt,1,2,"img",2),e._UZ(2,"span",3),e.ALo(3,"trust"),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw();e.Q6J("ngStyle",e.kEZ(5,Kt,"1px solid "+t.borderColor,t.backgroundColor,t.textColor)),e.xp6(1),e.Q6J("ngIf",t.image),e.xp6(1),e.Q6J("innerHTML",e.lcZ(3,3,i.i18n.identityProvider.login(t.name)),e.oJD)}}let tn=(()=>{class n extends M.H{constructor(t){super(t),this.continue=new e.vpe}registerWith(t){this.continue.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["run-wizard-step-idp"]],inputs:{identityProviders:"identityProviders"},outputs:{continue:"continue"},features:[e.qOj],decls:1,vars:1,consts:[["type","button","class","identity-provider btn-action-primary centered-button",3,"ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"identity-provider","btn-action-primary","centered-button",3,"ngStyle","click"],["class","aria-hidden",3,"src","alt",4,"ngIf"],[3,"innerHTML"],[1,"aria-hidden",3,"src","alt"]],template:function(t,i){1&t&&e.YNc(0,en,4,9,"button",0),2&t&&e.Q6J("ngForOf",i.identityProviders)},directives:[x.sg,x.PC,x.O5],pipes:[K.a],encapsulation:2,changeDetection:0}),n})();var re=r(1879),nn=r(70);function on(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(o){return e.CHM(t),e.oxw().sendNewCode(o)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.i18n.wizard.verification.new.request," ")}}function an(n,a){if(1&n&&(e._UZ(0,"div",8),e.ALo(1,"trust"),e.ALo(2,"async")),2&n){const t=e.oxw();e.Q6J("innerHTML",e.lcZ(1,1,e.lcZ(2,3,t.sendMessage)),e.oJD)}}let rn=(()=>{class n extends M.H{constructor(t,i,o){super(t),this.wizardsService=i,this.runWizard=o,this.sendMessage=new O.X(""),this.allowNewCode=new O.X(!1)}ngOnInit(){super.ngOnInit();const t=this.data.step.kind!==T.PHONE_VERIFICATION;this.sendMedium=t?L.x.EMAIL:L.x.SMS,this.to=t?this.data.codeSentToEmail:this.data.codeSentToPhone,this.icon=t?re.l.Envelope:re.l.Phone,this.message=t?this.i18n.wizard.verification.sentToEmail(this.to):this.i18n.wizard.verification.sentToPhone(this.to),this.codeResent()}codeResent(){this.seconds=30,this.allowNewCode.next(!1),this.timerControl=setInterval(()=>{this.seconds<=1?(clearInterval(this.timerControl),this.allowNewCode.next(!0)):this.sendMessage.next(this.i18n.wizard.verification.new.seconds(--this.seconds))},1e3),this.sendMessage.next(this.i18n.wizard.verification.new.seconds(this.seconds))}get codeSentMessage(){return()=>this.i18n.wizard.codeSent}sendNewCode(t){t.preventDefault(),this.addSub(this.wizardsService.sendWizardVerificationCode({key:this.data.key,body:{medium:this.sendMedium}}).subscribe(()=>{this.codeResent(),this.notification.snackBar(this.i18n.general.sentCodeTo(this.to))}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(h),e.Y36(S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["run-wizard-step-verification"]],inputs:{data:"data",control:"control"},features:[e.qOj],decls:11,vars:9,consts:[[1,"wizard-verification"],[3,"icon"],[1,"message",3,"innerHTML"],[3,"formControl"],[1,"resend-code"],["href","#",3,"click",4,"ngIf","ngIfElse"],["timerMessage",""],["href","#",3,"click"],[3,"innerHTML"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"icon",1)(2,"div",2),e.ALo(3,"trust"),e.TgZ(4,"div"),e._UZ(5,"input-field",3),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,on,2,1,"a",5),e.ALo(8,"async"),e.YNc(9,an,3,5,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const o=e.MAs(10);e.xp6(1),e.Q6J("icon",i.icon),e.xp6(1),e.Q6J("innerHTML",e.lcZ(3,5,i.message),e.oJD),e.xp6(3),e.Q6J("formControl",i.control),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,7,i.allowNewCode))("ngIfElse",o)}},directives:[nn.o,ie.q,_.JJ,_.oH,x.O5],pipes:[K.a,x.Ov],encapsulation:2,changeDetection:0}),n})();var le=r(5300),de=r(5747);const dn=[{path:"",children:[{path:"system/:wizard",component:S,canActivate:[de.b]},{path:"registration/:wizard",component:S},{path:"registration/:wizard/:externalPaymentToken",component:S},{path:"user/:user/:wizard",component:S,canActivate:[de.b]},{path:"menu/:menu/:wizard",component:S},{path:"run/:key",component:S},{path:"callback/:key",component:(()=>{class n extends ee.y{constructor(t,i){super(t),this.wizardsService=i}ngOnInit(){const t=this.route.snapshot;super.ngOnInit(),this.addSub(this.wizardsService.runWizardCallback({key:t.params.key,body:{method:"GET",parameters:t.queryParams}}).subscribe(i=>{this.stateManager.setGlobal(`wizard-execution-${i.key}`,i),this.router.navigate(["/wizards","run",i.key],{replaceUrl:!0})}))}resolveMenu(){return null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["wizard-callback"]],features:[e.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),n})()}]}];let cn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[le.Bz.forChild(dn)],le.Bz]}),n})();var un=r(1963),pn=r(2032),_n=r(6903),mn=r(1076);let fn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[cn,A.C]]}),n})();e.B6R(S,[un.w,x.O5,pn.Y,ae.wx,jt,tn,x.sg,Yt,rn,oe.x,_n.h,x.RF,x.n9,x.ED,mn.J],[x.Ov,K.a])}}]);