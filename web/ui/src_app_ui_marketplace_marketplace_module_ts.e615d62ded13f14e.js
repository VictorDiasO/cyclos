"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([["src_app_ui_marketplace_marketplace_module_ts"],{3508:(Jl,Oe,c)=>{c.r(Oe),c.d(Oe,{MarketplaceModule:()=>ql});var xe=c(5300),d=c(3075),U=c(2614),f=c(6163),g=c(6243),e=c(6435),p=c(520),z=c(1352),m=c(8637),_=c(2198),s=c(4850),X=c(297);let ye=(()=>{class n extends z.b{constructor(t,i){super(t,i)}createAdQuestion$Response(t,i){const o=new m.c(this.rootUrl,n.CreateAdQuestionPath,"post");return t&&(o.path("ad",t.ad,{}),o.body(t.body,"text/plain")),this.http.request(o.build({responseType:"text",accept:"text/plain",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}createAdQuestion(t,i){return this.createAdQuestion$Response(t,i).pipe((0,s.U)(o=>o.body))}getAdQuestion$Response(t,i){const o=new m.c(this.rootUrl,n.GetAdQuestionPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("id",t.id,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getAdQuestion(t,i){return this.getAdQuestion$Response(t,i).pipe((0,s.U)(o=>o.body))}deleteAdQuestion$Response(t,i){const o=new m.c(this.rootUrl,n.DeleteAdQuestionPath,"delete");return t&&o.path("id",t.id,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}deleteAdQuestion(t,i){return this.deleteAdQuestion$Response(t,i).pipe((0,s.U)(o=>o.body))}answerAdQuestion$Response(t,i){const o=new m.c(this.rootUrl,n.AnswerAdQuestionPath,"post");return t&&(o.path("id",t.id,{}),o.body(t.body,"text/plain")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}answerAdQuestion(t,i){return this.answerAdQuestion$Response(t,i).pipe((0,s.U)(o=>o.body))}searchUnansweredAdQuestions$Response(t,i){const o=new m.c(this.rootUrl,n.SearchUnansweredAdQuestionsPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("user",t.user,{}),o.query("kind",t.kind,{}),o.query("page",t.page,{}),o.query("pageSize",t.pageSize,{}),o.query("skipTotalCount",t.skipTotalCount,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}searchUnansweredAdQuestions(t,i){return this.searchUnansweredAdQuestions$Response(t,i).pipe((0,s.U)(o=>o.body))}}return n.CreateAdQuestionPath="/marketplace/{ad}/questions",n.GetAdQuestionPath="/questions/{id}",n.DeleteAdQuestionPath="/questions/{id}",n.AnswerAdQuestionPath="/questions/{id}/answer",n.SearchUnansweredAdQuestionsPath="/{user}/unanswered-questions",n.\u0275fac=function(t){return new(t||n)(e.LFG(X.p),e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=c(1963),u=c(9808),b=c(2032),ve=c(7229),T=c(195),C=c(7107),W=c(1030),k=c(6903),J=c(1556),K=c(2754);function et(n,r){if(1&n&&(e.TgZ(0,"div",11),e._UZ(1,"avatar-lightbox",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("roundBorders",!1)("zoom",!1)("image",t.data.advertisement.image)}}function tt(n,r){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"avatar-lightbox",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("roundBorders",!1)("zoom",!1)("image",t.data.advertisement.image)}}function nt(n,r){if(1&n&&e._UZ(0,"textarea-field",14),2&n){const t=e.oxw(2);e.Q6J("formControl",t.answer)("id","answer")}}function it(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.data.answer," ")}}function ot(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"actions")(1,"action-button",15),e.NdJ("action",function(){return e.CHM(t),e.oxw(2).submit()}),e.ALo(2,"async"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",e.lcZ(2,2,t.requesting$))("label",t.i18n.general.submit)}}const rt=function(n){return{"pt-1":n}};function at(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"page-content",2),e.YNc(2,et,2,3,"div",3),e.ALo(3,"async"),e.TgZ(4,"div",4),e.YNc(5,tt,2,3,"div",5),e.ALo(6,"async"),e.TgZ(7,"div",6)(8,"label-value",7),e._uU(9),e.qZA(),e.TgZ(10,"label-value",7),e._UZ(11,"user-link",8),e.qZA(),e.TgZ(12,"label-value",7),e._uU(13),e.ALo(14,"dateTime"),e.qZA(),e.TgZ(15,"label-value",7),e._uU(16),e.qZA(),e.TgZ(17,"label-value",9),e.YNc(18,nt,1,2,"textarea-field",10),e.YNc(19,it,2,1,"ng-container",1),e.qZA()()(),e.YNc(20,ot,3,4,"actions",1),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.answerQuestion)("mobileHeading",t.i18n.ad.mobileTitle.answerQuestion),e.xp6(1),e.Q6J("ngIf",t.data.advertisement.image&&e.lcZ(3,19,t.layout.ltsm$)),e.xp6(3),e.Q6J("ngIf",t.data.advertisement.image&&e.lcZ(6,21,t.layout.gtxs$)),e.xp6(3),e.Q6J("label",t.i18n.ad.name),e.xp6(1),e.hij(" ",t.data.advertisement.name," "),e.xp6(1),e.Q6J("label",t.i18n.general.by),e.xp6(1),e.Q6J("user",t.data.user),e.xp6(1),e.Q6J("label",t.i18n.general.date),e.xp6(1),e.hij(" ",e.lcZ(14,23,t.data.questionDate)," "),e.xp6(2),e.Q6J("label",t.i18n.ad.question),e.xp6(1),e.hij(" ",t.data.question," "),e.xp6(1),e.Q6J("ngClass",e.VKq(25,rt,!t.data.answer))("label",t.i18n.ad.answer)("required",!t.data.answer)("forId","answer"),e.xp6(1),e.Q6J("ngIf",!t.data.answer),e.xp6(1),e.Q6J("ngIf",t.data.answer),e.xp6(1),e.Q6J("ngIf",!t.data.answer)}}let st=(()=>{class n extends U.y{constructor(t,i){super(t),this.adQuestionService=i,this.answer=new d.NI(null,d.kI.required)}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.adQuestionService.getAdQuestion({id:this.id}).subscribe(t=>this.data=t))}submit(){!(0,f.pt)(this.answer)||this.addSub(this.adQuestionService.answerAdQuestion({id:this.id,body:this.answer.value}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.questionAnswered),this.router.navigate(["/marketplace","unanswered-questions"],{replaceUrl:!0})}))}resolveMenu(){return g.v2.UNANSWERED_QUESTIONS}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["answer-form"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading"],["class","d-flex justify-content-center mt-2 mb-4",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["class","image ml-4",4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[3,"label"],[3,"user"],[3,"ngClass","label","required","forId"],["required","true",3,"formControl","id",4,"ngIf"],[1,"d-flex","justify-content-center","mt-2","mb-4"],["size","120",3,"roundBorders","zoom","image"],[1,"image","ml-4"],["required","true",3,"formControl","id"],[3,"disabled","label","action"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,at,21,27,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,ve.X,T.t,C.F,u.mk,W.u,d.Q7,d.JJ,d.oH,k.h,J.x],pipes:[u.Ov,K.i],encapsulation:2,changeDetection:0}),n})();var w=(()=>{return(n=w||(w={})).DELIVER="deliver",n.PICKUP="pickup",w;var n})(),De=c(871),be=c(6526),A=c(591);let me=(()=>{class n extends z.b{constructor(t,i){super(t,i)}getShoppingCarts$Response(t,i){const o=new m.c(this.rootUrl,n.GetShoppingCartsPath,"get");return t&&o.query("fields",t.fields,{explode:!1}),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getShoppingCarts(t,i){return this.getShoppingCarts$Response(t,i).pipe((0,s.U)(o=>o.body))}getShoppingCartDetails$Response(t,i){const o=new m.c(this.rootUrl,n.GetShoppingCartDetailsPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("id",t.id,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getShoppingCartDetails(t,i){return this.getShoppingCartDetails$Response(t,i).pipe((0,s.U)(o=>o.body))}removeShoppingCart$Response(t,i){const o=new m.c(this.rootUrl,n.RemoveShoppingCartPath,"delete");return t&&o.path("id",t.id,{}),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:parseFloat(String(a.body))})))}removeShoppingCart(t,i){return this.removeShoppingCart$Response(t,i).pipe((0,s.U)(o=>o.body))}adjustAndGetShoppingCartDetails$Response(t,i){const o=new m.c(this.rootUrl,n.AdjustAndGetShoppingCartDetailsPath,"post");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("id",t.id,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}adjustAndGetShoppingCartDetails(t,i){return this.adjustAndGetShoppingCartDetails$Response(t,i).pipe((0,s.U)(o=>o.body))}modifyItemQuantityOnShoppingCart$Response(t,i){const o=new m.c(this.rootUrl,n.ModifyItemQuantityOnShoppingCartPath,"put");return t&&(o.path("ad",t.ad,{}),o.query("quantity",t.quantity,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:parseFloat(String(a.body))})))}modifyItemQuantityOnShoppingCart(t,i){return this.modifyItemQuantityOnShoppingCart$Response(t,i).pipe((0,s.U)(o=>o.body))}addItemToShoppingCart$Response(t,i){const o=new m.c(this.rootUrl,n.AddItemToShoppingCartPath,"post");return t&&(o.path("ad",t.ad,{}),o.query("quantity",t.quantity,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:parseFloat(String(a.body))})))}addItemToShoppingCart(t,i){return this.addItemToShoppingCart$Response(t,i).pipe((0,s.U)(o=>o.body))}removeItemFromShoppingCart$Response(t,i){const o=new m.c(this.rootUrl,n.RemoveItemFromShoppingCartPath,"delete");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:parseFloat(String(a.body))})))}removeItemFromShoppingCart(t,i){return this.removeItemFromShoppingCart$Response(t,i).pipe((0,s.U)(o=>o.body))}getShoppingCartDataForCheckout$Response(t,i){const o=new m.c(this.rootUrl,n.GetShoppingCartDataForCheckoutPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("id",t.id,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getShoppingCartDataForCheckout(t,i){return this.getShoppingCartDataForCheckout$Response(t,i).pipe((0,s.U)(o=>o.body))}checkoutShoppingCart$Response(t,i){const o=new m.c(this.rootUrl,n.CheckoutShoppingCartPath,"post");return t&&(o.path("id",t.id,{}),o.header("confirmationPassword",t.confirmationPassword,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:parseFloat(String(a.body))})))}checkoutShoppingCart(t,i){return this.checkoutShoppingCart$Response(t,i).pipe((0,s.U)(o=>o.body))}}return n.GetShoppingCartsPath="/shopping-carts",n.GetShoppingCartDetailsPath="/shopping-carts/{id}",n.RemoveShoppingCartPath="/shopping-carts/{id}",n.AdjustAndGetShoppingCartDetailsPath="/shopping-carts/{id}/adjust",n.ModifyItemQuantityOnShoppingCartPath="/shopping-carts/items/{ad}",n.AddItemToShoppingCartPath="/shopping-carts/items/{ad}",n.RemoveItemFromShoppingCartPath="/shopping-carts/items/{ad}",n.GetShoppingCartDataForCheckoutPath="/shopping-carts/{id}/data-for-checkout",n.CheckoutShoppingCartPath="/shopping-carts/{id}/checkout",n.\u0275fac=function(t){return new(t||n)(e.LFG(X.p),e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ae=c(3551),D=c(4788),ae=c(5739),$=c(8868),$e=c(9597),Te=c(6649),Q=(()=>{return(n=Q||(Q={})).AVAILABLE="available",n.OUT_OF_STOCK="outOfStock",n.UNAVAILABLE="unavailable",Q;var n})(),H=c(7947),se=c(13),L=c(8687),Y=c(1441),P=c(629),F=c(8397),j=c(70),E=c(1015),ee=c(867),B=c(2479),S=c(2180);function lt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"button",10),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).changeQuantity.emit([null,a,!1]),o.stopPropagation(),o.preventDefault()}),e._UZ(2,"icon",11),e.qZA(),e.TgZ(3,"button",12),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).remove.emit(a),o.stopPropagation(),o.preventDefault()}),e._UZ(4,"icon",11),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("tooltip",t.i18n.ad.changeQuantity),e.xp6(1),e.Q6J("icon",t.SvgIcon.Pencil),e.xp6(1),e.Q6J("tooltip",t.i18n.general.remove),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}function ct(n,r){if(1&n&&(e.TgZ(0,"mobile-result",5)(1,"div",6)(2,"div")(3,"div",7),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"div",7),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()(),e.YNc(13,lt,5,4,"div",8),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw(2);e.Q6J("avatarImage",t.product.image)("avatarIcon",i.SvgIcon.Basket)("title",t.product.name),e.xp6(4),e.AsE(" ",i.i18n.transaction.amount,": ",e.xi3(5,12,t.totalPrice,i.currency)," "),e.xp6(3),e.AsE(" ",i.i18n.ad.number,": ",t.product.productNumber," "),e.xp6(2),e.AsE(" ",i.i18n.ad.unitPrice,": ",e.xi3(10,15,t.price,i.currency)," "),e.xp6(3),e.AsE(" ",i.i18n.ad.quantity,": ",i.resolveQuantityLabel(t)," "),e.xp6(1),e.Q6J("ngIf",i.detailed)}}function dt(n,r){1&n&&e._UZ(0,"table")}function ut(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"results-layout",2),e.YNc(2,ct,14,18,"mobile-result",3),e.YNc(3,dt,1,0,"table",4),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("results",t.items)("toLink",t.detailed?t.toLink:null)("embedded",!0)}}function pt(n,r){1&n&&e._UZ(0,"th",21)}function mt(n,r){if(1&n&&e._UZ(0,"decimal-field",32),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("formControlName",t.id)("minRange",i.minItemsRange(t))("maxRange",i.maxItemsRange(t))("customValueLabel",i.i18n.ad.customQuantity)("scale",t.product.allowDecimalQuantity?2:0)}}function _t(n,r){if(1&n&&(e.ynx(0,30),e.YNc(1,mt,1,5,"decimal-field",31),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngIf",i.isAvailable(t))}}function ht(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",i.resolveQuantityLabel(t)," ")}}function gt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw(2).changeQuantity.emit([null,a,!1]),o.stopPropagation()}),e._UZ(1,"icon",11),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("tooltip",t.i18n.ad.changeQuantity),e.xp6(1),e.Q6J("icon",t.SvgIcon.Pencil)}}const le=function(n){return{"border-bottom-0":n}},ft=function(n){return{"ml-3":n}};function xt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"td",33),e.YNc(1,gt,2,2,"button",34),e.ALo(2,"async"),e.TgZ(3,"button",35),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).remove.emit(a),o.stopPropagation()}),e.ALo(4,"async"),e._UZ(5,"icon",11),e.qZA()()}if(2&n){const t=e.oxw(),i=t.last,o=t.$implicit,a=e.oxw(2);e.Q6J("ngClass",e.VKq(9,le,i)),e.xp6(1),e.Q6J("ngIf",!a.useForm(e.lcZ(2,5,a.layout.gtsm$))&&a.isAvailable(o)),e.xp6(2),e.Q6J("tooltip",a.i18n.general.remove)("ngClass",e.VKq(11,ft,!a.useForm(e.lcZ(4,7,a.layout.gtsm$))&&a.isAvailable(o))),e.xp6(2),e.Q6J("icon",a.SvgIcon.Trash)}}const yt=function(n,r,t){return{"pb-0":n,"border-0":r,"border-bottom-0":t}},vt=function(n,r){return{link:n,"border-bottom-0":r}},bt=function(n){return{"text-decoration":n}};function At(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",22),e.ALo(2,"async"),e.ALo(3,"async"),e._UZ(4,"avatar",23),e.qZA(),e.TgZ(5,"td",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).navigate(a)}),e.TgZ(6,"span"),e._uU(7),e.qZA()(),e.TgZ(8,"td",25),e._uU(9),e.qZA(),e.TgZ(10,"td",25),e.YNc(11,_t,2,2,"ng-container",26),e.ALo(12,"async"),e.YNc(13,ht,2,1,"ng-container",27),e.ALo(14,"async"),e.qZA(),e.TgZ(15,"td",28),e._uU(16),e.ALo(17,"currency"),e.qZA(),e.TgZ(18,"td",28),e._uU(19),e.ALo(20,"currency"),e.qZA(),e.YNc(21,xt,6,13,"td",29),e.qZA()}if(2&n){const t=r.$implicit,i=r.last,o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.kEZ(31,yt,e.lcZ(2,17,o.layout.xxs$),e.lcZ(3,19,o.layout.xxs$),i)),e.xp6(3),e.Q6J("image",t.product.image)("tooltip",t.product.name)("icon",o.SvgIcon.Basket),e.xp6(1),e.Q6J("ngClass",e.WLB(35,vt,o.detailed,i))("ngStyle",e.VKq(38,bt,o.isAvailable(t)?"":"line-through")),e.xp6(2),e.Oqu(t.product.name),e.xp6(1),e.Q6J("ngClass",e.VKq(40,le,i)),e.xp6(1),e.hij(" ",t.product.productNumber,""),e.xp6(1),e.Q6J("ngClass",e.VKq(42,le,i)),e.xp6(1),e.Q6J("ngIf",o.useForm(e.lcZ(12,21,o.layout.gtsm$))),e.xp6(2),e.Q6J("ngIf",!o.useForm(e.lcZ(14,23,o.layout.gtsm$))),e.xp6(2),e.Q6J("ngClass",e.VKq(44,le,i)),e.xp6(1),e.hij(" ",e.xi3(17,25,t.price,o.currency)," "),e.xp6(2),e.Q6J("ngClass",e.VKq(46,le,i)),e.xp6(1),e.hij(" ",e.xi3(20,28,t.totalPrice,o.currency),""),e.xp6(2),e.Q6J("ngIf",o.detailed)}}function Tt(n,r){if(1&n&&(e.TgZ(0,"h2",13),e._uU(1),e.qZA(),e.TgZ(2,"table",14)(3,"thead")(4,"th",15),e._uU(5),e.qZA(),e.TgZ(6,"th",16),e._uU(7),e.qZA(),e.TgZ(8,"th",17),e._uU(9),e.qZA(),e.TgZ(10,"th",18),e._uU(11),e.qZA(),e.TgZ(12,"th",18),e._uU(13),e.qZA(),e.YNc(14,pt,1,0,"th",19),e.qZA(),e.TgZ(15,"tbody"),e.YNc(16,At,22,48,"tr",20),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.hij("",t.i18n.ad.products," "),e.xp6(4),e.Oqu(t.i18n.ad.product),e.xp6(2),e.Oqu(t.i18n.ad.number),e.xp6(2),e.Oqu(t.i18n.ad.quantity),e.xp6(2),e.Oqu(t.i18n.ad.unitPrice),e.xp6(2),e.Oqu(t.i18n.transaction.amount),e.xp6(1),e.Q6J("ngIf",t.detailed),e.xp6(2),e.Q6J("ngForOf",t.items)}}let Le=(()=>{class n extends H.H{constructor(t,i){super(t),this.marketplaceHelper=i,this.changeQuantity=new e.vpe,this.remove=new e.vpe}ngOnInit(){super.ngOnInit(),this.detailed&&(this.form=this.formBuilder.group({}),this.items.forEach(t=>{const i=this.formBuilder.control(t.quantity,{updateOn:"blur"});this.form.addControl(t.id,i),setTimeout(()=>{this.addSub(i.valueChanges.pipe((0,se.b)(this.ApiHelper.DEBOUNCE_TIME)).subscribe(o=>{this.changeQuantity.emit([o,t,!0])}),!0)},1)}))}useForm(t){return this.detailed&&t}isAvailable(t){return t.availability===Q.AVAILABLE}path(t){return["/marketplace","view",t.product.id]}get toLink(){return t=>this.path(t)}navigate(t){this.detailed&&this.router.navigate(this.path(t))}minItemsRange(t){return t.product.allowDecimalQuantity?null:t.product.minAllowedInCart?+t.product.minAllowedInCart:1}maxItemsRange(t){return t.product.allowDecimalQuantity?null:t.product.maxAllowedInCart?+t.product.maxAllowedInCart:t.product.minAllowedInCart?+t.product.minAllowedInCart+10:10}resolveQuantityLabel(t){switch(t.availability){case Q.AVAILABLE:return this.marketplaceHelper.getFormattedQuantity(t);case Q.OUT_OF_STOCK:return this.i18n.ad.outOfStock;case Q.UNAVAILABLE:return this.i18n.ad.itemNotAvailable}return""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(D.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["shopping-cart-items"]],inputs:{detailed:"detailed",items:"items",currency:"currency"},outputs:{changeQuantity:"changeQuantity",remove:"remove"},features:[e.qOj],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["largeTable",""],["resultType","list",3,"results","toLink","embedded"],[3,"avatarImage","avatarIcon","title",4,"mobileResult"],[4,"resultTable"],[3,"avatarImage","avatarIcon","title"],[1,"d-flex"],[1,"cell-text"],["class","ml-auto text-right d-flex flex-column",4,"ngIf"],[1,"ml-auto","text-right","d-flex","flex-column"],["type","button",1,"btn","btn-icon",3,"tooltip","click"],[3,"icon"],["type","button",1,"btn","btn-icon","mt-2",3,"tooltip","click"],[1,"mt-4","mb-2"],[1,"table","table-hover"],["colspan","2",1,"avatar","no-border"],[1,"no-border"],["width","10%",1,"no-border"],[1,"text-right","no-border"],["class","actions no-border",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"actions","no-border"],[1,"avatar",3,"ngClass"],[3,"image","tooltip","icon"],["width","30%",3,"ngClass","ngStyle","click"],[3,"ngClass"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"text-right",3,"ngClass"],["class","actions actions-multiple",3,"ngClass",4,"ngIf"],[3,"formGroup"],[3,"formControlName","minRange","maxRange","customValueLabel","scale",4,"ngIf"],[3,"formControlName","minRange","maxRange","customValueLabel","scale"],[1,"actions","actions-multiple",3,"ngClass"],["type","button","class","btn btn-icon",3,"tooltip","click",4,"ngIf"],["type","button",1,"btn","btn-icon",3,"tooltip","ngClass","click"]],template:function(t,i){if(1&t&&(e.YNc(0,ut,4,3,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Tt,17,8,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,i.layout.ltsm$))("ngIfElse",o)}},directives:[u.O5,L.D,Y.E,P.t,F.i9,j.o,E.p,u.sg,u.mk,ee.A,u.PC,d.JL,d.sg,B.U,d.JJ,d.u],pipes:[u.Ov,S.H],encapsulation:2,changeDetection:0}),n})();var Zt=c(244),Ye=c(8361);function Ct(n,r){if(1&n&&e._UZ(0,"field-option",10),2&n){const t=r.$implicit;e.Q6J("value",t.id)("text",t.name)}}function wt(n,r){if(1&n&&(e.TgZ(0,"label-value",12),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.minDeliveryTime),e.xp6(1),e.hij(" ",t.format.formatTimeInterval(t.deliveryMethod.minDeliveryTime)," ")}}function It(n,r){if(1&n&&(e.TgZ(0,"label-value",12),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.maxDeliveryTime),e.xp6(1),e.hij(" ",t.format.formatTimeInterval(t.deliveryMethod.maxDeliveryTime)," ")}}function Qt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,wt,2,2,"label-value",11),e.YNc(2,It,2,2,"label-value",11),e.TgZ(3,"label-value",12),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"label-value",12),e._uU(7),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.deliveryMethod.minDeliveryTime),e.xp6(1),e.Q6J("ngIf",t.deliveryMethod.maxDeliveryTime),e.xp6(1),e.Q6J("label",t.i18n.ad.price),e.xp6(1),e.hij(" ",t.negotiated?t.i18n.ad.negotiated:e.xi3(5,6,t.deliveryMethod.chargeAmount,t.deliveryMethod.chargeCurrency)," "),e.xp6(2),e.Q6J("label",t.i18n.general.description),e.xp6(1),e.hij(" ",t.deliveryMethod.description," ")}}function qt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"page-content",3),e.ALo(1,"async"),e.TgZ(2,"div",4)(3,"radio-group-field",5),e.YNc(4,Ct,1,2,"field-option",6),e.qZA()(),e.TgZ(5,"h2"),e._uU(6),e.qZA(),e.YNc(7,Qt,8,9,"ng-container",7),e.ALo(8,"async"),e.TgZ(9,"actions",8)(10,"action-button",9),e.NdJ("action",function(){return e.CHM(t),e.oxw().next()}),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("heading",t.i18n.ad.title.deliveryMethod)("mobileHeading",t.i18n.ad.mobileTitle.deliveryMethod)("mode",e.lcZ(1,10,t.layout.ltsm$)?"fullHeight":"normal"),e.xp6(3),e.Q6J("asColumn",t.data.deliveryMethods.length>3)("label",t.i18n.ad.chooseDeliveryMethod)("formControl",t.form.get("deliveryMethod")),e.xp6(1),e.Q6J("ngForOf",t.data.deliveryMethods),e.xp6(2),e.Oqu(t.i18n.ad.deliveryInformation),e.xp6(1),e.Q6J("ngIf",e.lcZ(8,12,t.deliveryMethod$)),e.xp6(3),e.Q6J("label",t.i18n.general.next)}}function Jt(n,r){if(1&n&&e._UZ(0,"field-option",10),2&n){const t=r.$implicit;e.Q6J("value",t.id)("text",t.name)}}function St(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",4)(2,"radio-group-field",5),e.YNc(3,Jt,1,2,"field-option",6),e.qZA()(),e._UZ(4,"hr"),e.TgZ(5,"div",4),e._UZ(6,"address-form",16),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("asColumn",t.data.addresses.length>3)("label",t.i18n.ad.chooseDeliveryAddress)("formControl",t.form.get("address")),e.xp6(1),e.Q6J("ngForOf",t.data.addresses),e.xp6(3),e.Q6J("addressForm",t.addressForm)("configuration",t.data.addressConfiguration)}}function Ut(n,r){if(1&n&&(e.ynx(0),e._UZ(1,"address-details",17),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("address",t.deliveryMethod.address)}}function kt(n,r){1&n&&e._uU(0,"\xa0")}function Ft(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",18),e.NdJ("action",function(){return e.CHM(t),e.oxw(2).back()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.back)}}function Nt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"page-content",3),e.ALo(1,"async"),e.YNc(2,St,7,6,"ng-container",7),e.YNc(3,Ut,2,1,"ng-container",7),e.TgZ(4,"h2"),e._uU(5),e.qZA(),e._UZ(6,"textarea-field",13),e.TgZ(7,"actions",8)(8,"action-button",9),e.NdJ("action",function(){return e.CHM(t),e.oxw().next()}),e.qZA(),e.YNc(9,kt,1,0,"ng-template",null,14,e.W1O),e.YNc(11,Ft,1,1,"action-button",15),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("heading",t.i18n.ad.title.deliveryAddress)("mobileHeading",t.i18n.ad.mobileTitle.deliveryAddress)("mode",e.lcZ(1,9,t.layout.ltsm$)?"fullHeight":"normal"),e.xp6(2),e.Q6J("ngIf",null==t.deliveryMethod||"deliver"===t.deliveryMethod.deliveryType),e.xp6(1),e.Q6J("ngIf",null!=t.deliveryMethod&&"pickup"===t.deliveryMethod.deliveryType),e.xp6(2),e.Oqu(t.i18n.ad.remarks),e.xp6(1),e.Q6J("formControl",t.form.get("remarks")),e.xp6(2),e.Q6J("label",t.i18n.general.next),e.xp6(3),e.Q6J("ngIf",t.data.deliveryMethods.length>1)}}function Ot(n,r){if(1&n&&e._UZ(0,"field-option",10),2&n){const t=r.$implicit;e.Q6J("value",t.id)("text",t.name)}}function Dt(n,r){1&n&&e._uU(0,"\xa0")}function $t(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"page-content",3),e.ALo(1,"async"),e.TgZ(2,"radio-group-field",5),e.YNc(3,Ot,1,2,"field-option",6),e.qZA(),e.TgZ(4,"actions",8)(5,"action-button",9),e.NdJ("action",function(){return e.CHM(t),e.oxw().next()}),e.qZA(),e.YNc(6,Dt,1,0,"ng-template",null,14,e.W1O),e.TgZ(8,"action-button",18),e.NdJ("action",function(){return e.CHM(t),e.oxw().back()}),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("heading",t.i18n.ad.title.paymentType)("mobileHeading",t.i18n.ad.mobileTitle.paymentType)("mode",e.lcZ(1,9,t.layout.ltsm$)?"fullHeight":"normal"),e.xp6(2),e.Q6J("asColumn",!0)("label",t.i18n.ad.choosePaymentType)("formControl",t.form.get("paymentType")),e.xp6(1),e.Q6J("ngForOf",t.data.paymentTypes),e.xp6(2),e.Q6J("label",t.i18n.general.next),e.xp6(3),e.Q6J("label",t.i18n.general.back)}}function Lt(n,r){1&n&&e._UZ(0,"hr",26)}function Yt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,Lt,1,0,"hr",24),e.ALo(2,"async"),e.TgZ(3,"confirmation-password",25),e.NdJ("showSubmit",function(o){return e.CHM(t),e.oxw(2).showSubmit$.next(o)})("confirmed",function(o){return e.CHM(t),e.oxw(2).submit(o)}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,t.layout.gtxxs$)),e.xp6(2),e.Q6J("formControl",t.form.get("confirmationPassword"))("passwordInput",t.data.confirmationPasswordInput)("createDeviceConfirmation",t.createDeviceConfirmation)}}function Pt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",27),e.NdJ("action",function(){return e.CHM(t),e.oxw(2).next()}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",e.lcZ(1,2,t.requesting$))("label",t.i18n.general.confirm)}}function Et(n,r){1&n&&e._uU(0,"\xa0")}function Mt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",3),e.ALo(2,"async"),e.TgZ(3,"label-value",12),e._UZ(4,"user-link",19),e.qZA(),e.TgZ(5,"label-value",12),e._uU(6),e.ALo(7,"currency"),e.qZA(),e._UZ(8,"hr"),e.TgZ(9,"label-value",20),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"label",21),e._uU(13),e.qZA(),e._UZ(14,"shopping-cart-items",22),e.YNc(15,Yt,4,6,"ng-container",7),e.TgZ(16,"actions",8),e.YNc(17,Pt,2,4,"action-button",23),e.ALo(18,"async"),e.YNc(19,Et,1,0,"ng-template",null,14,e.W1O),e.TgZ(21,"action-button",18),e.NdJ("action",function(){return e.CHM(t),e.oxw().back()}),e.qZA()()(),e.BQk()}if(2&n){const t=e.MAs(20),i=e.oxw();e.xp6(1),e.Q6J("heading",i.i18n.ad.title.confirmOrder)("mobileHeading",i.i18n.ad.mobileTitle.confirmOrder)("mode",e.lcZ(2,16,i.layout.ltsm$)?"fullHeight":"normal"),e.xp6(2),e.Q6J("label",i.i18n.ad.seller),e.xp6(1),e.Q6J("user",i.data.cart.seller),e.xp6(1),e.Q6J("label",i.i18n.ad.deliveryPrice),e.xp6(1),e.hij(" ",i.negotiated?i.i18n.ad.toBeConfirmedBySeller:e.xi3(7,18,i.deliveryMethod.chargeAmount,i.deliveryMethod.chargeCurrency)," "),e.xp6(3),e.Q6J("label",i.i18n.ad.total),e.xp6(1),e.hij(" ",e.xi3(11,21,i.totalPrice,i.data.cart.currency)," "),e.xp6(3),e.hij(" ",i.negotiated?i.i18n.ad.deliveryPriceToBeConfirmed:i.i18n.ad.reserveAmount," "),e.xp6(1),e.Q6J("items",i.data.cart.items)("currency",i.data.cart.currency),e.xp6(1),e.Q6J("ngIf",!i.negotiated&&i.data.confirmationPasswordInput),e.xp6(2),e.Q6J("ngIf",i.negotiated||e.lcZ(18,24,i.showSubmit$))("ngIfElse",t),e.xp6(4),e.Q6J("label",i.i18n.general.back)}}let Rt=(()=>{class n extends U.y{constructor(t,i,o,a){super(t),this.shoppingCartService=i,this.addressHelper=o,this.marketplaceHelper=a,this.step$=new A.X(null),this.deliveryMethod$=new A.X(null),this.address$=new A.X(null),this.showSubmit$=new A.X(!0)}ngOnInit(){super.ngOnInit(),this.addSub(this.shoppingCartService.getShoppingCartDataForCheckout({id:this.route.snapshot.params.id}).subscribe(i=>this.data=i))}onDataInitialized(t){const i=!(0,f.cS)(t.deliveryMethods);if(this.form=this.formBuilder.group({remarks:null}),this.step=t.deliveryMethods.length>1?"delivery":"address",this.confirmationPassword=this.formBuilder.control(null),this.form.setControl("confirmationPassword",this.confirmationPassword),i){const l=this.formBuilder.control(t.deliveryMethods);this.form.addControl("deliveryMethod",l),this.addSub(l.valueChanges.subscribe(h=>this.updateDeliveryMethod(h,t))),l.setValue(t.deliveryMethods[0].id,{emitEvent:!0})}t.addresses.push({id:"customAddress",name:this.i18n.ad.customAddress});const a=this.formBuilder.control(t.addresses);if(this.form.addControl("address",a),this.addSub(a.valueChanges.subscribe(l=>this.updateAddress(l,t))),this.addressForm=this.addressHelper.addressFormGroup(t.addressConfiguration),a.setValue(t.addresses[0].id,{emitEvent:!0}),!(0,f.cS)(t.paymentTypes)){const l=this.formBuilder.control(t.paymentTypes);this.form.addControl("paymentType",l),l.setValue(t.paymentTypes[0].id,{emitEvent:!0})}}updateDeliveryMethod(t,i){this.deliveryMethod=i.deliveryMethods.find(o=>o.id===t)}updateAddress(t,i){this.address=i.addresses.find(o=>o.id===t),"customAddress"===this.address.id?this.addressForm.reset():this.addressForm.patchValue(this.address)}resolveMenu(){return g.v2.SHOPPING_CART}next(){switch(this.step){case"delivery":this.step="address";break;case"address":this.step=this.data.paymentTypes.length>1?"payment":"confirm";break;case"payment":this.step="confirm";break;case"confirm":this.submit()}}back(){switch(this.step){case"confirm":this.step=this.data.paymentTypes.length>1?"payment":"address";break;case"payment":this.step="address";break;case"address":this.data.deliveryMethods.length>1&&(this.step="delivery")}}submit(t){if(t&&this.confirmationPassword.setValue(t),!(0,f.pt)(this.confirmationPassword))return;const i=(0,be.Z)(this.form.value);delete i.address,i.deliveryAddress=null!==this.deliveryMethod&&this.deliveryMethod.deliveryType===w.PICKUP?this.deliveryMethod.address:this.addressForm.value,this.addSub(this.shoppingCartService.checkoutShoppingCart({id:this.data.cart.id,body:i,confirmationPassword:this.confirmationPassword.value}).subscribe(o=>{this.marketplaceHelper.cartItems=o,this.notification.snackBar(this.i18n.ad.orderWaitingForSellersApproval),this.menu.navigate({menu:new g.oX(g.v2.PURCHASES),replaceUrl:!0})}))}get step(){return this.step$.value}set step(t){this.step$.next(t)}get deliveryMethod(){return this.deliveryMethod$.value}set deliveryMethod(t){this.deliveryMethod$.next(t)}get address(){return this.address$.value}set address(t){this.address$.next(t)}get totalPrice(){const t=+this.data.cart.totalPrice;return this.negotiated?t:+this.deliveryMethod.chargeAmount+t}get negotiated(){return null==this.deliveryMethod||null==this.deliveryMethod.chargeAmount}get createDeviceConfirmation(){return()=>({type:De.l.SHOPPING_CART_CHECKOUT,seller:this.ApiHelper.accountOwner(this.data.cart.seller),amount:this.totalPrice,paymentType:this.form.value.paymentType})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(me),e.Y36(Ae.u),e.Y36(D.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cart-checkout"]],features:[e.qOj],decls:7,vars:10,consts:[[3,"ready","ngSwitch"],[3,"heading","mobileHeading","mode",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"heading","mobileHeading","mode"],[1,"mb-4"],[3,"asColumn","label","formControl"],[3,"value","text",4,"ngFor","ngForOf"],[4,"ngIf"],["forceRow",""],[3,"label","action"],[3,"value","text"],[3,"label",4,"ngIf"],[3,"label"],[3,"formControl"],["spacer",""],["outline","",3,"label","action",4,"ngIf"],[3,"addressForm","configuration"],[3,"address"],["outline","",3,"label","action"],[3,"user"],[1,"totalAmount",3,"label"],[1,"any-label-value","notice","text-muted"],[3,"items","currency"],[3,"disabled","label","action",4,"ngIf","ngIfElse"],["class","mt-0",4,"ngIf"],["focused","",3,"formControl","passwordInput","createDeviceConfirmation","showSubmit","confirmed"],[1,"mt-0"],[3,"disabled","label","action"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.ALo(2,"async"),e.YNc(3,qt,11,14,"page-content",1),e.YNc(4,Nt,12,11,"page-content",1),e.YNc(5,$t,9,11,"page-content",1),e.YNc(6,Mt,22,26,"ng-container",2),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,6,i.data$))("ngSwitch",e.lcZ(2,8,i.step$)),e.xp6(3),e.Q6J("ngSwitchCase","delivery"),e.xp6(1),e.Q6J("ngSwitchCase","address"),e.xp6(1),e.Q6J("ngSwitchCase","payment"),e.xp6(1),e.Q6J("ngSwitchCase","confirm"))},directives:[v.w,u.RF,u.n9,b.Y,ae.Y,d.JJ,d.oH,u.sg,$.s,u.O5,T.t,k.h,J.x,$e.C,Te.b,W.u,C.F,Le,Zt.y,Ye.A],pipes:[u.Ov,S.H],encapsulation:2,changeDetection:0}),n})();function Ht(n,r){if(1&n&&(e.TgZ(0,"mobile-result",7)(1,"div")(2,"div",8),e._uU(3),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA()()()),2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("avatarImage",t.seller.image)("avatarIcon",i.SvgIcon.Person),e.xp6(3),e.hij(" ",t.seller.display," "),e.xp6(2),e.hij(" ",t.currency.name," "),e.xp6(2),e.hij(" ",t.items.length+" "+(t.items.length>1?i.i18n.ad.items:i.i18n.ad.item)," ")}}const jt=function(n,r){return{"pb-0":n,"border-0":r}};function Bt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(4);return l.router.navigate(l.path(a))}),e.TgZ(2,"td",14),e.ALo(3,"async"),e.ALo(4,"async"),e._UZ(5,"avatar",15),e.qZA(),e.TgZ(6,"td")(7,"a",16),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(4);e.xp6(2),e.Q6J("ngClass",e.WLB(11,jt,e.lcZ(3,7,i.layout.xxs$),e.lcZ(4,9,i.layout.xxs$))),e.xp6(3),e.Q6J("image",t.seller.image)("tooltip",t.seller.display),e.xp6(2),e.Q6J("routerLink",i.path(t)),e.xp6(1),e.hij(" ",t.seller.display," "),e.xp6(2),e.hij(" ",t.currency.name," "),e.xp6(2),e.hij(" ",t.items.length," ")}}function Vt(n,r){if(1&n&&(e.TgZ(0,"table",10)(1,"thead"),e._UZ(2,"th",11),e.TgZ(3,"th"),e._uU(4),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.qZA()(),e.TgZ(9,"tbody"),e.YNc(10,Bt,13,14,"ng-container",12),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(t.i18n.ad.seller),e.xp6(2),e.Oqu(t.i18n.general.currency),e.xp6(2),e.Oqu(t.i18n.ad.items),e.xp6(2),e.Q6J("ngForOf",t.data)}}function Gt(n,r){if(1&n&&(e.TgZ(0,"results-layout",4),e.YNc(1,Ht,8,5,"mobile-result",5),e.YNc(2,Vt,11,4,"table",6),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("results",t.data)("toLink",t.toLink)}}function zt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.ynx(3),e._uU(4),e.BQk(),e.qZA(),e.YNc(5,Gt,3,2,"results-layout",3),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.shoppingCart)("mobileHeading",t.i18n.ad.mobileTitle.shoppingCart)("headingActions",e.lcZ(2,5,t.headingActions$)),e.xp6(3),e.hij(" ",t.data.length>0?t.i18n.ad.chooseSeller:t.i18n.ad.cartEmpty," "),e.xp6(1),e.Q6J("ngIf",t.data.length>0)}}let Xt=(()=>{class n extends U.y{constructor(t,i){super(t),this.shoppingCartService=i}ngOnInit(){super.ngOnInit(),this.addSub(this.shoppingCartService.getShoppingCarts({}).subscribe(t=>{this.data=t}))}onDataInitialized(t){1===t.length&&this.router.navigate(this.path(t[0]),{replaceUrl:!0})}resolveMenu(){return g.v2.SHOPPING_CART}get toLink(){return t=>this.path(t)}path(t){return["/marketplace","cart",t.id]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(me))},n.\u0275cmp=e.Xpm({type:n,selectors:[["list-shopping-cart"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"results","toLink",4,"ngIf"],[3,"results","toLink"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"avatarImage","avatarIcon"],[1,"cell-main"],[1,"cell-text"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[4,"ngFor","ngForOf"],[3,"click"],[1,"avatar",3,"ngClass"],[3,"image","tooltip"],[3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,zt,6,7,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,L.D,Y.E,P.t,E.p,u.sg,u.mk,ee.A,F.i9,xe.yS],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();var ne=(()=>{return(n=ne||(ne={})).MAX="max",n.MIN="min",n.STOCK="stock",ne;var n})(),ie=c(7610),Ze=c(3553),x=c(1879),y=c(5466);function Wt(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.i18n.ad.cartEmpty," ")}}function Kt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"label-value",4),e._UZ(2,"user-link",5),e.qZA(),e.TgZ(3,"label-value",6),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("label",t.i18n.ad.seller),e.xp6(1),e.Q6J("user",t.data.seller),e.xp6(1),e.Q6J("label",t.i18n.ad.total),e.xp6(1),e.hij(" ",e.xi3(5,4,t.data.totalPrice,t.data.currency)," ")}}function en(n,r){1&n&&e.GkF(0)}function tn(n,r){if(1&n&&(e.ynx(0),e.YNc(1,en,1,0,"ng-container",7),e.BQk()),2&n){e.oxw();const t=e.MAs(12);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function nn(n,r){1&n&&e.GkF(0)}function on(n,r){if(1&n&&(e.ynx(0),e.YNc(1,nn,1,0,"ng-container",7),e.BQk()),2&n){e.oxw();const t=e.MAs(12);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function rn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"shopping-cart-items",8),e.NdJ("changeQuantity",function(o){return e.CHM(t),e.oxw().changeQuantity(o)})("remove",function(o){return e.CHM(t),e.oxw().remove(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("detailed",!0)("items",t.data.items)("currency",t.data.currency)}}let an=(()=>{class n extends U.y{constructor(t,i,o){super(t),this.shoppingCartService=i,this.marketplaceHelper=o,this.emptyCart$=new A.X(!1)}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.errorHandler.requestWithCustomErrorHandler(t=>{const i=n.details?this.shoppingCartService.getShoppingCartDetails({id:this.id}):this.shoppingCartService.adjustAndGetShoppingCartDetails({id:this.id});n.details=!1,this.addSub(i.subscribe(o=>{this.data=o},o=>{o.status===Ze.n.NOT_FOUND||o.status===Ze.n.FORBIDDEN?this.emptyCart$.next(!0):t(o)}))})}onDataInitialized(t){this.headingActions=[new y.Yu(x.l.Bag2,this.i18n.ad.checkout,()=>this.checkout(),!0)],this.checkMessages(t)}checkMessages(t){const i=new Set;t.items.forEach(a=>{a.availability===Q.UNAVAILABLE?this.unavailable=!0:a.availability===Q.OUT_OF_STOCK?this.outOfStock=!0:null!=a.quantityAdjustment&&i.add(a.quantityAdjustment)});let o="";this.unavailable&&(o+=this.i18n.ad.itemsNoLongerAvailable),this.outOfStock&&(o+=this.i18n.ad.itemsOutOfStock),i.forEach(a=>{switch(a){case ne.MAX:o+=this.i18n.ad.adjustedQuantity.max;break;case ne.MIN:o+=this.i18n.ad.adjustedQuantity.min;break;case ne.STOCK:o+=this.i18n.ad.adjustedQuantity.stock}}),t.insufficientBalance&&(o+=this.i18n.ad.lowBalance(t.currency.name)),""!==o&&this.notification.warning(this.i18n.ad.articlesNotice(o),!0,!1)}checkout(){this.unavailable||this.outOfStock||this.data.insufficientBalance?this.notification.error(this.i18n.ad.error.cannotProceedToCheckout):this.router.navigate(["/marketplace","checkout",this.id])}isAvailable(t){return t.availability===Q.AVAILABLE}remove(t){this.addSub(this.shoppingCartService.removeItemFromShoppingCart({ad:t.product.id}).subscribe(i=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.reload(),this.marketplaceHelper.cartItems=i}))}changeQuantity(t){const i=o=>{0!=+o&&this.addSub(this.shoppingCartService.modifyItemQuantityOnShoppingCart({ad:t[1].product.id,quantity:+o}).subscribe(a=>{n.details=!0,this.reload(),this.marketplaceHelper.cartItems=a}))};t[2]?i(t[0]):this.confirmation.confirm({title:this.i18n.ad.changeQuantity,labelPosition:"above",customFields:[{internalName:"quantity",name:this.i18n.ad.quantity,type:t[1].product.allowDecimalQuantity?ie.L.DECIMAL:ie.L.INTEGER,defaultValue:this.marketplaceHelper.getFormattedQuantity(t[1])}],callback:o=>i(+o.customValues.quantity)})}resolveQuantityLabel(t){switch(t.availability){case Q.AVAILABLE:return this.marketplaceHelper.getFormattedQuantity(t);case Q.OUT_OF_STOCK:return this.i18n.ad.outOfStock;case Q.UNAVAILABLE:return this.i18n.ad.itemNotAvailable}return""}resolveMenu(){return g.v2.SHOPPING_CART}}return n.details=!1,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(me),e.Y36(D.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["view-cart"]],features:[e.qOj],decls:13,vars:18,consts:[[3,"ready"],["mode","filters","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],["cartItems",""],[3,"label"],[3,"user"],[1,"totalAmount",3,"label"],[4,"ngTemplateOutlet"],[3,"detailed","items","currency","changeQuantity","remove"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.ALo(2,"async"),e.TgZ(3,"page-content",1),e.ALo(4,"async"),e.YNc(5,Wt,2,1,"ng-container",2),e.YNc(6,Kt,6,7,"ng-container",2),e.YNc(7,tn,2,1,"ng-container",2),e.ALo(8,"async"),e.qZA(),e.YNc(9,on,2,1,"ng-container",2),e.ALo(10,"async"),e.qZA(),e.YNc(11,rn,1,3,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("ready",e.lcZ(1,8,i.data$)||e.lcZ(2,10,i.emptyCart$)),e.xp6(3),e.Q6J("heading",i.i18n.ad.title.shoppingCart)("mobileHeading",i.i18n.ad.mobileTitle.shoppingCart)("headingActions",e.lcZ(4,12,i.headingActions$)),e.xp6(2),e.Q6J("ngIf",!i.data),e.xp6(1),e.Q6J("ngIf",i.data),e.xp6(1),e.Q6J("ngIf",!e.lcZ(8,14,i.layout.ltsm$)&&i.data),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,16,i.layout.ltsm$)&&i.data))},directives:[v.w,b.Y,u.O5,T.t,C.F,u.tP,Le],pipes:[u.Ov,S.H],encapsulation:2,changeDetection:0}),n})();var M=(()=>{return(n=M||(M={})).FIXED="fixed",n.NEGOTIATED="negotiated",M;var n})(),sn=c(8351);let Ce=(()=>{class n extends z.b{constructor(t,i){super(t,i)}getUserDeliveryMethodsListData$Response(t,i){const o=new m.c(this.rootUrl,n.GetUserDeliveryMethodsListDataPath,"get");return t&&(o.path("user",t.user,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getUserDeliveryMethodsListData(t,i){return this.getUserDeliveryMethodsListData$Response(t,i).pipe((0,s.U)(o=>o.body))}getDeliveryMethodDataForNew$Response(t,i){const o=new m.c(this.rootUrl,n.GetDeliveryMethodDataForNewPath,"get");return t&&(o.path("user",t.user,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getDeliveryMethodDataForNew(t,i){return this.getDeliveryMethodDataForNew$Response(t,i).pipe((0,s.U)(o=>o.body))}createDeliveryMethod$Response(t,i){const o=new m.c(this.rootUrl,n.CreateDeliveryMethodPath,"post");return t&&(o.path("user",t.user,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"text/plain",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}createDeliveryMethod(t,i){return this.createDeliveryMethod$Response(t,i).pipe((0,s.U)(o=>o.body))}getDeliveryMethodDataForEdit$Response(t,i){const o=new m.c(this.rootUrl,n.GetDeliveryMethodDataForEditPath,"get");return t&&(o.path("id",t.id,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getDeliveryMethodDataForEdit(t,i){return this.getDeliveryMethodDataForEdit$Response(t,i).pipe((0,s.U)(o=>o.body))}viewDeliveryMethod$Response(t,i){const o=new m.c(this.rootUrl,n.ViewDeliveryMethodPath,"get");return t&&(o.path("id",t.id,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}viewDeliveryMethod(t,i){return this.viewDeliveryMethod$Response(t,i).pipe((0,s.U)(o=>o.body))}updateDeliveryMethod$Response(t,i){const o=new m.c(this.rootUrl,n.UpdateDeliveryMethodPath,"put");return t&&(o.path("id",t.id,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}updateDeliveryMethod(t,i){return this.updateDeliveryMethod$Response(t,i).pipe((0,s.U)(o=>o.body))}deleteDeliveryMethod$Response(t,i){const o=new m.c(this.rootUrl,n.DeleteDeliveryMethodPath,"delete");return t&&o.path("id",t.id,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}deleteDeliveryMethod(t,i){return this.deleteDeliveryMethod$Response(t,i).pipe((0,s.U)(o=>o.body))}}return n.GetUserDeliveryMethodsListDataPath="/{user}/delivery-methods/list-data",n.GetDeliveryMethodDataForNewPath="/{user}/delivery-methods/data-for-new",n.CreateDeliveryMethodPath="/{user}/delivery-methods",n.GetDeliveryMethodDataForEditPath="/delivery-methods/{id}/data-for-edit",n.ViewDeliveryMethodPath="/delivery-methods/{id}",n.UpdateDeliveryMethodPath="/delivery-methods/{id}",n.DeleteDeliveryMethodPath="/delivery-methods/{id}",n.\u0275fac=function(t){return new(t||n)(e.LFG(X.p),e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var N=c(3728),V=c(7816),we=c(1321),Ie=c(7582);function ln(n,r){if(1&n&&(e.TgZ(0,"radio-group-field",19),e._UZ(1,"field-option",20)(2,"field-option",21),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.chargeType),e.xp6(1),e.Q6J("text",t.i18n.ad.fixed),e.xp6(1),e.Q6J("text",t.i18n.ad.negotiated)}}function cn(n,r){if(1&n&&(e.TgZ(0,"label-value",22),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.chargeType),e.xp6(1),e.hij(" ",t.data.deliveryMethod.chargeType===t.DeliveryMethodChargeTypeEnum.FIXED?t.i18n.ad.fixed:t.i18n.ad.negotiated," ")}}function dn(n,r){if(1&n&&e._UZ(0,"field-option",25),2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("value",i.ApiHelper.internalNameOrId(t))("id",t.id)("text",t.name)}}function un(n,r){if(1&n&&(e.TgZ(0,"single-selection-field",23),e.YNc(1,dn,1,3,"field-option",24),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.address.address),e.xp6(1),e.Q6J("ngForOf",t.data.addresses)}}function pn(n,r){if(1&n&&e._UZ(0,"field-option",28),2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("value",i.ApiHelper.internalNameOrId(t))("id",t.id)("internalName",t.internalName)("text",t.name)}}function mn(n,r){if(1&n&&(e.TgZ(0,"single-selection-field",26),e.YNc(1,pn,1,4,"field-option",27),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.currency),e.xp6(1),e.Q6J("ngForOf",t.data.currencies)}}function _n(n,r){if(1&n&&e._UZ(0,"decimal-field",29),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.deliveryPrice)("scale",t.currency.decimalDigits)("prefix",t.currency.prefix)("suffix",t.currency.suffix)}}function hn(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.ynx(3,3),e._UZ(4,"input-field",4),e.YNc(5,ln,3,3,"radio-group-field",5),e.YNc(6,cn,2,2,"label-value",6),e.TgZ(7,"radio-group-field",7),e._UZ(8,"field-option",8)(9,"field-option",9),e.qZA(),e.YNc(10,un,2,2,"single-selection-field",10),e.ALo(11,"async"),e.YNc(12,mn,2,2,"single-selection-field",11),e.ALo(13,"async"),e.YNc(14,_n,1,4,"decimal-field",12),e.ALo(15,"async"),e._UZ(16,"boolean-field",13)(17,"time-interval-field",14)(18,"time-interval-field",15)(19,"textarea-field",16),e.BQk(),e.TgZ(20,"actions",17)(21,"action-button",18),e.NdJ("action",function(){return e.CHM(t),e.oxw().save()}),e.ALo(22,"async"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.create?t.i18n.ad.title.deliveryMethodNew:t.i18n.ad.title.deliveryMethod)("mobileHeading",t.create?t.i18n.ad.mobileTitle.deliveryMethodNew:t.i18n.ad.mobileTitle.deliveryMethod)("headingActions",e.lcZ(2,19,t.headingActions$)),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("label",t.i18n.general.name),e.xp6(1),e.Q6J("ngIf",t.create),e.xp6(1),e.Q6J("ngIf",!t.create),e.xp6(1),e.Q6J("label",t.i18n.ad.deliveryType),e.xp6(1),e.Q6J("text",t.i18n.ad.deliver),e.xp6(1),e.Q6J("text",t.i18n.ad.pickup),e.xp6(1),e.Q6J("ngIf","pickup"===(e.lcZ(11,21,t.form.get("deliveryType").valueChanges)||t.form.get("deliveryType").value)),e.xp6(2),e.Q6J("ngIf","fixed"===(e.lcZ(13,23,t.form.get("chargeType").valueChanges)||t.form.get("chargeType").value)&&t.data.currencies&&t.data.currencies.length>1),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,25,t.currency$)),e.xp6(2),e.Q6J("label",t.i18n.general.enabled),e.xp6(1),e.Q6J("label",t.i18n.ad.minDeliveryTime),e.xp6(1),e.Q6J("label",t.i18n.ad.maxDeliveryTime),e.xp6(1),e.Q6J("label",t.i18n.general.details),e.xp6(2),e.Q6J("disabled",e.lcZ(22,27,t.requesting$))("label",t.i18n.general.submit)}}let Pe=(()=>{class n extends U.y{constructor(t,i){super(t),this.deliveryMethodService=i,this.DeliveryMethodChargeTypeEnum=M,this.currency$=new A.X(null)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.id=this.route.snapshot.params.id,this.create=null==this.id;const t=this.create?this.deliveryMethodService.getDeliveryMethodDataForNew({user:this.user}):this.deliveryMethodService.getDeliveryMethodDataForEdit({id:this.id});this.addSub(t.subscribe(i=>{this.data=i}))}onDataInitialized(t){this.self=this.authHelper.isSelfOrOwner(t.user);const i=t.deliveryMethod;this.form=this.formBuilder.group({name:[i.name,d.kI.required],chargeType:i.chargeType,deliveryType:i.deliveryType,chargeCurrency:i.chargeCurrency,address:i.address,chargeAmount:i.chargeAmount,enabled:i.enabled,minDeliveryTime:i.minDeliveryTime,maxDeliveryTime:[i.maxDeliveryTime,d.kI.required],description:[i.description,d.kI.required],version:i.version}),this.updateFieldsVisibility(t),this.addSub(this.form.controls.chargeType.valueChanges.subscribe(()=>this.updateFieldsVisibility(t))),this.addSub(this.form.controls.chargeCurrency.valueChanges.subscribe(()=>this.updateFieldsVisibility(t))),this.addSub(this.form.controls.deliveryType.valueChanges.subscribe(()=>this.updateFieldsVisibility(t)))}updateFieldsVisibility(t){const i=this.form.controls.deliveryType.value===w.PICKUP;if((0,f.cS)(t.currencies)||this.form.controls.chargeType.value!==M.FIXED)this.currency=null,this.form.patchValue({chargeCurrency:null,chargeAmount:null},{emitEvent:!1}),this.form.controls.chargeCurrency.clearValidators(),this.form.controls.chargeAmount.clearValidators();else{const o=this.form.controls.chargeCurrency.value;this.currency=t.currencies.find(a=>a.id===o||a.internalName===o)||t.currencies[0],this.form.patchValue({chargeCurrency:this.currency.id},{emitEvent:!1}),this.form.controls.chargeCurrency.setValidators(d.kI.required),this.form.controls.chargeAmount.setValidators(d.kI.required),i&&null==this.form.controls.chargeAmount.value&&this.form.patchValue({chargeCurrency:this.currency.id,chargeAmount:0},{emitEvent:!1})}i&&null==this.form.controls.maxDeliveryTime.value&&this.form.patchValue({maxDeliveryTime:{amount:0,field:sn.O.DAYS}})}save(){if(!(0,f.pt)(this.form))return;const t=this.form.value,i=this.create?this.deliveryMethodService.createDeliveryMethod({body:t,user:this.user}):this.deliveryMethodService.updateDeliveryMethod({id:this.id,body:t});this.addSub(i.subscribe(()=>{this.notification.snackBar(this.create?this.i18n.ad.deliveryMethodCreated:this.i18n.ad.deliveryMethodSaved),history.back()}))}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.DELIVERY_METHODS)}get currency(){return this.currency$.value}set currency(t){this.currency$.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(Ce))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-delivery-method"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[3,"formGroup"],["formControlName","name","required","",3,"label"],["formControlName","chargeType",3,"label",4,"ngIf"],["kind","fieldView",3,"label",4,"ngIf"],["formControlName","deliveryType",3,"label"],["value","deliver",3,"text"],["value","pickup",3,"text"],["formControlName","address","required","",3,"label",4,"ngIf"],["formControlName","chargeCurrency","required","",3,"label",4,"ngIf"],["formControlName","chargeAmount","fieldSize","full","required","",3,"label","scale","prefix","suffix",4,"ngIf"],["formControlName","enabled",3,"label"],["formControlName","minDeliveryTime",3,"label"],["formControlName","maxDeliveryTime","required","",3,"label"],["formControlName","description","required","",3,"label"],["forceRow",""],[3,"disabled","label","action"],["formControlName","chargeType",3,"label"],["value","fixed",3,"text"],["value","negotiated",3,"text"],["kind","fieldView",3,"label"],["formControlName","address","required","",3,"label"],[3,"value","id","text",4,"ngFor","ngForOf"],[3,"value","id","text"],["formControlName","chargeCurrency","required","",3,"label"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["formControlName","chargeAmount","fieldSize","full","required","",3,"label","scale","prefix","suffix"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,hn,23,29,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,d.JL,d.sg,N.q,d.JJ,d.u,d.Q7,ae.Y,$.s,T.t,V.f,u.sg,B.U,we.M,Ie.e,W.u,k.h,J.x],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();var Qe=c(9653);function gn(n,r){if(1&n&&e._UZ(0,"user-info",7),2&n){const t=e.oxw(2);e.Q6J("user",t.data.user)}}function fn(n,r){if(1&n&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.AsE(" ",i.i18n.ad.minDeliveryTime,": ",i.format.formatTimeInterval(t.minDeliveryTime),"")}}function xn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"button",14),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).remove(a),o.stopPropagation(),o.preventDefault()}),e._UZ(2,"icon",15),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("tooltip",t.i18n.general.remove),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}function yn(n,r){if(1&n&&(e.TgZ(0,"mobile-result")(1,"div",8)(2,"div")(3,"div",9),e._uU(4),e.qZA(),e.TgZ(5,"div",10),e._uU(6),e.qZA(),e.TgZ(7,"div",10),e._uU(8),e.qZA(),e.TgZ(9,"div",10),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.YNc(12,fn,2,2,"div",11),e.TgZ(13,"div",10),e._uU(14),e.qZA(),e.TgZ(15,"div",10),e._uU(16),e.qZA()()(),e.YNc(17,xn,3,2,"div",12),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(2),e.AsE(" ",i.i18n.ad.chargeType,": ",i.resolveChargeTypeLabel(t.chargeType),""),e.xp6(2),e.AsE(" ",i.i18n.ad.deliveryType,": ",i.resolveDeliveryTypeLabel(t.deliveryType),""),e.xp6(2),e.AsE(" ",i.i18n.ad.price,": ",e.xi3(11,13,t.chargeAmount,t.chargeCurrency),""),e.xp6(2),e.Q6J("ngIf",t.minDeliveryTime),e.xp6(2),e.AsE(" ",i.i18n.ad.maxDeliveryTime,": ",i.format.formatTimeInterval(t.maxDeliveryTime),""),e.xp6(2),e.AsE(" ",i.i18n.general.enabled,": ",t.enabled?i.i18n.general.yes:i.i18n.general.no,""),e.xp6(1),e.Q6J("ngIf",i.data.canEdit)}}function vn(n,r){1&n&&e._UZ(0,"th",20)}function bn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"td",20)(1,"button",14),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(3).remove(a),o.stopPropagation()}),e._UZ(2,"icon",15),e.qZA()()}if(2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("tooltip",t.i18n.general.remove),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}function An(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(3);return l.router.navigate(l.viewPath(a))}),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td",17),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.YNc(17,bn,3,2,"td",18),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",i.resolveChargeTypeLabel(t.chargeType)," "),e.xp6(2),e.hij(" ",i.resolveDeliveryTypeLabel(t.deliveryType)," "),e.xp6(2),e.hij(" ",e.xi3(10,8,t.chargeAmount,t.chargeCurrency)," "),e.xp6(3),e.hij(" ",i.format.formatTimeInterval(t.minDeliveryTime)," "),e.xp6(2),e.hij(" ",i.format.formatTimeInterval(t.maxDeliveryTime)," "),e.xp6(2),e.hij(" ",t.enabled?i.i18n.general.yes:i.i18n.general.no," "),e.xp6(1),e.Q6J("ngIf",i.data.canEdit)}}function Tn(n,r){if(1&n&&(e.TgZ(0,"table",16)(1,"thead")(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.qZA(),e.TgZ(8,"th",17),e._uU(9),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.qZA(),e.YNc(16,vn,1,0,"th",18),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,An,18,11,"ng-container",19),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.i18n.general.name),e.xp6(2),e.Oqu(t.i18n.ad.chargeType),e.xp6(2),e.Oqu(t.i18n.ad.deliveryType),e.xp6(2),e.Oqu(t.i18n.ad.price),e.xp6(2),e.Oqu(t.i18n.ad.minDeliveryTime),e.xp6(2),e.Oqu(t.i18n.ad.maxDeliveryTime),e.xp6(2),e.Oqu(t.i18n.general.enabled),e.xp6(1),e.Q6J("ngIf",t.data.canEdit),e.xp6(2),e.Q6J("ngForOf",t.data.deliveryMethods)}}function Zn(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,gn,1,1,"user-info",3),e.qZA(),e.TgZ(4,"results-layout",4),e.YNc(5,yn,18,16,"mobile-result",5),e.YNc(6,Tn,19,9,"table",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.deliveryMethods)("mobileHeading",t.i18n.ad.mobileTitle.deliveryMethods)("headingActions",e.lcZ(2,7,t.headingActions$))("mode",t.self?"empty":"normal"),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("results",t.data.deliveryMethods)("toLink",t.toLink)}}let Cn=(()=>{class n extends U.y{constructor(t,i){super(t),this.deliveryMethodService=i}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||this.ApiHelper.SELF,this.addSub(this.deliveryMethodService.getUserDeliveryMethodsListData({user:this.param}).subscribe(t=>{this.data=t}))}onDataInitialized(t){this.self=this.authHelper.isSelfOrOwner(t.user),t.canCreate&&(this.headingActions=[new y.Yu(x.l.PlusCircle,this.i18n.general.addNew,()=>{this.router.navigate(["/marketplace",this.param,"delivery-methods","new"])},!0)])}viewPath(t){return["/marketplace","delivery-methods","view",t.id]}get toLink(){return t=>this.viewPath(t)}remove(t){this.confirmation.confirm({message:this.i18n.general.removeConfirm(t.name),callback:()=>this.doRemove(t)})}doRemove(t){this.addSub(this.deliveryMethodService.deleteDeliveryMethod({id:t.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(t.name)),this.reload()}))}resolveChargeTypeLabel(t){switch(t){case M.FIXED:return this.i18n.ad.fixed;case M.NEGOTIATED:return this.i18n.ad.negotiated}return""}resolveDeliveryTypeLabel(t){switch(t){case w.DELIVER:return this.i18n.ad.deliver;case w.PICKUP:return this.i18n.ad.pickup}return""}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.DELIVERY_METHODS)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(Ce))},n.\u0275cmp=e.Xpm({type:n,selectors:[["list-delivery-methods"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions","mode"],[3,"user",4,"ngIf"],[3,"results","toLink"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"user"],[1,"d-flex"],[1,"cell-main"],[1,"cell-text"],["class","cell-text",4,"ngIf"],["class","ml-auto text-right",4,"ngIf"],[1,"ml-auto","text-right"],["type","button",1,"btn","btn-icon",3,"tooltip","click"],[3,"icon"],[1,"table","table-hover","cursor-pointer"],[1,"text-right"],["class","actions",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"actions"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Zn,7,9,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,Qe.M,L.D,Y.E,P.t,F.i9,j.o,E.p,u.sg],pipes:[u.Ov,S.H],encapsulation:2,changeDetection:0}),n})();var oe=c(7300);function wn(n,r){if(1&n&&(e.TgZ(0,"label-value",9),e._UZ(1,"user-link",10),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user)}}function In(n,r){if(1&n&&e._UZ(0,"label-value",4),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.address.address)("value",t.data.address.name)}}function Qn(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.price),e.xp6(1),e.hij(" ",e.xi3(2,2,t.data.chargeAmount,t.data.chargeCurrency)," ")}}function qn(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.minDeliveryTime),e.xp6(1),e.hij(" ",t.format.formatTimeInterval(t.data.minDeliveryTime)," ")}}function Jn(n,r){if(1&n&&(e.ynx(0,11),e.TgZ(1,"h2",12),e._uU(2),e.qZA(),e.TgZ(3,"div",13),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.i18n.general.description," "),e.xp6(2),e.hij(" ",t.data.description," ")}}function Sn(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,wn,2,2,"label-value",3),e._UZ(4,"label-value",4)(5,"label-value",4)(6,"label-value",4),e.YNc(7,In,1,2,"label-value",5),e.YNc(8,Qn,3,5,"label-value",6),e.YNc(9,qn,2,2,"label-value",6),e.TgZ(10,"label-value",7),e._uU(11),e.qZA(),e.TgZ(12,"label-value",7),e._uU(13),e.qZA(),e.YNc(14,Jn,5,2,"ng-container",8),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.deliveryMethod)("mobileHeading",t.i18n.ad.mobileTitle.deliveryMethod)("headingActions",e.lcZ(2,18,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("label",t.i18n.general.name)("value",t.data.name),e.xp6(1),e.Q6J("label",t.i18n.ad.chargeType)("value",t.resolveChargeTypeLabel()),e.xp6(1),e.Q6J("label",t.i18n.ad.deliveryType)("value",t.resolveDeliveryTypeLabel()),e.xp6(1),e.Q6J("ngIf","pickup"===t.data.deliveryType),e.xp6(1),e.Q6J("ngIf",t.data.chargeAmount),e.xp6(1),e.Q6J("ngIf",t.data.minDeliveryTime),e.xp6(1),e.Q6J("label",t.i18n.ad.maxDeliveryTime),e.xp6(1),e.hij(" ",t.format.formatTimeInterval(t.data.maxDeliveryTime)," "),e.xp6(1),e.Q6J("label",t.i18n.general.enabled),e.xp6(1),e.hij(" ",t.data.enabled?t.i18n.general.yes:t.i18n.general.no," "),e.xp6(1),e.Q6J("ngIf",t.data.description)}}let Un=(()=>{class n extends oe.k{constructor(t,i){super(t),this.deliveryMethodService=i}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.deliveryMethodService.viewDeliveryMethod({id:this.id}).subscribe(t=>{this.data=t}))}onDataInitialized(t){this.self=this.authHelper.isSelfOrOwner(t.user);const i=[];t.canEdit&&i.push(new y.Yu(x.l.Pencil,this.i18n.general.edit,()=>this.router.navigate(["/marketplace","delivery-methods","edit",this.id]),!0)),this.headingActions=i}resolveChargeTypeLabel(){switch(this.data.chargeType){case M.FIXED:return this.i18n.ad.fixed;case M.NEGOTIATED:return this.i18n.ad.negotiated}return""}resolveDeliveryTypeLabel(){switch(this.data.deliveryType){case w.DELIVER:return this.i18n.ad.deliver;case w.PICKUP:return this.i18n.ad.pickup}return""}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.DELIVERY_METHODS)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(Ce))},n.\u0275cmp=e.Xpm({type:n,selectors:[["view-delivery-method"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],["labelPosition","side",3,"label",4,"ngIf"],[3,"label","value"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngIf"],[3,"label"],["class","d-flex justify-content-start",4,"ngIf"],["labelPosition","side",3,"label"],[3,"user"],[1,"d-flex","justify-content-start"],[1,"mt-3"],[1,"break-nl"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Sn,15,20,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,T.t,C.F],pipes:[u.Ov,S.H],encapsulation:2,changeDetection:0}),n})();var G=c(7045),qe=c(1650),kn=c(744),Fn=c(7224),Nn=c(1787),R=c(5905);let te=(()=>{class n extends z.b{constructor(t,i){super(t,i)}getAdDataForSearch$Response(t,i){const o=new m.c(this.rootUrl,n.GetAdDataForSearchPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.query("kind",t.kind,{}),o.query("brokered",t.brokered,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getAdDataForSearch(t,i){return this.getAdDataForSearch$Response(t,i).pipe((0,s.U)(o=>o.body))}searchAds$Response(t,i){const o=new m.c(this.rootUrl,n.SearchAdsPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.query("addressResult",t.addressResult,{}),o.query("brokers",t.brokers,{}),o.query("category",t.category,{}),o.query("currency",t.currency,{}),o.query("customFields",t.customFields,{}),o.query("expirationPeriod",t.expirationPeriod,{}),o.query("favoriteFor",t.favoriteFor,{}),o.query("groups",t.groups,{}),o.query("hasImages",t.hasImages,{}),o.query("keywords",t.keywords,{}),o.query("kind",t.kind,{}),o.query("latitude",t.latitude,{}),o.query("longitude",t.longitude,{}),o.query("maxDistance",t.maxDistance,{}),o.query("orderBy",t.orderBy,{}),o.query("page",t.page,{}),o.query("pageSize",t.pageSize,{}),o.query("priceRange",t.priceRange,{}),o.query("productNumber",t.productNumber,{}),o.query("profileFields",t.profileFields,{}),o.query("publicationPeriod",t.publicationPeriod,{}),o.query("returnEditable",t.returnEditable,{}),o.query("skipTotalCount",t.skipTotalCount,{}),o.query("statuses",t.statuses,{}),o.query("user",t.user,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}searchAds(t,i){return this.searchAds$Response(t,i).pipe((0,s.U)(o=>o.body))}getUserAdsDataForSearch$Response(t,i){const o=new m.c(this.rootUrl,n.GetUserAdsDataForSearchPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("user",t.user,{}),o.query("kind",t.kind,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getUserAdsDataForSearch(t,i){return this.getUserAdsDataForSearch$Response(t,i).pipe((0,s.U)(o=>o.body))}getAdDataForNew$Response(t,i){const o=new m.c(this.rootUrl,n.GetAdDataForNewPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("user",t.user,{}),o.query("basedOnId",t.basedOnId,{}),o.query("kind",t.kind,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getAdDataForNew(t,i){return this.getAdDataForNew$Response(t,i).pipe((0,s.U)(o=>o.body))}searchUserAds$Response(t,i){const o=new m.c(this.rootUrl,n.SearchUserAdsPath,"get");return t&&(o.path("user",t.user,{}),o.query("addressResult",t.addressResult,{}),o.query("category",t.category,{}),o.query("currency",t.currency,{}),o.query("customFields",t.customFields,{}),o.query("expirationPeriod",t.expirationPeriod,{}),o.query("favoriteFor",t.favoriteFor,{}),o.query("hasImages",t.hasImages,{}),o.query("keywords",t.keywords,{}),o.query("kind",t.kind,{}),o.query("latitude",t.latitude,{}),o.query("longitude",t.longitude,{}),o.query("maxDistance",t.maxDistance,{}),o.query("orderBy",t.orderBy,{}),o.query("page",t.page,{}),o.query("pageSize",t.pageSize,{}),o.query("priceRange",t.priceRange,{}),o.query("productNumber",t.productNumber,{}),o.query("profileFields",t.profileFields,{}),o.query("publicationPeriod",t.publicationPeriod,{}),o.query("skipTotalCount",t.skipTotalCount,{}),o.query("statuses",t.statuses,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}searchUserAds(t,i){return this.searchUserAds$Response(t,i).pipe((0,s.U)(o=>o.body))}createAd$Response(t,i){const o=new m.c(this.rootUrl,n.CreateAdPath,"post");return t&&(o.path("user",t.user,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"text/plain",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}createAd(t,i){return this.createAd$Response(t,i).pipe((0,s.U)(o=>o.body))}getAdDataForEdit$Response(t,i){const o=new m.c(this.rootUrl,n.GetAdDataForEditPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("ad",t.ad,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getAdDataForEdit(t,i){return this.getAdDataForEdit$Response(t,i).pipe((0,s.U)(o=>o.body))}viewAd$Response(t,i){const o=new m.c(this.rootUrl,n.ViewAdPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("ad",t.ad,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}viewAd(t,i){return this.viewAd$Response(t,i).pipe((0,s.U)(o=>o.body))}updateAd$Response(t,i){const o=new m.c(this.rootUrl,n.UpdateAdPath,"put");return t&&(o.path("ad",t.ad,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}updateAd(t,i){return this.updateAd$Response(t,i).pipe((0,s.U)(o=>o.body))}deleteAd$Response(t,i){const o=new m.c(this.rootUrl,n.DeleteAdPath,"delete");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}deleteAd(t,i){return this.deleteAd$Response(t,i).pipe((0,s.U)(o=>o.body))}exportAd$Response(t,i){const o=new m.c(this.rootUrl,n.ExportAdPath,"get");return t&&(o.path("ad",t.ad,{}),o.path("format",t.format,{})),this.http.request(o.build({responseType:"blob",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}exportAd(t,i){return this.exportAd$Response(t,i).pipe((0,s.U)(o=>o.body))}hideAd$Response(t,i){const o=new m.c(this.rootUrl,n.HideAdPath,"post");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}hideAd(t,i){return this.hideAd$Response(t,i).pipe((0,s.U)(o=>o.body))}unhideAd$Response(t,i){const o=new m.c(this.rootUrl,n.UnhideAdPath,"post");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}unhideAd(t,i){return this.unhideAd$Response(t,i).pipe((0,s.U)(o=>o.body))}setAdAsDraft$Response(t,i){const o=new m.c(this.rootUrl,n.SetAdAsDraftPath,"post");return t&&(o.path("ad",t.ad,{}),o.body(t.body,"text/plain")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}setAdAsDraft(t,i){return this.setAdAsDraft$Response(t,i).pipe((0,s.U)(o=>o.body))}submitAdForAuthorization$Response(t,i){const o=new m.c(this.rootUrl,n.SubmitAdForAuthorizationPath,"post");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}submitAdForAuthorization(t,i){return this.submitAdForAuthorization$Response(t,i).pipe((0,s.U)(o=>o.body))}approveAd$Response(t,i){const o=new m.c(this.rootUrl,n.ApproveAdPath,"post");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}approveAd(t,i){return this.approveAd$Response(t,i).pipe((0,s.U)(o=>o.body))}rejectAd$Response(t,i){const o=new m.c(this.rootUrl,n.RejectAdPath,"post");return t&&(o.path("ad",t.ad,{}),o.body(t.body,"text/plain")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}rejectAd(t,i){return this.rejectAd$Response(t,i).pipe((0,s.U)(o=>o.body))}getUserFavoriteAdsListData$Response(t,i){const o=new m.c(this.rootUrl,n.GetUserFavoriteAdsListDataPath,"get");return t&&(o.path("user",t.user,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getUserFavoriteAdsListData(t,i){return this.getUserFavoriteAdsListData$Response(t,i).pipe((0,s.U)(o=>o.body))}markAsFavorite$Response(t,i){const o=new m.c(this.rootUrl,n.MarkAsFavoritePath,"post");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}markAsFavorite(t,i){return this.markAsFavorite$Response(t,i).pipe((0,s.U)(o=>o.body))}unmarkAsFavorite$Response(t,i){const o=new m.c(this.rootUrl,n.UnmarkAsFavoritePath,"post");return t&&o.path("ad",t.ad,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}unmarkAsFavorite(t,i){return this.unmarkAsFavorite$Response(t,i).pipe((0,s.U)(o=>o.body))}}return n.GetAdDataForSearchPath="/marketplace/data-for-search",n.SearchAdsPath="/marketplace",n.GetUserAdsDataForSearchPath="/{user}/marketplace/data-for-search",n.GetAdDataForNewPath="/{user}/marketplace/data-for-new",n.SearchUserAdsPath="/{user}/marketplace",n.CreateAdPath="/{user}/marketplace",n.GetAdDataForEditPath="/marketplace/{ad}/data-for-edit",n.ViewAdPath="/marketplace/{ad}",n.UpdateAdPath="/marketplace/{ad}",n.DeleteAdPath="/marketplace/{ad}",n.ExportAdPath="/marketplace/{ad}/export/{format}",n.HideAdPath="/marketplace/{ad}/hide",n.UnhideAdPath="/marketplace/{ad}/unhide",n.SetAdAsDraftPath="/marketplace/{ad}/set-as-draft",n.SubmitAdForAuthorizationPath="/marketplace/{ad}/request-authorization",n.ApproveAdPath="/marketplace/{ad}/approve",n.RejectAdPath="/marketplace/{ad}/reject",n.GetUserFavoriteAdsListDataPath="/{user}/marketplace/list-favorites-data",n.MarkAsFavoritePath="/marketplace/{ad}/mark-as-favorite",n.UnmarkAsFavoritePath="/marketplace/{ad}/unmark-as-favorite",n.\u0275fac=function(t){return new(t||n)(e.LFG(X.p),e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var On=c(6247),Dn=c(2525),$n=c(48),Je=c(5255),Se=c(8170),Ln=c(6974),Yn=c(1602),Pn=c(9998),ce=c(3030);function En(n,r){if(1&n&&(e.TgZ(0,"notification",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.i18n.ad.error.noAvailableAccounts," ")}}function Mn(n,r){if(1&n&&(e.TgZ(0,"notification",26),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.i18n.ad.warningDisabledAd," ")}}function Rn(n,r){if(1&n&&(e.TgZ(0,"div",34),e._UZ(1,"avatar-lightbox",35),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("image",t)("roundBorders",!1)("additionalImages",i.images)}}function Hn(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",36),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.i18n.ad.noImages," ")}}function jn(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"action-button",37),e.NdJ("action",function(){return e.CHM(t),e.oxw(),e.MAs(12).perform()}),e.qZA(),e.TgZ(2,"action-button",37),e.NdJ("action",function(){e.CHM(t),e.oxw();const o=e.MAs(12);return e.oxw(2).captureCamera(o)}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("label",t.i18n.field.image.upload)("disabled",t.showNotAvailableCurrenciesError()),e.xp6(1),e.Q6J("label",t.i18n.field.image.camera)("disabled",t.showNotAvailableCurrenciesError())}}function Bn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",37),e.NdJ("action",function(){return e.CHM(t),e.oxw(3).manageImages()}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.field.image.manage)("disabled",t.showNotAvailableCurrenciesError())}}function Vn(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"h2",27),e._uU(2),e.qZA(),e.TgZ(3,"div",28),e.YNc(4,Rn,2,3,"div",29),e.ALo(5,"async"),e.YNc(6,Hn,3,1,"ng-container",1),e.qZA(),e.TgZ(7,"actions",30),e.YNc(8,jn,3,4,"ng-container",1),e.ALo(9,"async"),e.YNc(10,Bn,1,2,"action-button",31),e.qZA(),e.TgZ(11,"image-upload",32,33),e.NdJ("uploadDone",function(o){return e.CHM(t),e.oxw(2).onUploadDone(o)}),e.qZA(),e.BQk()}if(2&n){const t=e.MAs(12),i=e.oxw(2);e.xp6(2),e.hij(" ",i.i18n.general.images," "),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,9,i.images$)),e.xp6(2),e.Q6J("ngIf",0===i.images.length),e.xp6(2),e.Q6J("ngIf",i.canUploadImages&&!1===e.lcZ(9,11,t.uploading$)),e.xp6(2),e.Q6J("ngIf",i.images.length>0),e.xp6(1),e.Q6J("target",i.id?"marketplace":"advertisement")("max",i.data.maxImages)("owner",i.id)("user",i.data.user.id)}}function Gn(n,r){1&n&&e._UZ(0,"hr",38)}function zn(n,r){if(1&n&&(e.TgZ(0,"label-value",39),e._UZ(1,"user-link",40),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user)}}function Xn(n,r){if(1&n&&(e.TgZ(0,"label-value",39),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.status),e.xp6(1),e.hij(" ",t.status," ")}}function Wn(n,r){if(1&n&&(e.TgZ(0,"label-value",39),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.creationDate),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.creationDate)," ")}}function Kn(n,r){if(1&n&&e._UZ(0,"field-option",43),2&n){const t=r.$implicit,i=e.oxw(3);e.Akn(t.leaf?"leaf":"parent"),e.Q6J("value",i.ApiHelper.internalNameOrId(t))("id",t.id)("internalName",t.internalName)("text",t.name)("level",t.level)("disabled",!t.leaf)}}function ei(n,r){if(1&n&&(e.TgZ(0,"single-selection-field",41),e.YNc(1,Kn,1,8,"field-option",42),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.category),e.xp6(1),e.Q6J("ngForOf",t.categories)}}function ti(n,r){if(1&n&&e._UZ(0,"field-option",43),2&n){const t=r.$implicit,i=e.oxw(3);e.Akn("hierarchy "+(t.leaf?"leaf":"parent")),e.Q6J("value",i.ApiHelper.internalNameOrId(t))("id",t.id)("internalName",t.internalName)("text",t.name)("level",t.level)("disabled",!t.leaf)}}function ni(n,r){if(1&n&&(e.TgZ(0,"multi-selection-field",41),e.YNc(1,ti,1,8,"field-option",42),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.categories),e.xp6(1),e.Q6J("ngForOf",t.categories)}}function ii(n,r){if(1&n&&e._UZ(0,"field-option",46),2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("value",i.ApiHelper.internalNameOrId(t))("id",t.id)("internalName",t.internalName)("text",t.name)}}function oi(n,r){if(1&n&&(e.TgZ(0,"single-selection-field",44),e.YNc(1,ii,1,4,"field-option",45),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.currency)("required",t.webshop),e.xp6(1),e.Q6J("ngForOf",t.data.currencies)}}function ri(n,r){if(1&n&&e._UZ(0,"decimal-field",47),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.price)("scale",t.currency.decimalDigits)("prefix",t.currency.prefix)("suffix",t.currency.suffix)("required",t.webshop)}}function ai(n,r){if(1&n&&e._UZ(0,"decimal-field",52),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.promotionalPrice)("scale",t.currency.decimalDigits)("prefix",t.currency.prefix)("suffix",t.currency.suffix)}}function si(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"label-value",48)(2,"div",13)(3,"div",14),e._UZ(4,"date-field",49),e.qZA(),e.TgZ(5,"div",16),e._uU(6),e.qZA(),e.TgZ(7,"div",17),e._UZ(8,"date-field",50),e.qZA()()(),e.YNc(9,ai,1,4,"decimal-field",51),e.ALo(10,"async"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.promotionalPeriod),e.xp6(5),e.hij(" ",t.i18n.general.periodTo," "),e.xp6(3),e.Q6J("ngIf",e.lcZ(10,3,t.currency$))}}function li(n,r){if(1&n&&e._UZ(0,"custom-field-input",53),2&n){const t=r.$implicit,i=e.oxw(2);e.Q6J("field",t)("formControl",i.form.get("customValues").get(t.internalName))("binaryValues",i.binaryValues)}}function ci(n,r){if(1&n&&e._UZ(0,"field-option",56),2&n){const t=r.$implicit;e.Q6J("value",t.id)("id",t.id)("text",t.name)}}function di(n,r){if(1&n&&(e.TgZ(0,"multi-selection-field",54),e.YNc(1,ci,1,3,"field-option",55),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.showAddressOnMap),e.xp6(1),e.Q6J("ngForOf",t.data.addresses)}}function ui(n,r){if(1&n&&(e.ynx(0),e._UZ(1,"decimal-field",66)(2,"decimal-field",67),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("label",t.i18n.ad.stockQuantity)("scale",t.decimalQuantity),e.xp6(1),e.Q6J("label",t.i18n.ad.lowStockNotification)("scale",t.decimalQuantity)}}function pi(n,r){if(1&n&&e._UZ(0,"input-field",68),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.productNumber)("mask",t.mask)("placeholder",t.mask)}}function mi(n,r){if(1&n&&e._UZ(0,"field-option",56),2&n){const t=r.$implicit;e.Q6J("value",t.id)("id",t.id)("text",t.name)}}function _i(n,r){if(1&n&&(e.TgZ(0,"multi-selection-field",69),e.YNc(1,mi,1,3,"field-option",55),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.deliveryMethods)("emptyLabel",0===t.deliveryMethods$.value.length?t.i18n.ad.noDeliveryMethodsAvailable:null),e.xp6(1),e.Q6J("ngForOf",t.deliveryMethods$.value)}}function hi(n,r){if(1&n&&(e.ynx(0),e._UZ(1,"boolean-field",57),e.TgZ(2,"radio-group-field",58),e._UZ(3,"field-option",59)(4,"field-option",60)(5,"field-option",61),e.qZA(),e.YNc(6,ui,3,4,"ng-container",1),e.ALo(7,"async"),e._UZ(8,"decimal-field",62)(9,"decimal-field",63),e.YNc(10,pi,1,3,"input-field",64),e.YNc(11,_i,2,3,"multi-selection-field",65),e.ALo(12,"async"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.allowDecimalQuantity),e.xp6(1),e.Q6J("label",t.i18n.ad.stockType),e.xp6(1),e.Q6J("text",t.i18n.ad.available),e.xp6(1),e.Q6J("text",t.i18n.ad.notAvailable),e.xp6(1),e.Q6J("text",t.i18n.ad.quantity),e.xp6(1),e.Q6J("ngIf","quantity"===(t.form.value||e.lcZ(7,12,t.form.valueChanges)).stockType),e.xp6(2),e.Q6J("label",t.i18n.ad.maxAllowedInCart)("scale",t.decimalQuantity),e.xp6(1),e.Q6J("label",t.i18n.ad.minAllowedInCart)("scale",t.decimalQuantity),e.xp6(1),e.Q6J("ngIf",t.requiredProductNumber),e.xp6(1),e.Q6J("ngIf",e.lcZ(12,14,t.deliveryMethods$))}}function gi(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",70),e.NdJ("action",function(){return e.CHM(t),e.oxw(2).save(!0)}),e.ALo(1,"async"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",e.lcZ(1,2,t.requesting$)||t.showNotAvailableCurrenciesError())("label",t.i18n.ad.saveAndInsertNew)}}function fi(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,En,2,1,"notification",3),e.YNc(4,Mn,2,1,"notification",4),e.ynx(5,5),e.YNc(6,Vn,13,13,"ng-container",1),e.YNc(7,Gn,1,0,"hr",6),e.YNc(8,zn,2,2,"label-value",7),e.YNc(9,Xn,2,2,"label-value",7),e.YNc(10,Wn,3,4,"label-value",7),e._UZ(11,"input-field",8),e.YNc(12,ei,2,2,"single-selection-field",9),e.YNc(13,ni,2,2,"multi-selection-field",9),e.YNc(14,oi,2,3,"single-selection-field",10),e.YNc(15,ri,1,5,"decimal-field",11),e.ALo(16,"async"),e.TgZ(17,"label-value",12),e.ALo(18,"async"),e.TgZ(19,"div",13)(20,"div",14),e._UZ(21,"date-field",15),e.qZA(),e.TgZ(22,"div",16),e._uU(23),e.qZA(),e.TgZ(24,"div",17),e._UZ(25,"date-field",18),e.qZA()()(),e._UZ(26,"boolean-field",19),e.YNc(27,si,11,5,"ng-container",1),e.ALo(28,"async"),e._UZ(29,"html-field",20),e.YNc(30,li,1,3,"custom-field-input",21),e.YNc(31,di,2,2,"multi-selection-field",22),e.YNc(32,hi,13,16,"ng-container",1),e.BQk(),e.TgZ(33,"actions")(34,"action-button",23),e.NdJ("action",function(){return e.CHM(t),e.oxw().save()}),e.qZA(),e.YNc(35,gi,2,4,"action-button",24),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.create?t.i18n.ad.title.new:t.i18n.ad.title.edit)("mobileHeading",t.create?t.i18n.ad.mobileTitle.new:t.i18n.ad.mobileTitle.edit)("headingActions",e.lcZ(2,28,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",t.showNotAvailableCurrenciesError()),e.xp6(1),e.Q6J("ngIf",t.showDisabledAdWarning()),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.data.maxImages>0),e.xp6(1),e.Q6J("ngIf",t.data.maxImages>0),e.xp6(1),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("ngIf",!t.create),e.xp6(1),e.Q6J("ngIf",!t.create),e.xp6(1),e.Q6J("label",t.i18n.general.name),e.xp6(1),e.Q6J("ngIf",1==t.data.maxCategoriesPerAd),e.xp6(1),e.Q6J("ngIf",t.data.maxCategoriesPerAd>1),e.xp6(1),e.Q6J("ngIf",(null==t.data.currencies?null:t.data.currencies.length)>1),e.xp6(1),e.Q6J("ngIf",e.lcZ(16,30,t.currency$)),e.xp6(2),e.Q6J("label",t.i18n.ad.publicationPeriod)("fieldSize",e.lcZ(18,32,t.layout.ltsm$)?"medium":""),e.xp6(6),e.hij(" ",t.i18n.general.periodTo," "),e.xp6(3),e.Q6J("label",t.i18n.ad.setPromotionalPeriod),e.xp6(1),e.Q6J("ngIf",e.lcZ(28,34,t.form.get("setPromotionalPeriod").valueChanges)||t.form.get("setPromotionalPeriod").value),e.xp6(2),e.Q6J("label",t.i18n.general.description),e.xp6(1),e.Q6J("ngForOf",t.data.customFields),e.xp6(1),e.Q6J("ngIf",t.data.addresses),e.xp6(1),e.Q6J("ngIf",t.webshop),e.xp6(2),e.Q6J("label",t.i18n.general.save)("disabled",t.showNotAvailableCurrenciesError()),e.xp6(1),e.Q6J("ngIf",t.data.canCreateNew)}}let Ee=(()=>{class n extends U.y{constructor(t,i,o,a,l,h,I){super(t),this.imagesService=i,this.modal=o,this.changeDetector=a,this.marketplaceHelper=l,this.marketplaceService=h,this.camera=I,this.categories=[],this.images$=new A.X([]),this.currency$=new A.X(null),this.deliveryMethods$=new A.X(null)}ngOnInit(){super.ngOnInit(),this.basedOnId=this.route.snapshot.queryParams.basedOnId,this.id=this.route.snapshot.params.id,this.kind=this.route.snapshot.paramMap.get("kind"),this.create=null==this.id;const t=this.create?this.marketplaceService.getAdDataForNew({basedOnId:this.basedOnId,user:this.route.snapshot.params.user,kind:this.kind}):this.marketplaceService.getAdDataForEdit({ad:this.id});this.addSub(t.subscribe(i=>{!this.create&&i.maxImages>0?this.addSub(this.imagesService.listAdImages({ad:this.id}).subscribe(o=>{this.images=o,this.mainImage=this.images.length>0?this.ApiHelper.internalNameOrId(this.images[0]):null,this.data=i})):this.data=i}))}onDataInitialized(t){var i;this.kind=t.kind,this.webshop=this.kind===G.$.WEBSHOP,this.self=this.authHelper.isSelfOrOwner(t.user),this.owner=this.self?this.ApiHelper.SELF:t.user.id,this.marketplaceHelper.populateCategories(this.categories,t.categories,0);const o=t.advertisement,a=o,l=o.categories&&1===t.maxCategoriesPerAd?o.categories[0]:o.categories,h=t.webshopSettings||{};this.requiredProductNumber=this.webshop&&!h.productNumberGenerated,this.mask=h.productNumberGenerated?"":h.productNumberMask;const I=!(0,f.cS)(t.currencies),q=I?(null===(i=t.currencies)||void 0===i?void 0:i.find(Ne=>this.ApiHelper.internalNameOrId(Ne)===o.currency))||t.currencies[0]:null;this.form=this.formBuilder.group({name:[o.name,d.kI.required],categories:[l,d.kI.required],currency:[q?this.ApiHelper.internalNameOrId(q):null,I?d.kI.required:null],price:[o.price,this.webshop&&I?d.kI.required:null],publicationBeginDate:[o.publicationPeriod.begin,d.kI.required],publicationEndDate:[o.publicationPeriod.end,d.kI.required],setPromotionalPeriod:null!=o.promotionalPeriod,promotionalBeginDate:o.promotionalPeriod?o.promotionalPeriod.begin:null,promotionalEndDate:o.promotionalPeriod?o.promotionalPeriod.end:null,promotionalPrice:o.promotionalPrice,description:[o.description,d.kI.required],maxAllowedInCart:o.maxAllowedInCart,minAllowedInCart:o.minAllowedInCart,allowDecimalQuantity:o.allowDecimalQuantity,unlimitedStock:!!this.create||o.unlimitedStock,stockQuantity:o.stockQuantity,minStockQuantityToNotify:o.minStockQuantityToNotify,productNumber:[o.productNumber,this.requiredProductNumber?d.kI.required:null],version:a.version,stockType:this.webshop?this.resolveStockType(o):null,id:this.id,kind:this.kind}),this.form.addControl("addresses",this.formBuilder.control(o.addresses)),this.form.addControl("deliveryMethods",this.formBuilder.control(o.deliveryMethods)),this.form.addControl("customValues",this.fieldHelper.customValuesFormGroup(t.customFields,{currentValues:o.customValues})),this.addSub(this.form.get("currency").valueChanges.subscribe(Ne=>{this.updateCurrency(Ne,t),this.updateDeliveryMethods(t)})),this.currency=q,this.addSub(this.form.controls.stockType.valueChanges.subscribe(()=>this.updateStockControls())),this.uploadedImages=[],this.updateDeliveryMethods(t),this.updateStockControls()}resolveMenu(t){return this.self?t.kind===G.$.SIMPLE?g.v2.SEARCH_USER_ADS:g.v2.SEARCH_USER_WEBSHOP:this.menu.userMenu(t.user,g.v2.SEARCH_ADS)}updateStockControls(){if(this.webshop){const t=this.form.controls.stockType.value;"available"===t||"notAvailable"===t?this.form.controls.stockQuantity.clearValidators():this.form.controls.stockQuantity.setValidators(d.kI.required),this.form.controls.stockQuantity.updateValueAndValidity()}}updateCurrency(t,i){this.currency=i.currencies.find(o=>o.id===t||o.internalName===t)}updateDeliveryMethods(t){this.deliveryMethods$.next(t.deliveryMethods.filter(i=>null==i.chargeCurrency||i.chargeCurrency.id===(this.currency||{}).id))}resolveStockType(t){return this.create||t.unlimitedStock?"available":t.stockQuantity?"quantity":"notAvailable"}get status(){return this.marketplaceHelper.resolveStatusLabel(this.data.status)}showNotAvailableCurrenciesError(){return this.data.status===qe.G.DISABLED&&(!this.data.currencies||0===this.data.currencies.length)}showDisabledAdWarning(){var t;return this.data.status===qe.G.DISABLED&&(null===(t=this.data.currencies)||void 0===t?void 0:t.length)>0}save(t){if(!(0,f.pt)(this.form))return;const i=(0,be.Z)(this.form.value);i.publicationPeriod=this.ApiHelper.datePeriod(i.publicationBeginDate,i.publicationEndDate),delete i.publicationBeginDate,delete i.publicationEndDate,i.promotionalPeriod=i.setPromotionalPeriod?this.ApiHelper.datePeriod(i.promotionalBeginDate,i.promotionalEndDate):null,delete i.setPromotionalPeriod,delete i.promotionalBeginDate,delete i.promotionalEndDate,null==i.promotionalPeriod&&delete i.promotionalPrice,this.webshop&&(i.unlimitedStock="available"===i.stockType,"quantity"!==i.stockType&&(i.stockQuantity=null),delete i.stockType);const o=a=>{this.notification.snackBar(this.i18n.ad.adSaved),t?this.router.navigate(["/marketplace",this.owner,this.data.kind,"ad","new"],{replaceUrl:!0,queryParams:{basedOnId:a||this.id}}):this.basedOnId?this.router.navigate(["/marketplace","edit",a],{replaceUrl:!0}):history.back()};if(this.data.requiresAuthorization&&this.self&&(i.submitForAuthorization=!1),this.create)i.images=this.uploadedImages.map(a=>a.id),this.addSub(this.marketplaceService.createAd({user:this.owner,body:i}).subscribe(o));else{const a=this.marketplaceService.updateAd({ad:this.id,body:i});this.mainImageChanged()?this.addSub(this.marketplaceService.getAdDataForEdit({ad:this.id,fields:["advertisement.version"]}).subscribe(l=>{i.version=l.advertisement.version,this.addSub(a.subscribe(o))})):this.addSub(a.subscribe(o))}}mainImageChanged(){const t=this.images.length>0?this.ApiHelper.internalNameOrId(this.images[0]):null;return null==this.mainImage&&null==t&&this.hasRemovedImages||this.mainImage!==t}manageImages(){const t=this.modal.show(kn.A,{class:"modal-form",initialState:{images:this.images,manageAfterConfirm:this.create}});t.content.result.pipe((0,Fn.P)()).subscribe(o=>{null!=o.order&&(this.images=this.images.filter(a=>o.order.includes(a.id)),this.uploadedImages=this.uploadedImages.filter(a=>o.order.includes(a.id)),this.images=o.order.map(a=>this.images.find(l=>l.id===a)),this.create||this.addSub(this.imagesService.reorderAdImages({ids:o.order,ad:this.id}).subscribe())),t.hide(),this.changeDetector.detectChanges()})}onUploadDone(t){this.images=[...this.images,...t],this.uploadedImages=[...this.uploadedImages||[],...t],this.changeDetector.detectChanges()}captureCamera(t){this.camera.capture(i=>t.uploadFile(i))}get canUploadImages(){return this.images.length<this.data.maxImages}get currency(){return this.currency$.value}set currency(t){this.currency$.next(t)}get images(){return this.images$.value}set images(t){this.images$.next(t)}get creationDate(){return this.data.creationDate}get binaryValues(){return this.data.binaryValues}get decimalQuantity(){return this.form.controls.allowDecimalQuantity.value?2:0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(Nn.C),e.Y36(R.tT),e.Y36(e.sBO),e.Y36(D.V),e.Y36(te),e.Y36(On.y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-ad"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions"],["class","mb-3","type","error",4,"ngIf"],["class","mb-3","type","warning",4,"ngIf"],[3,"formGroup"],["class","mt-4 mb-2",4,"ngIf"],["kind","fieldView",3,"label",4,"ngIf"],["formControlName","name","required","",3,"label"],["formControlName","categories","required","",3,"label",4,"ngIf"],["formControlName","currency",3,"label","required",4,"ngIf"],["formControlName","price",3,"label","scale","prefix","suffix","required",4,"ngIf"],["kind","field","required","",3,"label","fieldSize"],[1,"d-flex","flex-column","flex-sm-row","flex-wrap"],[1,"flex-grow"],["labelPosition","side","formControlName","publicationBeginDate","minDate","past5","fieldSize","full"],[1,"mx-2","d-flex","align-items-center"],[1,"flex-grow","mt-2","mt-xl-0"],["labelPosition","side","formControlName","publicationEndDate","minDate","past5","fieldSize","full"],["formControlName","setPromotionalPeriod",3,"label"],["formControlName","description","required","",3,"label"],[3,"field","formControl","binaryValues",4,"ngFor","ngForOf"],["formControlName","addresses",3,"label",4,"ngIf"],[3,"label","disabled","action"],["outline","",3,"disabled","label","action",4,"ngIf"],["type","error",1,"mb-3"],["type","warning",1,"mb-3"],[1,"border-0","d-flex","mb-3","flex-column","flex-xs-row","justify-content-between","mt-2","mt-md-0"],[1,"row","no-gutters"],["class","col-12 col-xs-6 col-sm-4 col-md-3 d-flex justify-content-center justify-content-center",4,"ngFor","ngForOf"],["kind","secondary","reverseRow","",1,"mt-2"],["outline","",3,"label","disabled","action",4,"ngIf"],[3,"target","max","owner","user","uploadDone"],["multiUpload",""],[1,"col-12","col-xs-6","col-sm-4","col-md-3","d-flex","justify-content-center","justify-content-center"],["size","huge",1,"mb-1","mb-xs-3",3,"image","roundBorders","additionalImages"],[1,"col-12","mb-2"],["outline","",3,"label","disabled","action"],[1,"mt-4","mb-2"],["kind","fieldView",3,"label"],[3,"user"],["formControlName","categories","required","",3,"label"],[3,"value","id","internalName","text","style","level","disabled",4,"ngFor","ngForOf"],[3,"value","id","internalName","text","level","disabled"],["formControlName","currency",3,"label","required"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["formControlName","price",3,"label","scale","prefix","suffix","required"],["kind","field",3,"label"],["labelPosition","side","formControlName","promotionalBeginDate","minDate","past5","fieldSize","full"],["labelPosition","side","formControlName","promotionalEndDate","minDate","past5","fieldSize","full"],["formControlName","promotionalPrice",3,"label","scale","prefix","suffix",4,"ngIf"],["formControlName","promotionalPrice",3,"label","scale","prefix","suffix"],[3,"field","formControl","binaryValues"],["formControlName","addresses",3,"label"],[3,"value","id","text",4,"ngFor","ngForOf"],[3,"value","id","text"],["formControlName","allowDecimalQuantity",3,"label"],["formControlName","stockType",3,"label"],["value","available",3,"text"],["value","notAvailable",3,"text"],["value","quantity",3,"text"],["formControlName","maxAllowedInCart",3,"label","scale"],["formControlName","minAllowedInCart",3,"label","scale"],["type","text","formControlName","productNumber","required","",3,"label","mask","placeholder",4,"ngIf"],["formControlName","deliveryMethods",3,"label","emptyLabel",4,"ngIf"],["formControlName","stockQuantity","required","",3,"label","scale"],["formControlName","minStockQuantityToNotify",3,"label","scale"],["type","text","formControlName","productNumber","required","",3,"label","mask","placeholder"],["formControlName","deliveryMethods",3,"label","emptyLabel"],["outline","",3,"disabled","label","action"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,fi,36,36,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,Dn.c,d.JL,d.sg,u.sg,ve.X,k.h,J.x,$n.J,T.t,C.F,N.q,d.JJ,d.u,d.Q7,V.f,$.s,Je.x,B.U,Se.Q,we.M,Ln.N,Yn.G,d.oH,ae.Y,Pn.h],pipes:[u.Ov,ce.u],encapsulation:2,changeDetection:0}),n})(),Ue=(()=>{class n extends z.b{constructor(t,i){super(t,i)}getUserAdInterestsListData$Response(t,i){const o=new m.c(this.rootUrl,n.GetUserAdInterestsListDataPath,"get");return t&&(o.path("user",t.user,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getUserAdInterestsListData(t,i){return this.getUserAdInterestsListData$Response(t,i).pipe((0,s.U)(o=>o.body))}getAdInterestDataForNew$Response(t,i){const o=new m.c(this.rootUrl,n.GetAdInterestDataForNewPath,"get");return t&&(o.path("user",t.user,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getAdInterestDataForNew(t,i){return this.getAdInterestDataForNew$Response(t,i).pipe((0,s.U)(o=>o.body))}createAdInterest$Response(t,i){const o=new m.c(this.rootUrl,n.CreateAdInterestPath,"post");return t&&(o.path("user",t.user,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"text/plain",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}createAdInterest(t,i){return this.createAdInterest$Response(t,i).pipe((0,s.U)(o=>o.body))}getAdInterestDataForEdit$Response(t,i){const o=new m.c(this.rootUrl,n.GetAdInterestDataForEditPath,"get");return t&&(o.path("id",t.id,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getAdInterestDataForEdit(t,i){return this.getAdInterestDataForEdit$Response(t,i).pipe((0,s.U)(o=>o.body))}viewAdInterest$Response(t,i){const o=new m.c(this.rootUrl,n.ViewAdInterestPath,"get");return t&&(o.path("id",t.id,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}viewAdInterest(t,i){return this.viewAdInterest$Response(t,i).pipe((0,s.U)(o=>o.body))}updateAdInterest$Response(t,i){const o=new m.c(this.rootUrl,n.UpdateAdInterestPath,"put");return t&&(o.path("id",t.id,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}updateAdInterest(t,i){return this.updateAdInterest$Response(t,i).pipe((0,s.U)(o=>o.body))}deleteAdInterest$Response(t,i){const o=new m.c(this.rootUrl,n.DeleteAdInterestPath,"delete");return t&&o.path("id",t.id,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}deleteAdInterest(t,i){return this.deleteAdInterest$Response(t,i).pipe((0,s.U)(o=>o.body))}}return n.GetUserAdInterestsListDataPath="/{user}/marketplace-interests/list-data",n.GetAdInterestDataForNewPath="/{user}/marketplace-interests/data-for-new",n.CreateAdInterestPath="/{user}/marketplace-interests",n.GetAdInterestDataForEditPath="/marketplace-interests/{id}/data-for-edit",n.ViewAdInterestPath="/marketplace-interests/{id}",n.UpdateAdInterestPath="/marketplace-interests/{id}",n.DeleteAdInterestPath="/marketplace-interests/{id}",n.\u0275fac=function(t){return new(t||n)(e.LFG(X.p),e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var xi=c(723),yi=c(3594),vi=c(3455);const bi=["inputField"];function Ai(n,r){1&n&&e.GkF(0)}function Ti(n,r){if(1&n&&(e.TgZ(0,"label-value",2),e.YNc(1,Ai,1,0,"ng-container",3),e.qZA()),2&n){const t=e.oxw(),i=e.MAs(2);e.Q6J("formField",t.self)("informationText",t.informationText),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function Zi(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"chip",15),e.NdJ("close",function(){const a=e.CHM(t).$implicit;return e.oxw(3).remove(a)}),e._uU(1),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("icon",i.SvgIcon.Search),e.xp6(1),e.hij(" ",t," ")}}function Ci(n,r){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,Zi,2,2,"chip",14),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.value)}}function wi(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5),e._UZ(2,"input-field",6,7),e.qZA(),e.TgZ(4,"div",8)(5,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().add()}),e._UZ(6,"icon",10),e.qZA()()(),e.YNc(7,Ci,2,1,"div",11),e._UZ(8,"field-errors",12)}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formControl",t.inputFieldControl),e.xp6(3),e.Q6J("tooltip",t.i18n.general.add),e.xp6(1),e.Q6J("icon",t.SvgIcon.PlusCircle),e.xp6(1),e.Q6J("ngIf",t.value.length>0),e.xp6(1),e.Q6J("control",t.formControl)}}let Ii=(()=>{class n extends xi.T{constructor(t,i){super(t,i),this.inputFieldControl=new d.NI(null)}ngOnInit(){super.ngOnInit()}getDisabledValue(){return(this.value||[]).join(", ")}getFocusableControl(){throw this.inputField}add(){const t=this.inputField.input,i=t.value;if(!i)return;const o=this.value||[];o.push(i),this.value=o,t.value=null}remove(t){t&&(this.value=this.value.filter(i=>i!==t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(d.gN,13))},n.\u0275cmp=e.Xpm({type:n,selectors:[["text-selection-field"]],viewQuery:function(t,i){if(1&t&&e.Gf(bi,5),2&t){let o;e.iGM(o=e.CRH())&&(i.inputField=o.first)}},features:[e._Bn([{provide:d.JU,useExisting:n,multi:!0}]),e.qOj],decls:3,vars:2,consts:[[3,"formField","informationText",4,"ngIf","ngIfElse"],["widget",""],[3,"formField","informationText"],[4,"ngTemplateOutlet"],[1,"d-flex","mw-100","w-100"],[1,"d-flex","flex-grow-1","mw-100"],[3,"formControl"],["inputField",""],[1,"d-flex","ml-2"],["type","button",1,"btn","btn-icon",3,"tooltip","click"],[3,"icon"],["class","d-flex mw-100 w-100 flex-wrap",4,"ngIf"],[3,"control"],[1,"d-flex","mw-100","w-100","flex-wrap"],["class","mt-2 mr-2",3,"icon","close",4,"ngFor","ngForOf"],[1,"mt-2","mr-2",3,"icon","close"]],template:function(t,i){if(1&t&&(e.YNc(0,Ti,2,3,"label-value",0),e.YNc(1,wi,9,5,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",i.label)("ngIfElse",o)}},directives:[u.O5,T.t,u.tP,N.q,d.JJ,d.oH,F.i9,j.o,u.sg,yi.Y,vi.e],encapsulation:2,changeDetection:0}),n})();var Me=c(8747);function Qi(n,r){if(1&n&&(e.TgZ(0,"label-value",18),e._UZ(1,"user-link",19),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user)}}function qi(n,r){if(1&n&&e._UZ(0,"field-option",20),2&n){const t=r.$implicit,i=e.oxw(2);e.Akn(t.leaf?"leaf":"parent"),e.Q6J("value",i.ApiHelper.internalNameOrId(t))("id",t.id)("internalName",t.internalName)("text",t.name)("level",t.level)("disabled",!t.leaf)}}function Ji(n,r){if(1&n&&e._UZ(0,"field-option",23),2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("value",i.ApiHelper.internalNameOrId(t))("id",t.id)("internalName",t.internalName)("text",t.name)}}function Si(n,r){if(1&n&&(e.TgZ(0,"single-selection-field",21),e.YNc(1,Ji,1,4,"field-option",22),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.currency),e.xp6(1),e.Q6J("ngForOf",t.data.currencies)}}function Ui(n,r){if(1&n&&e._UZ(0,"decimal-field",24),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.minPrice)("textRight",!1)("scale",t.currency.decimalDigits)("prefix",t.currency.prefix)("suffix",t.currency.suffix)}}function ki(n,r){if(1&n&&e._UZ(0,"decimal-field",25),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.maxPrice)("textRight",!1)("scale",t.currency.decimalDigits)("prefix",t.currency.prefix)("suffix",t.currency.suffix)}}function Fi(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,Qi,2,2,"label-value",3),e.ynx(4,4),e._UZ(5,"input-field",5)(6,"text-selection-field",6),e.TgZ(7,"single-selection-field",7),e._UZ(8,"field-option",8)(9,"field-option",9),e.qZA(),e._UZ(10,"user-field",10),e.TgZ(11,"single-selection-field",11),e.YNc(12,qi,1,8,"field-option",12),e.qZA(),e.YNc(13,Si,2,2,"single-selection-field",13),e.YNc(14,Ui,1,5,"decimal-field",14),e.ALo(15,"async"),e.YNc(16,ki,1,5,"decimal-field",15),e.ALo(17,"async"),e.BQk(),e.TgZ(18,"actions",16)(19,"action-button",17),e.NdJ("action",function(){return e.CHM(t),e.oxw().save()}),e.ALo(20,"async"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.create?t.i18n.ad.title.adInterestNew:t.i18n.ad.title.adInterest)("mobileHeading",t.create?t.i18n.ad.mobileTitle.adInterestNew:t.i18n.ad.mobileTitle.adInterest)("headingActions",e.lcZ(2,19,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("label",t.i18n.general.name),e.xp6(1),e.Q6J("label",t.i18n.general.keywords),e.xp6(1),e.Q6J("label",t.i18n.general.type)("emptyOption",t.i18n.general.all),e.xp6(1),e.Q6J("text",t.i18n.ad.type.simple),e.xp6(1),e.Q6J("text",t.i18n.ad.type.webshop),e.xp6(1),e.Q6J("label",t.i18n.general.by),e.xp6(1),e.Q6J("label",t.i18n.general.category),e.xp6(1),e.Q6J("ngForOf",t.categories),e.xp6(1),e.Q6J("ngIf",t.data.currencies&&t.data.currencies.length>1),e.xp6(1),e.Q6J("ngIf",e.lcZ(15,21,t.currency$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,23,t.currency$)),e.xp6(3),e.Q6J("disabled",e.lcZ(20,25,t.requesting$))("label",t.i18n.general.submit)}}let Re=(()=>{class n extends U.y{constructor(t,i,o){super(t),this.adInterestService=i,this.marketplaceHelper=o,this.categories=[],this.currency$=new A.X(null)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.id=this.route.snapshot.params.id,this.create=null==this.id;const t=this.create?this.adInterestService.getAdInterestDataForNew({user:this.user}):this.adInterestService.getAdInterestDataForEdit({id:this.id});this.addSub(t.subscribe(i=>{this.data=i}))}onDataInitialized(t){this.self=this.authHelper.isSelfOrOwner(t.user);const i=t.adInterest,o=i.currency?i.currency:(0,f.cS)(t.currencies)?null:this.ApiHelper.internalNameOrId(t.currencies[0]);this.marketplaceHelper.populateCategories(this.categories,t.categories,0),this.form=this.formBuilder.group({name:[i.name,d.kI.required],keywords:[i.keywords,null],kind:i.kind,category:i.category,user:i.user,minPrice:i.minPrice,maxPrice:i.maxPrice,currency:o,version:i.version}),this.updateCurrency(t),this.addSub(this.form.controls.currency.valueChanges.subscribe(()=>this.updateCurrency(t)))}updateCurrency(t){const i=this.form.controls.currency.value;this.currency=t.currencies.find(o=>o.id===i||o.internalName===i)||t.currencies[0]}save(){if(!(0,f.pt)(this.form))return;const t=this.form.value,i=this.create?this.adInterestService.createAdInterest({body:t,user:this.user}):this.adInterestService.updateAdInterest({id:this.id,body:t});this.addSub(i.subscribe(()=>{this.notification.snackBar(this.create?this.i18n.ad.adInterestCreated:this.i18n.ad.adInterestSaved),history.back()}))}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.AD_INTERESTS)}get currency(){return this.currency$.value}set currency(t){this.currency$.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(Ue),e.Y36(D.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-ad-interest"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[3,"label",4,"ngIf"],[3,"formGroup"],["formControlName","name","required","",3,"label"],["formControlName","keywords",3,"label"],["formControlName","kind",3,"label","emptyOption"],["value","simple",3,"text"],["value","webshop",3,"text"],["formControlName","user",3,"label"],["formControlName","category",3,"label"],[3,"value","id","internalName","text","style","level","disabled",4,"ngFor","ngForOf"],["formControlName","currency",3,"label",4,"ngIf"],["formControlName","minPrice","fieldSize","small",3,"label","textRight","scale","prefix","suffix",4,"ngIf"],["formControlName","maxPrice","fieldSize","small",3,"label","textRight","scale","prefix","suffix",4,"ngIf"],["forceRow",""],[3,"disabled","label","action"],[3,"label"],[3,"user"],[3,"value","id","internalName","text","level","disabled"],["formControlName","currency",3,"label"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["formControlName","minPrice","fieldSize","small",3,"label","textRight","scale","prefix","suffix"],["formControlName","maxPrice","fieldSize","small",3,"label","textRight","scale","prefix","suffix"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Fi,21,27,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,T.t,C.F,d.JL,d.sg,N.q,d.JJ,d.u,d.Q7,Ii,V.f,$.s,Me.l,u.sg,B.U,k.h,J.x],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();function Ni(n,r){if(1&n&&e._UZ(0,"user-info",7),2&n){const t=e.oxw(2);e.Q6J("user",t.data.user)}}function Oi(n,r){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu((t.keywords||"").join(", "))}}function Di(n,r){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",null==t.category?null:t.category.name," ")}}function $i(n,r){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",null==t.adUser?null:t.adUser.display," ")}}function Li(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).remove(a),o.stopPropagation(),o.preventDefault()}),e._UZ(2,"icon",16),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("tooltip",t.i18n.general.remove),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}const Yi=function(){return[]};function Pi(n,r){if(1&n&&(e.TgZ(0,"mobile-result")(1,"div",8)(2,"div",9)(3,"div",10),e._uU(4),e.qZA(),e.YNc(5,Oi,2,1,"div",11),e.YNc(6,Di,2,1,"div",11),e.YNc(7,$i,2,1,"div",11),e.qZA(),e.YNc(8,Li,3,2,"div",12),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",(t.keywords||e.DdM(5,Yi)).length>0),e.xp6(1),e.Q6J("ngIf",t.category),e.xp6(1),e.Q6J("ngIf",t.adUser),e.xp6(1),e.Q6J("ngIf",i.data.canEdit)}}function Ei(n,r){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.i18n.general.keywords)}}function Mi(n,r){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.i18n.general.category)}}function Ri(n,r){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.i18n.ad.owner)}}function Hi(n,r){1&n&&e._UZ(0,"th",20)}function ji(n,r){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu((t.keywords||"").join(", "))}}function Bi(n,r){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t.category?null:t.category.name)}}function Vi(n,r){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t.adUser?null:t.adUser.display)}}function Gi(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"td",20)(1,"button",15),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(3).remove(a),o.stopPropagation()}),e._UZ(2,"icon",16),e.qZA()()}if(2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("tooltip",t.i18n.general.remove),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}function zi(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(3);return l.router.navigate(l.viewPath(a))}),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.YNc(4,ji,2,1,"td",1),e.YNc(5,Bi,2,1,"td",1),e.YNc(6,Vi,2,1,"td",1),e.YNc(7,Gi,3,2,"td",18),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",i.keywords),e.xp6(1),e.Q6J("ngIf",i.category),e.xp6(1),e.Q6J("ngIf",i.user),e.xp6(1),e.Q6J("ngIf",i.data.canEdit)}}function Xi(n,r){if(1&n&&(e.TgZ(0,"table",17)(1,"thead")(2,"th"),e._uU(3),e.qZA(),e.YNc(4,Ei,2,1,"th",1),e.YNc(5,Mi,2,1,"th",1),e.YNc(6,Ri,2,1,"th",1),e.YNc(7,Hi,1,0,"th",18),e.qZA(),e.TgZ(8,"tbody"),e.YNc(9,zi,8,5,"ng-container",19),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.i18n.general.name),e.xp6(1),e.Q6J("ngIf",t.keywords),e.xp6(1),e.Q6J("ngIf",t.category),e.xp6(1),e.Q6J("ngIf",t.user),e.xp6(1),e.Q6J("ngIf",t.data.canEdit),e.xp6(2),e.Q6J("ngForOf",t.data.adInterests)}}function Wi(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,Ni,1,1,"user-info",3),e.qZA(),e.TgZ(4,"results-layout",4),e.YNc(5,Pi,9,6,"mobile-result",5),e.YNc(6,Xi,10,6,"table",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.adInterests)("mobileHeading",t.i18n.ad.mobileTitle.adInterests)("headingActions",e.lcZ(2,7,t.headingActions$))("mode",t.self?"empty":"normal"),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("results",t.data.adInterests)("toLink",t.toLink)}}let Ki=(()=>{class n extends U.y{constructor(t,i){super(t),this.adInterestService=i}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||this.ApiHelper.SELF,this.addSub(this.adInterestService.getUserAdInterestsListData({user:this.param}).subscribe(t=>{this.data=t}))}onDataInitialized(t){var i;null===(i=t.adInterests)||void 0===i||i.forEach(o=>{(0,f.cS)(o.keywords||[])||(this.keywords=!0),o.category&&(this.category=!0),o.adUser&&(this.user=!0)}),this.self=this.authHelper.isSelfOrOwner(t.user),t.canCreate&&(this.headingActions=[new y.Yu(x.l.PlusCircle,this.i18n.general.addNew,()=>{this.router.navigate(["/marketplace",this.param,"ad-interests","new"])},!0)])}viewPath(t){return["/marketplace","ad-interests","view",t.id]}get toLink(){return t=>this.viewPath(t)}remove(t){this.confirmation.confirm({message:this.i18n.general.removeConfirm(t.name),callback:()=>this.doRemove(t)})}doRemove(t){this.addSub(this.adInterestService.deleteAdInterest({id:t.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(t.name)),this.reload()}))}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.AD_INTERESTS)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(Ue))},n.\u0275cmp=e.Xpm({type:n,selectors:[["list-ad-interests"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions","mode"],[3,"user",4,"ngIf"],[3,"results","toLink"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"user"],[1,"d-flex","flex-row"],[1,"w-80"],[1,"cell-main"],["class","cell-text",4,"ngIf"],["class","ml-auto",4,"ngIf"],[1,"cell-text"],[1,"ml-auto"],["type","button",1,"btn","btn-icon",3,"tooltip","click"],[3,"icon"],[1,"table","table-hover","cursor-pointer"],["class","actions",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"actions"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Wi,7,9,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,Qe.M,L.D,Y.E,P.t,F.i9,j.o,E.p,u.sg],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();function eo(n,r){if(1&n&&(e.TgZ(0,"label-value",6),e._UZ(1,"user-link",7),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user)}}function to(n,r){if(1&n&&e._UZ(0,"label-value",4),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.keywords)("value",t.data.keywords.join(", "))}}function no(n,r){if(1&n&&e._UZ(0,"label-value",4),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.type)("value",t.resolveKindLabel())}}function io(n,r){if(1&n&&e._UZ(0,"label-value",4),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.category)("value",t.data.category.name)}}function oo(n,r){if(1&n&&(e.TgZ(0,"label-value",6),e._UZ(1,"user-link",7),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.by),e.xp6(1),e.Q6J("user",t.data.user)}}const ro=function(n,r){return{min:n,max:r}};function ao(n,r){if(1&n&&e._UZ(0,"label-value",4),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.price)("value",t.format.formatRange(e.WLB(2,ro,t.data.minPrice,t.data.maxPrice),t.data.currency))}}function so(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,eo,2,2,"label-value",3),e._UZ(4,"label-value",4),e.TgZ(5,"h2"),e._uU(6),e.qZA(),e.YNc(7,to,1,2,"label-value",5),e.YNc(8,no,1,2,"label-value",5),e.YNc(9,io,1,2,"label-value",5),e.YNc(10,oo,2,2,"label-value",3),e.YNc(11,ao,1,5,"label-value",5),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.adInterests)("mobileHeading",t.i18n.ad.mobileTitle.adInterests)("headingActions",e.lcZ(2,12,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("label",t.i18n.general.name)("value",t.data.name),e.xp6(2),e.Oqu(t.i18n.ad.matchFields),e.xp6(1),e.Q6J("ngIf",!t.empty(t.data.keywords)),e.xp6(1),e.Q6J("ngIf",t.data.kind),e.xp6(1),e.Q6J("ngIf",t.data.category),e.xp6(1),e.Q6J("ngIf",t.data.user),e.xp6(1),e.Q6J("ngIf",t.data.minPrice||t.data.maxPrice)}}let lo=(()=>{class n extends oe.k{constructor(t,i){super(t),this.adInterestService=i,this.empty=f.cS}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.adInterestService.viewAdInterest({id:this.id}).subscribe(t=>{this.data=t}))}onDataInitialized(t){this.self=this.authHelper.isSelfOrOwner(t.user);const i=[];t.canEdit&&i.push(new y.Yu(x.l.Pencil,this.i18n.general.edit,()=>this.router.navigate(["/marketplace","ad-interests","edit",this.id]),!0)),this.headingActions=i}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.AD_INTERESTS)}resolveKindLabel(){return this.data.kind===G.$.SIMPLE?this.i18n.ad.type.simple:this.i18n.ad.type.webshop}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(Ue))},n.\u0275cmp=e.Xpm({type:n,selectors:[["view-ad-interest"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"label",4,"ngIf"],[3,"label","value"],[3,"label","value",4,"ngIf"],[3,"label"],[3,"user"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,so,12,14,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,T.t,C.F],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();var co=c(6897),uo=c(3812);const po=function(n){return{"text-decoration":n,"max-width":"75%"}};function mo(n,r){if(1&n&&(e.TgZ(0,"mobile-result",7)(1,"div",8)(2,"div",9),e._uU(3),e.ALo(4,"currency"),e.qZA(),e.TgZ(5,"div",10),e._uU(6),e.qZA()(),e._UZ(7,"div",11),e.TgZ(8,"div",12),e._uU(9),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw();e.Q6J("avatarImage",t.image)("avatarIcon",i.SvgIcon.Basket),e.xp6(3),e.hij(" ",e.xi3(4,7,t.promotionalPrice||t.price,i.currency)," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(10,po,i.isOutOfStock(t)?"line-through":"")),e.xp6(1),e.hij(" ",t.name," "),e.xp6(3),e.AsE(" ",i.i18n.ad.stock,": ",i.resolveStockLabel(t),"")}}const _o=function(n){return{"text-decoration":n}},ho=function(n){return{"text-muted":n}};function go(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).addProduct(a)}),e.TgZ(2,"td",14),e._UZ(3,"avatar",19),e.qZA(),e.TgZ(4,"td",20)(5,"span",21),e._uU(6),e.qZA()(),e.TgZ(7,"td",22),e._uU(8),e.qZA(),e.TgZ(9,"td",16),e._uU(10),e.ALo(11,"currency"),e.qZA()(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("image",t.image)("icon",i.SvgIcon.Basket),e.xp6(1),e.Q6J("ngStyle",e.VKq(10,_o,i.isOutOfStock(t)?"line-through":"")),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngClass",e.VKq(12,ho,i.isOutOfStock(t))),e.xp6(1),e.hij(" ",i.resolveStockLabel(t),""),e.xp6(2),e.hij(" ",e.xi3(11,7,t.promotionalPrice||t.price,i.currency)," ")}}function fo(n,r){if(1&n&&(e.TgZ(0,"table",13)(1,"thead"),e._UZ(2,"th",14),e.TgZ(3,"th",15),e._uU(4),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.qZA(),e.TgZ(7,"th",16),e._uU(8),e.qZA()(),e.TgZ(9,"tbody"),e.YNc(10,go,12,14,"ng-container",17),e.ALo(11,"async"),e.qZA()()),2&n){const t=e.oxw();let i;e.xp6(4),e.Oqu(t.i18n.ad.product),e.xp6(2),e.Oqu(t.i18n.ad.stockQuantity),e.xp6(2),e.Oqu(t.i18n.ad.price),e.xp6(2),e.Q6J("ngForOf",null==(i=e.lcZ(11,4,t.results$))?null:i.results)}}function xo(n,r){1&n&&e._UZ(0,"spinner",23)}const yo=function(){return{"min-height":"44vh"}};let vo=(()=>{class n extends H.H{constructor(t,i,o){super(t),this.modalRef=i,this.marketplaceService=o,this.pageSize=8,this.select=new e.vpe,this.results$=new A.X(null),this.rendering$=new A.X(!1)}ngOnInit(){super.ngOnInit(),this.form=this.formBuilder.group({keywords:null}),this.addSub(this.form.controls.keywords.valueChanges.subscribe(()=>this.update())),this.update()}update(t){this.rendering=!0,this.results=null,this.addSub(this.doSearch(t).subscribe(i=>this.results=co.x.from(i)))}get onClick(){return t=>this.addProduct(t)}addProduct(t){this.isOutOfStock(t)||(this.notification.snackBar(this.i18n.ad.addedProductOrder),this.select.emit(t))}doSearch(t){const i=t||{};return this.marketplaceService.searchUserAds$Response({user:this.ApiHelper.SELF,kind:G.$.WEBSHOP,currency:this.currency.id,statuses:[qe.G.ACTIVE],pageSize:i.pageSize||this.pageSize,page:i.page||0,keywords:this.form.controls.keywords.value})}close(){this.modalRef.hide()}get results(){return this.results$.value}set results(t){this.results$.next(t)}get rendering(){return this.rendering$.value}set rendering(t){this.rendering$.next(t)}resolveStockLabel(t){if(!t.unlimitedStock){const i=+t.stockQuantity||0;return 0===i?this.i18n.ad.outOfStock:this.format.formatAsNumber(t.stockQuantity,i%1==0?0:2)}return this.i18n.ad.unlimited}isOutOfStock(t){return this.resolveStockLabel(t)===this.i18n.ad.outOfStock}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.UZ),e.Y36(te))},n.\u0275cmp=e.Xpm({type:n,selectors:[["search-products"]],inputs:{currency:"currency"},outputs:{select:"select"},features:[e.qOj],decls:12,vars:11,consts:[[1,"mb-2","mb-md-0",3,"formGroup"],["formControlName","keywords",3,"label"],["resultType","list",3,"results","onClick","rendering$","ngStyle","update"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"label","action"],["spinner",""],[3,"avatarImage","avatarIcon"],[1,"cell-date-amount"],[1,"cell-amount"],[1,"cell-date","cell-main",3,"ngStyle"],[1,"clearfix"],[1,"cell-text"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],["width","35%"],[1,"text-right"],[4,"ngFor","ngForOf"],[3,"click"],[3,"image","icon"],[3,"ngStyle"],[1,"ellipsis-clamp-2"],[3,"ngClass"],[1,"mx-auto","my-3"]],template:function(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"div",0),e._UZ(3,"input-field",1),e.qZA(),e.TgZ(4,"results-layout",2),e.NdJ("update",function(a){return i.update(a)}),e.ALo(5,"async"),e.YNc(6,mo,10,12,"mobile-result",3),e.YNc(7,fo,12,6,"table",4),e.qZA(),e.TgZ(8,"actions")(9,"action-button",5),e.NdJ("action",function(){return i.close()}),e.qZA()(),e.YNc(10,xo,1,0,"ng-template",null,6,e.W1O)),2&t&&(e.xp6(1),e.Oqu(i.i18n.ad.addProducts),e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("label",i.i18n.general.keywords),e.xp6(1),e.Q6J("results",e.lcZ(5,8,i.results$))("onClick",i.onClick)("rendering$",i.rendering$)("ngStyle",e.DdM(10,yo)),e.xp6(5),e.Q6J("label",i.i18n.general.close))},directives:[d.JL,d.sg,N.q,d.JJ,d.u,L.D,u.PC,Y.E,P.t,E.p,u.sg,ee.A,u.mk,k.h,J.x,uo.O],pipes:[u.Ov,S.H],encapsulation:2,changeDetection:0}),n})(),_e=(()=>{class n extends z.b{constructor(t,i){super(t,i)}searchUserOrders$Response(t,i){const o=new m.c(this.rootUrl,n.SearchUserOrdersPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("user",t.user,{}),o.query("creationPeriod",t.creationPeriod,{}),o.query("number",t.number,{}),o.query("page",t.page,{}),o.query("pageSize",t.pageSize,{}),o.query("productNumber",t.productNumber,{}),o.query("relatedUser",t.relatedUser,{}),o.query("sales",t.sales,{}),o.query("skipTotalCount",t.skipTotalCount,{}),o.query("statuses",t.statuses,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}searchUserOrders(t,i){return this.searchUserOrders$Response(t,i).pipe((0,s.U)(o=>o.body))}createOrder$Response(t,i){const o=new m.c(this.rootUrl,n.CreateOrderPath,"post");return t&&(o.path("user",t.user,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"text/plain",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}createOrder(t,i){return this.createOrder$Response(t,i).pipe((0,s.U)(o=>o.body))}getOrderDataForNew$Response(t,i){const o=new m.c(this.rootUrl,n.GetOrderDataForNewPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("user",t.user,{}),o.query("buyer",t.buyer,{}),o.query("currency",t.currency,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getOrderDataForNew(t,i){return this.getOrderDataForNew$Response(t,i).pipe((0,s.U)(o=>o.body))}getOrderDataForSearch$Response(t,i){const o=new m.c(this.rootUrl,n.GetOrderDataForSearchPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("user",t.user,{}),o.query("sales",t.sales,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getOrderDataForSearch(t,i){return this.getOrderDataForSearch$Response(t,i).pipe((0,s.U)(o=>o.body))}viewOrder$Response(t,i){const o=new m.c(this.rootUrl,n.ViewOrderPath,"get");return t&&(o.path("order",t.order,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}viewOrder(t,i){return this.viewOrder$Response(t,i).pipe((0,s.U)(o=>o.body))}updateOrder$Response(t,i){const o=new m.c(this.rootUrl,n.UpdateOrderPath,"put");return t&&(o.path("order",t.order,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}updateOrder(t,i){return this.updateOrder$Response(t,i).pipe((0,s.U)(o=>o.body))}deleteOrder$Response(t,i){const o=new m.c(this.rootUrl,n.DeleteOrderPath,"delete");return t&&o.path("order",t.order,{}),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}deleteOrder(t,i){return this.deleteOrder$Response(t,i).pipe((0,s.U)(o=>o.body))}exportOrder$Response(t,i){const o=new m.c(this.rootUrl,n.ExportOrderPath,"get");return t&&(o.path("order",t.order,{}),o.path("format",t.format,{})),this.http.request(o.build({responseType:"blob",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}exportOrder(t,i){return this.exportOrder$Response(t,i).pipe((0,s.U)(o=>o.body))}getOrderDataForEdit$Response(t,i){const o=new m.c(this.rootUrl,n.GetOrderDataForEditPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("order",t.order,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getOrderDataForEdit(t,i){return this.getOrderDataForEdit$Response(t,i).pipe((0,s.U)(o=>o.body))}getDataForSetDeliveryMethod$Response(t,i){const o=new m.c(this.rootUrl,n.GetDataForSetDeliveryMethodPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("order",t.order,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getDataForSetDeliveryMethod(t,i){return this.getDataForSetDeliveryMethod$Response(t,i).pipe((0,s.U)(o=>o.body))}setDeliveryMethod$Response(t,i){const o=new m.c(this.rootUrl,n.SetDeliveryMethodPath,"post");return t&&(o.path("order",t.order,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}setDeliveryMethod(t,i){return this.setDeliveryMethod$Response(t,i).pipe((0,s.U)(o=>o.body))}getOrderDataForAcceptByBuyer$Response(t,i){const o=new m.c(this.rootUrl,n.GetOrderDataForAcceptByBuyerPath,"get");return t&&(o.query("fields",t.fields,{explode:!1}),o.path("order",t.order,{})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}getOrderDataForAcceptByBuyer(t,i){return this.getOrderDataForAcceptByBuyer$Response(t,i).pipe((0,s.U)(o=>o.body))}acceptOrderByBuyer$Response(t,i){const o=new m.c(this.rootUrl,n.AcceptOrderByBuyerPath,"post");return t&&(o.path("order",t.order,{}),o.header("confirmationPassword",t.confirmationPassword,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}acceptOrderByBuyer(t,i){return this.acceptOrderByBuyer$Response(t,i).pipe((0,s.U)(o=>o.body))}acceptOrderBySeller$Response(t,i){const o=new m.c(this.rootUrl,n.AcceptOrderBySellerPath,"post");return t&&(o.path("order",t.order,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}acceptOrderBySeller(t,i){return this.acceptOrderBySeller$Response(t,i).pipe((0,s.U)(o=>o.body))}rejectOrder$Response(t,i){const o=new m.c(this.rootUrl,n.RejectOrderPath,"post");return t&&(o.path("order",t.order,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}rejectOrder(t,i){return this.rejectOrder$Response(t,i).pipe((0,s.U)(o=>o.body))}}return n.SearchUserOrdersPath="/{user}/orders",n.CreateOrderPath="/{user}/orders",n.GetOrderDataForNewPath="/{user}/orders/data-for-new",n.GetOrderDataForSearchPath="/{user}/orders/data-for-search",n.ViewOrderPath="/orders/{order}",n.UpdateOrderPath="/orders/{order}",n.DeleteOrderPath="/orders/{order}",n.ExportOrderPath="/orders/{order}/export/{format}",n.GetOrderDataForEditPath="/orders/{order}/data-for-edit",n.GetDataForSetDeliveryMethodPath="/orders/{order}/seller/data-for-set-delivery",n.SetDeliveryMethodPath="/orders/{order}/seller/set-delivery",n.GetOrderDataForAcceptByBuyerPath="/orders/{order}/buyer/data-for-accept",n.AcceptOrderByBuyerPath="/orders/{order}/buyer/accept",n.AcceptOrderBySellerPath="/orders/{order}/seller/accept",n.RejectOrderPath="/orders/{order}/reject",n.\u0275fac=function(t){return new(t||n)(e.LFG(X.p),e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var he=c(5778);function bo(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"currency"),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,i.rowTotal(t),i.currency)," ")}}const ge=function(){return{"max-width":"130px"}};function Ao(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).navigate(a)}),e.TgZ(4,"span",19),e._uU(5),e.qZA()(),e.TgZ(6,"td",20),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"td",20),e._UZ(10,"decimal-field",21),e.qZA(),e.TgZ(11,"td",20),e._UZ(12,"decimal-field",21),e.qZA(),e.TgZ(13,"td",20),e._UZ(14,"decimal-field",22),e.qZA(),e.TgZ(15,"td",23),e.YNc(16,bo,3,4,"ng-container",12),e.ALo(17,"async"),e.qZA(),e.TgZ(18,"td",24)(19,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).remove(a)}),e._UZ(20,"icon",26),e.qZA()()()}if(2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(2),e.hij("",t.product.productNumber," "),e.xp6(1),e.Q6J("ngStyle",e.DdM(22,ge)),e.xp6(2),e.Oqu(t.product.name),e.xp6(2),e.hij(" ",e.xi3(8,17,t.product.price,i.currency)," "),e.xp6(3),e.Q6J("formControl",i.form.controls[i.discount(t)])("scale",2),e.xp6(2),e.Q6J("formControl",i.form.controls[i.price(t)])("scale",i.currency.decimalDigits),e.xp6(2),e.Q6J("formControl",i.form.controls[i.quantity(t)])("minRange",t.product.allowDecimalQuantity?null:1)("maxRange",t.product.allowDecimalQuantity?null:10)("customValueLabel",i.i18n.ad.customQuantity)("scale",t.product.allowDecimalQuantity?2:0),e.xp6(1),e.Q6J("ngStyle",e.DdM(23,ge)),e.xp6(1),e.Q6J("ngIf",e.lcZ(17,20,i.form.valueChanges)||t.totalPrice),e.xp6(3),e.Q6J("tooltip",i.i18n.general.remove),e.xp6(1),e.Q6J("icon",i.SvgIcon.Trash)}}function To(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"currency"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.subtotal,t.currency)," ")}}function Zo(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.i18n.ad.deliveryMethod+": "+(t.deliveryMethod.name||"")," ")}}function Co(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"currency"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.deliveryMethod.price?e.xi3(2,1,t.deliveryMethod.price,t.currency):t.i18n.general.notSet," ")}}function wo(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"currency"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.total,t.currency)," ")}}function Io(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"table",2)(2,"thead")(3,"th",3),e._uU(4),e.qZA(),e.TgZ(5,"th",4),e._uU(6),e.qZA(),e.TgZ(7,"th",5),e._uU(8),e.qZA(),e.TgZ(9,"th",5),e._uU(10),e.qZA(),e.TgZ(11,"th",5),e._uU(12),e.qZA(),e.TgZ(13,"th",5),e._uU(14),e.qZA(),e.TgZ(15,"th",6),e._uU(16),e.qZA(),e._UZ(17,"th",7),e.qZA(),e.TgZ(18,"tbody"),e.YNc(19,Ao,21,24,"tr",8),e.TgZ(20,"tr",9)(21,"td",10),e._uU(22),e.qZA(),e.TgZ(23,"td",11),e.YNc(24,To,3,4,"ng-container",12),e.ALo(25,"async"),e.qZA(),e._UZ(26,"td"),e.qZA(),e.TgZ(27,"tr",9)(28,"td"),e.YNc(29,Zo,2,1,"ng-container",12),e.ALo(30,"async"),e.qZA(),e.TgZ(31,"td",13),e.YNc(32,Co,3,4,"ng-container",12),e.ALo(33,"async"),e.qZA(),e._UZ(34,"td"),e.qZA(),e.TgZ(35,"tr",14)(36,"td",15),e._uU(37),e.qZA(),e.TgZ(38,"td",16),e.YNc(39,wo,3,4,"ng-container",12),e.ALo(40,"async"),e.ALo(41,"async"),e.qZA(),e._UZ(42,"td",17),e.qZA()()(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.i18n.ad.number),e.xp6(1),e.Q6J("ngStyle",e.DdM(32,ge)),e.xp6(1),e.hij(" ",t.i18n.ad.product,""),e.xp6(2),e.hij("",t.i18n.ad.basePrice," "),e.xp6(2),e.hij("",t.i18n.ad.discount," "),e.xp6(2),e.Oqu(t.i18n.ad.price),e.xp6(2),e.hij("",t.i18n.ad.quantity," "),e.xp6(1),e.Q6J("ngStyle",e.DdM(33,ge)),e.xp6(1),e.hij(" ",t.i18n.transaction.amount,""),e.xp6(3),e.Q6J("ngForOf",t.data),e.xp6(2),e.uIk("colspan",4),e.xp6(1),e.hij(" ",t.i18n.ad.subtotal,""),e.xp6(1),e.uIk("colspan",3),e.xp6(1),e.Q6J("ngIf",e.lcZ(25,22,t.form.valueChanges)||t.data),e.xp6(4),e.uIk("colspan",4),e.xp6(1),e.Q6J("ngIf",e.lcZ(30,24,t.deliveryMethod$)),e.xp6(2),e.uIk("colspan",3),e.xp6(1),e.Q6J("ngIf",e.lcZ(33,26,t.deliveryMethod$)),e.xp6(4),e.uIk("colspan",4),e.xp6(1),e.hij(" ",t.i18n.ad.total,""),e.xp6(1),e.uIk("colspan",3),e.xp6(1),e.Q6J("ngIf",e.lcZ(40,28,t.deliveryMethod$)||e.lcZ(41,30,t.form.valueChanges)||t.data)}}function Qo(n,r){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.i18n.ad.itemsNone)}}let qo=(()=>{class n extends H.H{constructor(t){super(t),this.data$=new A.X(null)}ngOnInit(){super.ngOnInit(),this.products$.subscribe(t=>{this.form=this.formBuilder.group({}),(0,f.cS)(t)||t.forEach(i=>{const o=this.formBuilder.control(this.calculateDiscount(i,+i.price));this.form.addControl(this.discount(i),o);const a=this.formBuilder.control(i.price);this.form.addControl(this.price(i),a),this.addSub(o.valueChanges.pipe((0,he.x)(),(0,se.b)(550)).subscribe(h=>this.applyDiscount(i,h))),this.addSub(a.valueChanges.pipe((0,he.x)(),(0,se.b)(550)).subscribe(h=>this.applyPrice(i,h)));const l=this.formBuilder.control(i.quantity);this.form.addControl(this.quantity(i),l),this.addSub(l.valueChanges.pipe((0,he.x)(),(0,se.b)(550)).subscribe(h=>i.quantity=h))}),this.data=t})}applyDiscount(t,i){let o;o=i<0?+t.product.price:i>100?0:+t.product.price-i/100*+t.product.price,this.form.controls[this.price(t)].setValue(o,{emitEvent:!1}),t.price=o.toString()}applyPrice(t,i){const o=this.calculateDiscount(t,i);i>+t.price?this.form.controls[this.price(t)].setValue(+t.price,{emitEvent:!1,onlySelf:!0}):t.price=i?i.toString():"0",this.form.controls[this.discount(t)].setValue(o,{emitEvent:!1})}calculateDiscount(t,i){const o=100*(1-i/+t.product.price);return o<0?0:o>100?100:o}discount(t){return t.product.id+"_discount"}quantity(t){return t.product.id+"_quantity"}price(t){return t.product.id+"_price"}rowTotal(t){return this.form.value[this.quantity(t)]*this.form.value[this.price(t)]}get subtotal(){let t=0;return this.data$.value.forEach(i=>t+=this.rowTotal(i)),t}get total(){const t=this.deliveryMethod?this.deliveryMethod.price:"";return this.subtotal+((0,f.cS)(t)?0:+t)}get deliveryMethod(){return this.deliveryMethod$.value}get data(){return this.data$.value}set data(t){this.data$.next(t)}navigate(t){return this.router.navigate(["/marketplace","view",t.product.id])}remove(t){const i=this.products$.value.filter(o=>o.product.id!==t.product.id);this.products$.next(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["order-products"]],inputs:{products$:"products$",deliveryMethod$:"deliveryMethod$",currency:"currency"},features:[e.qOj],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noProducts",""],[1,"table","table-hover"],["width","13%",1,"no-border"],["width","13%",1,"no-border",3,"ngStyle"],["width","13%",1,"no-border","text-right"],[1,"no-border","text-right","ellipsis",3,"ngStyle"],[1,"actions"],[4,"ngFor","ngForOf"],[1,"no-hover"],[1,"table-head-color"],[1,"table-head-color","text-right","ellipsis"],[4,"ngIf"],[1,"text-right","ellipsis"],[1,"totalAmount","no-hover"],[1,"border-bottom-0","label","label-value-label"],[1,"border-bottom-0","text-right","label-value-value","ellipsis"],[1,"border-bottom-0"],[1,"link",3,"ngStyle","click"],[1,"ellipsis-clamp-2"],[1,"text-right"],[3,"formControl","scale"],[3,"formControl","minRange","maxRange","customValueLabel","scale"],[1,"text-right","ellipsis",3,"ngStyle"],[1,"actions","actions-multiple"],["type","button",1,"btn","btn-icon",3,"tooltip","click"],[3,"icon"]],template:function(t,i){if(1&t&&(e.YNc(0,Io,43,34,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Qo,2,1,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,i.data$)&&i.data.length>0)("ngIfElse",o)}},directives:[u.O5,u.PC,u.sg,B.U,d.JJ,d.oH,F.i9,j.o],pipes:[u.Ov,S.H],encapsulation:2,changeDetection:0}),n})();function Jo(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"label-value",3),e._uU(2),e.qZA(),e.TgZ(3,"label-value",3),e._uU(4),e.ALo(5,"dateTime"),e.qZA(),e.TgZ(6,"label-value",3),e._uU(7),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.number),e.xp6(1),e.hij(" ",t.number," "),e.xp6(1),e.Q6J("label",t.i18n.general.date),e.xp6(1),e.hij(" ",e.lcZ(5,6,t.creationDate)," "),e.xp6(2),e.Q6J("label",t.i18n.general.status),e.xp6(1),e.hij(" ",t.resolveStatusLabel()," ")}}function So(n,r){if(1&n&&e._UZ(0,"field-option",28),2&n){const t=r.$implicit;e.Q6J("value",t.name)("text",t.name)}}function Uo(n,r){if(1&n&&e._UZ(0,"input-field",29),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.name)}}function ko(n,r){if(1&n&&(e.TgZ(0,"radio-group-field",30),e._UZ(1,"field-option",31)(2,"field-option",32),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.deliveryType),e.xp6(1),e.Q6J("text",t.i18n.ad.deliver),e.xp6(1),e.Q6J("text",t.i18n.ad.pickup)}}function Fo(n,r){if(1&n&&e._UZ(0,"label-value",33),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.deliveryType)("value","deliver"===t.deliveryForm.controls.deliveryType.value?t.i18n.ad.deliver:t.i18n.ad.pickup)}}function No(n,r){if(1&n&&e._UZ(0,"label-value",34),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.description)("value",t.deliveryMethod.description)}}function Oo(n,r){if(1&n&&e._UZ(0,"field-option",28),2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("value",i.resolveAddressId(t))("text",t.name)}}function Do(n,r){if(1&n&&(e.TgZ(0,"single-selection-field",35),e.YNc(1,Oo,1,2,"field-option",13),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("emptyOption","pickup"!==t.deliveryForm.controls.deliveryType.value&&t.i18n.ad.customAddress)("label",t.i18n.ad.chooseDeliveryAddress),e.xp6(1),e.Q6J("ngForOf",t.addresses)}}function $o(n,r){if(1&n&&(e._UZ(0,"address-form",36),e.ALo(1,"async")),2&n){const t=e.oxw(2);e.Q6J("addressForm",t.addressForm)("configuration",e.lcZ(1,2,t.addressConfiguration$))}}function Lo(n,r){if(1&n&&e._UZ(0,"address-details",37),2&n){const t=e.oxw(2);e.Q6J("address",t.addressForm.value)}}const Yo=function(n){return{"section-title-action":n}};function Po(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",2),e.YNc(2,Jo,8,8,"ng-container",1),e.TgZ(3,"label-value",3),e._UZ(4,"user-link",4),e.qZA(),e.TgZ(5,"div",5)(6,"h2",6)(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"div",8),e.ALo(10,"async"),e.TgZ(11,"action-button",9),e.NdJ("action",function(){return e.CHM(t),e.oxw().addProducts()}),e.qZA()()(),e._UZ(12,"order-products",10),e.TgZ(13,"h2",11),e._uU(14),e.qZA(),e.TgZ(15,"single-selection-field",12),e.YNc(16,So,1,2,"field-option",13),e.qZA(),e._UZ(17,"div",14),e.TgZ(18,"div",5),e.YNc(19,Uo,1,1,"input-field",15),e.ALo(20,"async"),e.YNc(21,ko,3,3,"radio-group-field",16),e.ALo(22,"async"),e.YNc(23,Fo,1,2,"label-value",17),e.ALo(24,"async"),e._UZ(25,"decimal-field",18)(26,"time-interval-field",19)(27,"time-interval-field",20),e.YNc(28,No,1,2,"label-value",21),e.ALo(29,"async"),e.qZA(),e.TgZ(30,"h2",11),e._uU(31),e.qZA(),e.YNc(32,Do,2,3,"single-selection-field",22),e.ALo(33,"async"),e._UZ(34,"div",14),e.YNc(35,$o,2,4,"address-form",23),e.ALo(36,"async"),e.YNc(37,Lo,1,1,"address-details",24),e.ALo(38,"async"),e.TgZ(39,"h2"),e._uU(40),e.qZA(),e._UZ(41,"textarea-field",25),e.qZA(),e.TgZ(42,"actions")(43,"action-button",26),e.NdJ("action",function(){return e.CHM(t),e.oxw().save()}),e.ALo(44,"async"),e.qZA(),e.TgZ(45,"action-button",27),e.NdJ("action",function(){return e.CHM(t),e.oxw().save(!0)}),e.ALo(46,"async"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();let i,o,a;e.xp6(1),e.Q6J("heading",t.create?t.i18n.ad.title.newOrder:t.i18n.ad.title.order)("mobileHeading",t.create?t.i18n.ad.mobileTitle.newOrder:t.i18n.ad.mobileTitle.order),e.xp6(1),e.Q6J("ngIf",!t.create),e.xp6(1),e.Q6J("label",t.i18n.ad.buyer),e.xp6(1),e.Q6J("user",t.data.buyer),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(3),e.hij(" ",t.i18n.ad.products," "),e.xp6(1),e.Q6J("ngClass",e.VKq(56,Yo,e.lcZ(10,36,t.layout.gtsm$))),e.xp6(2),e.Q6J("label",t.i18n.ad.addProducts),e.xp6(1),e.Q6J("products$",t.products$)("deliveryMethod$",t.deliveryMethod$)("currency",t.currency),e.xp6(2),e.Oqu(t.i18n.ad.deliveryMethod),e.xp6(1),e.Q6J("emptyOption",t.i18n.ad.customDeliveryMethod)("label",t.i18n.ad.chooseDeliveryMethod),e.xp6(1),e.Q6J("ngForOf",t.data.deliveryMethods),e.xp6(2),e.Q6J("formGroup",t.deliveryForm),e.xp6(1),e.Q6J("ngIf",null==(null==(i=t.form.value||e.lcZ(20,38,t.form.valueChanges))?null:i.deliveryMethod)),e.xp6(2),e.Q6J("ngIf",null==(null==(o=t.form.value||e.lcZ(22,40,t.form.valueChanges))?null:o.deliveryMethod)),e.xp6(2),e.Q6J("ngIf",null!=(null==(a=t.form.value||e.lcZ(24,42,t.form.valueChanges))?null:a.deliveryMethod)),e.xp6(2),e.Q6J("label",t.i18n.ad.deliveryPrice)("scale",t.currency.decimalDigits)("prefix",t.currency.prefix)("suffix",t.currency.suffix),e.xp6(1),e.Q6J("label",t.i18n.ad.minDeliveryTime),e.xp6(1),e.Q6J("label",t.i18n.ad.maxDeliveryTime),e.xp6(1),e.Q6J("ngIf",e.lcZ(29,44,t.deliveryMethod$)&&(null==t.deliveryMethod?null:t.deliveryMethod.description)),e.xp6(3),e.Oqu(t.i18n.ad.deliveryAddress),e.xp6(1),e.Q6J("ngIf",!e.lcZ(33,46,t.addresses$)||"pickup"!==t.deliveryForm.controls.deliveryType.value||null==(null==t.form.value?null:t.form.value.deliveryMethod)),e.xp6(3),e.Q6J("ngIf",e.lcZ(36,48,t.addresses$)&&!t.readOnly),e.xp6(2),e.Q6J("ngIf",e.lcZ(38,50,t.addresses$)&&t.readOnly),e.xp6(3),e.Oqu(t.i18n.ad.remarks),e.xp6(3),e.Q6J("disabled",e.lcZ(44,52,t.requesting$))("label",t.i18n.ad.submitToBuyer),e.xp6(2),e.Q6J("disabled",e.lcZ(46,54,t.requesting$))("label",t.i18n.ad.saveDraft)}}let He=(()=>{class n extends U.y{constructor(t,i,o,a,l){super(t),this.orderService=i,this.marketplaceHelper=o,this.addressHelper=a,this.modal=l,this.products$=new A.X(null),this.deliveryMethod$=new A.X(null),this.address$=new A.X(null),this.addresses$=new A.X(null),this.addressConfiguration$=new A.X(null),this.readOnly$=new A.X(!1)}ngOnInit(){super.ngOnInit();const t=this.route.snapshot.queryParams.buyer,i=this.route.snapshot.queryParams.currency;this.id=this.route.snapshot.params.id,this.user=this.route.snapshot.params.user,this.create=null==this.id;const o=this.create?this.orderService.getOrderDataForNew({buyer:t,user:this.user,currency:i}):this.orderService.getOrderDataForEdit({order:this.id});this.addSub(o.subscribe(a=>{this.data=a}))}onDataInitialized(t){this.form=this.formBuilder.group({remarks:t.order.remarks}),this.create&&!(0,f.cS)(t.deliveryMethods)&&1===t.deliveryMethods.length&&(t.order.deliveryMethod=t.deliveryMethods[0]),this.deliveryForm=this.formBuilder.group({name:[null,d.kI.required],price:[null,d.kI.required],minTime:null,maxTime:[null,d.kI.required],deliveryType:[w.DELIVER,d.kI.required]}),this.addSub(this.deliveryForm.valueChanges.subscribe(l=>this.deliveryMethod=l)),this.deliveryField=this.formBuilder.control({}),this.form.addControl("deliveryMethod",this.deliveryField);const i=t.deliveryMethods.find(l=>t.order.deliveryMethod.name===l.name);i?this.deliveryField.setValue(i.name):this.deliveryField.reset(),this.addressField=this.formBuilder.control({}),this.form.addControl("address",this.addressField),this.deliveryForm.patchValue(t.order.deliveryMethod),this.subscribeToDeliveryAndAddressFieldsChange(!0,t),this.updateDeliveryAddress(t,!0);const a=[];(t.items||[]).forEach(l=>{const h=t.order.items.filter(I=>I.product===l.id)[0];a.push({price:h.price,totalPrice:+h.price*+h.quantity,quantity:h.quantity,product:l})}),this.products=a}updateAddress(t){this.addressForm.reset(),this.address=null==t?null:this.addresses.find(i=>t===this.resolveAddressId(i)),this.address&&this.addressForm.patchValue(this.address)}addProducts(){const i=this.modal.show(vo,{class:"modal-form modal-form-medium",initialState:{currency:this.currency}}).content;this.addSub(i.select.subscribe(o=>{this.addProduct(o)}))}addProduct(t){const i=this.products||[];let o=i.find(a=>a.product.id===t.id);null!=o?o.quantity=(+o.quantity+1).toString():(t.price=t.promotionalPrice||t.price,o={price:t.price,totalPrice:t.price,quantity:"1",product:t},i.push(o)),this.products=i}resolveAddressId(t){return null==t?null:[t.addressLine1,t.addressLine2,t.buildingNumber,t.city,t.complement,t.country,t.neighborhood,t.poBox,t.region,t.street,t.zip].join("")}updateDeliveryAddress(t,i=!1){const o=t.deliveryMethods.find(q=>this.form.controls.deliveryMethod.value===q.name),a=this.deliveryForm.controls.deliveryType.value===w.PICKUP;this.addressConfiguration=a?t.sellerAddressConfiguration:t.addressConfiguration,this.addresses=a?t.sellerAddresses:t.addresses;let l=null;a?l=o?o.address:t.sellerAddresses.length>0?t.sellerAddresses[0]:null:i&&t.order.deliveryAddress&&(l=t.order.deliveryAddress),(!this.addressForm||this.readOnly)&&(this.addressForm=this.addressHelper.addressFormGroup(this.addressConfiguration,!0)),this.addressForm.reset(),null!=l&&this.addressForm.patchValue(l),this.address=l;const h=this.resolveAddressId(this.address),I=this.addresses.find(q=>h===this.resolveAddressId(q));this.addressField.reset(),I&&this.addressField.setValue(h),this.readOnly=this.deliveryForm.controls.deliveryType.value===w.PICKUP}updateDelivery(t,i){let o=null;null==t?this.deliveryForm.reset({deliveryType:w.DELIVER}):(o=i.deliveryMethods.find(a=>t===a.name),this.deliveryForm.patchValue(this.deliveryMethod?{name:o.name,price:o.chargeAmount||null,minTime:o.minDeliveryTime,maxTime:o.maxDeliveryTime,deliveryType:o.deliveryType||w.DELIVER}:null)),this.deliveryMethod$.next(o)}get readOnly(){return this.readOnly$.value}set readOnly(t){this.readOnly$.next(t)}get address(){return this.address$.value}set address(t){this.address$.next(t)}get products(){return this.products$.value}set products(t){this.products$.next(t)}get addresses(){return this.addresses$.value}set addresses(t){this.addresses$.next(t)}get addressConfiguration(){return this.addressConfiguration$.value}set addressConfiguration(t){this.addressConfiguration$.next(t)}get deliveryMethod(){return this.deliveryMethod$.value}set deliveryMethod(t){this.deliveryMethod$.next(t)}get currency(){return this.create?this.data.currencies[0]:this.data.currency}subscribeToDeliveryAndAddressFieldsChange(t,i){t?(this.deliveryFieldChangeSubscription=this.deliveryField.valueChanges.subscribe(o=>this.updateDelivery(o,i)),this.deliveryTypeChangeSubscription=this.deliveryForm.controls.deliveryType.valueChanges.subscribe(()=>this.updateDeliveryAddress(i)),this.addressFieldChangeSubscription=this.addressField.valueChanges.subscribe(o=>this.updateAddress(o))):!this.deliveryFieldChangeSubscription.closed&&!this.deliveryTypeChangeSubscription.closed&&!this.addressFieldChangeSubscription.closed&&(this.deliveryFieldChangeSubscription.unsubscribe(),this.deliveryTypeChangeSubscription.unsubscribe(),this.addressFieldChangeSubscription.unsubscribe())}save(t){this.subscribeToDeliveryAndAddressFieldsChange(!1);const i=(0,f.pt)(this.form),o=(0,f.pt)(this.addressForm),a=(0,f.pt)(this.deliveryForm);if(this.subscribeToDeliveryAndAddressFieldsChange(!0,this.data),!(i&&o&&a))return;const l=this.data.order;l.items=[],this.products.forEach(q=>{l.items.push({price:q.price,product:q.product.id,quantity:q.quantity})}),l.deliveryMethod=this.deliveryForm.value,l.deliveryAddress=this.addressForm.value,l.remarks=this.form.controls.remarks.value,l.draft=t||!1;const h=()=>{this.notification.snackBar(t?this.i18n.ad.orderSavedAsDraft:this.i18n.ad.orderSubmittedToBuyer),history.back()},I=()=>{this.addSub(this.create?this.orderService.createOrder({user:this.user,body:l}).subscribe(h):this.orderService.updateOrder({order:this.id,body:l}).subscribe(h))};t?I():this.confirmation.confirm({message:this.i18n.ad.submitToBuyerConfirmation,callback:I})}ngOnDestroy(){super.ngOnDestroy(),this.subscribeToDeliveryAndAddressFieldsChange(!1)}resolveStatusLabel(){return this.marketplaceHelper.resolveOrderStatusLabel(this.data.status)}resolveMenu(){return g.v2.SALES}get number(){return this.data.number}get creationDate(){return this.data.creationDate}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(_e),e.Y36(D.V),e.Y36(Ae.u),e.Y36(R.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["sale-form"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading"],[3,"label"],[3,"user"],[3,"formGroup"],[1,"mt-3","mb-2","d-flex","flex-column","flex-xs-row","justify-content-between"],[1,"mb-2","mb-xs-0"],[3,"ngClass"],["outline","",3,"label","action"],[3,"products$","deliveryMethod$","currency"],[1,"mt-2"],["formControlName","deliveryMethod",3,"emptyOption","label"],[3,"value","text",4,"ngFor","ngForOf"],[1,"any-label-value"],["formControlName","name","required","",3,"label",4,"ngIf"],["formControlName","deliveryType",3,"label",4,"ngIf"],["kind","fieldView",3,"label","value",4,"ngIf"],["formControlName","price","fieldSize","full","required","",3,"label","scale","prefix","suffix"],["formControlName","minTime",3,"label"],["formControlName","maxTime","required","",3,"label"],["kind","fieldView","valueFormat","break",3,"label","value",4,"ngIf"],["formControlName","address",3,"emptyOption","label",4,"ngIf"],[3,"addressForm","configuration",4,"ngIf"],[3,"address",4,"ngIf"],["formControlName","remarks"],[3,"disabled","label","action"],["outline","",3,"disabled","label","action"],[3,"value","text"],["formControlName","name","required","",3,"label"],["formControlName","deliveryType",3,"label"],["value","deliver",3,"text"],["value","pickup",3,"text"],["kind","fieldView",3,"label","value"],["kind","fieldView","valueFormat","break",3,"label","value"],["formControlName","address",3,"emptyOption","label"],[3,"addressForm","configuration"],[3,"address"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Po,47,58,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,T.t,C.F,d.JL,d.sg,u.mk,J.x,qo,V.f,d.JJ,d.u,u.sg,$.s,N.q,d.Q7,ae.Y,B.U,Ie.e,$e.C,Te.b,W.u,k.h],pipes:[u.Ov,K.i],encapsulation:2,changeDetection:0}),n})();var fe=(()=>{return(n=fe||(fe={})).ADS="ads",n.CATEGORIES="categories",fe;var n})(),re=(()=>{return(n=re||(re={})).ALL="all",n.NEAREST="nearest",n.NONE="none",re;var n})(),O=c(2462),de=c(7e3),ue=c(2292),Z=c(8473),je=c(2274),Eo=c(8064),Mo=c(7072),Ro=c(1112),Ho=c(957),Be=c(6168);function jo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"category-hierarchy",2),e.NdJ("select",function(o){return e.CHM(t),e.oxw().select.next(o)}),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw();e.Q6J("category",t)("level",i.level+1)}}let Bo=(()=>{class n extends H.H{constructor(t,i){super(t),this.modalRef=i,this.level=0,this.select=new e.vpe}ngOnInit(){super.ngOnInit(),this.element.classList.add("level-"+this.level)}emit(t,i){this.select.emit(t),null==i||i.preventDefault(),this.modalRef.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["category-hierarchy"]],inputs:{category:"category",level:"level"},outputs:{select:"select"},features:[e.qOj],decls:3,vars:3,consts:[["href","#",1,"d-block","mb-1","undecorated",3,"ngClass","click"],[3,"category","level","select",4,"ngFor","ngForOf"],[3,"category","level","select"]],template:function(t,i){1&t&&(e.TgZ(0,"a",0),e.NdJ("click",function(a){return i.emit(i.category,a)}),e._uU(1),e.qZA(),e.YNc(2,jo,1,2,"category-hierarchy",1)),2&t&&(e.Q6J("ngClass","category-level-"+i.level),e.xp6(1),e.hij(" ",i.category.name,"\n"),e.xp6(1),e.Q6J("ngForOf",i.category.children))},directives:[u.mk,u.sg,n],encapsulation:2,changeDetection:0}),n})();function Vo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"category-hierarchy",6),e.NdJ("select",function(o){return e.CHM(t),e.oxw().emit(o)}),e.qZA()}2&n&&e.Q6J("category",r.$implicit)}let Go=(()=>{class n extends H.H{constructor(t,i){super(t),this.modalRef=i,this.select=new e.vpe}emit(t,i){this.select.emit(t),null==i||i.preventDefault(),this.modalRef.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["show-sub-categories"]],inputs:{category:"category",image:"image",icon:"icon",color:"color"},outputs:{select:"select"},features:[e.qOj],decls:8,vars:6,consts:[[1,"d-flex","justify-content-center","modal-header"],["size","medium",3,"image","icon","iconColor"],["href","#",1,"ml-3","pt-1","flex-grow-1","undecorated",3,"click"],[3,"category","select",4,"ngFor","ngForOf"],[1,"modal-footer"],["outline","",3,"label","action"],[3,"category","select"]],template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e._UZ(1,"avatar",1),e.TgZ(2,"a",2),e.NdJ("click",function(a){return i.emit(i.category,a)}),e._uU(3),e.qZA()(),e.YNc(4,Vo,1,1,"category-hierarchy",3),e.TgZ(5,"actions",4),e._UZ(6,"span"),e.TgZ(7,"action-button",5),e.NdJ("action",function(){return i.modalRef.hide()}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("image",i.image)("icon",i.icon)("iconColor",i.color),e.xp6(2),e.hij(" ",i.category.name," "),e.xp6(1),e.Q6J("ngForOf",i.category.children),e.xp6(3),e.Q6J("label",i.i18n.general.cancel))},directives:[ee.A,u.sg,Bo,k.h,J.x],encapsulation:2,changeDetection:0}),n})();var zo=c(7796),Xo=c(1873);let Wo=(()=>{class n extends H.H{constructor(t,i){super(t),this.marketplaceService=i,this.blurIfClick=f.XQ}setFavorite(t){this.addSub(t.favoriteForViewer?this.marketplaceService.unmarkAsFavorite({ad:t.id}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.removedFromFavorites)}):this.marketplaceService.markAsFavorite({ad:t.id}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.addedToFavorites)})),t.favoriteForViewer=!t.favoriteForViewer}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(te))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ad-favorite"]],inputs:{ad:"ad"},features:[e.qOj],decls:3,vars:2,consts:[["type","button",1,"btn","btn-transparent","text-primary",3,"tooltip","click"],["fav",""],[3,"icon"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"button",0,1),e.NdJ("click",function(l){e.CHM(o);const h=e.MAs(1);return i.setFavorite(i.ad),i.blurIfClick(h,l),l.stopPropagation(),l.preventDefault()}),e._UZ(2,"icon",2),e.qZA()}2&t&&(e.Q6J("tooltip",i.ad.favoriteForViewer?i.i18n.ad.removeFromFavorites:i.i18n.ad.addToFavorites),e.xp6(2),e.Q6J("icon",i.ad.favoriteForViewer?i.SvgIcon.HeartFill:i.SvgIcon.Heart))},directives:[F.i9,j.o],encapsulation:2,changeDetection:0}),n})();var Ko=c(5599),er=c(2939),tr=c(9244),nr=c(6333),ir=c(6890);let Ve=(()=>{class n{constructor(t){this.formatService=t}transform(t,i=0){return this.formatService.formatAsNumber(t,i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ir.H,16))},n.\u0275pipe=e.Yjl({name:"number",type:n,pure:!0}),n})();function or(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",13),e.NdJ("click",function(o){const l=e.CHM(t).$implicit,h=e.oxw(2);return o.preventDefault(),h.selectCategory(l)}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function rr(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return o.preventDefault(),l.showAllChildren(a)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.i18n.ad.showAllCategories," ")}}function ar(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"a",8),e.NdJ("click",function(o){const l=e.CHM(t).$implicit,h=e.oxw();return o.preventDefault(),h.selectCategory(l)}),e._UZ(3,"avatar",9),e._uU(4),e.qZA()(),e.TgZ(5,"div",10),e.YNc(6,or,3,1,"ng-container",11),e.qZA(),e.YNc(7,rr,2,1,"a",12),e.ALo(8,"async"),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw();e.xp6(3),e.Q6J("image",t.svgIcon?null:t.image)("icon",t.svgIcon||i.SvgIcon.Basket)("iconColor",t.svgIconColor),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngForOf",i.categoryChildren(t)),e.xp6(1),e.Q6J("ngIf",e.lcZ(8,6,i.layout.gtxxs$)&&i.hasMoreChildren(t))}}function sr(n,r){if(1&n&&(e.TgZ(0,"span",24),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.price,i.decimals(t))," ")}}function lr(n,r){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,sr,3,4,"span",23),e._uU(2),e.ALo(3,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t.promotionalPrice),e.xp6(1),e.hij(" ",e.xi3(3,2,t.promotionalPrice||t.price,i.lookupCurrency(t))," ")}}function cr(n,r){if(1&n&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.hij(" ",i.i18n.ad.byOwner(t.user.display)," ")}}function dr(n,r){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"format-field-value",26),e.qZA()),2&n){const t=r.$implicit,i=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("fields",o.data.customFields)("plainText",!0)("fieldName",t)("object",i)}}function ur(n,r){if(1&n&&(e.TgZ(0,"div",27),e._UZ(1,"ad-favorite",28),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ad",t)}}function pr(n,r){if(1&n&&(e.TgZ(0,"mobile-result",15)(1,"div",16)(2,"div"),e.YNc(3,lr,4,5,"div",17),e.TgZ(4,"div",18),e._uU(5),e.qZA(),e.YNc(6,cr,2,1,"div",19),e.YNc(7,dr,2,4,"div",20),e.qZA(),e.YNc(8,ur,2,1,"div",21),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw();e.Q6J("avatarImage",t.image)("avatarIcon",i.SvgIcon.Basket),e.xp6(3),e.Q6J("ngIf",t.price),e.xp6(2),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.user),e.xp6(1),e.Q6J("ngForOf",i.data.fieldsInList),e.xp6(1),e.Q6J("ngIf",(null==i.dataForFrontendHolder.auth||null==i.dataForFrontendHolder.auth.permissions||null==i.dataForFrontendHolder.auth.permissions.marketplace?null:i.dataForFrontendHolder.auth.permissions.marketplace.favorites)&&t.user.id!==i.dataForFrontendHolder.user.id)}}function mr(n,r){if(1&n&&(e.TgZ(0,"th",35),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.i18n.ad.owner)}}function _r(n,r){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(i.fieldName(t))}}function hr(n,r){if(1&n&&(e.TgZ(0,"th",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.i18n.ad.price)}}function gr(n,r){1&n&&e._UZ(0,"th",37)}function fr(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"td",30),e._UZ(2,"avatar",41),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("image",t.user.image),e.xp6(2),e.hij(" ",t.user.display," ")}}function xr(n,r){if(1&n&&(e.TgZ(0,"td"),e._UZ(1,"format-field-value",26),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2).$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("fields",o.data.customFields)("plainText",!0)("fieldName",t)("object",i)}}function yr(n,r){if(1&n&&(e.ynx(0),e.YNc(1,xr,2,4,"td",11),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.data.fieldsInList)}}function vr(n,r){if(1&n&&(e.TgZ(0,"span",24),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.price,i.decimals(t))," ")}}function br(n,r){if(1&n&&(e.TgZ(0,"td",36),e.YNc(1,vr,3,4,"span",23),e._uU(2),e.ALo(3,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.promotionalPrice),e.xp6(1),e.hij(" ",e.xi3(3,2,t.promotionalPrice||t.price,i.lookupCurrency(t))," ")}}function Ar(n,r){if(1&n&&e._UZ(0,"ad-favorite",28),2&n){const t=e.oxw(2).$implicit;e.Q6J("ad",t)}}function Tr(n,r){if(1&n&&(e.TgZ(0,"td",37),e.YNc(1,Ar,1,1,"ad-favorite",42),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.user.id!==i.dataForFrontendHolder.user.id)}}function Zr(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return l.router.navigate(l.path(a))}),e.TgZ(1,"td",30),e._UZ(2,"avatar",39),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.YNc(5,fr,5,2,"ng-container",40),e.YNc(6,yr,2,1,"ng-container",40),e.ALo(7,"async"),e.YNc(8,br,4,5,"td",32),e.YNc(9,Tr,2,1,"td",33),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("image",t.image)("icon",i.SvgIcon.Basket),e.xp6(2),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",!i.singleUser&&t.user),e.xp6(1),e.Q6J("ngIf",e.lcZ(7,7,i.layout.gtxs$)),e.xp6(2),e.Q6J("ngIf",!i.data.hidePrice),e.xp6(1),e.Q6J("ngIf",null==i.dataForFrontendHolder.auth||null==i.dataForFrontendHolder.auth.permissions||null==i.dataForFrontendHolder.auth.permissions.marketplace?null:i.dataForFrontendHolder.auth.permissions.marketplace.favorites)}}function Cr(n,r){if(1&n&&(e.TgZ(0,"table",29)(1,"thead"),e._UZ(2,"th",30),e.TgZ(3,"th"),e._uU(4),e.qZA(),e.YNc(5,mr,2,1,"th",31),e.YNc(6,_r,2,1,"th",11),e.YNc(7,hr,2,1,"th",32),e.YNc(8,gr,1,0,"th",33),e.qZA(),e.TgZ(9,"tbody"),e.YNc(10,Zr,10,9,"tr",34),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.i18n.ad.name),e.xp6(1),e.Q6J("ngIf",!t.singleUser&&!t.data.hideOwner),e.xp6(1),e.Q6J("ngForOf",t.data.fieldsInList),e.xp6(1),e.Q6J("ngIf",!t.data.hidePrice),e.xp6(1),e.Q6J("ngIf",null==t.dataForFrontendHolder.auth||null==t.dataForFrontendHolder.auth.permissions||null==t.dataForFrontendHolder.auth.permissions.marketplace?null:t.dataForFrontendHolder.auth.permissions.marketplace.favorites),e.xp6(2),e.Q6J("ngForOf",null==t.results?null:t.results.results)}}function wr(n,r){if(1&n&&(e.ynx(0,48),e._UZ(1,"ad-favorite",49),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ad",t)}}function Ir(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",50)(2,"avatar",51),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return o.preventDefault(),l.router.navigate(["/users",a.user.id,"profile"])}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("image",t.user.image)("tooltip",t.user.display)}}function Qr(n,r){if(1&n&&(e.TgZ(0,"span",24),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.price,i.decimals(t))," ")}}function qr(n,r){if(1&n&&(e.TgZ(0,"div",52),e.YNc(1,Qr,3,4,"span",23),e._uU(2),e.ALo(3,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t.promotionalPrice),e.xp6(1),e.hij(" ",e.xi3(3,2,t.promotionalPrice||t.price,i.lookupCurrency(t))," ")}}function Jr(n,r){1&n&&(e.TgZ(0,"div",52),e._UZ(1,"br"),e.qZA())}function Sr(n,r){if(1&n&&(e.TgZ(0,"tiled-result",43),e.YNc(1,wr,2,1,"ng-container",44),e.YNc(2,Ir,3,2,"ng-container",40),e.YNc(3,qr,4,5,"div",45),e.YNc(4,Jr,2,0,"ng-template",null,46,e.W1O),e.TgZ(6,"div",47),e._uU(7),e.qZA()()),2&n){const t=r.$implicit,i=e.MAs(5),o=e.oxw();e.Q6J("image",t.image)("zoom",!0)("icon",o.SvgIcon.Basket),e.xp6(1),e.Q6J("ngIf",(null==o.dataForFrontendHolder.auth||null==o.dataForFrontendHolder.auth.permissions||null==o.dataForFrontendHolder.auth.permissions.marketplace?null:o.dataForFrontendHolder.auth.permissions.marketplace.favorites)&&t.user.id!==o.dataForFrontendHolder.user.id),e.xp6(1),e.Q6J("ngIf",!o.singleUser&&t.user),e.xp6(1),e.Q6J("ngIf",t.price)("ngIfElse",i),e.xp6(4),e.hij(" ",t.name," ")}}function Ur(n,r){if(1&n&&(e.TgZ(0,"span",24),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.price,i.decimals(t))," ")}}function kr(n,r){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,Ur,3,4,"span",23),e._uU(2),e.ALo(3,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t.promotionalPrice),e.xp6(1),e.hij(" ",e.xi3(3,2,t.promotionalPrice||t.price,i.lookupCurrency(t))," ")}}function Fr(n,r){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Oqu(i.i18n.ad.byOwner(t.user.display))}}function Nr(n,r){if(1&n&&(e.TgZ(0,"map-result",53)(1,"div",54),e._uU(2),e.qZA(),e.YNc(3,kr,4,5,"div",55),e.YNc(4,Fr,2,1,"div",40),e.qZA()),2&n){const t=r.$implicit,i=r.address;e.Q6J("image",t.image)("address",i),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.price),e.xp6(1),e.Q6J("ngIf",t.user)}}let Ge=(()=>{class n extends H.H{constructor(t,i){super(t),this.modal=i,this.clazz="flex-grow-1 d-flex",this._singleUser=!1,this.update=new e.vpe,this.categorySelected=new e.vpe}get singleUser(){return this._singleUser}set singleUser(t){this._singleUser=(0,f.Iw)(t)}toAddress(t){return t.address}toMarkerTitle(t){return t.name}fieldName(t){return(this.data.customFields.find(o=>o.internalName===t)||{}).name}path(t){return["/marketplace","view",t.id]}lookupCurrency(t){return this.data.currencies.find(o=>o.internalName===t.currency||o.id===t.currency)}decimals(t){return(this.lookupCurrency(t)||{}).decimalDigits||0}selectCategory(t){null!=t.id?(this.resultType=this.defaultResultType,this.results=null,this.categorySelected.emit(t)):this.resultType=Z.X.CATEGORIES}categoryChildren(t){const i=t.children||[];return this.layout.xxs||i.length<=5?i:i.slice(0,5)}hasMoreChildren(t){const i=t.children||[];return i.length>5||!!i.find(o=>{var a;return(null===(a=o.children)||void 0===a?void 0:a.length)>0})}showAllChildren(t){const o=this.modal.show(Go,{class:"modal-form modal-small modal-sticky",initialState:{category:t,image:t.svgIcon?null:t.image,icon:t.svgIcon,color:t.svgIconColor}}).content;this.addSub(o.select.subscribe(a=>{this.selectCategory(a)}))}get toLink(){return t=>this.path(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ads-results"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.clazz)},inputs:{defaultResultType:"defaultResultType",resultType:"resultType",rendering$:"rendering$",singleUser:"singleUser",data:"data",results:"results",referencePoint:"referencePoint"},outputs:{update:"update",categorySelected:"categorySelected"},features:[e.qOj],decls:6,vars:8,consts:[[3,"categories","results","rendering$","resultType","referencePoint","toAddress","toMarkerTitle","toLink","update"],["class","card",4,"resultCategory"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"image","zoom","icon",4,"resultTile"],[3,"image","address",4,"resultInfoWindow"],[1,"card"],[1,"category-title"],["href","#",1,"category-title-text",3,"click"],["size","small",3,"image","icon","iconColor"],[1,"card-body"],[4,"ngFor","ngForOf"],["class","category-footer","href","#",3,"click",4,"ngIf"],["href","#",1,"sub-category-text",3,"click"],["href","#",1,"category-footer",3,"click"],[3,"avatarImage","avatarIcon"],[1,"d-flex"],["class","cell-main",4,"ngIf"],[1,"cell-text"],["class","cell-text",4,"ngIf"],["class","cell-small",4,"ngFor","ngForOf"],["class","ml-auto text-right d-flex flex-column",4,"ngIf"],[1,"cell-main"],["class","promo-price",4,"ngIf"],[1,"promo-price"],[1,"cell-small"],[3,"fields","plainText","fieldName","object"],[1,"ml-auto","text-right","d-flex","flex-column"],[3,"ad"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],["colspan","2",4,"ngIf"],["class","text-right",4,"ngIf"],["class","actions",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["colspan","2"],[1,"text-right"],[1,"actions"],[3,"click"],[3,"image","icon"],[4,"ngIf"],[3,"image"],[3,"ad",4,"ngIf"],[3,"image","zoom","icon"],["header","",4,"ngIf"],["class","card-title",4,"ngIf","ngIfElse"],["blankPrice",""],[1,"card-text"],["header",""],[1,"btn-favorite",3,"ad"],[1,"tile-floating-avatar"],["size","medium-large",1,"solid-icon",3,"image","tooltip","click"],[1,"card-title"],[3,"image","address"],[1,"font-weight-bold","mb-2"],["class","font-weight-bold",4,"ngIf"],[1,"font-weight-bold"]],template:function(t,i){1&t&&(e.TgZ(0,"results-layout",0),e.NdJ("update",function(a){return i.update.emit(a)}),e.YNc(1,ar,9,8,"div",1),e.YNc(2,pr,9,7,"mobile-result",2),e.YNc(3,Cr,11,6,"table",3),e.YNc(4,Sr,8,8,"tiled-result",4),e.YNc(5,Nr,5,5,"map-result",5),e.qZA()),2&t&&e.Q6J("categories",i.data.categories)("results",i.results)("rendering$",i.rendering$)("resultType",i.resultType)("referencePoint",i.referencePoint)("toAddress",i.toAddress)("toMarkerTitle",i.toMarkerTitle)("toLink",i.toLink)},directives:[L.D,zo.g,ee.A,u.sg,u.O5,Y.E,P.t,Xo.x,Wo,E.p,Ko.r,er.p,F.i9,tr.d,nr.$],pipes:[u.Ov,Ve,S.H],encapsulation:2,changeDetection:0}),n})();function Or(n,r){1&n&&e.GkF(0)}function Dr(n,r){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"boolean-field",21),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.showFavorites)}}function $r(n,r){if(1&n&&e._UZ(0,"field-option",29),2&n){const t=e.oxw(3);e.Q6J("text",t.i18n.ad.status.pending)}}function Lr(n,r){if(1&n&&(e.TgZ(0,"div",8)(1,"multi-selection-field",22),e._UZ(2,"field-option",23)(3,"field-option",24),e.YNc(4,$r,1,1,"field-option",25),e._UZ(5,"field-option",26)(6,"field-option",27)(7,"field-option",28),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.general.status),e.xp6(1),e.Q6J("text",t.i18n.ad.status.active),e.xp6(1),e.Q6J("text",t.i18n.ad.status.disabled),e.xp6(1),e.Q6J("ngIf",t.canViewPending),e.xp6(1),e.Q6J("text",t.i18n.ad.status.expired),e.xp6(1),e.Q6J("text",t.i18n.ad.status.hidden),e.xp6(1),e.Q6J("text",t.i18n.ad.status.scheduled)}}function Yr(n,r){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"custom-field-filter",31),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("field",t)("formControl",i.form.get("customValues").get(t.internalName))}}function Pr(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Yr,2,2,"div",30),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.basicFields)}}function Er(n,r){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"distance-selection-field",36),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("data",t.data.searchByDistanceData)("label",t.i18n.general.distanceFilter)}}function Mr(n,r){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"custom-field-filter",31),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("field",t)("formControl",i.form.get("customValues").get(t.internalName))}}function Rr(n,r){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"basic-profile-field-filter",31),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("field",t)("formControl",i.form.get("profileFields").get(t.field))}}function Hr(n,r){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"custom-field-filter",31),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("field",t)("formControl",i.form.get("profileFields").get(t.internalName))}}function jr(n,r){if(1&n&&(e.TgZ(0,"div",8)(1,"single-selection-field",37),e._UZ(2,"field-option",38)(3,"field-option",39),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("label",t.i18n.general.type)("emptyOption",t.i18n.general.notApplied),e.xp6(1),e.Q6J("text",t.i18n.ad.type.simple),e.xp6(1),e.Q6J("text",t.i18n.ad.type.webshop)}}function Br(n,r){if(1&n&&e._UZ(0,"field-option",42),2&n){const t=r.$implicit,i=e.oxw(4);e.Q6J("value",i.ApiHelper.internalNameOrId(t))("internalName",t.internalName)("id",t.id)("text",t.name)("parent",t.groupSet)}}function Vr(n,r){if(1&n&&(e.TgZ(0,"div",8)(1,"multi-selection-field",40),e.YNc(2,Br,1,5,"field-option",41),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("label",t.i18n.user.groupFilter),e.xp6(1),e.Q6J("ngForOf",t.data.groups)}}function Gr(n,r){if(1&n&&e._UZ(0,"field-option",47),2&n){const t=r.$implicit,i=e.oxw(5);e.Q6J("value",i.ApiHelper.internalNameOrId(t))("internalName",t.internalName)("id",t.id)("text",t.name)}}function zr(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",8)(2,"single-selection-field",45),e.YNc(3,Gr,1,4,"field-option",46),e.qZA()(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.Q6J("label",t.i18n.general.currency)("emptyOption",t.i18n.general.notApplied),e.xp6(1),e.Q6J("ngForOf",t.data.currencies)}}function Xr(n,r){if(1&n&&(e.ynx(0),e.YNc(1,zr,4,3,"ng-container",11),e._UZ(2,"div",33),e.TgZ(3,"div",8),e._UZ(4,"decimal-field",43),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"decimal-field",44),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.data.currencies.length>1),e.xp6(3),e.Q6J("label",t.i18n.ad.minPrice)("scale",(null==t.currency?null:t.currency.decimalDigits)||2)("prefix",null==t.currency?null:t.currency.prefix)("suffix",null==t.currency?null:t.currency.suffix),e.xp6(2),e.Q6J("label",t.i18n.ad.maxPrice)("scale",(null==t.currency?null:t.currency.decimalDigits)||2)("prefix",null==t.currency?null:t.currency.prefix)("suffix",null==t.currency?null:t.currency.suffix)}}function Wr(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Er,2,2,"div",10),e.YNc(2,Mr,2,2,"div",30),e.YNc(3,Rr,2,2,"div",30),e.YNc(4,Hr,2,2,"div",30),e.YNc(5,jr,4,4,"div",10),e.YNc(6,Vr,3,2,"div",10),e.TgZ(7,"div",8),e._UZ(8,"boolean-field",32),e.qZA(),e.YNc(9,Xr,7,9,"ng-container",11),e._UZ(10,"div",33),e.TgZ(11,"div",8),e._UZ(12,"date-field",34),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"date-field",35),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.data.searchByDistanceData),e.xp6(1),e.Q6J("ngForOf",t.advancedFields),e.xp6(1),e.Q6J("ngForOf",t.data.basicProfileFields),e.xp6(1),e.Q6J("ngForOf",t.data.customProfileFields),e.xp6(1),e.Q6J("ngIf",t.marketplacePermissions.userSimple.view&&t.marketplacePermissions.userWebshop.view),e.xp6(1),e.Q6J("ngIf",(null==t.data.groups?null:t.data.groups.length)>1),e.xp6(2),e.Q6J("label",t.i18n.ad.hasImages),e.xp6(1),e.Q6J("ngIf",!t.hidePrice),e.xp6(3),e.Q6J("label",t.i18n.ad.beginDate),e.xp6(2),e.Q6J("label",t.i18n.ad.endDate)}}function Kr(n,r){1&n&&e.GkF(0)}function ea(n,r){1&n&&e.GkF(0)}function ta(n,r){if(1&n&&(e.TgZ(0,"div",51),e.YNc(1,ea,1,0,"ng-container",14),e.qZA()),2&n){e.oxw(3);const t=e.MAs(6);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function na(n,r){if(1&n&&(e._UZ(0,"result-type-field",52),e.ALo(1,"async")),2&n){const t=e.oxw(3);e.Q6J("allowedResultTypes",e.lcZ(1,2,t.allowedResultTypes$))("formControl",t.resultTypeControl)}}function ia(n,r){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,ta,2,1,"div",49),e.ALo(2,"async"),e.YNc(3,na,2,4,"result-type-field",50),e.ALo(4,"async"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,t.layout.gtxs$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,t.layout.gtxxs$))}}function oa(n,r){1&n&&e.GkF(0)}function ra(n,r){if(1&n&&(e.TgZ(0,"div",53),e.YNc(1,oa,1,0,"ng-container",14),e.qZA()),2&n){e.oxw(2);const t=e.MAs(6);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function aa(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function sa(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",56),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return o.preventDefault(),l.onCategorySelected(a)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}const la=function(n){return{active:n}};function ca(n,r){if(1&n&&(e.TgZ(0,"li",54),e.YNc(1,aa,2,1,"ng-container",11),e.YNc(2,sa,2,1,"a",55),e.qZA()),2&n){const t=r.last,i=e.oxw(2);e.Q6J("ngClass",e.VKq(3,la,t)),e.xp6(1),e.Q6J("ngIf",t&&i.categoryTrail$.value.length>1),e.xp6(1),e.Q6J("ngIf",!t||1===i.categoryTrail$.value.length)}}const da=function(n){return{"col-xs-7 col-sm-5":n}};function ua(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"page-content",5),e.ALo(1,"async"),e.TgZ(2,"div",6)(3,"div",7)(4,"div",8),e._UZ(5,"input-field",9),e.qZA(),e.YNc(6,Dr,2,1,"div",10),e.YNc(7,Lr,8,7,"div",10),e.YNc(8,Pr,2,1,"ng-container",11),e.ALo(9,"async"),e.YNc(10,Wr,15,10,"ng-container",11),e.ALo(11,"async"),e.qZA()(),e.TgZ(12,"div",12)(13,"div",13),e.ALo(14,"async"),e.YNc(15,Kr,1,0,"ng-container",14),e.qZA(),e.YNc(16,ia,5,6,"div",15),e.ALo(17,"async"),e.qZA()(),e.YNc(18,ra,2,1,"div",16),e.ALo(19,"async"),e.ALo(20,"async"),e.TgZ(21,"page-content",17),e.ALo(22,"async"),e.TgZ(23,"nav",18)(24,"ol",18),e.YNc(25,ca,3,5,"li",19),e.ALo(26,"async"),e.qZA()()(),e.TgZ(27,"ads-results",20),e.NdJ("update",function(o){return e.CHM(t),e.oxw().update(o)})("categorySelected",function(o){return e.CHM(t),e.oxw().onCategorySelected(o)}),e.ALo(28,"async"),e.ALo(29,"async"),e.ALo(30,"async"),e.ALo(31,"async"),e.qZA()}if(2&n){const t=e.oxw(),i=e.MAs(8);let o;e.Q6J("heading",t.i18n.ad.title.search)("mobileHeading",t.i18n.ad.mobileTitle.search)("headingActions",e.lcZ(1,21,t.headingActions$)),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("label",t.i18n.general.keywords),e.xp6(1),e.Q6J("ngIf",null==t.dataForFrontendHolder.auth||null==t.dataForFrontendHolder.auth.permissions||null==t.dataForFrontendHolder.auth.permissions.marketplace?null:t.dataForFrontendHolder.auth.permissions.marketplace.favorites),e.xp6(1),e.Q6J("ngIf",t.manager),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,23,t.layout.gtxxs$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,25,t.moreFilters$)),e.xp6(3),e.Q6J("ngClass",e.VKq(47,da,e.lcZ(14,27,t.resultType$)!==t.ResultType.CATEGORIES)),e.xp6(2),e.Q6J("ngTemplateOutlet",i),e.xp6(1),e.Q6J("ngIf",e.lcZ(17,29,t.resultType$)!==t.ResultType.CATEGORIES),e.xp6(2),e.Q6J("ngIf",e.lcZ(19,31,t.layout.ltsm$)&&e.lcZ(20,33,t.resultType$)!==t.ResultType.CATEGORIES),e.xp6(3),e.Q6J("ngClass",(null==(o=e.lcZ(22,35,t.categoryTrail$))?null:o.length)>1?"":"d-none"),e.xp6(4),e.Q6J("ngForOf",e.lcZ(26,37,t.categoryTrail$)),e.xp6(2),e.Q6J("results",e.lcZ(28,39,t.results$))("rendering$",t.rendering$)("data",e.lcZ(29,41,t.data$))("resultType",e.lcZ(30,43,t.resultType$))("referencePoint",(e.lcZ(31,45,t.form.valueChanges)||t.form.value).distanceFilter)("defaultResultType",t.getDefaultResultType())}}const pa=function(n,r){return{"flex-grow-0 mr-3":n,"mt-2":r}};function ma(n,r){if(1&n&&(e.TgZ(0,"single-selection-field",58),e._UZ(1,"field-option",59)(2,"field-option",60)(3,"field-option",61),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.WLB(7,pa,t.layout.gtxs,t.layout.ltxs))("formControl",t.form.get("orderBy"))("display",t.i18n.general.orderBy)("emptyOption",t.i18n.general.orderByRelevance),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.date),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.priceAsc),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.priceDesc)}}const _a=function(){return["tiles","list"]};function ha(n,r){if(1&n&&e.YNc(0,ma,4,10,"single-selection-field",57),2&n){const t=e.oxw();e.Q6J("ngIf",e.DdM(1,_a).includes(t.resultType))}}function ga(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",63),e.NdJ("action",function(){return e.CHM(t),e.oxw(2).categoriesAction.onClick()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("icon",t.categoriesAction.icon)("label",t.categoriesAction.label)}}function fa(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"action-button",63),e.NdJ("action",function(){return e.CHM(t),e.oxw(2).adsAction.onClick()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("icon",t.adsAction.icon)("label",t.adsAction.label)}}function xa(n,r){if(1&n&&(e.YNc(0,ga,1,2,"action-button",62),e.ALo(1,"async"),e.YNc(2,fa,1,2,"action-button",62),e.ALo(3,"async")),2&n){const t=e.oxw();e.Q6J("ngIf",e.lcZ(1,2,t.resultType$)!==t.ResultType.CATEGORIES),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,4,t.resultType$)===t.ResultType.CATEGORIES)}}let ze=(()=>{class n extends ue.t{constructor(t,i,o,a){super(t),this.marketplaceService=i,this.loginService=o,this.mapService=a,this.categoryTrail$=new A.X([]),this.currency$=new A.X(null)}getFormControlNames(){return["keywords","statuses","groups","category","customValues","distanceFilter","orderBy","kind","hasImages","minAmount","maxAmount","currency","beginDate","endDate","favoriteFor"]}getInitialFormValue(t){const i=super.getInitialFormValue(t);return(i.maxDistance||i.latitude||i.longitude)&&(i.distanceFilter=i),i}ngOnInit(){super.ngOnInit(),this.brokered=this.route.snapshot.data.brokered;const t=[Z.X.TILES,Z.X.LIST];this.mapService.enabled&&t.push(Z.X.MAP),this.allowedResultTypes=t,this.stateManager.cache("data",this.marketplaceService.getAdDataForSearch({brokered:this.brokered})).subscribe(i=>this.data=i)}prepareForm(t){this.form.setControl("customValues",this.fieldHelper.customFieldsForSearchFormGroup(t.customFields,t.query.customFields)),this.form.setControl("profileFields",this.fieldHelper.profileFieldsForSearchFormGroup(t.basicProfileFields,t.customProfileFields))}onDataInitialized(t){this.marketplacePermissions=((this.dataForFrontendHolder.auth||{}).permissions||{}).marketplace||{};const i=a=>t.customFields.find(l=>l.internalName===a);this.basicFields=t.fieldsInBasicSearch.map(i),this.advancedFields=t.fieldsInAdvancedSearch.map(i),this.headingActions=[this.moreFiltersAction],this.adsAction=new y.Yu(x.l.Handbag,this.i18n.ad.listAds,()=>this.resultType=this.getResultType(t.resultType)),this.categoriesAction=new y.Yu(x.l.Book,this.i18n.ad.showCategories,()=>this.resultType=Z.X.CATEGORIES),this.addSub(this.form.get("currency").valueChanges.subscribe(a=>this.updateCurrency(a,t))),!(0,f.cS)(t.currencies)&&1===t.currencies.length&&(this.currency=t.currencies[0]),this.resultType=this.route.snapshot.queryParams.latest?this.allowedResultTypes.find(a=>a!==Z.X.CATEGORIES):t.adInitialSearchType===fe.CATEGORIES?Z.X.CATEGORIES:this.getResultType(t.resultType),this.categoryTrail$.next(this.stateManager.get("categoryTrail")),super.onDataInitialized(t),this.addSub(this.form.valueChanges.pipe((0,he.x)(),(0,se.b)(de.S.DEBOUNCE_TIME)).subscribe(()=>this.resultType=this.getResultType(t.resultType)))}listAds(){this.resultType=this.resultType===Z.X.CATEGORIES?this.getDefaultResultType():Z.X.CATEGORIES}doSearch(t){return this.marketplaceService.searchAds$Response(t)}toSearchParams(t){const i=Object.assign({},t),o=this.resultType===Z.X.MAP;i.customFields=this.fieldHelper.toCustomValuesFilter(t.customValues),i.profileFields=this.fieldHelper.toProfileFieldsFilter(t.profileFields),i.addressResult=o?re.ALL:re.NONE,this.brokered&&(i.brokers=[this.login.user.id]);const a=t.distanceFilter;return a&&(i.maxDistance=a.maxDistance,i.latitude=a.latitude,i.longitude=a.longitude,i.addressResult=re.NEAREST),i.favoriteFor=t.favoriteFor?de.S.SELF:null,i.publicationPeriod=de.S.dateRangeFilter(t.beginDate,t.endDate),i.priceRange=de.S.rangeFilter(t.minAmount,t.maxAmount),o&&(i.pageSize=99999),i}onResultTypeChanged(t,i){t===Z.X.CATEGORIES?(this.form.patchValue({category:null},{emitEvent:!1}),this.categoryTrail$.next([])):t===Z.X.MAP!=(i===Z.X.MAP)&&this.form.patchValue({page:0},{emitEvent:!1})}get root(){return{name:this.i18n.ad.rootCategory}}onCategorySelected(t){const i=de.S.internalNameOrId(t),o=[];if(i){this.form.patchValue({category:i}),o.unshift(t);const a=this.findParent(t);a&&o.unshift(a),o.unshift(this.root)}else this.form.patchValue({category:i},{emitEvent:!1}),this.resultType=Z.X.CATEGORIES;this.categoryTrail$.next(o),this.stateManager.set("categoryTrail",this.categoryTrail$.value)}onBeforeRender(t){var i;t&&t.hasResults&&0===(null===(i=this.categoryTrail$.value)||void 0===i?void 0:i.length)&&this.categoryTrail$.next([this.root])}getDefaultResultType(){return this.getResultType(this.data.resultType)}findParent(t){for(const i of this.data.categories)if(i.children.includes(t))return i;return null}resolveMenu(){return this.login.user?g.v2.SEARCH_ADS:g.v2.PUBLIC_MARKETPLACE}updateCurrency(t,i){this.currency=i.currencies.find(o=>o.id===t||o.internalName===t)}get manager(){return this.dataForFrontendHolder.role===O.g.ADMINISTRATOR||this.isBrokeredSearch}get isBrokeredSearch(){return this.dataForFrontendHolder.role===O.g.BROKER&&!(0,f.cS)(this.data.query.brokers)}get canViewPending(){return this.marketplacePermissions.userSimple.viewPending||this.marketplacePermissions.userWebshop.viewPending}get hidePrice(){return this.data.hidePrice||null==this.loginService.user}get currency(){return this.currency$.value}set currency(t){this.currency$.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(te),e.Y36(je.r),e.Y36(Eo.Q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["search-ads"]],features:[e.qOj],decls:9,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["orderBy",""],["modeButtons",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator","border-bottom",3,"formGroup"],[1,"row","no-gutters"],[1,"col-12","col-md-6"],["formControlName","keywords",3,"label"],["class","col-12 col-md-6",4,"ngIf"],[4,"ngIf"],[1,"row","no-gutters","filters-row"],[1,"d-flex","col-xs-7","col-sm-5",3,"ngClass"],[4,"ngTemplateOutlet"],["class","col-xs-5 col-sm-7 d-flex justify-content-end",4,"ngIf"],["class","d-flex px-ls pb-1 flex-column",4,"ngIf"],[3,"ngClass"],[1,"breadcrumb"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[3,"results","rendering$","data","resultType","referencePoint","defaultResultType","update","categorySelected"],["formControlName","favoriteFor",3,"label"],["formControlName","statuses",3,"label"],["value","active",3,"text"],["value","disabled",3,"text"],["value","pending",3,"text",4,"ngIf"],["value","expired",3,"text"],["value","hidden",3,"text"],["value","scheduled",3,"text"],["value","pending",3,"text"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],[3,"field","formControl"],["labelPosition","sideForced","formControlName","hasImages",3,"label"],[1,"w-100"],["formControlName","beginDate","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["formControlName","endDate","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["formControlName","distanceFilter",3,"data","label"],["formControlName","kind",3,"label","emptyOption"],["value","simple",3,"text"],["value","webshop",3,"text"],["hierarchyProperty","groupSet","formControlName","groups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],["formControlName","minAmount","fieldSize","full",3,"label","scale","prefix","suffix"],["formControlName","maxAmount","fieldSize","full",3,"label","scale","prefix","suffix"],["formControlName","currency",3,"label","emptyOption"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],[1,"col-xs-5","col-sm-7","d-flex","justify-content-end"],["class","d-flex pl-3",4,"ngIf"],[3,"allowedResultTypes","formControl",4,"ngIf"],[1,"d-flex","pl-3"],[3,"allowedResultTypes","formControl"],[1,"d-flex","px-ls","pb-1","flex-column"],[1,"breadcrumb-item",3,"ngClass"],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"],[3,"ngClass","formControl","display","emptyOption",4,"ngIf"],[3,"ngClass","formControl","display","emptyOption"],["value","date",3,"text"],["value","priceAsc",3,"text"],["value","priceDesc",3,"text"],["actionKind","flat",3,"icon","label","action",4,"ngIf"],["actionKind","flat",3,"icon","label","action"]],template:function(t,i){if(1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Or,1,0,"ng-container",1),e.qZA(),e.YNc(3,ua,32,49,"ng-template",null,2,e.W1O),e.YNc(5,ha,1,2,"ng-template",null,3,e.W1O),e.YNc(7,xa,4,6,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(4);e.Q6J("ready",e.lcZ(1,3,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data)("ngIfThen",o)}},directives:[v.w,u.O5,b.Y,d.JL,d.sg,N.q,d.JJ,d.u,we.M,Je.x,$.s,u.sg,Mo.L,d.oH,Ro.r,Ho.z,V.f,B.U,Se.Q,u.mk,u.tP,Be.P,Ge,J.x],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();function ya(n,r){if(1&n&&e._UZ(0,"user-info",7),2&n){const t=e.oxw(2);e.Q6J("user",t.data.user)}}function va(n,r){if(1&n&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.price,i.decimals(t))," ")}}function ba(n,r){if(1&n&&(e.TgZ(0,"div",14),e.YNc(1,va,3,4,"span",15),e._uU(2),e.ALo(3,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.promotionalPrice),e.xp6(1),e.hij(" ",e.xi3(3,2,t.promotionalPrice||t.price,i.lookupCurrency(t))," ")}}function Aa(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"button",18),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).remove(a),o.stopPropagation(),o.preventDefault()}),e._UZ(2,"icon",19),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("tooltip",t.i18n.general.remove),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}function Ta(n,r){if(1&n&&(e.TgZ(0,"mobile-result",8)(1,"div",9)(2,"div")(3,"div",10),e._uU(4),e.qZA(),e.TgZ(5,"div",11),e._uU(6),e.ALo(7,"dateTime"),e.qZA(),e.YNc(8,ba,4,5,"div",12),e.qZA(),e.YNc(9,Aa,3,2,"div",13),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw(2);e.Q6J("avatarImage",t.advertisement.image)("avatarIcon",i.SvgIcon.Basket),e.xp6(4),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",e.lcZ(7,6,t.publicationPeriod.begin)," "),e.xp6(2),e.Q6J("ngIf",t.price),e.xp6(1),e.Q6J("ngIf",i.data.canEdit)}}function Za(n,r){1&n&&e._UZ(0,"th",25)}function Ca(n,r){if(1&n&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,t.price,i.decimals(t))," ")}}function wa(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"td",31)(1,"button",32),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(3).remove(a),o.stopPropagation()}),e._UZ(2,"icon",19),e.qZA()()}if(2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("tooltip",t.i18n.general.remove),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}const Ia=function(n,r){return{"pb-0":n,"border-0":r}};function Qa(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",26),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(3);return l.router.navigate(l.toLink(a))}),e.TgZ(1,"td",27),e.ALo(2,"async"),e.ALo(3,"async"),e._UZ(4,"avatar",28),e.qZA(),e.TgZ(5,"td",29)(6,"span",26),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(3).viewPath(a)}),e._uU(7),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td"),e.YNc(12,Ca,3,4,"span",15),e._uU(13),e.ALo(14,"currency"),e.qZA(),e.YNc(15,wa,3,2,"td",30),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.WLB(18,Ia,e.lcZ(2,9,i.layout.xxs$),e.lcZ(3,11,i.layout.xxs$))),e.xp6(3),e.Q6J("image",t.image)("tooltip",t.name)("icon",i.SvgIcon.Basket),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hij(" ",e.lcZ(10,13,t.publicationPeriod.begin)," "),e.xp6(3),e.Q6J("ngIf",t.promotionalPrice),e.xp6(1),e.hij(" ",e.xi3(14,15,t.promotionalPrice||t.price,i.lookupCurrency(t))," "),e.xp6(2),e.Q6J("ngIf",i.data.canEdit)}}function qa(n,r){if(1&n&&(e.TgZ(0,"table",20)(1,"thead"),e._UZ(2,"th",21),e.TgZ(3,"th",22),e._uU(4),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.qZA(),e.YNc(9,Za,1,0,"th",23),e.qZA(),e.TgZ(10,"tbody"),e.YNc(11,Qa,16,21,"tr",24),e.ALo(12,"async"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(4),e.Oqu(t.i18n.ad.name),e.xp6(2),e.Oqu(t.i18n.general.date),e.xp6(2),e.Oqu(t.i18n.ad.price),e.xp6(1),e.Q6J("ngIf",t.data.canEdit),e.xp6(2),e.Q6J("ngForOf",null==(i=e.lcZ(12,5,t.results$))?null:i.results)}}function Ja(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",2),e.YNc(2,ya,1,1,"user-info",3),e.qZA(),e.TgZ(3,"results-layout",4),e.NdJ("update",function(o){return e.CHM(t),e.oxw().update(o)}),e.ALo(4,"async"),e.YNc(5,Ta,10,8,"mobile-result",5),e.YNc(6,qa,13,7,"table",6),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.favoriteAds)("mobileHeading",t.i18n.ad.mobileTitle.favoriteAds)("mode",t.self?"empty":"normal"),e.xp6(1),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("results",e.lcZ(4,7,t.results$))("toLink",t.toLink)("rendering$",t.rendering$)}}let Sa=(()=>{class n extends ue.t{constructor(t,i){super(t),this.marketplaceService=i}getFormControlNames(){return[]}doSearch(t){return this.marketplaceService.searchUserAds$Response(t)}toSearchParams(t){const i=t;return i.favoriteFor=this.data.user.id,i}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||this.ApiHelper.SELF,this.addSub(this.marketplaceService.getUserFavoriteAdsListData({user:this.param}).subscribe(t=>this.data=t))}onDataInitialized(t){super.onDataInitialized(t),this.self=this.authHelper.isSelfOrOwner(t.user)}viewPath(t){return["/marketplace","view",t.id]}get toLink(){return t=>this.viewPath(t)}remove(t){this.confirmation.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>this.doRemove(t)})}doRemove(t){this.addSub(this.marketplaceService.unmarkAsFavorite({ad:t.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.reload()}))}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.FAVORITE_ADS)}lookupCurrency(t){return this.data.currencies.find(o=>o.internalName===t.currency||o.id===t.currency)}decimals(t){return(this.lookupCurrency(t)||{}).decimalDigits||0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(te))},n.\u0275cmp=e.Xpm({type:n,selectors:[["list-favorites"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","mode"],[3,"user",4,"ngIf"],["resultType","list",3,"results","toLink","rendering$","update"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"user"],[3,"avatarImage","avatarIcon"],[1,"d-flex"],[1,"cell-main"],[1,"cell-date"],["class","cell-text",4,"ngIf"],["class","ml-auto text-right d-flex flex-column",4,"ngIf"],[1,"cell-text"],["class","promo-price",4,"ngIf"],[1,"promo-price"],[1,"ml-auto","text-right","d-flex","flex-column"],["type","button",1,"btn","btn-icon","mt-2",3,"tooltip","click"],[3,"icon"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],["width","30%"],["class","actions",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"actions"],[3,"click"],[1,"avatar",3,"ngClass"],[3,"image","tooltip","icon"],[1,"link"],["class","actions actions-multiple",4,"ngIf"],[1,"actions","actions-multiple"],["type","button",1,"btn","btn-icon",3,"tooltip","click"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Ja,7,9,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,Qe.M,L.D,Y.E,P.t,F.i9,j.o,E.p,u.sg,u.mk,ee.A],pipes:[u.Ov,K.i,Ve,S.H,ce.u],encapsulation:2,changeDetection:0}),n})();var Fe=c(4685),Ua=c(2342),pe=c(1145);function ka(n,r){1&n&&e._UZ(0,"div",9)}function Fa(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",9)(2,"label-value",28),e._UZ(3,"user-link",29),e.qZA()(),e.YNc(4,ka,1,0,"div",30),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user),e.xp6(1),e.Q6J("ngIf",t.layout.gtsm$)}}function Na(n,r){if(1&n&&e._UZ(0,"field-option",31),2&n){const t=e.oxw(3);e.Q6J("text",t.i18n.ad.orderStatus.draft)}}function Oa(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"div",8),e.YNc(2,Fa,5,3,"ng-container",1),e.TgZ(3,"div",9)(4,"single-selection-field",10),e.YNc(5,Na,1,1,"field-option",11),e._UZ(6,"field-option",12)(7,"field-option",13)(8,"field-option",14)(9,"field-option",15)(10,"field-option",16)(11,"field-option",17)(12,"field-option",18)(13,"field-option",19)(14,"field-option",20)(15,"field-option",21),e.qZA()(),e.TgZ(16,"div",9),e._UZ(17,"user-field",22),e.qZA(),e.TgZ(18,"div",23)(19,"div",9),e._UZ(20,"date-field",24),e.qZA(),e.TgZ(21,"div",9),e._UZ(22,"date-field",25),e.qZA()(),e.TgZ(23,"div",9),e._UZ(24,"input-field",26),e.qZA(),e.TgZ(25,"div",9),e._UZ(26,"input-field",27),e.qZA()()()),2&n){const t=e.oxw(2);e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",t.data.user&&!t.authHelper.isSelfOrOwner(t.data.user)),e.xp6(2),e.Q6J("label",t.i18n.general.status)("emptyOption",!0),e.xp6(1),e.Q6J("ngIf",t.sales&&t.isOwner),e.xp6(1),e.Q6J("text",!t.sales&&t.isOwner?t.i18n.ad.requiringMyConfirmation:t.i18n.ad.waitingForBuyersApproval),e.xp6(1),e.Q6J("text",t.sales&&t.isOwner?t.i18n.ad.requiringMyConfirmation:t.i18n.ad.waitingForSellersApproval),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.completed),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.rejectedByBuyer),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.rejectedBySeller),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.paymentPending),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.paymentDenied),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.paymentCanceled),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.paymentExpired),e.xp6(1),e.Q6J("text",t.i18n.ad.orderStatus.disposed),e.xp6(2),e.Q6J("label",t.sales?t.i18n.ad.buyer:t.i18n.ad.seller),e.xp6(3),e.Q6J("label",t.i18n.general.beginDate),e.xp6(2),e.Q6J("label",t.i18n.general.endDate),e.xp6(2),e.Q6J("label",t.i18n.ad.order),e.xp6(2),e.Q6J("label",t.i18n.ad.productNumber)}}function Da(n,r){if(1&n&&(e.TgZ(0,"mobile-result")(1,"div",32)(2,"div")(3,"div",33),e._uU(4),e.qZA(),e.TgZ(5,"div",34),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"div",35),e._uU(9),e.qZA()(),e.TgZ(10,"div",36),e._uU(11),e.ALo(12,"currency"),e.qZA()()()),2&n){const t=r.$implicit;e.xp6(4),e.hij(" ",t.number," "),e.xp6(2),e.hij(" ",e.lcZ(7,4,t.creationDate)," "),e.xp6(3),e.hij(" ",t.relatedUser.display," "),e.xp6(2),e.hij(" ",e.xi3(12,6,t.totalPrice,t.currency)," ")}}function $a(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",40),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(3);return l.router.navigate(l.path(a))}),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",38),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(3),e.Oqu(t.number),e.xp6(2),e.Oqu(i.resolveStatusLabel(t)),e.xp6(2),e.Oqu(e.lcZ(8,5,t.creationDate)),e.xp6(3),e.Oqu(t.relatedUser.display),e.xp6(2),e.hij(" ",e.xi3(13,7,t.totalPrice,t.currency),"")}}function La(n,r){if(1&n&&(e.TgZ(0,"table",37)(1,"thead")(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.qZA(),e.TgZ(10,"th",38),e._uU(11),e.qZA()(),e.TgZ(12,"tbody"),e.YNc(13,$a,14,10,"ng-container",39),e.ALo(14,"async"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(3),e.Oqu(t.i18n.ad.order),e.xp6(2),e.Oqu(t.i18n.general.status),e.xp6(2),e.Oqu(t.i18n.general.date),e.xp6(2),e.Oqu(t.sales?t.i18n.ad.buyer:t.i18n.ad.seller),e.xp6(2),e.Oqu(t.i18n.ad.total),e.xp6(2),e.Q6J("ngForOf",null==(i=e.lcZ(14,6,t.results$))?null:i.results)}}function Ya(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.YNc(5,Oa,27,20,"div",3),e.ALo(6,"async"),e.ALo(7,"async"),e.qZA(),e.TgZ(8,"results-layout",4),e.NdJ("update",function(o){return e.CHM(t),e.oxw().update(o)}),e.ALo(9,"async"),e.YNc(10,Da,13,9,"mobile-result",5),e.YNc(11,La,15,8,"table",6),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("mode",e.lcZ(2,8,t.moreFilters$)||!1===e.lcZ(3,10,t.layout.ltsm$)?"filters":"emptyFilters")("heading",t.sales?t.i18n.ad.title.sales:t.i18n.ad.title.purchases)("mobileHeading",t.sales?t.i18n.ad.mobileTitle.sales:t.i18n.ad.mobileTitle.purchases)("headingActions",e.lcZ(4,12,t.headingActions$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(6,14,t.moreFilters$)||!1===e.lcZ(7,16,t.layout.ltsm$)),e.xp6(3),e.Q6J("results",e.lcZ(9,18,t.results$))("rendering$",t.rendering$)("toLink",t.toLink)}}let Xe=(()=>{class n extends ue.t{constructor(t,i,o){super(t),this.marketplaceHelper=i,this.orderService=o,this.showForm$=new A.X(!1)}getFormControlNames(){return["statuses","periodBegin","periodEnd","relatedUser","number","productNumber"]}ngOnInit(){super.ngOnInit(),this.sales="sales"===this.route.snapshot.url[1].path,this.param=this.route.snapshot.paramMap.get("user")||this.ApiHelper.SELF,this.isOwner=this.authHelper.isSelf(this.param),this.addSub(this.orderService.getOrderDataForSearch({user:this.param,sales:this.sales}).subscribe(t=>this.data=t))}toSearchParams(t){return t.user=this.param,t.sales=this.sales,(t.periodBegin||t.periodEnd)&&(t.creationPeriod=this.ApiHelper.dateRangeFilter(t.periodBegin,t.periodEnd)),t}onDataInitialized(t){super.onDataInitialized(t),this.headingActions=this.initActions(t),this.addSub(this.layout.ltsm$.subscribe(()=>this.headingActions=this.initActions(t)))}initActions(t){const i=[];if(this.sales&&t.canCreateNew){const o=new y.Yu(x.l.PlusCircle,this.i18n.general.addNew,()=>this.addNew(),!0);i.push(o)}return this.layout.ltsm&&i.push(this.moreFiltersAction),i}addNew(){this.confirmation.confirm({title:this.i18n.ad.title.newOrder,labelPosition:"above",customFields:this.newOrderFields(),callback:t=>{this.addSub(this.orderService.getOrderDataForNew({buyer:t.customValues.buyer,user:this.param,currency:t.customValues.currency}).subscribe(()=>{this.router.navigate(["/marketplace",this.param,"sale","new"],{queryParams:{buyer:t.customValues.buyer,currency:t.customValues.currency}})}))}})}newOrderFields(){const t=[{internalName:"buyer",name:this.i18n.ad.buyer,type:ie.L.LINKED_ENTITY,control:Fe.z.ENTITY_SELECTION,linkedEntityType:Ua.X.USER,hasValuesList:!1,required:!0}];return!(0,f.cS)(this.data.currencies)&&this.data.currencies.length>1&&t.push({internalName:"currency",name:this.i18n.general.currency,type:ie.L.SINGLE_SELECTION,control:Fe.z.SINGLE_SELECTION,hasValuesList:!0,defaultValue:this.data.currencies[0].id,possibleValues:this.data.currencies.map(i=>({id:i.id,value:i.name})),required:!0}),t}showMoreFiltersLabel(){return this.i18n.general.showFilters}showLessFiltersLabel(){return this.i18n.general.hideFilters}doSearch(t){return this.orderService.searchUserOrders$Response(t)}get toLink(){return t=>this.path(t)}path(t){return t.status===pe.D.DRAFT?["/marketplace","sale",t.id]:["/marketplace","order",t.id]}resolveStatusLabel(t){return this.marketplaceHelper.resolveOrderStatusLabel(t.status)}resolveMenu(t){return this.isOwner?this.sales?g.v2.SALES:g.v2.PURCHASES:this.menu.searchUsersMenu(t.user)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(D.V),e.Y36(_e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["search-orders"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[1,"no-padding",3,"mode","heading","mobileHeading","headingActions"],["class","filters-form filters-form-separator",3,"formGroup",4,"ngIf"],["resultType","list",3,"results","rendering$","toLink","update"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["formControlName","statuses",3,"label","emptyOption"],["value","draft",3,"text",4,"ngIf"],["value","pendingBuyer",3,"text"],["value","pendingSeller",3,"text"],["value","completed",3,"text"],["value","rejectedByBuyer",3,"text"],["value","rejectedBySeller",3,"text"],["value","paymentPending",3,"text"],["value","paymentDenied",3,"text"],["value","paymentCanceled",3,"text"],["value","paymentExpired",3,"text"],["value","disposed",3,"text"],["formControlName","relatedUser",3,"label"],[1,"row","no-gutters","col-12"],["formControlName","periodBegin","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["formControlName","periodEnd","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["formControlName","number","fieldSize","full",3,"label"],["formControlName","productNumber","fieldSize","full",3,"label"],["kind","fieldView",3,"label"],[3,"user"],["class","col-12 col-md-6",4,"ngIf"],["value","draft",3,"text"],[1,"d-flex"],[1,"cell-main"],[1,"cell-date"],[1,"cell-text"],[1,"ml-auto"],[1,"table","table-hover","cursor-pointer"],[1,"text-right"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Ya,12,20,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,d.JL,d.sg,T.t,C.F,V.f,d.JJ,d.u,$.s,Me.l,Se.Q,N.q,L.D,Y.E,P.t,E.p,u.sg],pipes:[u.Ov,ce.u,S.H],encapsulation:2,changeDetection:0}),n})();function Pa(n,r){if(1&n&&(e.TgZ(0,"div",6)(1,"single-selection-field",7),e._UZ(2,"field-option",8)(3,"field-option",9),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("label",t.i18n.general.type),e.xp6(1),e.Q6J("text",t.i18n.ad.type.simple),e.xp6(1),e.Q6J("text",t.i18n.ad.type.webshop)}}function Ea(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mobile-result",10)(1,"div",11)(2,"div")(3,"div",12),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e._uU(6),e.ALo(7,"dateTime"),e.qZA(),e.TgZ(8,"div",14),e._uU(9),e.qZA()(),e.TgZ(10,"div",15)(11,"button",16),e.NdJ("click",function(o){const l=e.CHM(t).$implicit;return e.oxw().remove(l),o.stopPropagation(),o.preventDefault()}),e._UZ(12,"icon",17),e.qZA()()()()}if(2&n){const t=r.$implicit,i=e.oxw();e.Q6J("avatarImage",t.advertisement.image)("avatarIcon",i.SvgIcon.Basket),e.xp6(4),e.hij(" ",t.advertisement.name," "),e.xp6(2),e.hij(" ",e.lcZ(7,7,t.questionDate)," "),e.xp6(3),e.hij(" ",t.question," "),e.xp6(2),e.Q6J("tooltip",i.i18n.general.remove),e.xp6(1),e.Q6J("icon",i.SvgIcon.Trash)}}const Ma=function(n,r){return{"pb-0":n,"border-0":r}};function Ra(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return l.router.navigate(l.path(a))}),e.TgZ(1,"td",24),e.ALo(2,"async"),e.ALo(3,"async"),e._UZ(4,"avatar",25),e.qZA(),e.TgZ(5,"td",26)(6,"span",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).navigateToAd(a)}),e._uU(7),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td",27)(14,"button",28),e.NdJ("click",function(o){const l=e.CHM(t).$implicit;return e.oxw(2).remove(l),o.stopPropagation()}),e._UZ(15,"icon",17),e.qZA()()()}if(2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(15,Ma,e.lcZ(2,9,i.layout.xxs$),e.lcZ(3,11,i.layout.xxs$))),e.xp6(3),e.Q6J("image",t.advertisement.image)("tooltip",t.advertisement.name)("icon",i.SvgIcon.Basket),e.xp6(3),e.Oqu(t.advertisement.name),e.xp6(2),e.hij(" ",t.question," "),e.xp6(2),e.hij(" ",e.lcZ(12,13,t.questionDate)," "),e.xp6(3),e.Q6J("tooltip",i.i18n.general.remove),e.xp6(1),e.Q6J("icon",i.SvgIcon.Trash)}}function Ha(n,r){if(1&n&&(e.TgZ(0,"table",18)(1,"thead"),e._UZ(2,"th",19),e.TgZ(3,"th",20),e._uU(4),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.qZA(),e._UZ(9,"th",21),e.qZA(),e.TgZ(10,"tbody"),e.YNc(11,Ra,16,18,"tr",22),e.ALo(12,"async"),e.qZA()()),2&n){const t=e.oxw();let i;e.xp6(4),e.Oqu(t.i18n.ad.name),e.xp6(2),e.Oqu(t.i18n.ad.question),e.xp6(2),e.Oqu(t.i18n.general.date),e.xp6(3),e.Q6J("ngForOf",null==(i=e.lcZ(12,4,t.results$))?null:i.results)}}let ja=(()=>{class n extends ue.t{constructor(t,i){super(t),this.adQuestionService=i}ngOnInit(){super.ngOnInit();const o=((this.dataForFrontendHolder.auth||{}).permissions||{}).marketplace||{},a=o.myWebshop||{};this.simpleQuestions=(o.mySimple||{}).questions,this.webshopQuestions=a.questions,this.data={}}getFormControlNames(){return["kind"]}path(t){return["/marketplace","unanswered-questions","view",t.id]}get toLink(){return t=>this.path(t)}navigate(t){this.router.navigate(this.path(t))}navigateToAd(t){this.router.navigate(["/marketplace","view",t.advertisement.id])}remove(t){this.confirmation.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>{this.addSub(this.adQuestionService.deleteAdQuestion({id:t.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.reload()}))}})}getInitialFormValue(t){const i=super.getInitialFormValue(t);return this.simpleQuestions?i.kind=G.$.SIMPLE:this.webshopQuestions&&(i.kind=G.$.WEBSHOP),i}toSearchParams(t){return t.user="self",t}doSearch(t){return this.adQuestionService.searchUnansweredAdQuestions$Response(t)}resolveMenu(){return g.v2.UNANSWERED_QUESTIONS}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["search-unanswered-questions"]],features:[e.qOj],decls:8,vars:10,consts:[[1,"no-padding",3,"mode","heading","mobileHeading"],[1,"filters-form","filters-form-separator",3,"formGroup"],["class","col-12 col-md-6",4,"ngIf"],["resultType","list",3,"results","toLink","rendering$","update"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"col-12","col-md-6"],["formControlName","kind",3,"label"],["value","simple",3,"text"],["value","webshop",3,"text"],[3,"avatarImage","avatarIcon"],[1,"d-flex"],[1,"cell-main"],[1,"cell-date"],[1,"cell-text"],[1,"ml-auto","text-right","d-flex","flex-column"],["type","button",1,"btn","btn-icon","mt-2",3,"tooltip","click"],[3,"icon"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],["width","30%"],[1,"actions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"avatar",3,"ngClass"],[3,"image","tooltip","icon"],[1,"link"],[1,"actions","actions-multiple"],["type","button",1,"btn","btn-icon",3,"tooltip","click"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout")(1,"page-content",0)(2,"div",1),e.YNc(3,Pa,4,3,"div",2),e.qZA()(),e.TgZ(4,"results-layout",3),e.NdJ("update",function(a){return i.update(a)}),e.ALo(5,"async"),e.YNc(6,Ea,13,9,"mobile-result",4),e.YNc(7,Ha,13,6,"table",5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("mode",i.simpleQuestions&&i.webshopQuestions?"filters":"empty")("heading",i.i18n.ad.title.unansweredQuestions)("mobileHeading",i.i18n.ad.mobileTitle.unansweredQuestions),e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngIf",i.simpleQuestions&&i.webshopQuestions),e.xp6(1),e.Q6J("results",e.lcZ(5,8,i.results$))("toLink",i.toLink)("rendering$",i.rendering$))},directives:[v.w,b.Y,d.JL,d.sg,u.O5,V.f,d.JJ,d.u,$.s,L.D,Y.E,P.t,F.i9,j.o,E.p,u.sg,u.mk,ee.A],pipes:[u.Ov,K.i,ce.u],encapsulation:2,changeDetection:0}),n})();var Ba=c(7437);function Va(n,r){1&n&&e.GkF(0)}function Ga(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label-value",26),e._UZ(2,"user-link",27),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user)}}function za(n,r){if(1&n&&(e.TgZ(0,"div",7),e._UZ(1,"input-field",28),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.productNumber)}}function Xa(n,r){if(1&n&&e._UZ(0,"field-option",29),2&n){const t=e.oxw(2);e.Q6J("text",t.i18n.ad.status.disabled)}}function Wa(n,r){if(1&n&&e._UZ(0,"field-option",30),2&n){const t=e.oxw(2);e.Q6J("text",t.i18n.ad.status.draft)}}function Ka(n,r){if(1&n&&e._UZ(0,"field-option",31),2&n){const t=e.oxw(2);e.Q6J("text",t.i18n.ad.status.pending)}}function es(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"page-content",3),e.ALo(1,"async"),e.TgZ(2,"div",4)(3,"div",5),e.YNc(4,Ga,3,2,"div",6),e.TgZ(5,"div",7),e._UZ(6,"input-field",8),e.qZA(),e.YNc(7,za,2,1,"div",6),e.TgZ(8,"div",7)(9,"single-selection-field",9),e._UZ(10,"field-option",10)(11,"field-option",11)(12,"field-option",12)(13,"field-option",13)(14,"field-option",14),e.qZA()(),e.TgZ(15,"div",7)(16,"multi-selection-field",15),e._UZ(17,"field-option",16),e.YNc(18,Xa,1,1,"field-option",17),e.YNc(19,Wa,1,1,"field-option",18),e.YNc(20,Ka,1,1,"field-option",19),e._UZ(21,"field-option",20)(22,"field-option",21)(23,"field-option",22),e.qZA()()()(),e.TgZ(24,"div",23),e._UZ(25,"result-type-field",24),e.ALo(26,"async"),e.qZA()(),e.TgZ(27,"ads-results",25),e.NdJ("update",function(o){return e.CHM(t),e.oxw().update(o)}),e.ALo(28,"async"),e.ALo(29,"async"),e.ALo(30,"async"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("heading",t.resolveHeading(!1))("mobileHeading",t.resolveHeading(!0))("headingActions",e.lcZ(1,29,t.headingActions$)),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(2),e.Q6J("label",t.i18n.general.keywords),e.xp6(1),e.Q6J("ngIf",!t.simple),e.xp6(2),e.Q6J("label",t.i18n.general.orderBy)("emptyOption",t.i18n.general.noOptionSelected),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.date),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.distance),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.priceDesc),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.priceAsc),e.xp6(1),e.Q6J("text",t.i18n.ad.orderBy.relevance),e.xp6(2),e.Q6J("label",t.i18n.general.status)("emptyLabel",t.i18n.general.all),e.xp6(1),e.Q6J("text",t.i18n.ad.status.active),e.xp6(1),e.Q6J("ngIf",t.isManager),e.xp6(1),e.Q6J("ngIf",t.canViewDraft),e.xp6(1),e.Q6J("ngIf",t.canViewPending),e.xp6(1),e.Q6J("text",t.i18n.ad.status.expired),e.xp6(1),e.Q6J("text",t.i18n.ad.status.hidden),e.xp6(1),e.Q6J("text",t.i18n.ad.status.scheduled),e.xp6(2),e.Q6J("formControl",t.resultTypeControl)("allowedResultTypes",e.lcZ(26,31,t.allowedResultTypes$)),e.xp6(2),e.Q6J("results",e.lcZ(28,33,t.results$))("rendering$",t.rendering$)("data",e.lcZ(29,35,t.data$))("resultType",e.lcZ(30,37,t.resultType$))}}let ts=(()=>{class n extends ue.t{constructor(t,i){super(t),this.marketplaceService=i}getFormControlNames(){return["keywords","user","orderBy","statuses","productNumber"]}getInitialResultType(){return Z.X.TILES}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.paramMap.get("user")||this.ApiHelper.SELF,this.kind=this.route.snapshot.paramMap.get("kind"),this.allowedResultTypes=[Z.X.TILES,Z.X.LIST],this.addSub(this.marketplaceService.getUserAdsDataForSearch({user:this.param,kind:this.kind}).subscribe(t=>this.data=t))}onDataInitialized(t){super.onDataInitialized(t),this.self=this.authHelper.isSelfOrOwner(t.user),this.shortName=(0,f.zz)(t.user.display,Ba.k),t.createNew&&(this.headingActions=[new y.Yu(x.l.PlusCircle,this.i18n.general.addNew,()=>this.router.navigate(["/marketplace",this.param,this.kind,"ad","new"]),!0)])}toSearchParams(t){const i=t;return i.user=this.param,i.kind=this.kind,i}resolveHeading(t){return this.self?this.simple?t?this.i18n.ad.mobileTitle.myAdvertisements:this.i18n.ad.title.myAdvertisements:t?this.i18n.ad.mobileTitle.myWebshop:this.i18n.ad.title.myWebshop:this.simple?t?this.i18n.ad.mobileTitle.viewAdvertisements:this.i18n.ad.title.viewAdvertisements:t?this.i18n.ad.mobileTitle.viewWebshop:this.i18n.ad.title.viewWebshop}doSearch(t){return this.marketplaceService.searchUserAds$Response(t)}resolveMenu(){return this.param===this.ApiHelper.SELF?this.simple?g.v2.SEARCH_USER_ADS:g.v2.SEARCH_USER_WEBSHOP:g.v2.SEARCH_ADS}get simple(){return this.kind===G.$.SIMPLE}get canViewPending(){const o=((this.dataForFrontendHolder.auth||{}).permissions||{}).marketplace||{};return this.data.requiresAuthorization&&this.self||this.isManager&&(this.simple?o.userSimple.viewPending:o.userWebshop.viewPending)}get canViewDraft(){return this.data.requiresAuthorization&&!this.isManager}get isManager(){return!this.self&&(this.dataForFrontendHolder.role===O.g.BROKER||this.dataForFrontendHolder.role===O.g.ADMINISTRATOR)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(te))},n.\u0275cmp=e.Xpm({type:n,selectors:[["user-ads"]],features:[e.qOj],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator","border-bottom",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12","col-md-6"],["formControlName","keywords","fieldSize","full",3,"label"],["formControlName","orderBy",3,"label","emptyOption"],["value","date",3,"text"],["value","distance",3,"text"],["value","priceDesc",3,"text"],["value","priceAsc",3,"text"],["value","relevance",3,"text"],["formControlName","statuses",3,"label","emptyLabel"],["value","active",3,"text"],["value","disabled",3,"text",4,"ngIf"],["value","draft",3,"text",4,"ngIf"],["value","pending",3,"text",4,"ngIf"],["value","expired",3,"text"],["value","hidden",3,"text"],["value","scheduled",3,"text"],[1,"filters-row"],[3,"formControl","allowedResultTypes"],["singleUser","",3,"results","rendering$","data","resultType","update"],["kind","fieldView",3,"label"],[3,"user"],["formControlName","productNumber","fieldSize","full",3,"label"],["value","disabled",3,"text"],["value","draft",3,"text"],["value","pending",3,"text"]],template:function(t,i){if(1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Va,1,0,"ng-container",1),e.qZA(),e.YNc(3,es,31,39,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(4);e.Q6J("ready",e.lcZ(1,3,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data)("ngIfThen",o)}},directives:[v.w,u.O5,b.Y,d.JL,d.sg,T.t,C.F,N.q,d.JJ,d.u,V.f,$.s,Je.x,Be.P,d.oH,Ge],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})(),We=(()=>{class n extends z.b{constructor(t,i){super(t,i)}viewWebshopSettings$Response(t,i){const o=new m.c(this.rootUrl,n.ViewWebshopSettingsPath,"get");return t&&(o.path("user",t.user,{}),o.query("fields",t.fields,{explode:!1})),this.http.request(o.build({responseType:"json",accept:"application/json",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a))}viewWebshopSettings(t,i){return this.viewWebshopSettings$Response(t,i).pipe((0,s.U)(o=>o.body))}updateWebshopSettings$Response(t,i){const o=new m.c(this.rootUrl,n.UpdateWebshopSettingsPath,"put");return t&&(o.path("user",t.user,{}),o.body(t.body,"application/json")),this.http.request(o.build({responseType:"text",accept:"*/*",context:i})).pipe((0,_.h)(a=>a instanceof p.Zn),(0,s.U)(a=>a.clone({body:void 0})))}updateWebshopSettings(t,i){return this.updateWebshopSettings$Response(t,i).pipe((0,s.U)(o=>o.body))}}return n.ViewWebshopSettingsPath="/{user}/webshop-settings",n.UpdateWebshopSettingsPath="/{user}/webshop-settings",n.\u0275fac=function(t){return new(t||n)(e.LFG(X.p),e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ns(n,r){if(1&n&&(e.TgZ(0,"label-value",12),e._UZ(1,"user-link",13),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user)}}function is(n,r){if(1&n&&e._UZ(0,"input-field",14),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.productNumberMask)("informationText",t.i18n.general.maskHelp)}}function os(n,r){if(1&n&&(e.ynx(0),e._UZ(1,"input-field",15)(2,"decimal-field",16)(3,"input-field",17),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.prefix),e.xp6(1),e.Q6J("label",t.i18n.ad.length)("textRight",!1),e.xp6(1),e.Q6J("label",t.i18n.ad.suffix)}}function rs(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,ns,2,2,"label-value",3),e.ynx(4,4),e.TgZ(5,"radio-group-field",5),e._UZ(6,"field-option",6)(7,"field-option",7),e.qZA(),e.YNc(8,is,1,2,"input-field",8),e.ALo(9,"async"),e.TgZ(10,"radio-group-field",9),e._UZ(11,"field-option",6)(12,"field-option",7),e.qZA(),e.YNc(13,os,4,4,"ng-container",1),e.ALo(14,"async"),e.BQk(),e.TgZ(15,"actions",10)(16,"action-button",11),e.NdJ("action",function(){return e.CHM(t),e.oxw().save()}),e.ALo(17,"async"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.webshopSettings)("mobileHeading",t.i18n.ad.mobileTitle.webshopSettings)("headingActions",e.lcZ(2,15,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("label",t.i18n.ad.productNumber),e.xp6(1),e.Q6J("text",t.i18n.ad.generated),e.xp6(1),e.Q6J("text",t.i18n.ad.manual),e.xp6(1),e.Q6J("ngIf","manual"===(e.lcZ(9,17,t.form.get("productGenerationType").valueChanges)||t.form.get("productGenerationType").value)),e.xp6(2),e.Q6J("label",t.i18n.ad.orderNumber),e.xp6(1),e.Q6J("text",t.i18n.ad.generated),e.xp6(1),e.Q6J("text",t.i18n.ad.manual),e.xp6(1),e.Q6J("ngIf","manual"===(e.lcZ(14,19,t.form.get("orderGenerationType").valueChanges)||t.form.get("orderGenerationType").value)),e.xp6(3),e.Q6J("disabled",e.lcZ(17,21,t.requesting$))("label",t.i18n.general.submit)}}let as=(()=>{class n extends U.y{constructor(t,i){super(t),this.webshopSettingsService=i}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.webshopSettingsService.viewWebshopSettings({user:this.user}).subscribe(t=>{this.data=t}))}onDataInitialized(t){this.self=this.authHelper.isSelfOrOwner(t.user),this.form=this.formBuilder.group({productNumberGenerated:t.productNumberGenerated,productGenerationType:t.productNumberGenerated?"generated":"manual",productNumberMask:t.productNumberMask,customOrderNumberFormat:t.customOrderNumberFormat,orderGenerationType:t.customOrderNumberFormat?"manual":"generated",orderNumberInnerLength:t.orderNumberInnerLength,orderNumberPrefix:t.orderNumberPrefix,orderNumberSuffix:t.orderNumberSuffix}),this.addSub(this.form.controls.productGenerationType.valueChanges.subscribe(()=>this.updateMaskControl())),this.addSub(this.form.controls.orderGenerationType.valueChanges.subscribe(()=>this.updateOrderControls())),this.updateMaskControl(),this.updateOrderControls()}updateMaskControl(){"generated"===this.form.controls.productGenerationType.value?this.form.controls.productNumberMask.clearValidators():this.form.controls.productNumberMask.setValidators(d.kI.required),this.form.controls.productNumberMask.updateValueAndValidity()}updateOrderControls(){const t=[this.form.controls.orderNumberInnerLength,this.form.controls.orderNumberPrefix,this.form.controls.orderNumberSuffix];t.forEach("generated"===this.form.controls.orderGenerationType.value?i=>i.clearValidators():i=>i.setValidators(d.kI.required)),t.forEach(i=>i.updateValueAndValidity())}save(){if(!(0,f.pt)(this.form))return;const t=(0,be.Z)(this.form.value);t.productNumberGenerated="generated"===this.form.controls.productGenerationType.value,delete t.productGenerationType,t.customOrderNumberFormat="manual"===this.form.controls.orderGenerationType.value,delete t.orderGenerationType,this.addSub(this.webshopSettingsService.updateWebshopSettings({user:this.user,body:t}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.webshopSettingsSaved)}))}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.WEBSHOP_SETTINGS)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(We))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-webshop-settings"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions"],["class","mb-3","labelPosition","side",3,"label",4,"ngIf"],[3,"formGroup"],["formControlName","productGenerationType",3,"label"],["value","generated",3,"text"],["value","manual",3,"text"],["formControlName","productNumberMask","required","",3,"label","informationText",4,"ngIf"],["formControlName","orderGenerationType",3,"label"],["forceRow",""],[3,"disabled","label","action"],["labelPosition","side",1,"mb-3",3,"label"],[3,"user"],["formControlName","productNumberMask","required","",3,"label","informationText"],["formControlName","orderNumberPrefix","fieldSize","small","required","",3,"label"],["formControlName","orderNumberInnerLength","fieldSize","small","required","",3,"label","textRight"],["formControlName","orderNumberSuffix","fieldSize","small","required","",3,"label"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,rs,18,23,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,T.t,C.F,d.JL,d.sg,ae.Y,d.JJ,d.u,$.s,N.q,d.Q7,B.U,k.h,J.x],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();function ss(n,r){if(1&n&&(e.TgZ(0,"label-value",6),e._UZ(1,"user-link",7),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.user),e.xp6(1),e.Q6J("user",t.data.user)}}function ls(n,r){if(1&n&&e._UZ(0,"label-value",4),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.productNumberMask)("value",t.data.productNumberMask)}}function cs(n,r){1&n&&e._UZ(0,"hr")}function ds(n,r){if(1&n&&(e.ynx(0),e._UZ(1,"label-value",4)(2,"label-value",4)(3,"label-value",4),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.prefix)("value",t.data.orderNumberPrefix),e.xp6(1),e.Q6J("label",t.i18n.ad.length)("value",t.data.orderNumberInnerLength),e.xp6(1),e.Q6J("label",t.i18n.ad.suffix)("value",t.data.orderNumberSuffix)}}function us(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"page-content",2),e.ALo(2,"async"),e.YNc(3,ss,2,2,"label-value",3),e._UZ(4,"label-value",4),e.YNc(5,ls,1,2,"label-value",5),e.YNc(6,cs,1,0,"hr",1),e._UZ(7,"label-value",4),e.YNc(8,ds,4,6,"ng-container",1),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("heading",t.i18n.ad.title.webshopSettings)("mobileHeading",t.i18n.ad.mobileTitle.webshopSettings)("headingActions",e.lcZ(2,11,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",!t.self),e.xp6(1),e.Q6J("label",t.i18n.ad.productNumber)("value",t.data.productNumberGenerated?t.i18n.ad.generated:t.i18n.ad.manual),e.xp6(1),e.Q6J("ngIf",!t.data.productNumberGenerated),e.xp6(1),e.Q6J("ngIf",!t.data.productNumberGenerated||t.data.customOrderNumberFormat),e.xp6(1),e.Q6J("label",t.i18n.ad.orderNumber)("value",t.data.customOrderNumberFormat?t.i18n.ad.manual:t.i18n.ad.generated),e.xp6(1),e.Q6J("ngIf",t.data.customOrderNumberFormat)}}let ps=(()=>{class n extends oe.k{constructor(t,i){super(t),this.webshopSettingsService=i}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.webshopSettingsService.viewWebshopSettings({user:this.user}).subscribe(t=>{this.data=t}))}onDataInitialized(t){this.self=this.authHelper.isSelfOrOwner(t.user);const i=[];t.canEdit&&(i.push(new y.Yu(x.l.Pencil,this.i18n.general.edit,()=>this.router.navigate(["/marketplace",this.user,"webshop-settings","edit"]),!0)),this.headingActions=i)}resolveMenu(t){return this.menu.userMenu(t.user,g.v2.WEBSHOP_SETTINGS)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(We))},n.\u0275cmp=e.Xpm({type:n,selectors:[["view-webshop-settings"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],["labelPosition","side",3,"label",4,"ngIf"],[3,"label","value"],[3,"label","value",4,"ngIf"],["labelPosition","side",3,"label"],[3,"user"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,us,9,13,"ng-container",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,T.t,C.F],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})(),Ke=(()=>{class n extends H.H{constructor(t,i){super(t),this.modalRef=i,this.done=new e.vpe,this.control=new d.NI(null,d.kI.required)}submit(){this.done.emit(this.control.value),this.modalRef.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["text-dialog"]],inputs:{title:"title"},outputs:{done:"done"},features:[e.qOj],decls:8,vars:7,consts:[["focused","","required","",3,"formControl"],["field",""],["forceRow",""],[3,"disabled","label","action"],["outline","",3,"label","action"]],template:function(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e._UZ(2,"textarea-field",0,1),e.TgZ(4,"actions",2)(5,"action-button",3),e.NdJ("action",function(){return i.submit()}),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"action-button",4),e.NdJ("action",function(){return i.modalRef.hide()}),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(i.title),e.xp6(1),e.Q6J("formControl",i.control),e.xp6(3),e.Q6J("disabled",e.lcZ(6,5,i.requesting$))("label",i.i18n.general.submit),e.xp6(2),e.Q6J("label",i.i18n.general.cancel))},directives:[W.u,Ye.A,d.Q7,d.JJ,d.oH,k.h,J.x],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();var ms=c(7055),_s=c(5186),hs=c(2730),gs=c(5178),fs=c(1076);function xs(n,r){if(1&n&&e._UZ(0,"profile-images",16),2&n){const t=e.oxw(2);e.Q6J("image",t.ad.image)("additionalImages",t.ad.additionalImages)}}function ys(n,r){if(1&n&&e._UZ(0,"profile-images",17),2&n){const t=e.oxw(2);e.Q6J("icon",t.SvgIcon.Basket)("image",t.ad.image)("additionalImages",t.ad.additionalImages)}}function vs(n,r){1&n&&(e.ynx(0),e._uU(1," > "),e.BQk())}function bs(n,r){if(1&n&&(e.ynx(0),e.YNc(1,vs,2,0,"ng-container",10),e._uU(2),e.BQk()),2&n){const t=r.$implicit,i=r.first;e.xp6(1),e.Q6J("ngIf",!i),e.xp6(1),e.hij(" ",t.name," ")}}function As(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,bs,3,2,"ng-container",8),e.qZA(),e.BQk()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",i.categoryLevels(t))}}function Ts(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._UZ(1,"user-link",18),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.owner),e.xp6(1),e.Q6J("user",t.ad.user)}}function Zs(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.general.status),e.xp6(1),e.hij(" ",t.status," ")}}function Cs(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"label-value",7)(2,"span"),e._uU(3),e.ALo(4,"date"),e.TgZ(5,"span",19),e._uU(6," - "),e.qZA(),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.i18n.ad.publicationPeriod),e.xp6(2),e.Oqu(e.lcZ(4,3,t.data.publicationPeriod.begin)),e.xp6(4),e.Oqu(e.lcZ(8,5,t.data.publicationPeriod.end))}}function ws(n,r){1&n&&e._UZ(0,"custom-field-value",20),2&n&&e.Q6J("fieldValue",r.$implicit)}function Is(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.stockQuantity),e.xp6(1),e.hij(" ",t.stock," ")}}function Qs(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.minAllowedInCart),e.xp6(1),e.hij(" ",t.formatStock(t.data.minAllowedInCart)," ")}}function qs(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("label",t.i18n.ad.maxAllowedInCart),e.xp6(1),e.hij(" ",t.formatStock(t.data.maxAllowedInCart)," ")}}function Js(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Is,2,2,"label-value",9),e.YNc(2,Qs,2,2,"label-value",9),e.YNc(3,qs,2,2,"label-value",9),e.TgZ(4,"label-value",7),e._uU(5),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.data.unlimitedStock),e.xp6(1),e.Q6J("ngIf",t.data.minAllowedInCart),e.xp6(1),e.Q6J("ngIf",t.data.maxAllowedInCart),e.xp6(1),e.Q6J("label",t.i18n.ad.productNumber),e.xp6(1),e.hij(" ",t.data.productNumber," ")}}function Ss(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"currency"),e.TgZ(3,"span",23),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,2,t.ad.promotionalPrice,t.ad.currency)," "),e.xp6(3),e.hij(" ",e.xi3(5,5,t.ad.price,t.ad.currency)," ")}}function Us(n,r){if(1&n&&(e.TgZ(0,"label-value",21),e.YNc(1,Ss,6,8,"ng-container",22),e.qZA()),2&n){const t=e.oxw(2),i=e.MAs(4);e.Q6J("label",t.i18n.ad.price),e.xp6(1),e.Q6J("ngIf",t.ad.promotionalPrice)("ngIfElse",i)}}function ks(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"h2",13),e._uU(2),e.qZA(),e._UZ(3,"hr",14),e._uU(4),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.i18n.ad.authorizationNotes," "),e.xp6(2),e.hij(" ",t.ad.lastAuthorizationComments," ")}}function Fs(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("label",i.i18n.ad.minDeliveryTime),e.xp6(1),e.hij(" ",i.format.formatTimeInterval(t.minDeliveryTime)," ")}}function Ns(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("label",i.i18n.ad.maxDeliveryTime),e.xp6(1),e.hij(" ",i.format.formatTimeInterval(t.maxDeliveryTime)," ")}}function Os(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("label",i.i18n.ad.price),e.xp6(1),e.hij(" ",e.xi3(2,2,t.chargeAmount,i.ad.currency)," ")}}function Ds(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("label",i.i18n.ad.pickupAddress),e.xp6(1),e.hij(" ",i.format.formatAddress(t.address)," ")}}function $s(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("label",i.i18n.general.description),e.xp6(1),e.hij(" ",t.description," ")}}const Ls=function(n){return{"pt-2":n}};function Ys(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"h3",25),e._uU(2),e.qZA(),e.YNc(3,Fs,2,2,"label-value",9),e.YNc(4,Ns,2,2,"label-value",9),e.YNc(5,Os,3,5,"label-value",9),e.YNc(6,Ds,2,2,"label-value",9),e.YNc(7,$s,2,2,"label-value",9),e.BQk()),2&n){const t=r.$implicit,i=r.first,o=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(7,Ls,!i)),e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.minDeliveryTime&&t.minDeliveryTime.amount>0),e.xp6(1),e.Q6J("ngIf",t.maxDeliveryTime&&t.maxDeliveryTime.amount>0),e.xp6(1),e.Q6J("ngIf",o.hasFixedDeliveryPrice(t)),e.xp6(1),e.Q6J("ngIf",t.address),e.xp6(1),e.Q6J("ngIf",t.description)}}function Ps(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h2",24),e._uU(2),e.qZA(),e.YNc(3,Ys,8,9,"ng-container",8),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.i18n.ad.deliveryMethods," "),e.xp6(1),e.Q6J("ngForOf",t.data.deliveryMethods)}}function Es(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",37)(1,"a",38),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(3).removeQuestion(a.id),o.preventDefault()}),e._UZ(2,"icon",30),e.qZA()()}if(2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("tooltip",t.i18n.ad.removeQuestion),e.xp6(1),e.Q6J("icon",t.SvgIcon.Trash)}}function Ms(n,r){if(1&n&&(e.TgZ(0,"div",39)(1,"div",29),e._UZ(2,"icon",30),e.qZA(),e.TgZ(3,"div",31),e._uU(4),e.TgZ(5,"div",33),e._uU(6),e.ALo(7,"dateTime"),e.qZA()()()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(2),e.Q6J("icon",i.SvgIcon.ChatRight),e.xp6(2),e.hij(" ",t.answer," "),e.xp6(2),e.AsE(" ",i.data.user.display," - ",e.lcZ(7,4,t.answerDate),"")}}function Rs(n,r){1&n&&e._UZ(0,"hr",40)}function Hs(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29),e._UZ(3,"icon",30),e.qZA(),e.TgZ(4,"div",31)(5,"span",32),e._uU(6),e.qZA(),e.TgZ(7,"div",33),e._uU(8),e.ALo(9,"dateTime"),e.qZA()(),e.YNc(10,Es,3,2,"div",34),e.qZA(),e.YNc(11,Ms,8,6,"div",35),e.YNc(12,Rs,1,0,"hr",36),e.BQk()),2&n){const t=r.$implicit,i=r.last,o=e.oxw(3);e.xp6(3),e.Q6J("icon",o.SvgIcon.ChatLeft),e.xp6(3),e.Oqu(t.question),e.xp6(2),e.AsE("",t.user.display," - ",e.lcZ(9,7,t.questionDate),""),e.xp6(2),e.Q6J("ngIf",o.canRemoveQuestion(t)),e.xp6(1),e.Q6J("ngIf",t.answer),e.xp6(1),e.Q6J("ngIf",!i)}}function js(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h2",26)(2,"div",27),e._uU(3),e.qZA()(),e.YNc(4,Hs,13,9,"ng-container",8),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.i18n.ad.questionsAndAnswers," "),e.xp6(1),e.Q6J("ngForOf",t.data.questions)}}const Bs=function(){return[]};function Vs(n,r){if(1&n&&(e.TgZ(0,"page-content",3),e.ALo(1,"async"),e.YNc(2,xs,1,2,"profile-images",4),e.ALo(3,"async"),e.TgZ(4,"float-labels"),e.YNc(5,ys,1,3,"profile-images",5),e.ALo(6,"async"),e._UZ(7,"label-value",6),e.TgZ(8,"label-value",7),e.YNc(9,As,3,1,"ng-container",8),e.qZA(),e.YNc(10,Ts,2,2,"label-value",9),e.YNc(11,Zs,2,2,"label-value",9),e.YNc(12,Cs,9,7,"ng-container",10),e.YNc(13,ws,1,1,"custom-field-value",11),e.YNc(14,Js,6,5,"ng-container",10),e.YNc(15,Us,2,3,"label-value",12),e.qZA(),e.YNc(16,ks,5,2,"ng-container",10),e.TgZ(17,"h2",13),e._uU(18),e.qZA(),e._UZ(19,"hr",14)(20,"rich-text-container",15),e.YNc(21,Ps,4,2,"div",10),e.YNc(22,js,5,2,"div",10),e.qZA()),2&n){const t=e.oxw();e.Q6J("heading",t.title)("mobileHeading",t.i18n.ad.mobileTitle.details)("headingActions",e.lcZ(1,20,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",t.ad.image&&e.lcZ(3,22,t.layout.ltsm$)),e.xp6(3),e.Q6J("ngIf",t.ad.image&&e.lcZ(6,24,t.layout.gtxs$)),e.xp6(2),e.Q6J("label",t.i18n.ad.name)("value",t.ad.name),e.xp6(1),e.Q6J("label",t.categoryLabel),e.xp6(1),e.Q6J("ngForOf",t.ad.categories||e.DdM(26,Bs)),e.xp6(1),e.Q6J("ngIf",t.ad.user),e.xp6(1),e.Q6J("ngIf",t.status),e.xp6(1),e.Q6J("ngIf",t.data.publicationPeriod),e.xp6(1),e.Q6J("ngForOf",t.ad.customValues),e.xp6(1),e.Q6J("ngIf",t.webshop),e.xp6(1),e.Q6J("ngIf",t.ad.price),e.xp6(1),e.Q6J("ngIf",t.data.lastAuthorizationComments),e.xp6(2),e.hij("",t.i18n.general.description," "),e.xp6(2),e.Q6J("value",t.ad.description),e.xp6(1),e.Q6J("ngIf",t.data.deliveryMethods&&t.data.deliveryMethods.length>0),e.xp6(1),e.Q6J("ngIf",t.questionsEnabled)}}function Gs(n,r){if(1&n&&(e._uU(0),e.ALo(1,"currency")),2&n){const t=e.oxw();e.hij(" ",e.xi3(1,1,t.ad.price,t.ad.currency),"\n")}}let zs=(()=>{class n extends oe.k{constructor(t,i,o,a,l,h,I,q){super(t),this.modal=i,this.runOperationHelper=o,this.loginService=a,this.adQuestionService=l,this.marketplaceHelper=h,this.marketplaceService=I,this.shoppingCartService=q}get ad(){return this.data}ngOnInit(){super.ngOnInit(),this.guest=null==this.loginService.user,this.id=this.route.snapshot.paramMap.get("id"),this.errorHandler.requestWithCustomErrorHandler(t=>{this.addSub(this.marketplaceService.viewAd({ad:this.id}).subscribe(i=>{this.data=i},i=>{i.status===Ze.n.NOT_FOUND&&null==this.dataForFrontendHolder.user?this.login.goToLoginPage(this.router.url):t(i)}))})}doRemove(){this.addSub(this.marketplaceService.deleteAd({ad:this.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(this.ad.name)),history.back()}))}updateStatus(t,i,o){this.addSub(t.subscribe(()=>{this.notification.snackBar(i),o&&this.dataForFrontendHolder.role===O.g.BROKER&&!this.authHelper.isSelfOrOwner(this.data.user)||this.dataForFrontendHolder.role===O.g.ADMINISTRATOR?history.back():this.reload(),this.reload()}))}addToCart(){this.addSub(this.shoppingCartService.addItemToShoppingCart({ad:this.ad.id}).subscribe(t=>{this.notification.snackBar(t===this.marketplaceHelper.cartItems?this.i18n.ad.addedProductAlreadyInCart:this.i18n.ad.addedProduct),this.marketplaceHelper.cartItems=t}))}onDataInitialized(t){this.webshop=t.kind===G.$.WEBSHOP,this.hasStatus=!this.guest&&(this.authHelper.isSelfOrOwner(t.user)||this.dataForFrontendHolder.role===O.g.ADMINISTRATOR||this.dataForFrontendHolder.role===O.g.BROKER);const i=[];if(t.canSetAsFavorite){const o=this.getFavoriteConfiguration(t);i.push(new y.Yu(o.icon,o.label,()=>this.markAsFavorite()))}if(t.canBuy&&i.push(new y.Yu(x.l.CartPlus,this.i18n.ad.addToCart,()=>this.addToCart())),t.canAsk&&i.push(new y.Yu(x.l.ChatLeft,this.i18n.ad.askQuestion,()=>this.ask())),t.canHide&&i.push(new y.Yu(x.l.EyeSlash,this.i18n.ad.hide,()=>this.updateStatus(this.marketplaceService.hideAd({ad:this.id}),this.i18n.ad.adHidden))),t.canUnhide&&i.push(new y.Yu(x.l.Eye,this.i18n.ad.unhide,()=>this.updateStatus(this.marketplaceService.unhideAd({ad:this.id}),this.i18n.ad.adUnhidden))),t.canRequestAuthorization&&i.push(new y.Yu(x.l.FileEarmarkCheck,this.i18n.ad.submitForAuthorization,()=>this.updateStatus(this.marketplaceService.submitAdForAuthorization({ad:this.id}),this.i18n.ad.pendingForAuth))),t.canSetAsDraft&&i.push(new y.Yu(x.l.Pencil,this.i18n.ad.setAsDraft,()=>this.updateStatus(this.marketplaceService.setAdAsDraft({ad:this.id}),this.i18n.ad.backToDraft,!0))),t.canApprove&&i.push(new y.Yu(x.l.HandThumbsUp,this.i18n.ad.authorize,()=>this.updateStatus(this.marketplaceService.approveAd({ad:this.id}),this.i18n.ad.authorized))),t.canReject&&i.push(new y.Yu(x.l.HandThumbsDown,this.i18n.ad.reject,()=>this.reject())),t.canEdit){const o=new y.Yu(x.l.Pencil,this.i18n.general.edit,()=>{this.router.navigate(["/marketplace","edit",this.id])});i.push(o)}t.canRemove&&i.push(new y.Yu(x.l.Trash,this.i18n.general.remove,()=>{this.confirmation.confirm({message:this.i18n.general.removeConfirm(this.ad.name),callback:()=>this.doRemove()})})),this.exportHelper.headingActions(t.exportFormats,o=>this.marketplaceService.exportAd$Response({format:o.internalName,ad:t.id})).forEach(o=>i.push(o));for(const o of t.operations||[])i.push(this.runOperationHelper.headingAction(o,t.id));this.headingActions=i,this.title=(0,f.zz)(t.name,60)}getFavoriteConfiguration(t){return{icon:t.favorite?x.l.HeartFill:x.l.Heart,label:t.favorite?this.i18n.ad.removeFromFavorites:this.i18n.ad.addToFavorites}}markAsFavorite(){this.addSub(this.ad.favorite?this.marketplaceService.unmarkAsFavorite({ad:this.ad.id}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.removedFromFavorites),this.reload()}):this.marketplaceService.markAsFavorite({ad:this.ad.id}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.addedToFavorites),this.reload()}))}reject(){const i=this.modal.show(Ke,{class:"modal-form",initialState:{title:this.i18n.ad.reject}}).content;this.addSub(i.done.subscribe(o=>{this.updateStatus(this.marketplaceService.rejectAd({ad:this.id,body:o}),this.i18n.ad.rejected,!0)}))}get categoryLabel(){return 1===(this.ad.categories||[]).length?this.i18n.general.category:this.i18n.ad.categories}get status(){return this.ad.status?this.marketplaceHelper.resolveStatusLabel(this.ad.status):null}get stock(){return this.data.unlimitedStock?"":0===(+this.data.stockQuantity||0)?this.i18n.ad.outOfStock:this.formatStock(this.data.stockQuantity)}get questionsEnabled(){return!this.guest&&this.data.questionsEnabled&&this.data.questions.length>0}canRemoveQuestion(t){return!this.guest&&(this.dataForFrontendHolder.role===O.g.ADMINISTRATOR?this.data.canEdit:!!(this.dataForFrontendHolder.role===O.g.BROKER||this.authHelper.isSelfOrOwner(this.data.user)||this.authHelper.isSelfOrOwner(t.user)&&this.dataForFrontendHolder.role!==O.g.OPERATOR)&&this.data.canEdit&&(0,f.cS)(t.answer))}hasFixedDeliveryPrice(t){return t.chargeType===M.FIXED}formatStock(t){return this.format.numberToFixed(t,this.data.allowDecimal?2:0)||""}categoryLevels(t){const i=[];for(;null!=t;)i.unshift(t),t=t.parent;return i}ask(){const i=this.modal.show(Ke,{class:"modal-form",initialState:{title:this.i18n.ad.askQuestion}}).content;this.addSub(i.done.subscribe(o=>{(0,f.cS)(o)||this.addSub(this.adQuestionService.createAdQuestion({ad:this.id,body:o}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.questionAsked),this.reload()}))}))}resolveMenu(){return g.v2.SEARCH_ADS}removeQuestion(t){this.addSub(this.adQuestionService.deleteAdQuestion({id:t}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.questionRemoved),this.reload()}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.tT),e.Y36(ms.Y),e.Y36(je.r),e.Y36(ye),e.Y36(D.V),e.Y36(te),e.Y36(me))},n.\u0275cmp=e.Xpm({type:n,selectors:[["view-ad"]],features:[e.qOj],decls:5,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["plainPrice",""],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"image","additionalImages",4,"ngIf"],["class","float-right",3,"icon","image","additionalImages",4,"ngIf"],[3,"label","value"],[3,"label"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[4,"ngIf"],[3,"fieldValue",4,"ngFor","ngForOf"],["class","totalAmount",3,"label",4,"ngIf"],[1,"d-none","d-sm-block","my-ls","pt-ls"],[1,"d-block","d-sm-none"],["autoHeight","",3,"value"],[3,"image","additionalImages"],[1,"float-right",3,"icon","image","additionalImages"],[3,"user"],[1,"d-inline","pl-2","pr-2"],[3,"fieldValue"],[1,"totalAmount",3,"label"],[4,"ngIf","ngIfElse"],[1,"promo-price"],[1,"mt-3"],[3,"ngClass"],[1,"d-flex","mb-ls","flex-column","flex-xs-row","justify-content-between","mt-ls"],[1,"mb-2","mb-xs-0"],[1,"d-flex","flex-row","pb-1"],[1,"d-flex"],["size","1rem",3,"icon"],[1,"pl-2",2,"line-height","1rem"],[1,"font-weight-bold"],[2,"font-size","0.6rem"],["class","d-flex","style","margin-left: auto",4,"ngIf"],["class","d-flex flex-row pb-1 pt-1",4,"ngIf"],["class","inner-separator pb-1",4,"ngIf"],[1,"d-flex",2,"margin-left","auto"],["href","#",1,"icon",3,"tooltip","click"],[1,"d-flex","flex-row","pb-1","pt-1"],[1,"inner-separator","pb-1"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Vs,23,27,"page-content",1),e.qZA(),e.YNc(3,Gs,2,4,"ng-template",null,2,e.W1O)),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,_s.$,hs.c,T.t,u.sg,C.F,gs.W,fs.J,u.mk,j.o,F.i9],pipes:[u.Ov,ce.u,S.H,K.i],encapsulation:2,changeDetection:0}),n})();function Xs(n,r){1&n&&e.GkF(0)}function Ws(n,r){if(1&n&&(e.TgZ(0,"label-value",8),e._UZ(1,"user-link",9),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.seller),e.xp6(1),e.Q6J("user",t.data.seller)}}function Ks(n,r){if(1&n&&(e.TgZ(0,"label-value",8),e._UZ(1,"user-link",9),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.buyer),e.xp6(1),e.Q6J("user",t.data.buyer)}}function el(n,r){if(1&n&&(e.TgZ(0,"mobile-result")(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.ALo(5,"dateTime"),e.qZA(),e.TgZ(6,"div",12),e._uU(7),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(2),e.hij(" ",i.resolveStatusLabel(t.status)," "),e.xp6(2),e.hij(" ",e.lcZ(5,4,t.date)," "),e.xp6(3),e.AsE(" ",i.i18n.general.by," ",t.by.display," ")}}function tl(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"dateTime"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,4,t.date)),e.xp6(3),e.Oqu(i.resolveStatusLabel(t.status)),e.xp6(2),e.Oqu(t.by.display),e.xp6(2),e.Oqu(t.remarks)}}function nl(n,r){if(1&n&&(e.TgZ(0,"table",13)(1,"thead")(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.qZA()(),e.TgZ(10,"tbody"),e.YNc(11,tl,10,6,"tr",14),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.i18n.general.date),e.xp6(2),e.Oqu(t.i18n.general.status),e.xp6(2),e.Oqu(t.i18n.general.by),e.xp6(2),e.Oqu(t.i18n.ad.remarks),e.xp6(2),e.Q6J("ngForOf",t.data.history)}}function il(n,r){if(1&n&&(e.TgZ(0,"page-content",3),e.YNc(1,Ws,2,2,"label-value",4),e.YNc(2,Ks,2,2,"label-value",4),e.qZA(),e.TgZ(3,"results-layout",5),e.YNc(4,el,8,6,"mobile-result",6),e.YNc(5,nl,12,5,"table",7),e.qZA()),2&n){const t=e.oxw();e.Q6J("heading",t.i18n.ad.title.history)("mobileHeading",t.i18n.ad.mobileTitle.history),e.xp6(1),e.Q6J("ngIf",!t.seller),e.xp6(1),e.Q6J("ngIf",!t.buyer),e.xp6(1),e.Q6J("results",t.data.history)("onClick",t.onClick)}}let ol=(()=>{class n extends oe.k{constructor(t,i,o){super(t),this.marketplaceHelper=i,this.orderService=o}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.orderService.viewOrder({order:this.id,fields:["seller","buyer","history"]}).subscribe(t=>{this.data=t}))}onDataInitialized(t){this.seller=this.authHelper.isSelfOrOwner(t.seller),this.buyer=!this.seller&&this.authHelper.isSelfOrOwner(t.buyer)}get onClick(){return t=>null!=t}resolveStatusLabel(t){return this.marketplaceHelper.resolveOrderStatusLabel(t)}resolveMenu(){return this.buyer?g.v2.PURCHASES:this.seller?g.v2.SALES:this.menu.searchUsersMenu()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(D.V),e.Y36(_e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["view-order-history"]],features:[e.qOj],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"label",4,"ngIf"],[3,"results","onClick"],[4,"mobileResult"],["class","table table-hover",4,"resultTable"],[3,"label"],[3,"user"],[1,"cell-main"],[1,"cell-date"],[1,"cell-text"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(t,i){if(1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Xs,1,0,"ng-container",1),e.qZA(),e.YNc(3,il,6,6,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(4);e.Q6J("ready",e.lcZ(1,3,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data)("ngIfThen",o)}},directives:[v.w,u.O5,b.Y,T.t,C.F,L.D,Y.E,P.t,E.p,u.sg],pipes:[u.Ov,K.i],encapsulation:2,changeDetection:0}),n})();function rl(n,r){if(1&n&&e._UZ(0,"input-field",9),2&n){const t=e.oxw();e.Q6J("label",t.i18n.general.name)}}let al=(()=>{class n extends H.H{constructor(t,i){super(t),this.modalRef=i,this.done=new e.vpe}ngOnInit(){this.form=this.formBuilder.group({name:[this.name,d.kI.required],chargeAmount:[this.chargeAmount,d.kI.required],minTime:this.minTime,maxTime:[this.maxTime,d.kI.required],deliveryType:[this.deliveryType,d.kI.required],remarks:""})}submit(){this.done.emit(this.form.value),this.modalRef.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["set-delivery-method"]],inputs:{name:"name",chargeAmount:"chargeAmount",minTime:"minTime",maxTime:"maxTime",deliveryType:"deliveryType",currency:"currency"},outputs:{done:"done"},features:[e.qOj],decls:12,vars:15,consts:[[3,"formGroup"],["formControlName","name","required","",3,"label",4,"ngIf"],["formControlName","chargeAmount","fieldSize","full","required","",3,"label","scale","prefix","suffix"],["formControlName","minTime",3,"label"],["formControlName","maxTime","required","",3,"label"],["formControlName","remarks",3,"label"],["forceRow",""],[3,"disabled","label","action"],["outline","",3,"label","action"],["formControlName","name","required","",3,"label"]],template:function(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.ynx(2,0),e.YNc(3,rl,1,1,"input-field",1),e._UZ(4,"decimal-field",2)(5,"time-interval-field",3)(6,"time-interval-field",4)(7,"textarea-field",5),e.BQk(),e.TgZ(8,"actions",6)(9,"action-button",7),e.NdJ("action",function(){return i.submit()}),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"action-button",8),e.NdJ("action",function(){return i.modalRef.hide()}),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(i.i18n.ad.deliveryMethod),e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngIf",!i.name),e.xp6(1),e.Q6J("label",i.i18n.ad.deliveryPrice)("scale",i.currency.decimalDigits)("prefix",i.currency.prefix)("suffix",i.currency.suffix),e.xp6(1),e.Q6J("label",i.i18n.ad.minDeliveryTime),e.xp6(1),e.Q6J("label",i.i18n.ad.maxDeliveryTime),e.xp6(1),e.Q6J("label",i.i18n.ad.remarks),e.xp6(2),e.Q6J("disabled",e.lcZ(10,13,i.requesting$))("label",i.i18n.general.submit),e.xp6(2),e.Q6J("label",i.i18n.general.cancel))},directives:[d.JL,d.sg,u.O5,N.q,d.JJ,d.u,d.Q7,B.U,Ie.e,W.u,k.h,J.x],pipes:[u.Ov],encapsulation:2,changeDetection:0}),n})();function sl(n,r){if(1&n&&(e.TgZ(0,"div",28),e._UZ(1,"avatar-lightbox",29),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("roundBorders",!1)("zoom",!1)("image",t.data.image)}}function ll(n,r){if(1&n&&(e.TgZ(0,"div",30),e._UZ(1,"avatar-lightbox",29),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("roundBorders",!1)("zoom",!1)("image",t.data.image)}}function cl(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._UZ(1,"user-link",31),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.seller),e.xp6(1),e.Q6J("user",t.data.seller)}}function dl(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._UZ(1,"user-link",31),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.buyer),e.xp6(1),e.Q6J("user",t.data.buyer)}}function ul(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.remarks),e.xp6(1),e.hij(" ",t.data.remarks," ")}}function pl(n,r){if(1&n&&(e.TgZ(0,"th",12),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.i18n.ad.number,"")}}function ml(n,r){if(1&n&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.i18n.ad.unitPrice," ")}}function _l(n,r){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.product.productNumber," ")}}function hl(n,r){if(1&n&&(e.TgZ(0,"td",19),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.price,i.data.currency),"")}}function gl(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",32),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return l.router.navigate(l.path(a))}),e.YNc(1,_l,2,1,"td",33),e.ALo(2,"async"),e.TgZ(3,"td",34),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.YNc(7,hl,3,4,"td",35),e.ALo(8,"async"),e.TgZ(9,"td",19),e._uU(10),e.ALo(11,"currency"),e.qZA()()}if(2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,5,i.layout.gtxs$)),e.xp6(3),e.Oqu(t.product.name),e.xp6(2),e.Oqu(t.quantity),e.xp6(1),e.Q6J("ngIf",e.lcZ(8,7,i.layout.gtxs$)),e.xp6(3),e.hij(" ",e.xi3(11,9,t.totalPrice,i.data.currency)," ")}}function fl(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.minDeliveryTime),e.xp6(1),e.hij(" ",t.format.formatTimeInterval(t.data.deliveryMethod.minTime)," ")}}function xl(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.maxDeliveryTime),e.xp6(1),e.hij(" ",t.format.formatTimeInterval(t.data.deliveryMethod.maxTime)," ")}}function yl(n,r){if(1&n&&(e.TgZ(0,"label-value",7),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.price),e.xp6(1),e.hij(" ",e.xi3(2,2,t.data.deliveryMethod.price,t.data.currency)," ")}}function vl(n,r){if(1&n&&(e.TgZ(0,"label-value",36),e._UZ(1,"address-details",37),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("label",t.i18n.ad.deliveryAddress),e.xp6(1),e.Q6J("address",t.data.deliveryAddress)}}function bl(n,r){if(1&n&&(e.TgZ(0,"h2",23),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("",t.i18n.ad.remarks," ")}}function Al(n,r){if(1&n&&(e.TgZ(0,"label",38),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.remarks)}}const Tl=function(n){return{"mt-4":n}};function Zl(n,r){if(1&n&&(e.TgZ(0,"div",39),e._UZ(1,"textarea-field",40),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Tl,t.remarks))("formGroup",t.form)}}function Cl(n,r){if(1&n&&(e.TgZ(0,"page-content",2),e.ALo(1,"async"),e.YNc(2,sl,2,3,"div",3),e.ALo(3,"async"),e.TgZ(4,"div",4),e.YNc(5,ll,2,3,"div",5),e.ALo(6,"async"),e.TgZ(7,"div",6)(8,"label-value",7),e._uU(9),e.qZA(),e.TgZ(10,"label-value",7),e._uU(11),e.ALo(12,"dateTime"),e.qZA(),e.TgZ(13,"label-value",7),e._uU(14),e.qZA(),e.YNc(15,cl,2,2,"label-value",8),e.YNc(16,dl,2,2,"label-value",8),e.YNc(17,ul,2,2,"label-value",8),e.qZA()(),e.TgZ(18,"h2",9),e._uU(19),e.qZA(),e.TgZ(20,"table",10)(21,"thead"),e.YNc(22,pl,2,1,"th",11),e.ALo(23,"async"),e.TgZ(24,"th",12),e._uU(25),e.qZA(),e.TgZ(26,"th",12),e._uU(27),e.qZA(),e.YNc(28,ml,2,1,"th",13),e.ALo(29,"async"),e.TgZ(30,"th",14),e._uU(31),e.qZA()(),e.TgZ(32,"tbody"),e.YNc(33,gl,12,12,"tr",15),e.TgZ(34,"tr",16)(35,"td",17),e.ALo(36,"async"),e._uU(37),e.qZA(),e.TgZ(38,"td",18),e._uU(39),e.ALo(40,"currency"),e.qZA()(),e.TgZ(41,"tr",16)(42,"td"),e.ALo(43,"async"),e._uU(44),e.qZA(),e.TgZ(45,"td",19),e._uU(46),e.ALo(47,"currency"),e.qZA()(),e.TgZ(48,"tr",20)(49,"td",21),e.ALo(50,"async"),e._uU(51),e.qZA(),e.TgZ(52,"td",22),e._uU(53),e.ALo(54,"currency"),e.qZA()()()(),e.TgZ(55,"h2",23),e._uU(56),e.qZA(),e.YNc(57,fl,2,2,"label-value",8),e.YNc(58,xl,2,2,"label-value",8),e.YNc(59,yl,3,5,"label-value",8),e.YNc(60,vl,2,2,"label-value",24),e.YNc(61,bl,2,1,"h2",25),e.YNc(62,Al,2,1,"label",26),e.YNc(63,Zl,2,4,"div",27),e.qZA()),2&n){const t=e.oxw();e.Q6J("heading",t.i18n.ad.title.order)("mobileHeading",t.i18n.ad.mobileTitle.order)("headingActions",e.lcZ(1,38,t.headingActions$)),e.xp6(2),e.Q6J("ngIf",t.data.image&&e.lcZ(3,40,t.layout.ltsm$)),e.xp6(3),e.Q6J("ngIf",t.data.image&&e.lcZ(6,42,t.layout.gtxs$)),e.xp6(3),e.Q6J("label",t.i18n.ad.order),e.xp6(1),e.hij(" ",t.data.number," "),e.xp6(1),e.Q6J("label",t.i18n.general.date),e.xp6(1),e.hij(" ",e.lcZ(12,44,t.data.creationDate)," "),e.xp6(2),e.Q6J("label",t.i18n.general.status),e.xp6(1),e.hij(" ",t.resolveStatusLabel()," "),e.xp6(1),e.Q6J("ngIf",!t.seller),e.xp6(1),e.Q6J("ngIf",!t.buyer),e.xp6(1),e.Q6J("ngIf",t.data.remarks),e.xp6(2),e.hij("",t.i18n.ad.products," "),e.xp6(3),e.Q6J("ngIf",e.lcZ(23,46,t.layout.gtxs$)),e.xp6(3),e.Oqu(t.i18n.ad.product),e.xp6(2),e.Oqu(t.i18n.ad.quantity),e.xp6(1),e.Q6J("ngIf",e.lcZ(29,48,t.layout.gtxs$)),e.xp6(3),e.hij("",t.i18n.transaction.amount," "),e.xp6(2),e.Q6J("ngForOf",t.data.items),e.xp6(2),e.uIk("colspan",e.lcZ(36,50,t.layout.gtxs$)?4:2),e.xp6(2),e.hij(" ",t.i18n.ad.subtotal,""),e.xp6(2),e.hij(" ",e.xi3(40,52,t.subtotal,t.data.currency),""),e.xp6(3),e.uIk("colspan",e.lcZ(43,55,t.layout.gtxs$)?4:2),e.xp6(2),e.hij(" ",t.i18n.ad.deliveryMethod+": "+t.resolveDeliveryLabel()," "),e.xp6(2),e.hij(" ",e.xi3(47,57,t.data.deliveryMethod.price,t.data.currency),""),e.xp6(3),e.uIk("colspan",e.lcZ(50,60,t.layout.gtxs$)?4:2),e.xp6(2),e.hij(" ",t.i18n.ad.total,""),e.xp6(2),e.hij(" ",e.xi3(54,62,t.data.totalPrice,t.data.currency),""),e.xp6(3),e.Oqu(t.i18n.ad.deliveryInformation),e.xp6(1),e.Q6J("ngIf",t.data.deliveryMethod.minTime),e.xp6(1),e.Q6J("ngIf",t.data.deliveryMethod.maxTime),e.xp6(1),e.Q6J("ngIf",t.data.deliveryMethod.price),e.xp6(1),e.Q6J("ngIf",t.hasAddressFields),e.xp6(1),e.Q6J("ngIf",t.remarks||t.canSetRemarks),e.xp6(1),e.Q6J("ngIf",t.remarks),e.xp6(1),e.Q6J("ngIf",t.canSetRemarks)}}const wl=[{path:"",children:[{path:"search",component:ze},{path:"broker-search",component:ze,data:{brokered:!0}},{path:":user/:kind/list",component:ts},{path:":user/purchases",component:Xe},{path:":user/sales",component:Xe},{path:"sale/:id",component:He},{path:":user/sale/new",component:He},{path:":user/:kind/ad/new",component:Ee},{path:"view/:id",component:zs},{path:"edit/:id",component:Ee},{path:"order/:id",component:(()=>{class n extends oe.k{constructor(t,i,o,a,l){super(t),this.modal=i,this.marketplaceHelper=o,this.addressHelper=a,this.orderService=l,this.OrderStatusEnum=pe.D}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.paramMap.get("id"),this.addSub(this.orderService.viewOrder({order:this.id,fields:["-history"]}).subscribe(t=>this.data=t))}onDataInitialized(t){this.seller=this.authHelper.isSelfOrOwner(t.seller),this.buyer=!this.seller&&this.authHelper.isSelfOrOwner(t.buyer),this.form=this.formBuilder.group({remarks:null});const i=[];(t.canAccept||t.canSetDeliveryInformation)&&i.push(new y.Yu(x.l.HandThumbsUp,t.canSetDeliveryInformation?this.i18n.ad.setDeliveryMethod:this.i18n.ad.accept,()=>this.accept())),t.canReject&&i.push(new y.Yu(x.l.HandThumbsDown,this.i18n.ad.reject,()=>this.reject())),t.history&&i.push(new y.Yu(x.l.Clock,this.i18n.general.viewHistory,()=>this.router.navigate(["/marketplace","order",this.id,"history"]))),this.exportHelper.headingActions(t.exportFormats,o=>this.orderService.exportOrder$Response({format:o.internalName,order:t.id})).forEach(o=>i.push(o)),this.headingActions=i}path(t){return["/marketplace","view",t.product.id]}resolveStatusLabel(){return this.marketplaceHelper.resolveOrderStatusLabel(this.data.status)}resolveDeliveryLabel(){const t=(this.data.deliveryMethod||{}).name;return(0,f.cS)(t)?this.i18n.ad.toBeConfirmedBySeller:t}resolveMenu(){return this.buyer?g.v2.PURCHASES:this.seller?g.v2.SALES:this.menu.searchUsersMenu()}orderDeviceConfirmation(t){return()=>({type:t,order:this.id})}orderFields(t){const i=[];return t&&!(0,f.cS)(t.paymentTypes)&&t.paymentTypes.length>1&&i.push({internalName:"paymentType",name:this.i18n.transaction.type,type:ie.L.SINGLE_SELECTION,control:Fe.z.RADIO,hasValuesList:!0,defaultValue:t.paymentTypes[0].id,possibleValues:t.paymentTypes.map(o=>({id:o.id,value:o.name})),required:!0}),i.push({internalName:"remarks",name:this.i18n.ad.remarks,type:ie.L.TEXT}),i}acceptByBuyer(){this.addSub(this.orderService.getOrderDataForAcceptByBuyer({order:this.id}).subscribe(t=>{this.confirmation.confirm({title:this.i18n.ad.acceptOrder,labelPosition:"above",customFields:this.orderFields(t),passwordInput:t.confirmationPasswordInput,createDeviceConfirmation:this.orderDeviceConfirmation(De.l.ACCEPT_ORDER),callback:i=>{this.addSub(this.orderService.acceptOrderByBuyer({order:this.id,confirmationPassword:i.confirmationPassword,body:{remarks:i.customValues.remarks,paymentType:i.customValues.paymentType||((0,f.cS)(t.paymentTypes)?null:t.paymentTypes[0].id)}}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.orderAccepted),this.reload()}))}})}))}acceptBySeller(){this.addSub(this.orderService.acceptOrderBySeller({order:this.id,body:this.form.value}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.orderAccepted),this.reload()}))}setDeliveryMethod(){const t=this.data.deliveryMethod||{},o=this.modal.show(al,{class:"modal-form",initialState:{name:t.name,chargeAmount:parseFloat(t.price),minTime:t.minTime,maxTime:t.maxTime,deliveryType:t.deliveryType,currency:this.data.currency}}).content;this.addSub(o.done.subscribe(a=>{this.orderService.setDeliveryMethod({order:this.id,body:a}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.orderAccepted),this.reload()})}))}accept(){this.data.status===pe.D.PENDING_BUYER?this.acceptByBuyer():this.data.status===pe.D.PENDING_SELLER&&(this.data.canSetDeliveryInformation?this.setDeliveryMethod():this.acceptBySeller())}reject(){this.confirmation.confirm({title:this.i18n.ad.rejectOrder,labelPosition:"above",customFields:this.orderFields(),callback:t=>{this.addSub(this.orderService.rejectOrder({order:this.id,body:{remarks:t.customValues.remarks}}).subscribe(()=>{this.notification.snackBar(this.i18n.ad.orderRejected),this.reload()}))}})}get hasAddressFields(){return this.addressHelper.hasFields(this.data.deliveryAddress)}get subtotal(){let t=0;return this.data.items.forEach(i=>t+=+i.totalPrice),t}get remarks(){return this.data.remarks?this.data.remarks:null}get canSetRemarks(){return this.data.status===pe.D.PENDING_SELLER&&this.seller&&this.data.canAccept}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(R.tT),e.Y36(D.V),e.Y36(Ae.u),e.Y36(_e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["view-order"]],features:[e.qOj],decls:3,vars:4,consts:[[3,"ready"],["mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],["class","d-flex justify-content-center mt-2 mb-4",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["class","image ml-4",4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[3,"label"],[3,"label",4,"ngIf"],[1,"mt-4","mb-2"],[1,"table","table-hover","small-height"],["class","no-border",4,"ngIf"],[1,"no-border"],["class","no-border text-right",4,"ngIf"],[1,"no-border","text-right"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"no-hover"],[1,"table-head-color"],[1,"table-head-color","text-right"],[1,"text-right"],[1,"totalAmount","no-hover"],[1,"border-bottom-0","label","label-value-label"],[1,"border-bottom-0","text-right","label-value-value"],[1,"mb-2"],["class","align-items-baseline",3,"label",4,"ngIf"],["class","mb-2",4,"ngIf"],["class","any-label-value",4,"ngIf"],[3,"ngClass","formGroup",4,"ngIf"],[1,"d-flex","justify-content-center","mt-2","mb-4"],["size","140",3,"roundBorders","zoom","image"],[1,"image","ml-4"],[3,"user"],[1,"cursor-pointer",3,"click"],[4,"ngIf"],[1,"link"],["class","text-right",4,"ngIf"],[1,"align-items-baseline",3,"label"],[3,"address"],[1,"any-label-value"],[3,"ngClass","formGroup"],["formControlName","remarks"]],template:function(t,i){1&t&&(e.TgZ(0,"page-layout",0),e.ALo(1,"async"),e.YNc(2,Cl,64,65,"page-content",1),e.qZA()),2&t&&(e.Q6J("ready",e.lcZ(1,2,i.data$)),e.xp6(2),e.Q6J("ngIf",i.data))},directives:[v.w,u.O5,b.Y,ve.X,T.t,C.F,u.sg,Te.b,u.mk,d.JL,d.sg,W.u,d.JJ,d.u],pipes:[u.Ov,K.i,S.H],encapsulation:2,changeDetection:0}),n})()},{path:"order/:id/history",component:ol},{path:"shopping-cart",component:Xt},{path:"cart/:id",component:an},{path:"checkout/:id",component:Rt},{path:":user/delivery-methods",component:Cn},{path:":user/ad-interests",component:Ki},{path:":user/list-favorites",component:Sa},{path:"delivery-methods/view/:id",component:Un},{path:"ad-interests/view/:id",component:lo},{path:"delivery-methods/edit/:id",component:Pe},{path:":user/delivery-methods/new",component:Pe},{path:":user/ad-interests/new",component:Re},{path:"ad-interests/edit/:id",component:Re},{path:":user/webshop-settings/view",component:ps},{path:":user/webshop-settings/edit",component:as},{path:"unanswered-questions",component:ja},{path:"unanswered-questions/view/:id",component:st}]}];let Il=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[xe.Bz.forChild(wl)],xe.Bz]}),n})();var Ql=c(4443);let ql=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[Il,Ql.C]]}),n})()}}]);