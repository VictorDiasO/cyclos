ext {
    webDir = '../web'
    uiDist = System.getProperty('ui.dist')
    outHtml = "$webDir/WEB-INF/classes/templates/ui.html"
}
apply from: 'processAngularHtml.gradle'

task copyUi {
    inputs.dir uiDist
    outputs.file outHtml

    group = 'Build'
    description = 'Copy the cyclos4-ui app generated files as a Thymeleaf HTML'

    doLast {
        if (uiDist == null || uiDist.trim() == '') {
            throw new IllegalStateException('Missing parameter -Dui.dist=/path/to/dist/ui')
        }
        
        ant.copy(todir:"$webDir/ui") {
            fileset(dir: uiDist)
        }
		processAngularHtml(uiDist, outHtml, ['dataForFrontend'], true, true)
    }
}